/*! For license information please see main.2b401760.js.LICENSE.txt */
(()=>{var e={5097:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2045),i=n(7827),o=n(1042),s=n(1494),a=n(4272),u=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")},e}();var c,l,h="@firebase/app",d="0.9.28",f=new o.Logger("@firebase/app"),p="[DEFAULT]",m=((c={})[h]="fire-core",c["@firebase/app-compat"]="fire-core-compat",c["@firebase/analytics"]="fire-analytics",c["@firebase/analytics-compat"]="fire-analytics-compat",c["@firebase/app-check"]="fire-app-check",c["@firebase/app-check-compat"]="fire-app-check-compat",c["@firebase/auth"]="fire-auth",c["@firebase/auth-compat"]="fire-auth-compat",c["@firebase/database"]="fire-rtdb",c["@firebase/database-compat"]="fire-rtdb-compat",c["@firebase/functions"]="fire-fn",c["@firebase/functions-compat"]="fire-fn-compat",c["@firebase/installations"]="fire-iid",c["@firebase/installations-compat"]="fire-iid-compat",c["@firebase/messaging"]="fire-fcm",c["@firebase/messaging-compat"]="fire-fcm-compat",c["@firebase/performance"]="fire-perf",c["@firebase/performance-compat"]="fire-perf-compat",c["@firebase/remote-config"]="fire-rc",c["@firebase/remote-config-compat"]="fire-rc-compat",c["@firebase/storage"]="fire-gcs",c["@firebase/storage-compat"]="fire-gcs-compat",c["@firebase/firestore"]="fire-fst",c["@firebase/firestore-compat"]="fire-fst-compat",c["fire-js"]="fire-js",c.firebase="fire-js-all",c),g=new Map,y=new Map;function v(e,t){try{e.container.addComponent(t)}catch(n){f.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function b(e){var t,n,r=e.name;if(y.has(r))return f.debug("There were multiple attempts to register component ".concat(r,".")),!1;y.set(r,e);try{for(var o=i.__values(g.values()),s=o.next();!s.done;s=o.next()){v(s.value,e)}}catch(a){t={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}function w(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var _=((l={})["no-app"]="No Firebase App '{$appName}' has been created - call initializeApp() first",l["bad-app-name"]="Illegal App name: '{$appName}",l["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",l["app-deleted"]="Firebase App named '{$appName}' already deleted",l["no-options"]="Need to provide options, when not being deployed to hosting via source.",l["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",l["invalid-log-argument"]="First argument to `onLog` must be null or a function.",l["idb-open"]="Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",l["idb-get"]="Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",l["idb-set"]="Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",l["idb-delete"]="Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",l),E=new s.ErrorFactory("app","Firebase",_),S=function(){function e(e,t,n){var o=this;this._isDeleted=!1,this._options=i.__assign({},e),this._config=i.__assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.Component("app",(function(){return o}),"PUBLIC"))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(e){this._isDeleted=e},enumerable:!1,configurable:!0}),e.prototype.checkDestroyed=function(){if(this.isDeleted)throw E.create("app-deleted",{appName:this._name})},e}();function T(e,t){var n,o;void 0===t&&(t={});var a=e;"object"!==typeof t&&(t={name:t});var u=i.__assign({name:p,automaticDataCollectionEnabled:!1},t),c=u.name;if("string"!==typeof c||!c)throw E.create("bad-app-name",{appName:String(c)});if(a||(a=s.getDefaultAppConfig()),!a)throw E.create("no-options");var l=g.get(c);if(l){if(s.deepEqual(a,l.options)&&s.deepEqual(u,l.config))return l;throw E.create("duplicate-app",{appName:c})}var h=new r.ComponentContainer(c);try{for(var d=i.__values(y.values()),f=d.next();!f.done;f=d.next()){var m=f.value;h.addComponent(m)}}catch(b){n={error:b}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}var v=new S(a,u,h);return g.set(c,v),v}function I(e,t,n){var i,o=null!==(i=m[e])&&void 0!==i?i:e;n&&(o+="-".concat(n));var s=o.match(/\s|\//),a=t.match(/\s|\//);if(s||a){var u=['Unable to register library "'.concat(o,'" with version "').concat(t,'":')];return s&&u.push('library name "'.concat(o,'" contains illegal characters (whitespace or "/")')),s&&a&&u.push("and"),a&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void f.warn(u.join(" "))}b(new r.Component("".concat(o,"-version"),(function(){return{library:o,version:t}}),"VERSION"))}var x="firebase-heartbeat-database",A=1,O="firebase-heartbeat-store",k=null;function C(){return k||(k=a.openDB(x,A,{upgrade:function(e,t){if(0===t)try{e.createObjectStore(O)}catch(n){console.warn(n)}}}).catch((function(e){throw E.create("idb-open",{originalErrorMessage:e.message})}))),k}function D(e){return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,C()];case 1:return t=i.sent(),[4,(n=t.transaction(O)).objectStore(O).get(N(e))];case 2:return r=i.sent(),[4,n.done];case 3:return i.sent(),[2,r];case 4:return(o=i.sent())instanceof s.FirebaseError?f.warn(o.message):(a=E.create("idb-get",{originalErrorMessage:null===o||void 0===o?void 0:o.message}),f.warn(a.message)),[3,5];case 5:return[2]}}))}))}function P(e,t){return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,a;return i.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,C()];case 1:return n=i.sent(),r=n.transaction(O,"readwrite"),[4,r.objectStore(O).put(t,N(e))];case 2:return i.sent(),[4,r.done];case 3:return i.sent(),[3,5];case 4:return(o=i.sent())instanceof s.FirebaseError?f.warn(o.message):(a=E.create("idb-set",{originalErrorMessage:null===o||void 0===o?void 0:o.message}),f.warn(a.message)),[3,5];case 5:return[2]}}))}))}function N(e){return"".concat(e.name,"!").concat(e.options.appId)}var R=function(){function e(e){var t=this;this.container=e,this._heartbeatsCache=null;var n=this.container.getProvider("app").getImmediate();this._storage=new j(n),this._heartbeatsCachePromise=this._storage.read().then((function(e){return t._heartbeatsCache=e,e}))}return e.prototype.triggerHeartbeat=function(){var e,t;return i.__awaiter(this,void 0,void 0,(function(){var n,r,o,s;return i.__generator(this,(function(i){switch(i.label){case 0:return n=this.container.getProvider("platform-logger").getImmediate(),r=n.getPlatformInfoString(),o=M(),null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)?[3,2]:(s=this,[4,this._heartbeatsCachePromise]);case 1:if(s._heartbeatsCache=i.sent(),null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return[2];i.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some((function(e){return e.date===o}))?[2]:(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),[2,this._storage.overwrite(this._heartbeatsCache)])}}))}))},e.prototype.getHeartbeatsHeader=function(){var e;return i.__awaiter(this,void 0,void 0,(function(){var t,n,r,o,a;return i.__generator(this,(function(u){switch(u.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:u.sent(),u.label=2;case 2:return null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length?[2,""]:(t=M(),n=function(e,t){var n,r;void 0===t&&(t=1024);var o=[],s=e.slice(),a=function(e){var n=o.find((function(t){return t.agent===e.agent}));if(n){if(n.dates.push(e.date),F(o)>t)return n.dates.pop(),"break"}else if(o.push({agent:e.agent,dates:[e.date]}),F(o)>t)return o.pop(),"break";s=s.slice(1)};try{for(var u=i.__values(e),c=u.next();!c.done;c=u.next()){if("break"===a(c.value))break}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return{heartbeatsToSend:o,unsentEntries:s}}(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,o=n.unsentEntries,a=s.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return u.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),u.label=5;case 5:return[2,a]}}))}))},e}();function M(){return(new Date).toISOString().substring(0,10)}var L,j=function(){function e(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return e.prototype.runIndexedDBEnvironmentCheck=function(){return i.__awaiter(this,void 0,void 0,(function(){return i.__generator(this,(function(e){return s.isIndexedDBAvailable()?[2,s.validateIndexedDBOpenable().then((function(){return!0})).catch((function(){return!1}))]:[2,!1]}))}))},e.prototype.read=function(){return i.__awaiter(this,void 0,void 0,(function(){var e;return i.__generator(this,(function(t){switch(t.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return t.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,D(this.app)];case 3:return(null===(e=t.sent())||void 0===e?void 0:e.heartbeats)?[2,e]:[2,{heartbeats:[]}];case 4:return[2]}}))}))},e.prototype.overwrite=function(e){var t;return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return r.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return n=r.sent(),[2,P(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})]}}))}))},e.prototype.add=function(e){var t;return i.__awaiter(this,void 0,void 0,(function(){var n;return i.__generator(this,(function(r){switch(r.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return r.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return n=r.sent(),[2,P(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:i.__spreadArray(i.__spreadArray([],i.__read(n.heartbeats),!1),i.__read(e.heartbeats),!1)})]}}))}))},e}();function F(e){return s.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}L="node",b(new r.Component("platform-logger",(function(e){return new u(e)}),"PRIVATE")),b(new r.Component("heartbeat",(function(e){return new R(e)}),"PRIVATE")),I(h,d,L),I(h,d,"cjs5"),I("fire-js",""),Object.defineProperty(t,"FirebaseError",{enumerable:!0,get:function(){return s.FirebaseError}}),t.SDK_VERSION="10.8.1",t._DEFAULT_ENTRY_NAME=p,t._addComponent=v,t._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},t._apps=g,t._clearComponents=function(){y.clear()},t._components=y,t._getProvider=w,t._registerComponent=b,t._removeServiceInstance=function(e,t,n){void 0===n&&(n=p),w(e,t).clearInstance(n)},t.deleteApp=function(e){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(n){switch(n.label){case 0:return t=e.name,g.has(t)?(g.delete(t),[4,Promise.all(e.container.getProviders().map((function(e){return e.delete()})))]):[3,2];case 1:n.sent(),e.isDeleted=!0,n.label=2;case 2:return[2]}}))}))},t.getApp=function(e){void 0===e&&(e=p);var t=g.get(e);if(!t&&e===p&&s.getDefaultAppConfig())return T();if(!t)throw E.create("no-app",{appName:e});return t},t.getApps=function(){return Array.from(g.values())},t.initializeApp=T,t.onLog=function(e,t){if(null!==e&&"function"!==typeof e)throw E.create("invalid-log-argument");o.setUserLogHandler(e,t)},t.registerVersion=I,t.setLogLevel=function(e){o.setLogLevel(e)}},2045:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7827),i=n(1494),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),s="[DEFAULT]",a=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(d){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),u=a[0],c=a[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(d){}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=s),this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(r.__spreadArray(r.__spreadArray([],r.__read(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),!1),r.__read(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()}))),!1))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=s),this.instances.has(e)},e.prototype.getOptions=function(e){return void 0===e&&(e=s),this.instancesOptions.get(e)||{}},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error("".concat(this.name,"(").concat(s,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=r.__values(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=r.__read(c.value,2),h=l[0],d=l[1];s===this.normalizeInstanceIdentifier(h)&&d.resolve(a)}}catch(f){t={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return a},e.prototype.onInit=function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i,o=this.onInitCallbacks.get(t);if(o)try{for(var s=r.__values(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(e,t)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===s?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},e.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=s),this.component?this.component.multipleInstances?e:s:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();var u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();t.Component=o,t.ComponentContainer=u,t.Provider=a},7511:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5097),i=n(2045),o=n(1042),s=n(1494),a=n(7467);const u="@firebase/firestore";class c{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}c.UNAUTHENTICATED=new c(null),c.GOOGLE_CREDENTIALS=new c("google-credentials-uid"),c.FIRST_PARTY=new c("first-party-uid"),c.MOCK_USER=new c("mock-user");let l="10.8.1";const h=new o.Logger("@firebase/firestore");function d(){return h.logLevel}function f(e){if(h.logLevel<=o.LogLevel.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(g);h.debug("Firestore (".concat(l,"): ").concat(e),...i)}}function p(e){if(h.logLevel<=o.LogLevel.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(g);h.error("Firestore (".concat(l,"): ").concat(e),...i)}}function m(e){if(h.logLevel<=o.LogLevel.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(g);h.warn("Firestore (".concat(l,"): ").concat(e),...i)}}function g(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function y(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(l,") INTERNAL ASSERTION FAILED: ")+e;throw p(t),new Error(t)}function v(e,t){e||y()}function b(e,t){return e}const w={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _ extends s.FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class E{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class T{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(c.UNAUTHENTICATED)))}shutdown(){}}class I{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class x{constructor(e){this.t=e,this.currentUser=c.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new E;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new E,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{f("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(f("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new E)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(f("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(v("string"==typeof t.accessToken),new S(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return v(null===e||"string"==typeof e),new c(e)}}class A{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=c.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class O{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new A(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(c.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class k{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&f("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,f("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{f("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):f("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(v("string"==typeof e.token),this.R=e.token,new k(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function D(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class P{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=D(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function N(e,t){return e<t?-1:e>t?1:0}function R(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function M(e){return e+"\0"}class L{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _(w.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _(w.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return L.fromMillis(Date.now())}static fromDate(e){return L.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new L(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?N(this.nanoseconds,e.nanoseconds):N(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class j{constructor(e){this.timestamp=e}static fromTimestamp(e){return new j(e)}static min(){return new j(new L(0,0))}static max(){return new j(new L(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class F{constructor(e,t,n){void 0===t?t=0:t>e.length&&y(),void 0===n?n=e.length-t:n>e.length-t&&y(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===F.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof F?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class U extends F{construct(e,t,n){return new U(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new _(w.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new U(e)}static emptyPath(){return new U([])}}const V=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class B extends F{construct(e,t,n){return new B(e,t,n)}static isValidIdentifier(e){return V.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),B.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new B(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new _(w.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new _(w.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new _(w.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new _(w.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new B(t)}static emptyPath(){return new B([])}}class z{constructor(e){this.path=e}static fromPath(e){return new z(U.fromString(e))}static fromName(e){return new z(U.fromString(e).popFirst(5))}static empty(){return new z(U.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===U.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return U.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new z(new U(e.slice()))}}class q{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function W(e){return e.fields.find((e=>2===e.kind))}function G(e){return e.fields.filter((e=>2!==e.kind))}function K(e,t){let n=N(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=Q(e.fields[r],t.fields[r]),0!==n)return n;return N(e.fields.length,t.fields.length)}q.UNKNOWN_ID=-1;class H{constructor(e,t){this.fieldPath=e,this.kind=t}}function Q(e,t){const n=B.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:N(e.kind,t.kind)}class Y{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Y(0,X.min())}}function $(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=j.fromTimestamp(1e9===r?new L(n+1,0):new L(n,r));return new X(i,z.empty(),t)}function J(e){return new X(e.readTime,e.key,-1)}class X{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new X(j.min(),z.empty(),-1)}static max(){return new X(j.max(),z.empty(),-1)}}function Z(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=z.comparator(e.documentKey,t.documentKey),0!==n?n:N(e.largestBatchId,t.largestBatchId))}const ee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class te{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function ne(e){if(e.code!==w.FAILED_PRECONDITION||e.message!==ee)throw e;f("LocalStore","Unexpectedly lost primary lease")}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(e){return re.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,n)=>{t(e)}))}static reject(e){return new re(((t,n)=>{n(e)}))}static waitFor(e){return new re(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=re.resolve(!1);for(const n of e)t=t.next((e=>e?re.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new re(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const u=a;t(e[u]).next((e=>{o[u]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new re(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class ie{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new E,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ae(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=de(t.target.error);this.V.reject(new ae(e,n))}}static open(e,t,n,r){try{return new ie(t,e.transaction(r,n))}catch(e){throw new ae(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(f("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ce(t)}}class oe{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===oe.S(s.getUA())&&p("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return f("SimpleDb","Removing database:",e),le(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!s.isIndexedDBAvailable())return!1;if(oe.C())return!0;const e=s.getUA(),t=oe.S(e),n=0<t&&t<10,r=oe.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(f("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ae(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new _(w.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new _(w.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ae(e,r))},r.onupgradeneeded=e=>{f("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{f("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=ie.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),re.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(f("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class se{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return le(this.k.delete())}}class ae extends _{constructor(e,t){super(w.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function ue(e){return"IndexedDbTransactionError"===e.name}class ce{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(f("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),le(n)}add(e){return f("SimpleDb","ADD",this.store.name,e,e),le(this.store.add(e))}get(e){return le(this.store.get(e)).next((t=>(void 0===t&&(t=null),f("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return f("SimpleDb","DELETE",this.store.name,e),le(this.store.delete(e))}count(){return f("SimpleDb","COUNT",this.store.name),le(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new re(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new re(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){f("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new re(((n,r)=>{t.onerror=e=>{const t=de(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new re(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new se(i),s=t(i.primaryKey,i.value,o);if(s instanceof re){const e=s.catch((e=>(o.done(),re.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>re.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function le(e){return new re(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=de(e.target.error);n(t)}}))}let he=!1;function de(e){const t=oe.S(s.getUA());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new _("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return he||(he=!0,setTimeout((()=>{throw e}),0)),e}}return e}class fe{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){f("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{f("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){ue(e)?f("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await ne(e)}await this.ee(6e4)}))}}class pe{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return re.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return f("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(f("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=J(t);Z(r,n)>0&&(n=r)})),new X(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class me{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function ge(e){return null==e}function ye(e){return 0===e&&1/e==-1/0}function ve(e){return"number"==typeof e&&Number.isInteger(e)&&!ye(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function be(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=_e(t)),t=we(e.get(n),t);return _e(t)}function we(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function _e(e){return e+"\x01\x01"}function Ee(e){const t=e.length;if(v(t>=2),2===t)return v("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),U.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&y(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:y()}o=t+2}return new U(r)}me._e=-1;const Se=["userId","batchId"];function Te(e,t){return[e,be(t)]}function Ie(e,t,n){return[e,be(t),n]}const xe={},Ae=["prefixPath","collectionGroup","readTime","documentId"],Oe=["prefixPath","collectionGroup","documentId"],ke=["collectionGroup","readTime","prefixPath","documentId"],Ce=["canonicalId","targetId"],De=["targetId","path"],Pe=["path","targetId"],Ne=["collectionId","parent"],Re=["indexId","uid"],Me=["uid","sequenceNumber"],Le=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],je=["indexId","uid","orderedDocumentKey"],Fe=["userId","collectionPath","documentId"],Ue=["userId","collectionPath","largestBatchId"],Ve=["userId","collectionGroup","largestBatchId"],Be=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ze=[...Be,"documentOverlays"],qe=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],We=qe,Ge=[...We,"indexConfiguration","indexState","indexEntries"];class Ke extends te{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function He(e,t){const n=b(e);return oe.M(n.ae,t)}function Qe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ye(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $e(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Je{constructor(e,t){this.comparator=e,this.root=t||Ze.EMPTY}insert(e,t){return new Je(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xe(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xe(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xe(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xe(this.root,e,this.comparator,!0)}}class Xe{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ze.RED,this.left=null!=r?r:Ze.EMPTY,this.right=null!=i?i:Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ze(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ze.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw y();if(this.right.isRed())throw y();const e=this.left.check();if(e!==this.right.check())throw y();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1,Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw y()}get value(){throw y()}get color(){throw y()}get left(){throw y()}get right(){throw y()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ze(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class et{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new tt(this.data.getIterator())}getIteratorFrom(e){return new tt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof et))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new et(this.comparator);return t.data=e,t}}class tt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nt(e){return e.hasNext()?e.getNext():void 0}class rt{constructor(e){this.fields=e,e.sort(B.comparator)}static empty(){return new rt([])}unionWith(e){let t=new et(B.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new rt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return R(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class it extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new it("Invalid base64 string: "+e):e}}(e);return new ot(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return N(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ot.EMPTY_BYTE_STRING=new ot("");const st=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function at(e){if(v(!!e),"string"==typeof e){let t=0;const n=st.exec(e);if(v(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ut(e.seconds),nanos:ut(e.nanos)}}function ut(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ct(e){return"string"==typeof e?ot.fromBase64String(e):ot.fromUint8Array(e)}function lt(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ht(e){const t=e.mapValue.fields.__previous_value__;return lt(t)?ht(t):t}function dt(e){const t=at(e.mapValue.fields.__local_write_time__.timestampValue);return new L(t.seconds,t.nanos)}class ft{constructor(e,t,n,r,i,o,s,a,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=u}}class pt{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new pt("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pt&&e.projectId===this.projectId&&e.database===this.database}}const mt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gt={nullValue:"NULL_VALUE"};function yt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?lt(e)?4:Pt(e)?9007199254740991:10:y()}function vt(e,t){if(e===t)return!0;const n=yt(e);if(n!==yt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return dt(e).isEqual(dt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=at(e.timestampValue),r=at(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ct(e.bytesValue).isEqual(ct(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ut(e.geoPointValue.latitude)===ut(t.geoPointValue.latitude)&&ut(e.geoPointValue.longitude)===ut(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ut(e.integerValue)===ut(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ut(e.doubleValue),r=ut(t.doubleValue);return n===r?ye(n)===ye(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return R(e.arrayValue.values||[],t.arrayValue.values||[],vt);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qe(n)!==Qe(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vt(n[i],r[i])))return!1;return!0}(e,t);default:return y()}}function bt(e,t){return void 0!==(e.values||[]).find((e=>vt(e,t)))}function wt(e,t){if(e===t)return 0;const n=yt(e),r=yt(t);if(n!==r)return N(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return N(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ut(e.integerValue||e.doubleValue),r=ut(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return _t(e.timestampValue,t.timestampValue);case 4:return _t(dt(e),dt(t));case 5:return N(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ct(e),r=ct(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=N(n[i],r[i]);if(0!==e)return e}return N(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=N(ut(e.latitude),ut(t.latitude));return 0!==n?n:N(ut(e.longitude),ut(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=wt(n[i],r[i]);if(e)return e}return N(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===mt.mapValue&&t===mt.mapValue)return 0;if(e===mt.mapValue)return 1;if(t===mt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=N(r[s],o[s]);if(0!==e)return e;const t=wt(n[r[s]],i[o[s]]);if(0!==t)return t}return N(r.length,o.length)}(e.mapValue,t.mapValue);default:throw y()}}function _t(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return N(e,t);const n=at(e),r=at(t),i=N(n.seconds,r.seconds);return 0!==i?i:N(n.nanos,r.nanos)}function Et(e){return St(e)}function St(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=at(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return ct(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return z.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=St(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(St(e.fields[i]));return n+"}"}(e.mapValue):y()}function Tt(e){switch(yt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ht(e);return t?16+Tt(t):16;case 5:return 2*e.stringValue.length;case 6:return ct(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce(((e,t)=>e+Tt(t)),0)}(e.arrayValue);case 10:return function(e){let t=0;return Ye(e.fields,((e,n)=>{t+=e.length+Tt(n)})),t}(e.mapValue);default:throw y()}}function It(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function xt(e){return!!e&&"integerValue"in e}function At(e){return!!e&&"arrayValue"in e}function Ot(e){return!!e&&"nullValue"in e}function kt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ct(e){return!!e&&"mapValue"in e}function Dt(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ye(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Dt(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Dt(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Pt(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Nt(e){return"nullValue"in e?gt:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?It(pt.empty(),z.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:y()}function Rt(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?It(pt.empty(),z.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?mt:y()}function Mt(e,t){const n=wt(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Lt(e,t){const n=wt(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ct(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Dt(t)}setAll(e){let t=B.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Dt(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ct(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ct(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ye(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new jt(Dt(this.value))}}function Ft(e){const t=[];return Ye(e.fields,((e,n)=>{const r=new B([e]);if(Ct(n)){const e=Ft(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new rt(t)}class Ut{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Ut(e,0,j.min(),j.min(),j.min(),jt.empty(),0)}static newFoundDocument(e,t,n,r){return new Ut(e,1,t,j.min(),n,r,0)}static newNoDocument(e,t){return new Ut(e,2,t,j.min(),j.min(),jt.empty(),0)}static newUnknownDocument(e,t){return new Ut(e,3,t,j.min(),j.min(),jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(j.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=j.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Vt{constructor(e,t){this.position=e,this.inclusive=t}}function Bt(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?z.comparator(z.fromName(s.referenceValue),n.key):wt(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function zt(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vt(e.position[n],t.position[n]))return!1;return!0}class qt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Wt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Gt{}class Kt extends Gt{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new nn(e,t,n):"array-contains"===t?new an(e,n):"in"===t?new un(e,n):"not-in"===t?new cn(e,n):"array-contains-any"===t?new ln(e,n):new Kt(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new rn(e,n):new on(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(wt(t,this.value)):null!==t&&yt(this.value)===yt(t)&&this.matchesComparison(wt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends Gt{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Ht(e,t)}matches(e){return Qt(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Qt(e){return"and"===e.op}function Yt(e){return"or"===e.op}function $t(e){return Jt(e)&&Qt(e)}function Jt(e){for(const t of e.filters)if(t instanceof Ht)return!1;return!0}function Xt(e){if(e instanceof Kt)return e.field.canonicalString()+e.op.toString()+Et(e.value);if($t(e))return e.filters.map((e=>Xt(e))).join(",");{const t=e.filters.map((e=>Xt(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Zt(e,t){return e instanceof Kt?function(e,t){return t instanceof Kt&&e.op===t.op&&e.field.isEqual(t.field)&&vt(e.value,t.value)}(e,t):e instanceof Ht?function(e,t){return t instanceof Ht&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Zt(n,t.filters[r])),!0)}(e,t):void y()}function en(e,t){const n=e.filters.concat(t);return Ht.create(n,e.op)}function tn(e){return e instanceof Kt?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Et(e.value))}(e):e instanceof Ht?function(e){return e.op.toString()+" {"+e.getFilters().map(tn).join(" ,")+"}"}(e):"Filter"}class nn extends Kt{constructor(e,t,n){super(e,t,n),this.key=z.fromName(n.referenceValue)}matches(e){const t=z.comparator(e.key,this.key);return this.matchesComparison(t)}}class rn extends Kt{constructor(e,t){super(e,"in",t),this.keys=sn("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class on extends Kt{constructor(e,t){super(e,"not-in",t),this.keys=sn("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>z.fromName(e.referenceValue)))}class an extends Kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return At(t)&&bt(t.arrayValue,this.value)}}class un extends Kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&bt(this.value.arrayValue,t)}}class cn extends Kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!bt(this.value.arrayValue,t)}}class ln extends Kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!At(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>bt(this.value.arrayValue,e)))}}class hn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function dn(e){return new hn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function fn(e){const t=b(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Xt(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ge(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Et(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Et(e))).join(",")),t.ce=e}return t.ce}function pn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Wt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Zt(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!zt(e.startAt,t.startAt)&&zt(e.endAt,t.endAt)}function mn(e){return z.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function gn(e,t){return e.filters.filter((e=>e instanceof Kt&&e.field.isEqual(t)))}function yn(e,t,n){let r=gt,i=!0;for(const o of gn(e,t)){let e=gt,t=!0;switch(o.op){case"<":case"<=":e=Nt(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=gt}Mt({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Mt({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function vn(e,t,n){let r=mt,i=!0;for(const o of gn(e,t)){let e=mt,t=!0;switch(o.op){case">=":case">":e=Rt(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=mt}Lt({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];Lt({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class bn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function wn(e,t,n,r,i,o,s,a){return new bn(e,t,n,r,i,o,s,a)}function _n(e){return new bn(e)}function En(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Sn(e){return null!==e.collectionGroup}function Tn(e){const t=b(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new et(B.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new qt(r,n))})),e.has(B.keyField().canonicalString())||t.le.push(new qt(B.keyField(),n))}return t.le}function In(e){const t=b(e);return t.he||(t.he=xn(t,Tn(e))),t.he}function xn(e,t){if("F"===e.limitType)return dn(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new qt(e.field,t)}));const n=e.endAt?new Vt(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Vt(e.startAt.position,e.startAt.inclusive):null;return dn(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function An(e,t){const n=e.filters.concat([t]);return new bn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function On(e,t,n){return new bn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function kn(e,t){return pn(In(e),In(t))&&e.limitType===t.limitType}function Cn(e){return"".concat(fn(In(e)),"|lt:").concat(e.limitType)}function Dn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>tn(e))).join(", "),"]")),ge(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Et(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Et(e))).join(",")),"Target(".concat(t,")")}(In(e)),"; limitType=").concat(e.limitType,")")}function Pn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):z.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Tn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Bt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Tn(e),t))&&!(e.endAt&&!function(e,t,n){const r=Bt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Tn(e),t))}(e,t)}function Nn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Rn(e){return(t,n)=>{let r=!1;for(const i of Tn(e)){const e=Mn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Mn(e,t,n){const r=e.field.isKeyField()?z.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?wt(r,i):y()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return y()}}class Ln{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ye(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return $e(this.inner)}size(){return this.innerSize}}const jn=new Je(z.comparator);function Fn(){return jn}const Un=new Je(z.comparator);function Vn(){let e=Un;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Bn(e){let t=Un;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function zn(){return Wn()}function qn(){return Wn()}function Wn(){return new Ln((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Gn=new Je(z.comparator),Kn=new et(z.comparator);function Hn(){let e=Kn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Qn=new et(N);function Yn(){return Qn}function $n(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ye(t)?"-0":t}}function Jn(e){return{integerValue:""+e}}function Xn(e,t){return ve(t)?Jn(t):$n(e,t)}class Zn{constructor(){this._=void 0}}function er(e,t,n){return e instanceof rr?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&lt(t)&&(t=ht(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ir?or(e,t):e instanceof sr?ar(e,t):function(e,t){const n=nr(e,t),r=cr(n)+cr(e.Ie);return xt(n)&&xt(e.Ie)?Jn(r):$n(e.serializer,r)}(e,t)}function tr(e,t,n){return e instanceof ir?or(e,t):e instanceof sr?ar(e,t):n}function nr(e,t){return e instanceof ur?function(e){return xt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class rr extends Zn{}class ir extends Zn{constructor(e){super(),this.elements=e}}function or(e,t){const n=lr(t);for(const r of e.elements)n.some((e=>vt(e,r)))||n.push(r);return{arrayValue:{values:n}}}class sr extends Zn{constructor(e){super(),this.elements=e}}function ar(e,t){let n=lr(t);for(const r of e.elements)n=n.filter((e=>!vt(e,r)));return{arrayValue:{values:n}}}class ur extends Zn{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function cr(e){return ut(e.integerValue||e.doubleValue)}function lr(e){return At(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class hr{constructor(e,t){this.field=e,this.transform=t}}class dr{constructor(e,t){this.version=e,this.transformResults=t}}class fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class mr{}function gr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new xr(e.key,fr.none()):new _r(e.key,e.data,fr.none());{const n=e.data,r=jt.empty();let i=new et(B.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Er(e.key,r,new rt(i.toArray()),fr.none())}}function yr(e,t,n){e instanceof _r?function(e,t,n){const r=e.value.clone(),i=Tr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Er?function(e,t,n){if(!pr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Tr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Sr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function vr(e,t,n,r){return e instanceof _r?function(e,t,n,r){if(!pr(e.precondition,t))return n;const i=e.value.clone(),o=Ir(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Er?function(e,t,n,r){if(!pr(e.precondition,t))return n;const i=Ir(e.fieldTransforms,r,t),o=t.data;return o.setAll(Sr(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return pr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function br(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=nr(r.transform,e||null);null!=i&&(null===n&&(n=jt.empty()),n.set(r.field,i))}return n||null}function wr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&R(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ir&&t instanceof ir||e instanceof sr&&t instanceof sr?R(e.elements,t.elements,vt):e instanceof ur&&t instanceof ur?vt(e.Ie,t.Ie):e instanceof rr&&t instanceof rr}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class _r extends mr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Er extends mr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Sr(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Tr(e,t,n){const r=new Map;v(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,tr(s,a,n[i]))}return r}function Ir(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,er(e,o,t))}return r}class xr extends mr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ar extends mr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Or{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&yr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=vr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=vr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=qn();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=gr(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(j.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Hn())}isEqual(e){return this.batchId===e.batchId&&R(this.mutations,e.mutations,((e,t)=>wr(e,t)))&&R(this.baseMutations,e.baseMutations,((e,t)=>wr(e,t)))}}class kr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){v(e.mutations.length===n.length);let r=Gn;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new kr(e,t,n,r)}}class Cr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Dr{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class Pr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Nr,Rr;function Mr(e){switch(e){default:return y();case w.CANCELLED:case w.UNKNOWN:case w.DEADLINE_EXCEEDED:case w.RESOURCE_EXHAUSTED:case w.INTERNAL:case w.UNAVAILABLE:case w.UNAUTHENTICATED:return!1;case w.INVALID_ARGUMENT:case w.NOT_FOUND:case w.ALREADY_EXISTS:case w.PERMISSION_DENIED:case w.FAILED_PRECONDITION:case w.ABORTED:case w.OUT_OF_RANGE:case w.UNIMPLEMENTED:case w.DATA_LOSS:return!0}}function Lr(e){if(void 0===e)return p("GRPC error has no .code"),w.UNKNOWN;switch(e){case Nr.OK:return w.OK;case Nr.CANCELLED:return w.CANCELLED;case Nr.UNKNOWN:return w.UNKNOWN;case Nr.DEADLINE_EXCEEDED:return w.DEADLINE_EXCEEDED;case Nr.RESOURCE_EXHAUSTED:return w.RESOURCE_EXHAUSTED;case Nr.INTERNAL:return w.INTERNAL;case Nr.UNAVAILABLE:return w.UNAVAILABLE;case Nr.UNAUTHENTICATED:return w.UNAUTHENTICATED;case Nr.INVALID_ARGUMENT:return w.INVALID_ARGUMENT;case Nr.NOT_FOUND:return w.NOT_FOUND;case Nr.ALREADY_EXISTS:return w.ALREADY_EXISTS;case Nr.PERMISSION_DENIED:return w.PERMISSION_DENIED;case Nr.FAILED_PRECONDITION:return w.FAILED_PRECONDITION;case Nr.ABORTED:return w.ABORTED;case Nr.OUT_OF_RANGE:return w.OUT_OF_RANGE;case Nr.UNIMPLEMENTED:return w.UNIMPLEMENTED;case Nr.DATA_LOSS:return w.DATA_LOSS;default:return y()}}(Rr=Nr||(Nr={}))[Rr.OK=0]="OK",Rr[Rr.CANCELLED=1]="CANCELLED",Rr[Rr.UNKNOWN=2]="UNKNOWN",Rr[Rr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Rr[Rr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Rr[Rr.NOT_FOUND=5]="NOT_FOUND",Rr[Rr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Rr[Rr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Rr[Rr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Rr[Rr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Rr[Rr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Rr[Rr.ABORTED=10]="ABORTED",Rr[Rr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Rr[Rr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Rr[Rr.INTERNAL=13]="INTERNAL",Rr[Rr.UNAVAILABLE=14]="UNAVAILABLE",Rr[Rr.DATA_LOSS=15]="DATA_LOSS";let jr=null;function Fr(){return new TextEncoder}const Ur=new a.Integer([4294967295,4294967295],0);function Vr(e){const t=Fr().encode(e),n=new a.Md5;return n.update(t),new Uint8Array(n.digest())}function Br(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new a.Integer([n,r],0),new a.Integer([i,o],0)]}class zr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new qr("Invalid padding: ".concat(t));if(n<0)throw new qr("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new qr("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new qr("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=a.Integer.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(a.Integer.fromNumber(n)));return 1===r.compare(Ur)&&(r=new a.Integer([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Vr(e),[n,r]=Br(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new zr(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=Vr(e),[n,r]=Br(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class qr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Wr{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Gr.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Wr(j.min(),r,new Je(N),Fn(),Hn())}}class Gr{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Gr(n,t,Hn(),Hn(),Hn())}}class Kr{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Hr{constructor(e,t){this.targetId=e,this.fe=t}}class Qr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Yr{constructor(){this.ge=0,this.pe=Xr(),this.ye=ot.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Hn(),t=Hn(),n=Hn();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:y()}})),new Gr(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Xr()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,v(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class $r{constructor(e){this.Le=e,this.ke=new Map,this.qe=Fn(),this.Qe=Jr(),this.Ke=new Je(N)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:y()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(mn(i))if(0===n){const e=new z(i.path);this.We(t,e,Ut.newNoDocument(e,j.min()))}else v(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==jr||jr.tt(function(e,t,n,r,i){var o,s,a,u,c,l;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(u=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==u?u:0,padding:null!==(l=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=ct(n).toUint8Array()}catch(e){if(e instanceof it)return m("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new zr(o,r,i)}catch(e){return m(e instanceof qr?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&mn(i.target)){const t=new z(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Ut.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Hn();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new Wr(e,t,this.Ke,this.qe,n);return this.qe=Fn(),this.Qe=Jr(),this.Ke=new Je(N),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Yr,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new et(N),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||f("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Yr),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Jr(){return new Je(z.comparator)}function Xr(){return new Je(z.comparator)}const Zr={asc:"ASCENDING",desc:"DESCENDING"},ei={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ti={and:"AND",or:"OR"};class ni{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ri(e,t){return e.useProto3Json||ge(t)?t:{value:t}}function ii(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function oi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function si(e,t){return ii(e,t.toTimestamp())}function ai(e){return v(!!e),j.fromTimestamp(function(e){const t=at(e);return new L(t.seconds,t.nanos)}(e))}function ui(e,t){return ci(e,t).canonicalString()}function ci(e,t){const n=function(e){return new U(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function li(e){const t=U.fromString(e);return v(Pi(t)),t}function hi(e,t){return ui(e.databaseId,t.path)}function di(e,t){const n=li(t);if(n.get(1)!==e.databaseId.projectId)throw new _(w.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new _(w.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new z(gi(n))}function fi(e,t){return ui(e.databaseId,t)}function pi(e){const t=li(e);return 4===t.length?U.emptyPath():gi(t)}function mi(e){return new U(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function gi(e){return v(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function yi(e,t,n){return{name:hi(e,t),fields:n.value.mapValue.fields}}function vi(e,t,n){const r=di(e,t.name),i=ai(t.updateTime),o=t.createTime?ai(t.createTime):j.min(),s=new jt({mapValue:{fields:t.fields}}),a=Ut.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function bi(e,t){let n;if(t instanceof _r)n={update:yi(e,t.key,t.value)};else if(t instanceof xr)n={delete:hi(e,t.key)};else if(t instanceof Er)n={update:yi(e,t.key,t.data),updateMask:Di(t.fieldMask)};else{if(!(t instanceof Ar))return y();n={verify:hi(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof rr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ir)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof sr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ur)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw y()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:si(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:y()}(e,t.precondition)),n}function wi(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?fr.updateTime(ai(e.updateTime)):void 0!==e.exists?fr.exists(e.exists):fr.none()}(t.currentDocument):fr.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)v("REQUEST_TIME"===t.setToServerValue),n=new rr;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new ir(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new sr(e)}else"increment"in t?n=new ur(e,t.increment):y();const r=B.fromServerFormat(t.fieldPath);return new hr(r,n)}(e,t))):[];if(t.update){t.update.name;const i=di(e,t.update.name),o=new jt({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new rt(t.map((e=>B.fromServerFormat(e))))}(t.updateMask);return new Er(i,o,e,n,r)}return new _r(i,o,n,r)}if(t.delete){const r=di(e,t.delete);return new xr(r,n)}if(t.verify){const r=di(e,t.verify);return new Ar(r,n)}return y()}function _i(e,t){return{documents:[fi(e,t.path)]}}function Ei(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fi(e,i);const o=function(e){if(0!==e.length)return Ci(Ht.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Oi(e.field),direction:Ii(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=ri(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Si(e){let t=pi(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){v(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Ti(e);return t instanceof Ht&&$t(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new qt(ki(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ge(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){const t=!!e.before,n=e.values||[];return new Vt(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Vt(n,t)}(n.endAt)),wn(t,i,s,o,a,"F",u,c)}function Ti(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ki(e.unaryFilter.field);return Kt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ki(e.unaryFilter.field);return Kt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ki(e.unaryFilter.field);return Kt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ki(e.unaryFilter.field);return Kt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return y()}}(e):void 0!==e.fieldFilter?function(e){return Kt.create(ki(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return y()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ht.create(e.compositeFilter.filters.map((e=>Ti(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return y()}}(e.compositeFilter.op))}(e):y()}function Ii(e){return Zr[e]}function xi(e){return ei[e]}function Ai(e){return ti[e]}function Oi(e){return{fieldPath:e.canonicalString()}}function ki(e){return B.fromServerFormat(e.fieldPath)}function Ci(e){return e instanceof Kt?function(e){if("=="===e.op){if(kt(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NAN"}};if(Ot(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(kt(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NOT_NAN"}};if(Ot(e.value))return{unaryFilter:{field:Oi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oi(e.field),op:xi(e.op),value:e.value}}}(e):e instanceof Ht?function(e){const t=e.getFilters().map((e=>Ci(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ai(e.op),filters:t}}}(e):y()}function Di(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Pi(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Ni{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:j.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ot.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new Ni(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ni(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ri{constructor(e){this.ct=e}}function Mi(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Li(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:hi(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ii(e,t.version.toTimestamp()),createTime:ii(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ji(t.version)};else{if(!t.isUnknownDocument())return y();r.unknownDocument={path:n.path.toArray(),version:ji(t.version)}}return r}function Li(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ji(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Fi(e){const t=new L(e.seconds,e.nanoseconds);return j.fromTimestamp(t)}function Ui(e,t){const n=(t.baseMutations||[]).map((t=>wi(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>wi(e.ct,t))),i=L.fromMillis(t.localWriteTimeMs);return new Or(t.batchId,i,n,r)}function Vi(e){const t=Fi(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Fi(e.lastLimboFreeSnapshotVersion):j.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return v(1===e.documents.length),In(_n(pi(e.documents[0])))}(e.query):function(e){return In(Si(e))}(e.query),new Ni(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ot.fromBase64String(e.resumeToken))}function Bi(e,t){const n=ji(t.snapshotVersion),r=ji(t.lastLimboFreeSnapshotVersion);let i;i=mn(t.target)?_i(e.ct,t.target):Ei(e.ct,t.target).ut;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fn(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function zi(e){const t=Si({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?On(t,t.limit,"L"):t}function qi(e,t){return new Cr(t.largestBatchId,wi(e.ct,t.overlayMutation))}function Wi(e,t){const n=t.path.lastSegment();return[e,be(t.path.popLast()),n]}function Gi(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ji(r.readTime),documentKey:be(r.documentKey.path),largestBatchId:r.largestBatchId}}class Ki{getBundleMetadata(e,t){return Hi(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Fi(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Hi(e).put(function(e){return{bundleId:e.id,createTime:ji(ai(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Qi(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:zi(e.bundledQuery),readTime:Fi(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Qi(e).put(function(e){return{name:e.name,readTime:ji(ai(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Hi(e){return He(e,"bundles")}function Qi(e){return He(e,"namedQueries")}class Yi{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Yi(e,n)}getOverlay(e,t){return $i(e).get(Wi(this.userId,t)).next((e=>e?qi(this.serializer,e):null))}getOverlays(e,t){const n=zn();return re.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new Cr(t,i);r.push(this.ht(e,o))})),re.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(be(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push($i(e).H("collectionPathOverlayIndex",r))})),re.waitFor(i)}getOverlaysForCollection(e,t,n){const r=zn(),i=be(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return $i(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=qi(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=zn();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return $i(e).Y({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=qi(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return $i(e).put(function(e,t,n){const[r,i,o]=Wi(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:bi(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function $i(e){return He(e,"documentOverlays")}class Ji{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ut(e.integerValue));else if("doubleValue"in e){const n=ut(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),ye(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(ct(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?Pt(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):y()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),z.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Xi(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Zi(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Xi(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ji.bt=new Ji;class eo{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=Zi(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=Zi(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class to{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class no{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class ro{constructor(){this.Gt=new eo,this.zt=new to(this.Gt),this.jt=new no(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class io{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new io(this.indexId,this.documentKey,this.arrayValue,n)}}function oo(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=so(e.arrayValue,t.arrayValue),0!==n?n:(n=so(e.directionalValue,t.directionalValue),0!==n?n:z.comparator(e.documentKey,t.documentKey)))}function so(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class ao{constructor(e){this.Yt=new et(((e,t)=>B.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(v(e.collectionGroup===this.collectionId),this.en)return!1;const t=W(e);if(void 0!==t&&!this.nn(t))return!1;const n=G(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new et(B.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new H(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new H(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new H(n.field,"asc"===n.dir?0:1)));return new q(q.UNKNOWN_ID,this.collectionId,t,Y.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function uo(e){var t,n;if(v(e instanceof Kt||e instanceof Ht),e instanceof Kt){if(e instanceof un){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Kt.create(e.field,"==",t))))||[];return Ht.create(r,"or")}return e}const r=e.filters.map((e=>uo(e)));return Ht.create(r,e.op)}function co(e){if(0===e.getFilters().length)return[];const t=po(uo(e));return v(fo(t)),lo(t)||ho(t)?[t]:t.getFilters()}function lo(e){return e instanceof Kt}function ho(e){return e instanceof Ht&&$t(e)}function fo(e){return lo(e)||ho(e)||function(e){if(e instanceof Ht&&Yt(e)){for(const t of e.getFilters())if(!lo(t)&&!ho(t))return!1;return!0}return!1}(e)}function po(e){if(v(e instanceof Kt||e instanceof Ht),e instanceof Kt)return e;if(1===e.filters.length)return po(e.filters[0]);const t=e.filters.map((e=>po(e)));let n=Ht.create(t,e.op);return n=yo(n),fo(n)?n:(v(n instanceof Ht),v(Qt(n)),v(n.filters.length>1),n.filters.reduce(((e,t)=>mo(e,t))))}function mo(e,t){let n;return v(e instanceof Kt||e instanceof Ht),v(t instanceof Kt||t instanceof Ht),n=e instanceof Kt?t instanceof Kt?function(e,t){return Ht.create([e,t],"and")}(e,t):go(e,t):t instanceof Kt?go(t,e):function(e,t){if(v(e.filters.length>0&&t.filters.length>0),Qt(e)&&Qt(t))return en(e,t.getFilters());const n=Yt(e)?e:t,r=Yt(e)?t:e,i=n.filters.map((e=>mo(e,r)));return Ht.create(i,"or")}(e,t),yo(n)}function go(e,t){if(Qt(t))return en(t,e.getFilters());{const n=t.filters.map((t=>mo(e,t)));return Ht.create(n,"or")}}function yo(e){if(v(e instanceof Kt||e instanceof Ht),e instanceof Kt)return e;const t=e.getFilters();if(1===t.length)return yo(t[0]);if(Jt(e))return e;const n=t.map((e=>yo(e))),r=[];return n.forEach((t=>{t instanceof Kt?r.push(t):t instanceof Ht&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Ht.create(r,e.op)}class vo{constructor(){this._n=new bo}addToCollectionParentIndex(e,t){return this._n.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(X.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(X.min())}updateCollectionGroup(e,t,n){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class bo{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new et(U.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new et(U.comparator)).toArray()}}const wo=new Uint8Array(0);class _o{constructor(e,t){this.databaseId=t,this.an=new bo,this.un=new Ln((e=>fn(e)),((e,t)=>pn(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:be(r)};return Eo(e).put(i)}return re.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[M(t),""],!1,!0);return Eo(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ee(r.parent))}return n}))}addFieldIndex(e,t){const n=To(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Io(e);return i.next((e=>{n.put(Gi(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=To(e),r=Io(e),i=So(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=To(e),n=So(e),r=Io(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return re.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new ao(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=So(e);let r=!0;const i=new Map;return re.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=Hn();const r=[];return re.forEach(i,((i,o)=>{f("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(fn(t)));const s=function(e,t){const n=W(t);if(void 0===n)return null;for(const r of gn(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of G(t))for(const t of gn(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of G(t)){const t=0===i.kind?yn(e,i.fieldPath,e.startAt):vn(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Vt(n,r)}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of G(t)){const t=0===i.kind?vn(e,i.fieldPath,e.endAt):yn(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Vt(n,r)}(o,i),l=this.hn(i,o,u),h=this.hn(i,o,c),d=this.Pn(i,o,a),p=this.In(i.indexId,s,l,u.inclusive,h,c.inclusive,d);return re.forEach(p,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=z.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return re.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:co(Ht.create(e.filters,"and")).map((t=>dn(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),u=a/(null!=t?t.length:1),c=[];for(let l=0;l<a;++l){const a=t?this.Tn(t[l/u]):wo,h=this.En(e,a,n[l%u],r),d=this.dn(e,a,i[l%u],o),f=s.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new io(e,z.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new io(e,z.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new ao(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return re.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new et(B.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new ro;for(const r of G(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Ji.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new ro;return Ji.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new ro;return Ji.bt.Pt(It(this.databaseId,t),n.Ht(function(e){const t=G(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new ro);let i=0;for(const o of G(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&At(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);Ji.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new ro;n.seed(e.Wt()),Ji.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof Kt&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=To(e),r=Io(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return re.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Y(t.sequenceNumber,new X(Fi(t.readTime),new z(Ee(t.documentKey)),t.largestBatchId)):Y.empty(),r=e.fields.map((e=>{let[t,n]=e;return new H(B.fromServerFormat(t),n)}));return new q(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:N(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=To(e),i=Io(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>re.forEach(t,(t=>i.put(Gi(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return re.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?re.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),re.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?re.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return So(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return So(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=So(e);let i=new et(oo);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new io(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new et(oo);const r=this.An(t,e);if(null==r)return n;const i=W(t);if(null!=i){const o=e.data.field(i.fieldPath);if(At(o))for(const i of o.arrayValue.values||[])n=n.add(new io(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new io(t.indexId,e.key,wo,r));return n}wn(e,t,n,r,i){f("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=nt(o),u=nt(s);for(;a||u;){let e=!1,t=!1;if(a&&u){const r=n(a,u);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(u),u=nt(s)):t?(i(a),a=nt(o)):(a=nt(o),u=nt(s))}}(r,i,oo,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),re.waitFor(o)}gn(e){let t=1;return Io(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>oo(e,t))).filter(((e,t,n)=>!t||0!==oo(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=oo(o,e),i=oo(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,wo,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,wo,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return oo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(xo)}getMinOffset(e,t){return re.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||y())))).next(xo)}}function Eo(e){return He(e,"collectionParents")}function So(e){return He(e,"indexEntries")}function To(e){return He(e,"indexConfiguration")}function Io(e){return He(e,"indexState")}function xo(e){v(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;Z(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new X(t.readTime,t.documentKey,n)}const Ao={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oo{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Oo(e,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ko(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},((e,t,n)=>(a++,n.delete())));o.push(u.next((()=>{v(1===a)})));const c=[];for(const l of n.mutations){const e=Ie(t,l.key.path,n.batchId);o.push(i.delete(e)),c.push(l.key)}return re.waitFor(o).next((()=>c))}function Co(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw y();t=e.noDocument}return JSON.stringify(t).length}Oo.DEFAULT_COLLECTION_PERCENTILE=10,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oo.DEFAULT=new Oo(41943040,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oo.DISABLED=new Oo(-1,0,0);class Do{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){v(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new Do(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return No(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=Ro(e),o=No(e);return o.add({}).next((s=>{v("number"==typeof s);const a=new Or(s,t,n,r),u=function(e,t,n){const r=n.baseMutations.map((t=>bi(e.ct,t))),i=n.mutations.map((t=>bi(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let l=new et(((e,t)=>N(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Ie(this.userId,e.key.path,s);l=l.add(e.key.path.popLast()),c.push(o.put(u)),c.push(i.put(t,xe))}return l.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),re.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return No(e).get(t).next((e=>e?(v(e.userId===this.userId),Ui(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?re.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return No(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(v(t.batchId>=n),i=Ui(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return No(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return No(e).W("userMutationsIndex",t).next((e=>e.map((e=>Ui(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Te(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Ro(e).Y({range:r},((n,r,o)=>{const[s,a,u]=n,c=Ee(a);if(s===this.userId&&t.path.isEqual(c))return No(e).get(u).next((e=>{if(!e)throw y();v(e.userId===this.userId),i.push(Ui(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new et(N);const r=[];return t.forEach((t=>{const i=Te(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=Ro(e).Y({range:o},((e,r,i)=>{const[o,s,a]=e,u=Ee(s);o===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()}));r.push(s)})),re.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Te(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new et(N);return Ro(e).Y({range:o},((e,t,i)=>{const[o,a,u]=e,c=Ee(a);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(s=s.add(u)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(No(e).get(t).next((e=>{if(null===e)throw y();v(e.userId===this.userId),n.push(Ui(this.serializer,e))})))})),re.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return ko(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),re.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return re.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return Ro(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Ee(e[1]);r.push(t)}else n.done()})).next((()=>{v(0===r.length)}))}))}containsKey(e,t){return Po(e,this.userId,t)}xn(e){return Mo(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Po(e,t,n){const r=Te(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return Ro(e).Y({range:o,J:!0},((e,n,r)=>{const[o,a,u]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function No(e){return He(e,"mutations")}function Ro(e){return He(e,"documentMutations")}function Mo(e){return He(e,"mutationQueues")}class Lo{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Lo(0)}static Bn(){return new Lo(-1)}}class jo{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new Lo(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>j.fromTimestamp(new L(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Fo(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(v(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Fo(e).Y(((o,s)=>{const a=Vi(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>re.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Fo(e).Y(((e,n)=>{const r=Vi(n);t(r)}))}Ln(e){return Uo(e).get("targetGlobalKey").next((e=>(v(null!==e),e)))}kn(e,t){return Uo(e).put("targetGlobalKey",t)}qn(e,t){return Fo(e).put(Bi(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=fn(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Fo(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=Vi(n);pn(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Vo(e);return t.forEach((t=>{const o=be(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),re.waitFor(r)}removeMatchingKeys(e,t,n){const r=Vo(e);return re.forEach(t,(t=>{const i=be(t.path);return re.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Vo(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Vo(e);let i=Hn();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Ee(e[1]),o=new z(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=be(t.path),r=IDBKeyRange.bound([n],[M(n)],!1,!0);let i=0;return Vo(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Fo(e).get(t).next((e=>e?Vi(e):null))}}function Fo(e){return He(e,"targets")}function Uo(e){return He(e,"targetGlobal")}function Vo(e){return He(e,"targetDocuments")}function Bo(e,t){let[n,r]=e,[i,o]=t;const s=N(n,i);return 0===s?N(r,o):s}class zo{constructor(e){this.Kn=e,this.buffer=new et(Bo),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Bo(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qo{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){f("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){ue(e)?f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ne(e)}await this.zn(3e5)}))}}class Wo{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return re.resolve(me._e);const n=new zo(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Ao)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Ao):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,s,a,u,c;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,u=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(c=Date.now(),d()<=o.LogLevel.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-u)+"ms\n"+"Total Duration: ".concat(c-l,"ms")),re.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function Go(e,t){return new Wo(e,t)}class Ko{constructor(e,t){this.db=e,this.garbageCollector=Go(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return Ho(e,n)}removeReference(e,t,n){return Ho(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ho(e,t)}er(e,t){return function(e,t){let n=!1;return Mo(e).Z((r=>Po(e,r,t).next((e=>(e&&(n=!0),re.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,j.min()),Vo(e).delete(function(e){return[0,be(e.path)]}(o)))))}));r.push(t)}})).next((()=>re.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ho(e,t)}Xn(e,t){const n=Vo(e);let r,i=me._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:u}=n;0===o?(i!==me._e&&t(new z(Ee(r)),i),i=u,r=a):i=me._e})).next((()=>{i!==me._e&&t(new z(Ee(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ho(e,t){return Vo(e).put(function(e,t){return{targetId:0,path:be(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Qo{constructor(){this.changes=new Ln((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?re.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Yo{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Zo(e).put(n)}removeEntry(e,t,n){return Zo(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Li(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=Ut.newInvalidDocument(t);return Zo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(es(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:Ut.newInvalidDocument(t)};return Zo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(es(t))},((e,r)=>{n={document:this.nr(t,r),size:Co(r)}})).next((()=>n))}getEntries(e,t){let n=Fn();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=Fn(),r=new Je(z.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,Co(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return re.resolve();let r=new et(ns);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(es(r.first()),es(r.last())),o=r.getIterator();let s=o.getNext();return Zo(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=z.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&ns(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.U(es(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),Li(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Zo(e).W(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Fn();for(const i of e){const e=this.nr(z.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Pn(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Fn();const o=ts(t,n),s=ts(t,X.max());return Zo(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr(z.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Jo(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return Xo(e).get("remoteDocumentGlobalKey").next((e=>(v(!!e),e)))}tr(e,t){return Xo(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=vi(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=z.fromSegments(t.noDocument.path),r=Fi(t.noDocument.readTime);n=Ut.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return y();{const e=z.fromSegments(t.unknownDocument.path),r=Fi(t.unknownDocument.version);n=Ut.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new L(e[0],e[1]);return j.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(j.min()))return e}return Ut.newInvalidDocument(e)}}function $o(e){return new Yo(e)}class Jo extends Qo{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new Ln((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new et(((e,t)=>N(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=Mi(this.ar.serializer,o);r=r.add(i.path.popLast());const u=Co(a);n+=u-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=Mi(this.ar.serializer,o.convertToNoDocument(j.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),re.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function Xo(e){return He(e,"remoteDocumentGlobal")}function Zo(e){return He(e,"remoteDocumentsV14")}function es(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ts(e,t){const n=t.documentKey.path.toArray();return[e,Li(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function ns(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=N(n[o],r[o]),i)return i;return i=N(n.length,r.length),i||(i=N(n[n.length-2],r[r.length-2]),i||N(n[n.length-1],r[r.length-1]))}class rs{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class is{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&vr(n.mutation,e,rt.empty(),L.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Hn()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hn();const r=zn();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Vn();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=zn();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Hn())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Fn();const o=Wn(),s=Wn();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Er)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),vr(s.mutation,t,s.mutation.getFieldMask(),L.now())):o.set(t.key,rt.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new rs(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Wn();let r=new Je(((e,t)=>e-t)),i=Hn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||rt.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Hn()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,u=r.value,c=qn();u.forEach((e=>{if(!i.has(e)){const r=gr(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return re.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return z.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Sn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):re.resolve(zn());let s=-1,a=i;return o.next((t=>re.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?re.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Hn()))).next((e=>({batchId:s,changes:Bn(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next((e=>{let t=Vn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=Vn();return this.indexManager.getCollectionParents(e,i).next((s=>re.forEach(s,(s=>{const a=function(e,t){return new bn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ut.newInvalidDocument(r)))}));let n=Vn();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&vr(o.mutation,r,rt.empty(),L.now()),Pn(t,r)&&(n=n.insert(e,r))})),n}))}}class os{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return re.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:ai(e.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:zi(e.bundledQuery),readTime:ai(e.readTime)}}(t)),re.resolve()}}class ss{constructor(){this.overlays=new Je(z.comparator),this.hr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const n=zn();return re.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),re.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),re.resolve()}getOverlaysForCollection(e,t,n){const r=zn(),i=t.length+1,o=new z(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return re.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Je(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=zn(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=zn(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return re.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Cr(t,n));let i=this.hr.get(t);void 0===i&&(i=Hn(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class as{constructor(){this.Pr=new et(us.Ir),this.Tr=new et(us.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new us(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new us(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new z(new U([])),n=new us(t,e),r=new us(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new z(new U([])),n=new us(t,e),r=new us(t,e+1);let i=Hn();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new us(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class us{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return z.comparator(e.key,t.key)||N(e.pr,t.pr)}static Er(e,t){return N(e.pr,t.pr)||z.comparator(e.key,t.key)}}class cs{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new et(us.Ir)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Or(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new us(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return re.resolve(o)}lookupMutationBatch(e,t){return re.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return re.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new us(t,0),r=new us(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),re.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new et(N);return t.forEach((e=>{const t=new us(e,0),r=new us(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),re.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;z.isDocumentKey(i)||(i=i.child(""));const o=new us(new z(i),0);let s=new et(N);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),re.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){v(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return re.forEach(t.mutations,(r=>{const i=new us(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new us(t,0),r=this.wr.firstAfterOrEqual(n);return re.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ls{constructor(e){this.vr=e,this.docs=new Je(z.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return re.resolve(n?n.document.mutableCopy():Ut.newInvalidDocument(t))}getEntries(e,t){let n=Fn();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Ut.newInvalidDocument(e))})),re.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Fn();const o=t.path,s=new z(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Z(J(s),n)<=0||(r.has(s.key)||Pn(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return re.resolve(i)}getAllFromCollectionGroup(e,t,n,r){y()}Fr(e,t){return re.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new hs(this)}getSize(e){return re.resolve(this.size)}}class hs extends Qo{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),re.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class ds{constructor(e){this.persistence=e,this.Mr=new Ln((e=>fn(e)),pn),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.Or=0,this.Nr=new as,this.targetCount=0,this.Br=Lo.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),re.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new Lo(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.qn(t),re.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),re.waitFor(i).next((()=>r))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return re.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),re.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),re.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return re.resolve(n)}containsKey(e,t){return re.resolve(this.Nr.containsKey(t))}}class fs{constructor(e,t){this.Lr={},this.overlays={},this.kr=new me(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ds(this),this.indexManager=new vo,this.remoteDocumentCache=function(e){return new ls(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Ri(t),this.$r=new os(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ss,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new cs(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){f("MemoryPersistence","Starting transaction:",e);const r=new ps(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return re.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class ps extends te{constructor(e){super(),this.currentSequenceNumber=e}}class ms{constructor(e){this.persistence=e,this.zr=new as,this.jr=null}static Hr(e){return new ms(e)}get Jr(){if(this.jr)return this.jr;throw y()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),re.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),re.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Jr,(n=>{const r=z.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,j.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return re.or([()=>re.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class gs{constructor(e,t){this.persistence=e,this.Zr=new Ln((e=>be(e.path)),((e,t)=>e.isEqual(t))),this.garbageCollector=Go(this,t)}static Hr(e,t){return new gs(e,t)}Ur(){}Wr(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Hn(e){const t=this.Zn(e);return this.persistence.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}Jn(e,t){return re.forEach(this.Zr,((n,r)=>this.er(e,n,r).next((e=>e?re.resolve():t(r)))))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Fr(e,(r=>this.er(e,r,t).next((e=>{e||(n++,i.removeEntry(r,j.min()))})))).next((()=>i.apply(e))).next((()=>n))}markPotentiallyOrphaned(e,t){return this.Zr.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Zr.set(n,e.currentSequenceNumber),re.resolve()}removeReference(e,t,n){return this.Zr.set(n,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.Zr.set(t,e.currentSequenceNumber),re.resolve()}Kr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Tt(e.data.value)),t}er(e,t,n){return re.or([()=>this.persistence.Gr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Zr.get(t);return re.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ys{constructor(e){this.serializer=e}N(e,t,n,r){const i=new ie("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Se,{unique:!0}),e.createObjectStore("documentMutations")}(e),vs(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=re.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),vs(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:j.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Se,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return re.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Fe});t.createIndex("collectionPathOverlayIndex",Ue,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ve,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ae});t.createIndex("documentKeyIndex",Oe),t.createIndex("collectionGroupIndex",ke)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Re}).createIndex("sequenceNumberIndex",Me,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Le}).createIndex("documentKeyIndex",je,{unique:!1})}(e)))),o}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Co(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>re.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>re.forEach(n,(n=>{v(n.userId===t.userId);const r=Ui(this.serializer,n);return ko(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new U(n),s=function(e){return[0,be(e)]}(o);r.push(t.get(s).next((n=>n?re.resolve():(n=>t.put({targetId:0,path:be(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>re.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Ne});const n=t.store("collectionParents"),r=new bo,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:be(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new U(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,o]=e;const s=Ee(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Vi(n),i=Bi(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new z(U.fromString(e.document.name).popFirst(5)):e.noDocument?z.fromSegments(e.noDocument.path):e.unknownDocument?z.fromSegments(e.unknownDocument.path):y()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>re.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=$o(this.serializer),i=new fs(ms.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Hn();Ui(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),re.forEach(n,((e,n)=>{const o=new c(n),s=Yi.lt(this.serializer,o),a=i.getIndexManager(o),u=Do.lt(o,this.serializer,a,i.referenceDelegate);return new is(r,u,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Ke(t,me._e),e).next()}))}))}}function vs(e){e.createObjectStore("targetDocuments",{keyPath:De}).createIndex("documentTargetsIndex",Pe,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ce,{unique:!0}),e.createObjectStore("targetGlobal")}const bs="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ws{constructor(e,t,n,r,i,o,s,a,u,c){let l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=u,this.ai=c,this.ui=l,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!ws.D())throw new _(w.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ko(this,r),this.Ti=t+"main",this.serializer=new Ri(a),this.Ei=new oe(this.Ti,this.ui,new ys(this.serializer)),this.Qr=new jo(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$o(this.serializer),this.$r=new Ki,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&p("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new _(w.FAILED_PRECONDITION,bs);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new me(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Es(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(ue(e))return f("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return _s(e).get("owner").next((e=>re.resolve(this.Si(e))))}bi(e){return Es(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=He(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return re.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?re.resolve(!0):_s(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new _(w.FAILED_PRECONDITION,bs);return!1}}return!(!this.networkEnabled||!this.inForeground)||Es(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&f("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Ke(e,me._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Es(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Do.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _o(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yi.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){f("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?Ge:14===e?We:13===e?qe:12===e?ze:11===e?Be:void y()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new Ke(r,this.kr?this.kr.next():me._e),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw p("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new _(w.FAILED_PRECONDITION,ee);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return _s(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new _(w.FAILED_PRECONDITION,bs)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return _s(e).put("owner",t)}static D(){return oe.D()}yi(e){const t=_s(e);return t.get("owner").next((e=>this.Si(e)?(f("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(p("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;s.isSafari()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return f("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return p("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){p("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function _s(e){return He(e,"owner")}function Es(e){return He(e,"clientMetadata")}function Ss(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Ts{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Hn(),r=Hn();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Ts(e,t.fromCache,n,r)}}class Is{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xs{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=s.isSafari()?8:oe.v(s.getUA())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Is;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(d()<=o.LogLevel.DEBUG&&f("QueryEngine","SDK will not create cache indexes for query:",Dn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),re.resolve()):(d()<=o.LogLevel.DEBUG&&f("QueryEngine","Query:",Dn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(d()<=o.LogLevel.DEBUG&&f("QueryEngine","The SDK decides to create cache indexes for query:",Dn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(t))):re.resolve())}ji(e,t){if(En(t))return re.resolve(null);let n=In(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=On(t,null,"F"),n=In(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Hn(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,On(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return En(t)||r.isEqual(j.min())?re.resolve(null):this.zi.getDocuments(e,n).next((i=>{const s=this.Zi(t,i);return this.Xi(t,s,n,r)?re.resolve(null):(d()<=o.LogLevel.DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Dn(t)),this.es(e,s,t,$(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new et(Rn(e));return t.forEach(((t,r)=>{Pn(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return d()<=o.LogLevel.DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Dn(t)),this.zi.getDocumentsMatchingQuery(e,t,X.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class As{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Je(N),this.rs=new Ln((e=>fn(e)),pn),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new is(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Os(e,t,n,r){return new As(e,t,n,r)}async function ks(e,t){const n=b(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Hn();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Cs(e){const t=b(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Ds(e,t,n){let r=Hn(),i=Hn();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Fn();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(j.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function Ps(e,t){const n=b(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Ns(e,t){const n=b(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,re.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new Ni(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Rs(e,t,n){const r=b(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!ue(e))throw e;f("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Ms(e,t,n){const r=b(e);let i=j.min(),o=Hn();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=b(e),i=r.rs.get(n);return void 0!==i?re.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,In(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:j.min(),n?o:Hn()))).next((e=>(Fs(r,Nn(t),e),{documents:e,hs:o})))))}function Ls(e,t){const n=b(e),r=b(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function js(e,t){const n=b(e),r=n.ss.get(t)||j.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,$(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Fs(n,t,e),e)))}function Fs(e,t,n){let r=e.ss.get(t)||j.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Us(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Hn();const r=await Ns(e,In(zi(t.bundledQuery))),i=b(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=ai(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(ot.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Vs(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Bs(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function zs(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class qs{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new _(r.error.code,r.error.message))),o?new qs(e,t,r.state,i):(p("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ws{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new _(n.error.code,n.error.message))),i?new Ws(e,n.state,r):(p("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gs{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Yn();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=ve(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Gs(e,i):(p("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Ks{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ks(t.clientId,t.onlineState):(p("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class Hs{constructor(){this.activeTargetIds=Yn()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qs{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Je(N),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Vs(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Hs),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Vs(this.persistenceKey,n));if(e){const t=Gs.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(zs(this.persistenceKey,e));if(n){const r=Ws.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zs(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return f("SharedClientState","READ",e,t),t}setItem(e,t){f("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){f("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(f("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=me._e;if(null!=e)try{const n=JSON.parse(e);v("number"==typeof n),t=n}catch(e){p("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==me._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new qs(this.currentUser,e,t,n),i=Bs(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Bs(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=zs(this.persistenceKey,e),i=new Ws(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Gs.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return qs.Es(new c(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Ws.Es(r,t)}xs(e){return Ks.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);f("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Yn();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Ys{constructor(){this.no=new Hs,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Hs,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class $s{io(e){}shutdown(){}}class Js{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Xs=null;function Zs(){return null===Xs?Xs=268435456+Math.round(2147483648*Math.random()):Xs++,"0x"+Xs.toString(16)}const ea={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ta{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const na="WebChannelConnection";class ra extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const o=Zs(),s=this.bo(e,t.toUriEncodedString());f("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,s,a,n).then((t=>(f("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw m("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+l,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=ea[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Zs();return new Promise(((o,s)=>{const u=new a.XhrIo;u.setWithCredentials(!0),u.listenOnce(a.EventType.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case a.ErrorCode.NO_ERROR:const t=u.getResponseJson();f(na,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case a.ErrorCode.TIMEOUT:f(na,"RPC '".concat(e,"' ").concat(i," timed out")),s(new _(w.DEADLINE_EXCEEDED,"Request time out"));break;case a.ErrorCode.HTTP_ERROR:const n=u.getStatus();if(f(na,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){let e=u.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(w).indexOf(t)>=0?t:w.UNKNOWN}(t.status);s(new _(e,t.message))}else s(new _(w.UNKNOWN,"Server responded with status "+u.getStatus()))}else s(new _(w.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{f(na,"RPC '".concat(e,"' ").concat(i," completed."))}}));const c=JSON.stringify(r);f(na,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",c,n,15)}))}Fo(e,t,n){const r=Zs(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=a.createWebChannelTransport(),s=a.getStatEventTarget(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const l=i.join("");f(na,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),u);const h=o.createWebChannel(l,u);let d=!1,p=!1;const g=new ta({lo:t=>{p?f(na,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(f(na,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),h.open(),d=!0),f(na,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),h.send(t))},ho:()=>h.close()}),y=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return y(h,a.WebChannel.EventType.OPEN,(()=>{p||f(na,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),y(h,a.WebChannel.EventType.CLOSE,(()=>{p||(p=!0,f(na,"RPC '".concat(e,"' stream ").concat(r," transport closed")),g.Vo())})),y(h,a.WebChannel.EventType.ERROR,(t=>{p||(p=!0,m(na,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),g.Vo(new _(w.UNAVAILABLE,"The operation could not be completed")))})),y(h,a.WebChannel.EventType.MESSAGE,(t=>{var n;if(!p){const i=t.data[0];v(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){f(na,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=Nr[e];if(void 0!==t)return Lr(t)}(t),i=s.message;void 0===n&&(n=w.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),p=!0,g.Vo(new _(n,i)),h.close()}else f(na,"RPC '".concat(e,"' stream ").concat(r," received:"),i),g.mo(i)}})),y(s,a.Event.STAT_EVENT,(t=>{t.stat===a.Stat.PROXY?f(na,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===a.Stat.NOPROXY&&f(na,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{g.Ro()}),0),g}}function ia(){return"undefined"!=typeof window?window:null}function oa(){return"undefined"!=typeof document?document:null}function sa(e){return new ni(e,!0)}class aa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&f("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class ua{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new aa(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===w.RESOURCE_EXHAUSTED?(p(t.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===w.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new _(w.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return f("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ca extends ua{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:y()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(v(void 0===t||"string"==typeof t),ot.fromBase64String(t||"")):(v(void 0===t||t instanceof Uint8Array),ot.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?w.UNKNOWN:Lr(e.code);return new _(t,e.message||"")}(s);n=new Qr(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=di(e,r.document.name),o=ai(r.document.updateTime),s=r.document.createTime?ai(r.document.createTime):j.min(),a=new jt({mapValue:{fields:r.document.fields}}),u=Ut.newFoundDocument(i,o,s,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new Kr(c,l,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=di(e,r.document),o=r.readTime?ai(r.readTime):j.min(),s=Ut.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Kr([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=di(e,r.document),o=r.removedTargetIds||[];n=new Kr([],o,i,null)}else{if(!("filter"in t))return y();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new Pr(r,i),s=e.targetId;n=new Hr(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return j.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?j.min():t.readTime?ai(t.readTime):j.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=mi(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=mn(r)?{documents:_i(e,r)}:{query:Ei(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=oi(e,t.resumeToken);const r=ri(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(j.min())>0){n.readTime=ii(e,t.snapshotVersion.toTimestamp());const r=ri(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return y()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=mi(this.serializer),t.removeTarget=e,this.t_(t)}}class la extends ua{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(v(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(v(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?ai(e.updateTime):ai(t);return n.isEqual(j.min())&&(n=ai(t)),new dr(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=ai(e.commitTime);return this.listener.T_(n,t)}return v(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=mi(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>bi(this.serializer,e)))};this.t_(t)}}class ha extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new _(w.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.So(e,ci(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _(w.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.vo(e,ci(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===w.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new _(w.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class da{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(p(t),this.g_=!1):f("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class fa{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Ea(this)&&(f("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=b(e);t.v_.add(4),await ma(t),t.x_.set("Unknown"),t.v_.delete(4),await pa(t)}(this))}))})),this.x_=new da(n,r)}}async function pa(e){if(Ea(e))for(const t of e.F_)await t(!0)}async function ma(e){for(const t of e.F_)await t(!1)}function ga(e,t){const n=b(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),_a(n)?wa(n):Va(n).Jo()&&va(n,t))}function ya(e,t){const n=b(e),r=Va(n);n.C_.delete(t),r.Jo()&&ba(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Ea(n)&&n.x_.set("Unknown"))}function va(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(j.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Va(e).c_(t)}function ba(e,t){e.O_.Oe(t),Va(e).l_(t)}function wa(e){e.O_=new $r({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Va(e).start(),e.x_.p_()}function _a(e){return Ea(e)&&!Va(e).Ho()&&e.C_.size>0}function Ea(e){return 0===b(e).v_.size}function Sa(e){e.O_=void 0}async function Ta(e){e.C_.forEach(((t,n)=>{va(e,t)}))}async function Ia(e,t){Sa(e),_a(e)?(e.x_.S_(t),wa(e)):e.x_.set("Unknown")}async function xa(e,t,n){if(e.x_.set("Online"),t instanceof Qr&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){f("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Aa(e,n)}else if(t instanceof Kr?e.O_.$e(t):t instanceof Hr?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(j.min()))try{const t=await Cs(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(ot.EMPTY_BYTE_STRING,r.snapshotVersion)),ba(e,t);const i=new Ni(r.target,t,n,r.sequenceNumber);va(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){f("RemoteStore","Failed to raise snapshot:",t),await Aa(e,t)}}async function Aa(e,t,n){if(!ue(t))throw t;e.v_.add(1),await ma(e),e.x_.set("Offline"),n||(n=()=>Cs(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{f("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await pa(e)}))}function Oa(e,t){return t().catch((n=>Aa(e,n,t)))}async function ka(e){const t=b(e),n=Ba(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Ca(t);)try{const e=await Ps(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Da(t,e)}catch(e){await Aa(t,e)}Pa(t)&&Na(t)}function Ca(e){return Ea(e)&&e.D_.length<10}function Da(e,t){e.D_.push(t);const n=Ba(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Pa(e){return Ea(e)&&!Ba(e).Ho()&&e.D_.length>0}function Na(e){Ba(e).start()}async function Ra(e){Ba(e).d_()}async function Ma(e){const t=Ba(e);for(const n of e.D_)t.I_(n.mutations)}async function La(e,t,n){const r=e.D_.shift(),i=kr.from(r,t,n);await Oa(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ka(e)}async function ja(e,t){t&&Ba(e).P_&&await async function(e,t){if(function(e){return Mr(e)&&e!==w.ABORTED}(t.code)){const n=e.D_.shift();Ba(e).Zo(),await Oa(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ka(e)}}(e,t),Pa(e)&&Na(e)}async function Fa(e,t){const n=b(e);n.asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials");const r=Ea(n);n.v_.add(3),await ma(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await pa(n)}async function Ua(e,t){const n=b(e);t?(n.v_.delete(2),await pa(n)):t||(n.v_.add(2),await ma(n),n.x_.set("Unknown"))}function Va(e){return e.N_||(e.N_=function(e,t,n){const r=b(e);return r.R_(),new ca(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Ta.bind(null,e),To:Ia.bind(null,e),u_:xa.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),_a(e)?wa(e):e.x_.set("Unknown")):(await e.N_.stop(),Sa(e))}))),e.N_}function Ba(e){return e.B_||(e.B_=function(e,t,n){const r=b(e);return r.R_(),new la(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Ra.bind(null,e),To:ja.bind(null,e),E_:Ma.bind(null,e),T_:La.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await ka(e)):(await e.B_.stop(),e.D_.length>0&&(f("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class za{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new E,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new za(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new _(w.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qa(e,t){if(p("AsyncQueue","".concat(t,": ").concat(e)),ue(e))return new _(w.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Wa{constructor(e){this.comparator=e?(t,n)=>e(t,n)||z.comparator(t.key,n.key):(e,t)=>z.comparator(e.key,t.key),this.keyedMap=Vn(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new Wa(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wa))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Wa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Ga{constructor(){this.L_=new Je(z.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):y():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Ka{constructor(e,t,n,r,i,o,s,a,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new Ka(e,t,Wa.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Ha{constructor(){this.q_=void 0,this.Q_=[]}}class Qa{constructor(){this.queries=new Ln((e=>Cn(e)),kn),this.onlineState="Unknown",this.K_=new Set}}async function Ya(e,t){const n=b(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Ha),i)try{o.q_=await n.onListen(r)}catch(e){const n=qa(e,"Initialization of query '".concat(Dn(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.Q_.push(t),t.U_(n.onlineState),o.q_&&t.W_(o.q_)&&Za(n)}async function $a(e,t){const n=b(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.Q_.indexOf(t);e>=0&&(o.Q_.splice(e,1),i=0===o.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Ja(e,t){const n=b(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&Za(n)}function Xa(e,t,n){const r=b(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function Za(e){e.K_.forEach((e=>{e.next()}))}class eu{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ka(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=Ka.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class tu{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class nu{constructor(e){this.serializer=e}Ps(e){return di(this.serializer,e)}Is(e){return e.metadata.exists?vi(this.serializer,e.document,!1):Ut.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return ai(e)}}class ru{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=iu(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=U.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new nu(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Hn()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=b(e);let o=Hn(),s=Fn();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(o=o.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=await Ns(i,function(e){return In(_n(U.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Ds(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,u.targetId).next((()=>i.Qr.addMatchingKeys(e,o,u.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new nu(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await Us(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function iu(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class ou{constructor(e){this.key=e}}class su{constructor(e){this.key=e}}class au{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Hn(),this.mutatedKeys=Hn(),this.ua=Rn(e),this.ca=new Wa(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new Ga,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),l=Pn(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ia(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.ua(l,a)>0||u&&this.ua(l,u)<0)&&(s=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(s=!0)),f&&(l?(o=o.add(l),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:o,Pa:n,Xi:s,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const s=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,u=a!==this._a;return this._a=a,0!==o.length||u?{snapshot:new Ka(this.query,e.ca,i,o,e.mutatedKeys,0===a,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:s}:{da:s}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ga,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Hn(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new su(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new ou(n))})),t}Ra(e){this.oa=e.hs,this.aa=Hn();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Ka.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class uu{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class cu{constructor(e){this.key=e,this.ma=!1}}class lu{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Ln((e=>Cn(e)),kn),this.pa=new Map,this.ya=new Set,this.wa=new Je(z.comparator),this.Sa=new Map,this.ba=new as,this.Da={},this.Ca=new Map,this.va=Lo.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function hu(e,t){const n=ju(e);let r,i;const o=n.ga.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const e=await Ns(n.localStore,In(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await du(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&ga(n.remoteStore,e)}return i}async function du(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await Ms(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return Su(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const o=await Ms(e.localStore,t,!0),s=new au(t,o.hs),a=s.ha(o.documents),u=Gr.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,u);Su(e,n,c.da);const l=new uu(t,n,s);return e.ga.set(t,l),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),c.snapshot}async function fu(e,t){const n=b(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!kn(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Rs(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),ya(n.remoteStore,r.targetId),_u(n,r.targetId)})).catch(ne)):(_u(n,r.targetId),await Rs(n.localStore,r.targetId,!0))}async function pu(e,t){const n=b(e);try{const e=await function(e,t){const n=b(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const u=i.get(a);if(!u)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(ot.EMPTY_BYTE_STRING,j.min()).withLastLimboFreeSnapshotVersion(j.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,o)&&s.push(n.Qr.updateTargetData(e,c))}));let a=Fn(),u=Hn();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Ds(e,o,t.documentUpdates).next((e=>{a=e.cs,u=e.ls}))),!r.isEqual(j.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return re.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,u))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(v(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?v(r.ma):e.removedDocuments.size>0&&(v(r.ma),r.ma=!1))})),await xu(n,e,t)}catch(e){await ne(e)}}function mu(e,t,n){const r=b(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=b(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&Za(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function gu(e,t,n){const r=b(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),o=i&&i.key;if(o){let e=new Je(z.comparator);e=e.insert(o,Ut.newNoDocument(o,j.min()));const n=Hn().add(o),i=new Wr(j.min(),new Map,new Je(N),e,n);await pu(r,i),r.wa=r.wa.remove(o),r.Sa.delete(t),Iu(r)}else await Rs(r.localStore,t,!1).then((()=>_u(r,t,n))).catch(ne)}async function yu(e,t){const n=b(e),r=t.batch.batchId;try{const e=await function(e,t){const n=b(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=re.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);v(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Hn();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);wu(n,r,null),bu(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xu(n,e)}catch(e){await ne(e)}}async function vu(e,t,n){const r=b(e);try{const e=await function(e,t){const n=b(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(v(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);wu(r,t,n),bu(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await xu(r,e)}catch(n){await ne(n)}}function bu(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function wu(e,t,n){const r=b(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function _u(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Eu(e,t)}))}function Eu(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(ya(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Iu(e))}function Su(e,t,n){for(const r of n)r instanceof ou?(e.ba.addReference(r.key,t),Tu(e,r)):r instanceof su?(f("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Eu(e,r.key)):y()}function Tu(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(f("SyncEngine","New document in limbo: "+n),e.ya.add(r),Iu(e))}function Iu(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new z(U.fromString(t)),r=e.va.next();e.Sa.set(r,new cu(n)),e.wa=e.wa.insert(n,r),ga(e.remoteStore,new Ni(In(_n(n.path)),r,"TargetPurposeLimboResolution",me._e))}}async function xu(e,t,n){const r=b(e),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{s.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Ts.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.fa.u_(i),await async function(e,t){const n=b(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>re.forEach(t,(t=>re.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>re.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!ue(e))throw e;f("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function Au(e,t){const n=b(e);if(!n.currentUser.isEqual(t)){f("SyncEngine","User change. New user:",t.toKey());const e=await ks(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new _(w.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await xu(n,e.us)}}function Ou(e,t){const n=b(e),r=n.Sa.get(t);if(r&&r.ma)return Hn().add(r.key);{let e=Hn();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function ku(e,t){const n=b(e),r=await Ms(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&Su(n,t.targetId,i.da),i}async function Cu(e,t){const n=b(e);return js(n.localStore,t).then((e=>xu(n,e)))}async function Du(e,t,n,r){const i=b(e),o=await function(e,t){const n=b(e),r=b(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):re.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await ka(i.remoteStore):"acknowledged"===n||"rejected"===n?(wu(i,t,r||null),bu(i,t),function(e,t){b(b(e).mutationQueue).Mn(t)}(i.localStore,t)):y(),await xu(i,o)):f("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Pu(e,t,n){const r=b(e),i=[],o=[];for(const s of t){let e;const t=r.pa.get(s);if(t&&0!==t.length){e=await Ns(r.localStore,In(t[0]));for(const e of t){const t=r.ga.get(e),n=await ku(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await Ls(r.localStore,s);e=await Ns(r.localStore,t),await du(r,Nu(t),s,!1,e.resumeToken)}i.push(e)}return r.fa.u_(o),i}function Nu(e){return wn(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ru(e){return function(e){return b(b(e).persistence).Li()}(b(e).localStore)}async function Mu(e,t,n,r){const i=b(e);if(i.Fa)return void f("SyncEngine","Ignoring unexpected query state notification.");const o=i.pa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await js(i.localStore,Nn(o[0])),r=Wr.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ot.EMPTY_BYTE_STRING);await xu(i,e,r);break}case"rejected":await Rs(i.localStore,t,!0),_u(i,t,r);break;default:y()}}async function Lu(e,t,n){const r=ju(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){f("SyncEngine","Adding an already active target "+e);continue}const t=await Ls(r.localStore,e),n=await Ns(r.localStore,t);await du(r,Nu(t),n.targetId,!1,n.resumeToken),ga(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await Rs(r.localStore,e,!1).then((()=>{ya(r.remoteStore,e),_u(r,e)})).catch(ne)}}function ju(e){const t=b(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ou.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=gu.bind(null,t),t.fa.u_=Ja.bind(null,t.eventManager),t.fa.xa=Xa.bind(null,t.eventManager),t}function Fu(e){const t=b(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=yu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=vu.bind(null,t),t}class Uu{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=sa(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Os(this.persistence,new xs,e.initialUser,this.serializer)}createPersistence(e){return new fs(ms.Hr,this.serializer)}createSharedClientState(e){return new Ys}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Vu extends Uu{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){v(this.persistence.referenceDelegate instanceof gs);const n=this.persistence.referenceDelegate.garbageCollector;return new qo(n,e.asyncQueue,t)}createPersistence(e){const t=void 0!==this.cacheSizeBytes?Oo.withCacheSize(this.cacheSizeBytes):Oo.DEFAULT;return new fs((e=>gs.Hr(e,t)),this.serializer)}}class Bu extends Uu{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await Fu(this.Na.syncEngine),await ka(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Os(this.persistence,new xs,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new qo(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new pe(t,this.persistence);return new fe(e.asyncQueue,n)}createPersistence(e){const t=Ss(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Oo.withCacheSize(this.cacheSizeBytes):Oo.DEFAULT;return new ws(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ia(),oa(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ys}}class zu extends Bu{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof Qs&&(this.sharedClientState.syncEngine={Zs:Du.bind(null,t),Xs:Mu.bind(null,t),eo:Lu.bind(null,t),Li:Ru.bind(null,t),Ys:Cu.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=b(e);if(ju(n),Fu(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Pu(n,e.toArray());n.Fa=!0,await Ua(n.remoteStore,!0);for(const r of t)ga(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(_u(n,i),Rs(n.localStore,i,!0)))),ya(n.remoteStore,i)})),await t,await Pu(n,e),function(e){const t=b(e);t.Sa.forEach(((e,n)=>{ya(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new Je(z.comparator)}(n),n.Fa=!1,await Ua(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=ia();if(!Qs.D(t))throw new _(w.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Ss(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Qs(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class qu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>mu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Au.bind(null,this.syncEngine),await Ua(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Qa}createDatastore(e){const t=sa(e.databaseInfo.databaseId),n=function(e){return new ra(e)}(e.databaseInfo);return function(e,t,n,r){return new ha(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new fa(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>mu(this.syncEngine,e,0)),Js.D()?new Js:new $s)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new lu(e,t,n,r,i,o);return s&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=b(e);f("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await ma(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function Wu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class Gu{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):p("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Ku{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new E,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new tu(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Hu{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new _(w.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=b(e),r={documents:t.map((e=>hi(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,U.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){v(!!t.found),t.found.name,t.found.updateTime;const n=di(e,t.found.name),r=ai(t.found.updateTime),i=t.found.createTime?ai(t.found.createTime):j.min(),o=new jt({mapValue:{fields:t.found.fields}});return Ut.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){v(!!t.missing),v(!!t.readTime);const n=di(e,t.missing),r=ai(t.readTime);return Ut.newNoDocument(n,r)}(e,t):y()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());v(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new xr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=z.fromPath(t);this.mutations.push(new Ar(n,this.precondition(n)))})),await async function(e,t){const n=b(e),r={writes:t.map((e=>bi(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,U.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw y();t=j.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new _(w.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(j.min())?fr.exists(!1):fr.updateTime(t):fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(j.min()))throw new _(w.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fr.updateTime(t)}return fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Qu{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new aa(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new Hu(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!ge(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Mr(t)}return!1}}class Yu{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=c.UNAUTHENTICATED,this.clientId=P.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{f("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(f("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _(w.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new E;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=qa(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function $u(e,t){e.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await ks(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ju(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Zu(e);f("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Fa(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Fa(t.remoteStore,n))),e._onlineComponents=t}function Xu(e){return"FirebaseError"===e.name?e.code===w.FAILED_PRECONDITION||e.code===w.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Zu(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){f("FirestoreClient","Using user provided OfflineComponentProvider");try{await $u(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Xu(n))throw n;m("Error using user provided cache. Falling back to memory cache: "+n),await $u(e,new Uu)}}else f("FirestoreClient","Using default OfflineComponentProvider"),await $u(e,new Uu);return e._offlineComponents}async function ec(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(f("FirestoreClient","Using user provided OnlineComponentProvider"),await Ju(e,e._uninitializedComponentsProvider._online)):(f("FirestoreClient","Using default OnlineComponentProvider"),await Ju(e,new qu))),e._onlineComponents}function tc(e){return Zu(e).then((e=>e.persistence))}function nc(e){return Zu(e).then((e=>e.localStore))}function rc(e){return ec(e).then((e=>e.remoteStore))}function ic(e){return ec(e).then((e=>e.syncEngine))}function oc(e){return ec(e).then((e=>e.datastore))}async function sc(e){const t=await ec(e),n=t.eventManager;return n.onListen=hu.bind(null,t.syncEngine),n.onUnlisten=fu.bind(null,t.syncEngine),n}function ac(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new E;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Gu({next:o=>{t.enqueueAndForget((()=>$a(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new _(w.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new _(w.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new eu(_n(n.path),o,{includeMetadataChanges:!0,Z_:!0});return Ya(e,s)}(await sc(e),e.asyncQueue,t,n,r))),r.promise}function uc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new E;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Gu({next:n=>{t.enqueueAndForget((()=>$a(e,s))),n.fromCache&&"server"===r.source?i.reject(new _(w.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new eu(n,o,{includeMetadataChanges:!0,Z_:!0});return Ya(e,s)}(await sc(e),e.asyncQueue,t,n,r))),r.promise}function cc(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Fr().encode(e):e,function(e,t){return new Ku(e,t)}(function(e,t){if(e instanceof Uint8Array)return Wu(e,t);if(e instanceof ArrayBuffer)return Wu(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,sa(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=b(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=b(e),r=ai(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(iu(r));const i=new ru(r,e.localStore,t.serializer);let o=await t.Oa();for(;o;){const e=await i.na(o);e&&n._updateProgress(e),o=await t.Oa()}const s=await i.complete();return await xu(e,s.sa,void 0),await function(e,t){const n=b(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.ia)}catch(e){return m("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await ic(e),i,r)}))}function lc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const hc=new Map;function dc(e,t,n){if(!n)throw new _(w.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fc(e,t,n,r){if(!0===t&&!0===r)throw new _(w.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function pc(e){if(!z.isDocumentKey(e))throw new _(w.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function mc(e){if(z.isDocumentKey(e))throw new _(w.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function gc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":y()}function yc(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new _(w.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gc(e);throw new _(w.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function vc(e,t){if(t<=0)throw new _(w.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class bc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new _(w.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new _(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new _(w.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new _(w.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new _(w.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wc{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _(w.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new _(w.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new T;switch(e.type){case"firstParty":return new O(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new _(w.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hc.get(e);t&&(f("ComponentProvider","Removing Datastore"),hc.delete(e),t.terminate())}(this),Promise.resolve()}}function _c(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=yc(e,wc))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==a&&m("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=c.MOCK_USER;else{t=s.createMockUserToken(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new _(w.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new c(o)}e._authCredentials=new I(new S(t,n))}}class Ec{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ec(this.firestore,e,this._query)}}class Sc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sc(this.firestore,e,this._key)}}class Tc extends Ec{constructor(e,t,n){super(e,t,_n(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sc(this.firestore,null,new z(e))}withConverter(e){return new Tc(this.firestore,e,this._path)}}function Ic(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=s.getModularInstance(e),1===arguments.length&&(t=P.newId()),dc("doc","path",t),e instanceof wc){const n=U.fromString(t,...r);return pc(n),new Sc(e,null,new z(n))}{if(!(e instanceof Sc||e instanceof Tc))throw new _(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(U.fromString(t,...r));return pc(n),new Sc(e.firestore,e instanceof Tc?e.converter:null,new z(n))}}function xc(e,t){return e=s.getModularInstance(e),t=s.getModularInstance(t),e instanceof Ec&&t instanceof Ec&&e.firestore===t.firestore&&kn(e._query,t._query)&&e.converter===t.converter}class Ac{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new aa(this,"async_queue_retry"),this._u=()=>{const e=oa();e&&f("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=oa();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=oa();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new E;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!ue(e))throw e;f("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw p("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=za.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&y()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function Oc(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class kc{constructor(){this._progressObserver={},this._taskCompletionResolver=new E,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Cc extends wc{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Ac,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Pc(this),this._firestoreClient.terminate()}}function Dc(e){return e._firestoreClient||Pc(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Pc(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new ft(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,lc(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Yu(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Nc(e,t,n){const r=new E;return e.asyncQueue.enqueue((async()=>{try{await $u(e,n),await Ju(e,t),r.resolve()}catch(e){const n=e;if(!Xu(n))throw n;m("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function Rc(e){if(e._initialized||e._terminated)throw new _(w.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Lc{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class jc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jc(ot.fromBase64String(e))}catch(e){throw new _(w.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new jc(ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Fc{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new _(w.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new B(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uc{constructor(e){this._methodName=e}}class Vc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _(w.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _(w.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return N(this._lat,e._lat)||N(this._long,e._long)}}const Bc=/^__.*__$/;class zc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Er(e,this.data,this.fieldMask,t,this.fieldTransforms):new _r(e,this.data,t,this.fieldTransforms)}}class qc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Er(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Wc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}class Gc{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Gc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return hl(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Wc(this.du)&&Bc.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Kc{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||sa(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Gc({du:e,methodName:t,wu:n,path:B.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hc(e){const t=e._freezeSettings(),n=sa(e._databaseId);return new Kc(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Qc(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Su(o.merge||o.mergeFields?2:0,t,n,i);al("Data must be an object, but it was:",s,r);const a=ol(r,s);let u,c;if(o.merge)u=new rt(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=ul(t,r,n);if(!s.contains(i))throw new _(w.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));dl(e,i)||e.push(i)}u=new rt(e),c=s.fieldTransforms.filter((e=>u.covers(e.field)))}else u=null,c=s.fieldTransforms;return new zc(new jt(a),u,c)}class Yc extends Uc{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yc}}function $c(e,t,n){return new Gc({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Jc extends Uc{_toFieldTransform(e){return new hr(e.path,new rr)}isEqual(e){return e instanceof Jc}}class Xc extends Uc{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=$c(this,e,!0),n=this.bu.map((e=>il(e,t))),r=new ir(n);return new hr(e.path,r)}isEqual(e){return e instanceof Xc&&s.deepEqual(this.bu,e.bu)}}class Zc extends Uc{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=$c(this,e,!0),n=this.bu.map((e=>il(e,t))),r=new sr(n);return new hr(e.path,r)}isEqual(e){return e instanceof Zc&&s.deepEqual(this.bu,e.bu)}}class el extends Uc{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new ur(e.serializer,Xn(e.serializer,this.Du));return new hr(e.path,t)}isEqual(e){return e instanceof el&&this.Du===e.Du}}function tl(e,t,n,r){const i=e.Su(1,t,n);al("Data must be an object, but it was:",i,r);const o=[],a=jt.empty();Ye(r,((e,r)=>{const u=ll(t,e,n);r=s.getModularInstance(r);const c=i.fu(u);if(r instanceof Yc)o.push(u);else{const e=il(r,c);null!=e&&(o.push(u),a.set(u,e))}}));const u=new rt(o);return new qc(a,u,i.fieldTransforms)}function nl(e,t,n,r,i,o){const a=e.Su(1,t,n),u=[ul(t,r,n)],c=[i];if(o.length%2!=0)throw new _(w.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let s=0;s<o.length;s+=2)u.push(ul(t,o[s])),c.push(o[s+1]);const l=[],h=jt.empty();for(let f=u.length-1;f>=0;--f)if(!dl(l,u[f])){const e=u[f];let t=c[f];t=s.getModularInstance(t);const n=a.fu(e);if(t instanceof Yc)l.push(e);else{const r=il(t,n);null!=r&&(l.push(e),h.set(e,r))}}const d=new rt(l);return new qc(h,d,a.fieldTransforms)}function rl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return il(n,e.Su(r?4:3,t))}function il(e,t){if(sl(e=s.getModularInstance(e)))return al("Unsupported field value:",t,e),ol(e,t);if(e instanceof Uc)return function(e,t){if(!Wc(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=il(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=s.getModularInstance(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xn(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=L.fromDate(e);return{timestampValue:ii(t.serializer,n)}}if(e instanceof L){const n=new L(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ii(t.serializer,n)}}if(e instanceof Vc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof jc)return{bytesValue:oi(t.serializer,e._byteString)};if(e instanceof Sc){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:ui(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(gc(e)))}(e,t)}function ol(e,t){const n={};return $e(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ye(e,((e,r)=>{const i=il(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function sl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof L||e instanceof Vc||e instanceof jc||e instanceof Sc||e instanceof Uc)}function al(e,t,n){if(!sl(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=gc(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function ul(e,t,n){if((t=s.getModularInstance(t))instanceof Fc)return t._internalPath;if("string"==typeof t)return ll(e,t);throw hl("Field path arguments must be of type string or ",e,!1,void 0,n)}const cl=new RegExp("[~\\*/\\[\\]]");function ll(e,t,n){if(t.search(cl)>=0)throw hl("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Fc(...t.split("."))._internalPath}catch(r){throw hl("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function hl(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=" in field ".concat(r)),s&&(u+=" in document ".concat(i)),u+=")"),new _(w.INVALID_ARGUMENT,a+e+u)}function dl(e,t){return e.some((e=>e.isEqual(t)))}class fl{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Sc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ml("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pl extends fl{data(){return super.data()}}function ml(e,t){return"string"==typeof t?ll(e,t):t instanceof Fc?t._internalPath:t._delegate._internalPath}function gl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new _(w.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yl{}class vl extends yl{}class bl extends vl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new bl(e,t,n)}_apply(e){const t=this._parse(e);return Ol(e._query,t),new Ec(e.firestore,e.converter,An(e._query,t))}_parse(e){const t=Hc(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new _(w.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Al(s,o);const t=[];for(const n of s)t.push(xl(r,e,n));a={arrayValue:{values:t}}}else a=xl(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Al(s,o),a=rl(n,t,s,"in"===o||"not-in"===o);return Kt.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class wl extends yl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wl(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ht.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Ol(n,i),n=An(n,i)}(e._query,t),new Ec(e.firestore,e.converter,An(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class _l extends vl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new _l(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new _(w.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new _(w.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qt(t,n)}(e._query,this._field,this._direction);return new Ec(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new bn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class El extends vl{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new El(e,t,n)}_apply(e){return new Ec(e.firestore,e.converter,On(e._query,this._limit,this._limitType))}}class Sl extends vl{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Sl(e,t,n)}_apply(e){const t=Il(e,this.type,this._docOrFields,this._inclusive);return new Ec(e.firestore,e.converter,function(e,t){return new bn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Tl extends vl{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Tl(e,t,n)}_apply(e){const t=Il(e,this.type,this._docOrFields,this._inclusive);return new Ec(e.firestore,e.converter,function(e,t){return new bn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Il(e,t,n,r){if(n[0]=s.getModularInstance(n[0]),n[0]instanceof fl)return function(e,t,n,r,i){if(!r)throw new _(w.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of Tn(e))if(s.field.isKeyField())o.push(It(t,r.key));else{const e=r.data.field(s.field);if(lt(e))throw new _(w.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new _(w.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new Vt(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Hc(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new _(w.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let u=0;u<i.length;u++){const o=i[u];if(s[u].field.isKeyField()){if("string"!=typeof o)throw new _(w.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!Sn(e)&&-1!==o.indexOf("/"))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(U.fromString(o));if(!z.isDocumentKey(n))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new z(n);a.push(It(t,i))}else{const e=rl(n,r,o);a.push(e)}}return new Vt(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function xl(e,t,n){if("string"==typeof(n=s.getModularInstance(n))){if(""===n)throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sn(t)&&-1!==n.indexOf("/"))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(U.fromString(n));if(!z.isDocumentKey(r))throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return It(e,new z(r))}if(n instanceof Sc)return It(e,n._key);throw new _(w.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gc(n),"."))}function Al(e,t){if(!Array.isArray(e)||0===e.length)throw new _(w.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Ol(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new _(w.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new _(w.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function kl(e,t){if(!(t instanceof bl||t instanceof wl))throw new _(w.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}class Cl{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ct(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw y()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ye(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Vc(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ht(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(dt(e));default:return null}}convertTimestamp(e){const t=at(e);return new L(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=U.fromString(e);v(Pi(n));const r=new pt(n.get(1),n.get(3)),i=new z(n.popFirst(5));return r.isEqual(t)||p("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Dl(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Pl extends Cl{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sc(this.firestore,null,t)}}function Nl(){return new Mc("count")}class Rl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ml extends fl{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Ll(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ml("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Ll extends Ml{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class jl{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Rl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Ll(this._firestore,this._userDataWriter,n.key,n,new Rl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new _(w.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Ll(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Rl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Ll(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Rl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:Fl(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Fl(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}class Ul extends Cl{constructor(e){super(),this.firestore=e}convertBytes(e){return new jc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sc(this.firestore,null,t)}}function Vl(e,t){return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Fu(e);try{const e=await function(e,t){const n=b(e),r=L.now(),i=t.reduce(((e,t)=>e.add(t.key)),Hn());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Fn(),u=Hn();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(u=u.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=br(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new Er(e.key,t,Ft(t.value.mapValue),fr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,u);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:Bn(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new Je(N)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await xu(r,e.changes),await ka(r.remoteStore)}catch(e){const t=qa(e,"Failed to persist write");n.reject(t)}}(await ic(e),t,n))),n.promise}(Dc(e),t)}function Bl(e,t,n){const r=n.docs.get(t._key),i=new Ul(e);return new Ml(e,i,t._key,r,new Rl(n.hasPendingWrites,n.fromCache),t.converter)}function zl(e,t){const n=yc(e.firestore,Cc),r=Dc(n),i=function(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}(t,((e,t)=>new Dr(t,e.aggregateType,e._internalFieldPath)));return function(e,t,n){const r=new E;return e.asyncQueue.enqueueAndForget((async()=>{try{const i=await oc(e);r.resolve(async function(e,t,n){var r;const i=b(e),{request:o,V_:s,parent:a}=function(e,t,n){const{ut:r,parent:i}=Ei(e,t),o={},s=[];let a=0;return n.forEach((e=>{const t="aggregate_"+a++;o[t]=e.alias,"count"===e.aggregateType?s.push({alias:t,count:{}}):"avg"===e.aggregateType?s.push({alias:t,avg:{field:Oi(e.fieldPath)}}):"sum"===e.aggregateType&&s.push({alias:t,sum:{field:Oi(e.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:s,structuredQuery:r.structuredQuery},parent:r.parent},V_:o,parent:i}}(i.serializer,function(e){const t=b(e);return t.Pe||(t.Pe=xn(t,e.explicitOrderBy)),t.Pe}(t),n);i.connection.wo||delete o.parent;const u=(await i.vo("RunAggregationQuery",i.serializer.databaseId,a,o,1)).filter((e=>!!e.result));v(1===u.length);const c=null===(r=u[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce(((e,t)=>(e[s[t]]=c[t],e)),{})}(i,t,n))}catch(e){r.reject(e)}})),r.promise}(r,e._query,i).then((t=>function(e,t,n){const r=new Ul(e);return new Lc(t,r,n)}(n,e,t)))}class ql{constructor(e){this.kind="memory",this._onlineComponentProvider=new qu,(null==e?void 0:e.garbageCollector)?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=new Uu}toJSON(){return{kind:this.kind}}}class Wl{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=Yl(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Gl{constructor(){this.kind="memoryEager",this._offlineComponentProvider=new Uu}toJSON(){return{kind:this.kind}}}class Kl{constructor(e){this.kind="memoryLru",this._offlineComponentProvider=new Vu(e)}toJSON(){return{kind:this.kind}}}class Hl{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new qu,this._offlineComponentProvider=new Bu(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}class Ql{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new qu,this._offlineComponentProvider=new zu(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes)}}function Yl(e){return new Hl(null==e?void 0:e.forceOwnership)}const $l={maxAttempts:5};class Jl{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hc(e)}set(e,t,n){this._verifyNotCommitted();const r=Xl(e,this._firestore),i=Dl(r.converter,t,n),o=Qc(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,fr.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Xl(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return i="string"==typeof(t=s.getModularInstance(t))||t instanceof Fc?nl(this._dataReader,"WriteBatch.update",r._key,t,n,a):tl(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xl(e,this._firestore);return this._mutations=this._mutations.concat(new xr(t._key,fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _(w.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xl(e,t){if((e=s.getModularInstance(e)).firestore!==t)throw new _(w.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Zl extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hc(e)}get(e){const t=Xl(e,this._firestore),n=new Pl(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return y();const r=e[0];if(r.isFoundDocument())return new fl(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new fl(this._firestore,n,t._key,null,t.converter);throw y()}))}set(e,t,n){const r=Xl(e,this._firestore),i=Dl(r.converter,t,n),o=Qc(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=Xl(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return i="string"==typeof(t=s.getModularInstance(t))||t instanceof Fc?nl(this._dataReader,"Transaction.update",r._key,t,n,a):tl(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Xl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xl(e,this._firestore),n=new Ul(this._firestore);return super.get(e).then((e=>new Ml(this._firestore,n,t._key,e._document,new Rl(!1,!1),t.converter)))}}function eh(e,t){if("string"!=typeof e[t])throw new _(w.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}class th{constructor(e){this._client=e,this.type="PersistentCacheIndexManager"}}function nh(e,t){e._client.verifyNotTerminated(),function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){b(e).ts.Ui=t}(await nc(e),t)))}(e._client,t).then((e=>f("setting persistent cache index auto creation isEnabled=".concat(t," succeeded")))).catch((e=>m("setting persistent cache index auto creation isEnabled=".concat(t," failed"),e)))}const rh=new WeakMap;class ih{constructor(){this.Cu=new Map}static get instance(){return oh||(oh=new ih,function(e){if(jr)throw new Error("a TestingHooksSpi instance is already set");jr=e}(oh)),oh}tt(e){this.Cu.forEach((t=>t(e)))}onExistenceFilterMismatch(e){const t=Symbol(),n=this.Cu;return n.set(t,e),()=>n.delete(t)}}let oh=null;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){l=e}(r.SDK_VERSION),r._registerComponent(new i.Component("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Cc(new x(e.getProvider("auth-internal")),new C(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new _(w.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pt(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),r.registerVersion(u,"4.4.3",e),r.registerVersion(u,"4.4.3","cjs2017")}(),t.AbstractUserDataWriter=Cl,t.AggregateField=Mc,t.AggregateQuerySnapshot=Lc,t.Bytes=jc,t.CACHE_SIZE_UNLIMITED=-1,t.CollectionReference=Tc,t.DocumentReference=Sc,t.DocumentSnapshot=Ml,t.FieldPath=Fc,t.FieldValue=Uc,t.Firestore=Cc,t.FirestoreError=_,t.GeoPoint=Vc,t.LoadBundleTask=kc,t.PersistentCacheIndexManager=th,t.Query=Ec,t.QueryCompositeFilterConstraint=wl,t.QueryConstraint=vl,t.QueryDocumentSnapshot=Ll,t.QueryEndAtConstraint=Tl,t.QueryFieldFilterConstraint=bl,t.QueryLimitConstraint=El,t.QueryOrderByConstraint=_l,t.QuerySnapshot=jl,t.QueryStartAtConstraint=Sl,t.SnapshotMetadata=Rl,t.Timestamp=L,t.Transaction=Zl,t.WriteBatch=Jl,t._AutoId=P,t._ByteString=ot,t._DatabaseId=pt,t._DocumentKey=z,t._EmptyAppCheckTokenProvider=class{getToken(){return Promise.resolve(new k(""))}invalidateToken(){}start(e,t){}shutdown(){}},t._EmptyAuthCredentialsProvider=T,t._FieldPath=B,t._TestingHooks=class{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return ih.instance.onExistenceFilterMismatch(e)}},t._cast=yc,t._debugAssert=function(e,t){e||y()},t._isBase64Available=function(){return"undefined"!=typeof atob},t._logWarn=m,t._validateIsNotUsedTogether=fc,t.addDoc=function(e,t){const n=yc(e.firestore,Cc),r=Ic(e),i=Dl(e.converter,t);return Vl(n,[Qc(Hc(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,fr.exists(!1))]).then((()=>r))},t.aggregateFieldEqual=function(e,t){var n,r;return e instanceof Mc&&t instanceof Mc&&e.aggregateType===t.aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())},t.aggregateQuerySnapshotEqual=function(e,t){return xc(e.query,t.query)&&s.deepEqual(e.data(),t.data())},t.and=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>kl("and",e))),wl._create("and",t)},t.arrayRemove=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zc("arrayRemove",t)},t.arrayUnion=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Xc("arrayUnion",t)},t.average=function(e){return new Mc("avg",ul("average",e))},t.clearIndexedDbPersistence=function(e){if(e._initialized&&!e._terminated)throw new _(w.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new E;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!oe.D())return Promise.resolve();const t=e+"main";await oe.delete(t)}(Ss(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise},t.collection=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=s.getModularInstance(e),dc("collection","path",t),e instanceof wc){const n=U.fromString(t,...r);return mc(n),new Tc(e,null,n)}{if(!(e instanceof Sc||e instanceof Tc))throw new _(w.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(U.fromString(t,...r));return mc(n),new Tc(e.firestore,null,n)}},t.collectionGroup=function(e,t){if(e=yc(e,wc),dc("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new _(w.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Ec(e,null,function(e){return new bn(U.emptyPath(),e)}(t))},t.connectFirestoreEmulator=_c,t.count=Nl,t.deleteAllPersistentCacheIndexes=function(e){e._client.verifyNotTerminated(),function(e){return e.asyncQueue.enqueue((async()=>function(e){const t=b(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",(e=>n.deleteAllFieldIndexes(e)))}(await nc(e))))}(e._client).then((e=>f("deleting all persistent cache indexes succeeded"))).catch((e=>m("deleting all persistent cache indexes failed",e)))},t.deleteDoc=function(e){return Vl(yc(e.firestore,Cc),[new xr(e._key,fr.none())])},t.deleteField=function(){return new Yc("deleteField")},t.disableNetwork=function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await tc(e),n=await rc(e);return t.setNetworkEnabled(!1),async function(e){const t=b(e);t.v_.add(0),await ma(t),t.x_.set("Offline")}(n)}))}(Dc(e=yc(e,Cc)))},t.disablePersistentCacheIndexAutoCreation=function(e){nh(e,!1)},t.doc=Ic,t.documentId=function(){return new Fc("__name__")},t.enableIndexedDbPersistence=function(e,t){Rc(e=yc(e,Cc));const n=Dc(e);if(n._uninitializedComponentsProvider)throw new _(w.FAILED_PRECONDITION,"SDK cache is already specified.");m("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new qu;return Nc(n,i,new Bu(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))},t.enableMultiTabIndexedDbPersistence=function(e){Rc(e=yc(e,Cc));const t=Dc(e);if(t._uninitializedComponentsProvider)throw new _(w.FAILED_PRECONDITION,"SDK cache is already specified.");m("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new qu;return Nc(t,r,new zu(r,n.cacheSizeBytes))},t.enableNetwork=function(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await tc(e),n=await rc(e);return t.setNetworkEnabled(!0),function(e){const t=b(e);return t.v_.delete(0),pa(t)}(n)}))}(Dc(e=yc(e,Cc)))},t.enablePersistentCacheIndexAutoCreation=function(e){nh(e,!0)},t.endAt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tl._create("endAt",t,!0)},t.endBefore=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Tl._create("endBefore",t,!1)},t.ensureFirestoreConfigured=Dc,t.executeWrite=Vl,t.getAggregateFromServer=zl,t.getCountFromServer=function(e){return zl(e,{count:Nl()})},t.getDoc=function(e){e=yc(e,Sc);const t=yc(e.firestore,Cc);return ac(Dc(t),e._key).then((n=>Bl(t,e,n)))},t.getDocFromCache=function(e){e=yc(e,Sc);const t=yc(e.firestore,Cc),n=Dc(t),r=new Ul(t);return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=b(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new _(w.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=qa(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await nc(e),t,n))),n.promise}(n,e._key).then((n=>new Ml(t,r,e._key,n,new Rl(null!==n&&n.hasLocalMutations,!0),e.converter)))},t.getDocFromServer=function(e){e=yc(e,Sc);const t=yc(e.firestore,Cc);return ac(Dc(t),e._key,{source:"server"}).then((n=>Bl(t,e,n)))},t.getDocs=function(e){e=yc(e,Ec);const t=yc(e.firestore,Cc),n=Dc(t),r=new Ul(t);return gl(e._query),uc(n,e._query).then((n=>new jl(t,r,e,n)))},t.getDocsFromCache=function(e){e=yc(e,Ec);const t=yc(e.firestore,Cc),n=Dc(t),r=new Ul(t);return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await Ms(e,t,!0),i=new au(t,r.hs),o=i.ha(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=qa(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await nc(e),t,n))),n.promise}(n,e._query).then((n=>new jl(t,r,e,n)))},t.getDocsFromServer=function(e){e=yc(e,Ec);const t=yc(e.firestore,Cc),n=Dc(t),r=new Ul(t);return uc(n,e._query,{source:"server"}).then((n=>new jl(t,r,e,n)))},t.getFirestore=function(e,t){const n="object"==typeof e?e:r.getApp(),i="string"==typeof e?e:t||"(default)",o=r._getProvider(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const e=s.getDefaultEmulatorHostnameAndPort("firestore");e&&_c(o,...e)}return o},t.getPersistentCacheIndexManager=function(e){var t;e=yc(e,Cc);const n=rh.get(e);if(n)return n;const r=Dc(e);if("persistent"!==(null===(t=r._uninitializedComponentsProvider)||void 0===t?void 0:t._offlineKind))return null;const i=new th(r);return rh.set(e,i),i},t.increment=function(e){return new el("increment",e)},t.initializeFirestore=function(e,t,n){n||(n="(default)");const i=r._getProvider(e,"firestore");if(i.isInitialized(n)){const e=i.getImmediate({identifier:n}),r=i.getOptions(n);if(s.deepEqual(r,t))return e;throw new _(w.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new _(w.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new _(w.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:t,instanceIdentifier:n})},t.limit=function(e){return vc("limit",e),El._create("limit",e,"F")},t.limitToLast=function(e){return vc("limitToLast",e),El._create("limitToLast",e,"L")},t.loadBundle=function(e,t){const n=Dc(e=yc(e,Cc)),r=new kc;return cc(n,e._databaseId,t,r),r},t.memoryEagerGarbageCollector=function(){return new Gl},t.memoryLocalCache=function(e){return new ql(e)},t.memoryLruGarbageCollector=function(e){return new Kl(null==e?void 0:e.cacheSizeBytes)},t.namedQuery=function(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=b(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await nc(e),t)))}(Dc(e=yc(e,Cc)),t).then((t=>t?new Ec(e,null,t.query):null))},t.onSnapshot=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;e=s.getModularInstance(e);let u={includeMetadataChanges:!1},c=0;"object"!=typeof n[c]||Oc(n[c])||(u=n[c],c++);const l={includeMetadataChanges:u.includeMetadataChanges};if(Oc(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let h,d,f;if(e instanceof Sc)d=yc(e.firestore,Cc),f=_n(e._key.path),h={next:t=>{n[c]&&n[c](Bl(d,e,t))},error:n[c+1],complete:n[c+2]};else{const t=yc(e,Ec);d=yc(t.firestore,Cc),f=t._query;const r=new Ul(d);h={next:e=>{n[c]&&n[c](new jl(d,r,t,e))},error:n[c+1],complete:n[c+2]},gl(e._query)}return function(e,t,n,r){const i=new Gu(r),o=new eu(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Ya(await sc(e),o))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>$a(await sc(e),o)))}}(Dc(d),f,l,h)},t.onSnapshotsInSync=function(e,t){return function(e,t){const n=new Gu(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){b(e).K_.add(t),t.next()}(await sc(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){b(e).K_.delete(t)}(await sc(e),n)))}}(Dc(e=yc(e,Cc)),Oc(t)?t:{next:t})},t.or=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>kl("or",e))),wl._create("or",t)},t.orderBy=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ml("orderBy",e);return _l._create(n,t)},t.persistentLocalCache=function(e){return new Wl(e)},t.persistentMultipleTabManager=function(){return new Ql},t.persistentSingleTabManager=Yl,t.query=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof yl&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof wl)).length,n=e.filter((e=>e instanceof bl)).length;if(t>1||t>0&&n>0)throw new _(w.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e},t.queryEqual=xc,t.refEqual=function(e,t){return e=s.getModularInstance(e),t=s.getModularInstance(t),(e instanceof Sc||e instanceof Tc)&&(t instanceof Sc||t instanceof Tc)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter},t.runTransaction=function(e,t,n){e=yc(e,Cc);const r=Object.assign(Object.assign({},$l),n);return function(e){if(e.maxAttempts<1)throw new _(w.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new E;return e.asyncQueue.enqueueAndForget((async()=>{const i=await oc(e);new Qu(e.asyncQueue,i,n,t,r).ja()})),r.promise}(Dc(e),(n=>t(new Zl(e,n))),r)},t.serverTimestamp=function(){return new Jc("serverTimestamp")},t.setDoc=function(e,t,n){e=yc(e,Sc);const r=yc(e.firestore,Cc),i=Dl(e.converter,t,n);return Vl(r,[Qc(Hc(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,fr.none())])},t.setIndexConfiguration=function(e,t){var n;const r=Dc(e=yc(e,Cc));if(!r._uninitializedComponentsProvider||"memory"===(null===(n=r._uninitializedComponentsProvider)||void 0===n?void 0:n._offlineKind))return m("Cannot enable indexes when persistence is disabled"),Promise.resolve();const i=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new _(w.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const r of t.indexes){const e=eh(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=ll("setIndexConfiguration",eh(n,"fieldPath"));"CONTAINS"===n.arrayConfig?t.push(new H(e,2)):"ASCENDING"===n.order?t.push(new H(e,0)):"DESCENDING"===n.order&&t.push(new H(e,1))}n.push(new q(q.UNKNOWN_ID,e,t,Y.empty()))}return n}(t);return function(e,t){return e.asyncQueue.enqueue((async()=>async function(e,t){const n=b(e),r=n.indexManager,i=[];return n.persistence.runTransaction("Configure indexes","readwrite",(e=>r.getFieldIndexes(e).next((n=>function(e,t,n,r,i){e=[...e],t=[...t],e.sort(n),t.sort(n);const o=e.length,s=t.length;let a=0,u=0;for(;a<s&&u<o;){const o=n(e[u],t[a]);o<0?i(e[u++]):o>0?r(t[a++]):(a++,u++)}for(;a<s;)r(t[a++]);for(;u<o;)i(e[u++])}(n,t,K,(t=>{i.push(r.addFieldIndex(e,t))}),(t=>{i.push(r.deleteFieldIndex(e,t))})))).next((()=>re.waitFor(i)))))}(await nc(e),t)))}(r,i)},t.setLogLevel=function(e){h.setLogLevel(e)},t.snapshotEqual=function(e,t){return e instanceof Ml&&t instanceof Ml?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof jl&&t instanceof jl&&e._firestore===t._firestore&&xc(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)},t.startAfter=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sl._create("startAfter",t,!1)},t.startAt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Sl._create("startAt",t,!0)},t.sum=function(e){return new Mc("sum",ul("sum",e))},t.terminate=function(e){return r._removeServiceInstance(e.app,"firestore",e._databaseId.database),e._delete()},t.updateDoc=function(e,t,n){e=yc(e,Sc);const r=yc(e.firestore,Cc),i=Hc(r);let o;for(var a=arguments.length,u=new Array(a>3?a-3:0),c=3;c<a;c++)u[c-3]=arguments[c];return o="string"==typeof(t=s.getModularInstance(t))||t instanceof Fc?nl(i,"updateDoc",e._key,t,n,u):tl(i,"updateDoc",e._key,t),Vl(r,[o.toMutation(e._key,fr.exists(!0))])},t.waitForPendingWrites=function(e){return function(e){const t=new E;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=b(e);Ea(n.remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=b(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=qa(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ic(e),t))),t.promise}(Dc(e=yc(e,Cc)))},t.where=function(e,t,n){const r=t,i=ml("where",e);return bl._create(i,r,n)},t.writeBatch=function(e){return Dc(e=yc(e,Cc)),new Jl(e,(t=>Vl(e,t)))}},1042:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,o=n(7827),s=[];t.LogLevel=void 0,(i=t.LogLevel||(t.LogLevel={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";var a={debug:t.LogLevel.DEBUG,verbose:t.LogLevel.VERBOSE,info:t.LogLevel.INFO,warn:t.LogLevel.WARN,error:t.LogLevel.ERROR,silent:t.LogLevel.SILENT},u=t.LogLevel.INFO,c=((r={})[t.LogLevel.DEBUG]="log",r[t.LogLevel.VERBOSE]="log",r[t.LogLevel.INFO]="info",r[t.LogLevel.WARN]="warn",r[t.LogLevel.ERROR]="error",r),l=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),s=c[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));console[s].apply(console,o.__spreadArray(["[".concat(i,"]  ").concat(e.name,":")],n,!1))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,s.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in t.LogLevel))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?a[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.DEBUG],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.DEBUG],e,!1))},e.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.VERBOSE],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.VERBOSE],e,!1))},e.prototype.info=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.INFO],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.INFO],e,!1))},e.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.WARN],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.WARN],e,!1))},e.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,o.__spreadArray([this,t.LogLevel.ERROR],e,!1)),this._logHandler.apply(this,o.__spreadArray([this,t.LogLevel.ERROR],e,!1))},e}();t.Logger=h,t.setLogLevel=function(e){s.forEach((function(t){t.setLogLevel(e)}))},t.setUserLogHandler=function(e,n){for(var r=function(r){var i=null;n&&n.level&&(i=a[n.level]),r.userLogHandler=null===e?null:function(n,r){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a=o.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");r>=(null!==i&&void 0!==i?i:n.logLevel)&&e({level:t.LogLevel[r].toLowerCase(),message:a,args:o,type:n.name})}},i=0,o=s;i<o.length;i++){r(o[i])}}},1494:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(e,t){if(!e)throw o(t)},o=function(e){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,u=a?e[i+2]:0,c=t>>2,l=(3&t)<<4|s>>4;let h=(15&s)<<2|u>>6,d=63&u;a||(d=64,o||(h=64)),r.push(n[c],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new u;const c=t<<2|o>>4;if(r.push(c),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){const t=s(e);return a.encodeByteArray(t,!0)},l=function(e){return c(e).replace(/\./g,"")},h=function(e){try{return a.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=d(e[n],t[n]));return e}function f(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const p=()=>{try{return f().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&h(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},m=e=>{var t,n;return null===(n=null===(t=p())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function y(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function v(){var e;const t=null===(e=p())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}class b extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,b.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(_,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new b(n,o,t)}}const _=/\{\$([^}]+)}/g;function E(e){return JSON.parse(e)}const S=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=E(h(o[0])||""),n=E(h(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function T(e){return null!==e&&"object"===typeof e}class I{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=x),void 0===r.error&&(r.error=x),void 0===r.complete&&(r.complete=x);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function x(){}function A(e,t){return"".concat(e," failed: ").concat(t," argument ")}const O=144e5;t.CONSTANTS=r,t.DecodeBase64StringError=u,t.Deferred=g,t.ErrorFactory=w,t.FirebaseError=b,t.MAX_VALUE_MILLIS=O,t.RANDOM_FACTOR=.5,t.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let l=0;l<16;l++)n[l]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let l=0;l<16;l++)n[l]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let l=16;l<80;l++){const e=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],u=this.chain_[3],c=this.chain_[4];for(let l=0;l<80;l++){l<40?l<20?(r=u^s&(a^u),i=1518500249):(r=s^a^u,i=1859775393):l<60?(r=s&a|u&(s|a),i=2400959708):(r=s^a^u,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[l]&4294967295;c=u,u=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}},t.areCookiesEnabled=function(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)},t.assert=i,t.assertionError=o,t.async=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Promise.resolve(!0).then((()=>{e(...r)})).catch((e=>{t&&t(e)}))}},t.base64=a,t.base64Decode=h,t.base64Encode=c,t.base64urlEncodeWithoutPadding=l,t.calculateBackoffMillis=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(O,n+r)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[l(JSON.stringify({alg:"none",type:"JWT"})),l(JSON.stringify(o)),""].join(".")},t.createSubscribe=function(e,t){const n=new I(e,t);return n.subscribe.bind(n)},t.decode=S,t.deepCopy=function(e){return d(void 0,e)},t.deepEqual=function e(t,n){if(t===n)return!0;const r=Object.keys(t),i=Object.keys(n);for(const o of r){if(!i.includes(o))return!1;const r=t[o],s=n[o];if(T(r)&&T(s)){if(!e(r,s))return!1}else if(r!==s)return!1}for(const o of i)if(!r.includes(o))return!1;return!0},t.deepExtend=d,t.errorPrefix=A,t.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)},t.getDefaultAppConfig=()=>{var e;return null===(e=p())||void 0===e?void 0:e.config},t.getDefaultEmulatorHost=m,t.getDefaultEmulatorHostnameAndPort=e=>{const t=m(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},t.getDefaults=p,t.getExperimentalSetting=e=>{var t;return null===(t=p())||void 0===t?void 0:t["_".concat(e)]},t.getGlobal=f,t.getModularInstance=function(e){return e&&e._delegate?e._delegate:e},t.getUA=y,t.isAdmin=function(e){const t=S(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"object"===typeof self&&self.self===self},t.isBrowserExtension=function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id},t.isElectron=function(){return y().indexOf("Electron/")>=0},t.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){const e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){try{return"object"===typeof indexedDB}catch(e){return!1}},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())},t.isNode=v,t.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!v()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return y().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){const t=S(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){const t=S(e).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},t.issuedAtTime=function(e){const t=S(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=E,t.map=function(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},t.ordinal=function(e){return Number.isFinite(e)?e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e):"".concat(e)},t.promiseWithTimeout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;const n=new g;return setTimeout((()=>n.reject("timeout!")),t),e.then(n.resolve,n.reject),n.promise},t.querystring=function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r);if(o>=55296&&o<=56319){const t=o-55296;r++,i(r<e.length,"Surrogate pair missing trail surrogate.");o=65536+(t<<10)+(e.charCodeAt(r)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},t.validateArgCount=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(A(e,t)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(A(e,t)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))},t.validateNamespace=function(e,t,n){if((!n||t)&&"string"!==typeof t)throw new Error(A(e,"namespace")+"must be a valid firebase namespace.")}},7467:(e,t,n)=>{(function(){var t;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function i(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:r(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}var o="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t},s="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var a,u=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function c(e,t){if(t)e:{var n=u;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];if(!(i in n))break e;n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&s(n,e,{configurable:!0,writable:!0,value:t})}}if("function"==typeof Object.setPrototypeOf)a=Object.setPrototypeOf;else{var l;e:{var h={};try{h.__proto__={a:!0},l=h.a;break e}catch(un){}l=!1}a=l?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var d=a;function f(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function p(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}c("Symbol",(function(e){function t(e,t){this.g=e,s(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(i||"")+"_"+r++,i)}})),c("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=u[t[n]];"function"===typeof i&&"function"!=typeof i.prototype[e]&&s(i.prototype,e,{configurable:!0,writable:!0,value:function(){return f(r(this))}})}return e})),c("Promise",(function(e){function t(e){this.g=0,this.i=void 0,this.h=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var o=u.setTimeout;n.prototype.i=function(e){o(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.B),reject:e(this.l)}},t.prototype.B=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.D(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.A(e):this.m(e)}},t.prototype.A=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.g)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.g);this.g=e,this.i=t,2===this.g&&this.C(),this.u()},t.prototype.C=function(){var e=this;o((function(){if(e.v()){var t=u.console;"undefined"!==typeof t&&t.error(e.i)}}),1)},t.prototype.v=function(){if(this.o)return!1;var e=u.CustomEvent,t=u.Event,n=u.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=u.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.u=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)s.h(this.h[e]);this.h=null}};var s=new n;return t.prototype.D=function(e){var t=this.j();e.la(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,s=new t((function(e,t){i=e,o=t}));return this.la(r(e,i),r(n,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.la=function(e,t){function n(){switch(r.g){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.g)}}var r=this;null==this.h?s.h(n):this.h.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var o=i(e),s=o.next();!s.done;s=o.next())r(s.value).la(t,n)}))},t.all=function(e){var n=i(e),o=n.next();return o.done?r([]):new t((function(e,t){function i(t){return function(n){s[t]=n,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,r(o.value).la(i(s.length-1),t),o=n.next()}while(!o.done)}))},t})),c("Array.prototype.values",(function(e){return e||function(){return p(this,(function(e,t){return t}))}})),c("Array.prototype.keys",(function(e){return e||function(){return p(this,(function(e){return e}))}})),c("WeakMap",(function(e){function t(e){if(this.g=(c+=Math.random()+1).toString(),e){e=i(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function o(e){if(!m(e,u)){var t=new n;s(e,u,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&o(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(i){return!1}}())return e;var u="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var c=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(o(e),!m(e,u))throw Error("WeakMap key fail: "+e);return e[u][this.g]=t,this},t.prototype.get=function(e){return r(e)&&m(e,u)?e[u][this.g]:void 0},t.prototype.has=function(e){return r(e)&&m(e,u)&&m(e[u],this.g)},t.prototype.delete=function(e){return!!(r(e)&&m(e,u)&&m(e[u],this.g))&&delete e[u][this.g]},t})),c("Map",(function(e){function t(){var e={};return e.V=e.next=e.head=e}function n(e,t){var n=e.g;return f((function(){if(n){for(;n.head!=e.g;)n=n.V;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?s.has(t)?n=s.get(t):(n=""+ ++a,s.set(t,n)):n="p_"+t;var r=e.h[n];if(r&&m(e.h,n))for(e=0;e<r.length;e++){var i=r[e];if(t!==t&&i.key!==i.key||t===i.key)return{id:n,list:r,index:e,K:i}}return{id:n,list:r,index:-1,K:void 0}}function o(e){if(this.h={},this.g=t(),this.size=0,e){e=i(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(i([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&"s"==o.value[1]&&!((o=r.next()).done||4!=o.value[0].x||"t"!=o.value[1]||!r.next().done)}catch(s){return!1}}())return e;var s=new WeakMap;o.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.K?n.K.value=t:(n.K={next:this.g,V:this.g.V,head:this.g,key:e,value:t},n.list.push(n.K),this.g.V.next=n.K,this.g.V=n.K,this.size++),this},o.prototype.delete=function(e){return!(!(e=r(this,e)).K||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.K.V.next=e.K.next,e.K.next.V=e.K.V,e.K.head=null,this.size--,!0)},o.prototype.clear=function(){this.h={},this.g=this.g.V=t(),this.size=0},o.prototype.has=function(e){return!!r(this,e).K},o.prototype.get=function(e){return(e=r(this,e).K)&&e.value},o.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},o.prototype.keys=function(){return n(this,(function(e){return e.key}))},o.prototype.values=function(){return n(this,(function(e){return e.value}))},o.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},o.prototype[Symbol.iterator]=o.prototype.entries;var a=0;return o})),c("Array.prototype.find",(function(e){return e||function(e,t){e:{var n=this;n instanceof String&&(n=String(n));for(var r=n.length,i=0;i<r;i++){var o=n[i];if(e.call(t,o,i,n)){e=o;break e}}e=void 0}return e}})),c("Array.prototype.entries",(function(e){return e||function(){return p(this,(function(e,t){return[e,t]}))}})),c("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],i="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof i){e=i.call(e);for(var o=0;!(i=e.next()).done;)r.push(t.call(n,i.value,o++))}else for(i=e.length,o=0;o<i;o++)r.push(t.call(n,e[o],o));return r}})),c("Set",(function(e){function t(e){if(this.g=new Map,e){e=i(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(i([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),o=r.next();return!o.done&&o.value[0]==t&&o.value[1]==t&&(!(o=r.next()).done&&o.value[0]!=t&&4==o.value[0].x&&o.value[1]==o.value[0]&&r.next().done)}catch(s){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(r){return e.call(t,r,r,n)}))},t)}));var g=g||{},y=this||self;function v(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function b(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function w(e){return Object.prototype.hasOwnProperty.call(e,_)&&e[_]||(e[_]=++E)}var _="closure_uid_"+(1e9*Math.random()>>>0),E=0;function S(e,t,n){return e.call.apply(e.bind,arguments)}function T(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function I(e,t,n){return(I=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S:T).apply(null,arguments)}function x(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function A(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.dc=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function O(){0!=k&&(C[w(this)]=this),this.s=this.s,this.o=this.o}var k=0,C={};O.prototype.s=!1,O.prototype.va=function(){if(!this.s&&(this.s=!0,this.O(),0!=k)){var e=w(this);if(0!=k&&this.o&&0<this.o.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete C[e]}},O.prototype.O=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var D=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function P(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function N(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(v(r)){var i=e.length||0,o=r.length||0;e.length=i+o;for(var s=0;s<o;s++)e[i+s]=r[s]}else e.push(r)}}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!y.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{var n=function(){};y.addEventListener("test",n,t),y.removeEventListener("test",n,t)}catch(r){}return e}();function L(e){return/^[\s\xa0]*$/.test(e)}function j(){var e=y.navigator;return e&&(e=e.userAgent)?e:""}function F(e){return-1!=j().indexOf(e)}function U(e){return U[" "](e),e}U[" "]=function(){};var V,B,z=F("Opera"),q=F("Trident")||F("MSIE"),W=F("Edge"),G=W||q,K=F("Gecko")&&!(-1!=j().toLowerCase().indexOf("webkit")&&!F("Edge"))&&!(F("Trident")||F("MSIE"))&&!F("Edge"),H=-1!=j().toLowerCase().indexOf("webkit")&&!F("Edge");function Q(){var e=y.document;return e?e.documentMode:void 0}e:{var Y="",$=function(){var e=j();return K?/rv:([^\);]+)(\)|;)/.exec(e):W?/Edge\/([\d\.]+)/.exec(e):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):H?/WebKit\/(\S+)/.exec(e):z?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if($&&(Y=$?$[1]:""),q){var J=Q();if(null!=J&&J>parseFloat(Y)){V=String(J);break e}}V=Y}if(y.document&&q){var X=Q();B=X||(parseInt(V,10)||void 0)}else B=void 0;var Z=B;function ee(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(K){e:{try{U(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:te[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ee.Z.h.call(this)}}A(ee,R);var te={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ne="closure_listenable_"+(1e6*Math.random()|0),re=0;function ie(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.oa=i,this.key=++re,this.ha=this.ka=!1}function oe(e){e.ha=!0,e.listener=null,e.proxy=null,e.src=null,e.oa=null}function se(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ae(e){var t,n={};for(t in e)n[t]=e[t];return n}var ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ce(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ue.length;o++)n=ue[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function le(e){this.src=e,this.g={},this.h=0}function he(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=D(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(oe(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function de(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ha&&o.listener==t&&o.capture==!!n&&o.oa==r)return i}return-1}le.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=de(e,t,r,i);return-1<s?(t=e[s],n||(t.ka=!1)):((t=new ie(t,this.src,o,!!r,i)).ka=n,e.push(t)),t};var fe="closure_lm_"+(1e6*Math.random()|0),pe={};function me(e,t,n,r,i){if(r&&r.once)return ye(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)me(e,t[o],n,r,i);return null}return n=Te(n),e&&e[ne]?e.P(t,n,b(r)?!!r.capture:!!r,i):ge(e,t,n,!1,r,i)}function ge(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=b(i)?!!i.capture:!!i,a=Ee(e);if(a||(e[fe]=a=new le(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=_e;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(we(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ye(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)ye(e,t[o],n,r,i);return null}return n=Te(n),e&&e[ne]?e.R(t,n,b(r)?!!r.capture:!!r,i):ge(e,t,n,!0,r,i)}function ve(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ve(e,t[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=Te(n),e&&e[ne]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=de(o=e.g[t],n,r,i))&&(oe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Ee(e))&&(t=e.g[t.toString()],e=-1,t&&(e=de(t,n,r,i)),(n=-1<e?t[e]:null)&&be(n))}function be(e){if("number"!==typeof e&&e&&!e.ha){var t=e.src;if(t&&t[ne])he(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(we(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ee(t))?(he(n,e),0==n.h&&(n.src=null,t[fe]=null)):oe(e)}}}function we(e){return e in pe?pe[e]:pe[e]="on"+e}function _e(e,t){if(e.ha)e=!0;else{t=new ee(t,this);var n=e.listener,r=e.oa||e.src;e.ka&&be(e),e=n.call(r,t)}return e}function Ee(e){return(e=e[fe])instanceof le?e:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(e){return"function"===typeof e?e:(e[Se]||(e[Se]=function(t){return e.handleEvent(t)}),e[Se])}function Ie(){O.call(this),this.i=new le(this),this.T=this,this.J=null}function xe(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.T,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var i=t;ce(t=new R(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Ae(s,r,!0,t)&&i}if(i=Ae(s=t.g=e,r,!0,t)&&i,i=Ae(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Ae(s=t.g=n[o],r,!1,t)&&i}function Ae(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.ha&&s.capture==n){var a=s.listener,u=s.oa||s.src;s.ka&&he(e.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}A(Ie,O),Ie.prototype[ne]=!0,Ie.prototype.removeEventListener=function(e,t,n,r){ve(this,e,t,n,r)},Ie.prototype.O=function(){if(Ie.Z.O.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)oe(n[r]);delete t.g[e],t.h--}}this.J=null},Ie.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ie.prototype.R=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Oe=y.JSON.stringify;function ke(e,t){this.i=e,this.j=t,this.h=0,this.g=null}function Ce(){this.h=this.g=null}function De(){var e=Fe,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}ke.prototype.get=function(){if(0<this.h){this.h--;var e=this.g;this.g=e.next,e.next=null}else e=this.i();return e},Ce.prototype.add=function(e,t){var n=Pe.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n};var Pe=new ke((function(){return new Ne}),(function(e){return e.reset()}));function Ne(){this.next=this.g=this.h=null}function Re(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Me(e){y.setTimeout((function(){throw e}),0)}Ne.prototype.set=function(e,t){this.h=e,this.g=t,this.next=null},Ne.prototype.reset=function(){this.next=this.g=this.h=null};var Le,je=!1,Fe=new Ce;function Ue(e,t){Le||function(){var e=y.Promise.resolve(void 0);Le=function(){e.then(Ve)}}(),je||(Le(),je=!0),Fe.add(e,t)}function Ve(){for(var e;e=De();){try{e.h.call(e.g)}catch(n){Me(n)}var t=Pe;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}je=!1}function Be(e,t){Ie.call(this),this.h=e||1,this.g=t||y,this.j=I(this.tb,this),this.l=Date.now()}function ze(e){e.ia=!1,e.U&&(e.g.clearTimeout(e.U),e.U=null)}function qe(e,t,n){if("function"===typeof e)n&&(e=I(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=I(e.handleEvent,e)}return 2147483647<Number(t)?-1:y.setTimeout(e,t||0)}function We(e,t,n){O.call(this),this.m=null!=n?e.bind(n):e,this.j=t,this.h=null,this.i=!1,this.g=null}if(A(Be,Ie),(t=Be.prototype).ia=!1,t.U=null,t.tb=function(){if(this.ia){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.U=this.g.setTimeout(this.j,this.h-e):(this.U&&(this.g.clearTimeout(this.U),this.U=null),xe(this,"tick"),this.ia&&(ze(this),this.start()))}},t.start=function(){this.ia=!0,this.U||(this.U=this.g.setTimeout(this.j,this.h),this.l=Date.now())},t.O=function(){Be.Z.O.call(this),ze(this),delete this.g},We.prototype=o(O.prototype),We.prototype.constructor=We,d)d(We,O);else for(var Ge in O)if("prototype"!=Ge)if(Object.defineProperties){var Ke=Object.getOwnPropertyDescriptor(O,Ge);Ke&&Object.defineProperty(We,Ge,Ke)}else We[Ge]=O[Ge];function He(e){e.g=qe((function(){e.g=null,e.i&&(e.i=!1,He(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}function Qe(e){O.call(this),this.h=e,this.g={}}We.Z=O.prototype,We.prototype.l=function(e){this.h=arguments,this.g?this.i=!0:He(this)},We.prototype.O=function(){O.prototype.O.call(this),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},A(Qe,O);var Ye=[];function $e(e,t,n,r){Array.isArray(n)||(n&&(Ye[0]=n.toString()),n=Ye);for(var i=0;i<n.length;i++){var o=me(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Je(e){se(e.g,(function(e,t){this.g.hasOwnProperty(t)&&be(e)}),e),e.g={}}function Xe(){this.g=!0}function Ze(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Oe(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Qe.prototype.O=function(){Qe.Z.O.call(this),Je(this)},Qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xe.prototype.Ha=function(){this.g=!1},Xe.prototype.info=function(){};var et={},tt=null;function nt(){return tt=tt||new Ie}function rt(e){R.call(this,et.Wa,e)}function it(e){var t=nt();xe(t,new rt(t,e))}function ot(e,t){R.call(this,et.STAT_EVENT,e),this.stat=t}function st(e){var t=nt();xe(t,new ot(t,e))}function at(e,t){R.call(this,et.Xa,e),this.size=t}function ut(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return y.setTimeout((function(){e()}),t)}et.Wa="serverreachability",A(rt,R),et.STAT_EVENT="statevent",A(ot,R),et.Xa="timingevent",A(at,R);var ct={NO_ERROR:0,ub:1,Hb:2,Gb:3,Bb:4,Fb:5,Ib:6,Ta:7,TIMEOUT:8,Lb:9},lt={zb:"complete",Vb:"success",Ua:"error",Ta:"abort",Nb:"ready",Ob:"readystatechange",TIMEOUT:"timeout",Jb:"incrementaldata",Mb:"progress",Cb:"downloadprogress",cc:"uploadprogress"};function ht(){}function dt(e){return e.h||(e.h=e.i())}function ft(){}ht.prototype.h=null;var pt,mt={OPEN:"a",yb:"b",Ua:"c",Kb:"d"};function gt(){R.call(this,"d")}function yt(){R.call(this,"c")}function vt(){}function bt(e,t,n,r){this.l=e,this.j=t,this.m=n,this.Y=r||1,this.W=new Qe(this),this.R=_t,e=G?125:void 0,this.X=new Be(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.M=this.G=this.aa=this.C=null,this.D=[],this.g=null,this.o=0,this.s=this.v=null,this.ea=-1,this.J=!1,this.P=0,this.N=null,this.da=this.L=this.ca=this.T=!1,this.h=new wt}function wt(){this.i=null,this.g="",this.h=!1}A(gt,R),A(yt,R),A(vt,ht),vt.prototype.g=function(){return new XMLHttpRequest},vt.prototype.i=function(){return{}},pt=new vt;var _t=45e3,Et={},St={};function Tt(e,t,n){e.M=1,e.A=qt(Ft(t)),e.u=n,e.T=!0,It(e,null)}function It(e,t){e.G=Date.now(),kt(e),e.B=Ft(e.A);var n=e.B,r=e.Y;Array.isArray(r)||(r=[String(r)]),nn(n.i,"t",r),e.o=0,n=e.l.J,e.h=new wt,e.g=or(e.l,n?t:null,!e.u),0<e.P&&(e.N=new We(I(e.Sa,e,e.g),e.P)),$e(e.W,e.g,"readystatechange",e.qb),t=e.I?ae(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ja(e.B,e.v,e.u,t)):(e.v="GET",e.g.ja(e.B,e.v,null,t)),it(1),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.Y,e.u)}function xt(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.l.Ka)}function At(e,t,n){for(var r,i=!0;!e.J&&e.o<n.length;){if((r=Ot(e,n))==St){4==t&&(e.s=4,st(14),i=!1),Ze(e.j,e.m,null,"[Incomplete Response]");break}if(r==Et){e.s=4,st(15),Ze(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ze(e.j,e.m,r,null),Rt(e,r)}xt(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,st(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.da&&(e.da=!0,(t=e.l).g==e&&t.ea&&!t.N&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jn(t),t.N=!0,st(11))):(Ze(e.j,e.m,n,"[Invalid Chunked Response]"),Nt(e),Pt(e))}function Ot(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?St:(n=Number(t.substring(n,r)),isNaN(n)?Et:(r+=1)+n>t.length?St:(t=t.slice(r,r+n),e.o=r+n,t))}function kt(e){e.aa=Date.now()+e.R,Ct(e,e.R)}function Ct(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ut(I(e.ob,e),t)}function Dt(e){e.C&&(y.clearTimeout(e.C),e.C=null)}function Pt(e){0==e.l.H||e.J||er(e.l,e)}function Nt(e){Dt(e);var t=e.N;t&&"function"==typeof t.va&&t.va(),e.N=null,ze(e.X),Je(e.W),e.g&&(t=e.g,e.g=null,t.abort(),t.va())}function Rt(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||dn(n.i,e)))if(!e.L&&dn(n.i,e)&&3==n.H){try{var r=n.Ma.g.parse(t)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Zn(n),qn(n)}$n(n),st(18)}}else n.Ia=i[1],0<n.Ia-n.X&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ut(I(n.lb,n),6e3));if(1>=hn(n.i)&&n.ra){try{n.ra()}catch(g){}n.ra=void 0}}else nr(n,11)}else if((e.L||n.g==e)&&Zn(n),!L(t))for(i=n.Ma.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.X=o[0],o=o[1],2==n.H)if("c"==o[0]){n.L=o[1],n.sa=o[2];var s=o[3];null!=s&&(n.ua=s,n.l.info("VER="+n.ua));var a=o[4];null!=a&&(n.Ja=a,n.l.info("SVER="+n.Ja));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.M=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(fn(h,h.h),h.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.Ga=d,zt(r.I,r.D,d))}}n.H=3,n.h&&n.h.Ea(),n.ea&&(n.T=Date.now()-e.G,n.l.info("Handshake RTT: "+n.T+"ms"));var f=e;if((r=n).za=ir(r,r.J?r.sa:null,r.aa),f.L){pn(r.i,f);var p=f,m=r.M;m&&p.setTimeout(m),p.C&&(Dt(p),kt(p)),r.g=f}else Yn(r);0<n.j.length&&Gn(n)}else"stop"!=o[0]&&"close"!=o[0]||nr(n,7);else 3==n.H&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?nr(n,7):zn(n):"noop"!=o[0]&&n.h&&n.h.Da(o),n.A=0)}it(4)}catch(g){}}function Mt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(v(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.wa&&"function"==typeof e.wa)return e.wa();if(!e.ba||"function"!=typeof e.ba){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(v(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.ba&&"function"==typeof e.ba)return e.ba();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(v(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(t=bt.prototype).setTimeout=function(e){this.R=e},t.qb=function(e){e=e.target;var t=this.N;t&&3==Ln(e)?t.l():this.Sa(e)},t.Sa=function(e){try{if(e==this.g)e:{var t=Ln(this.g),n=this.g.La(),r=this.g.fa();if(!(3>t)&&(3!=t||G||this.g&&(this.h.h||this.g.ma()||jn(this.g)))){this.J||4!=t||7==n||it(8==n||0>=r?3:2),Dt(this);var i=this.g.fa();this.ea=i;t:if(xt(this)){var o=jn(this.g);e="";var s=o.length,a=4==Ln(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Nt(this),Pt(this);var u="";break t}this.h.i=new y.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.length=0,this.h.g+=e,this.o=0,u=this.h.g}else u=this.g.ma();if(this.i=200==i,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.Y,t,i),this.i){if(this.ca&&!this.L){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.s=3,st(12),Nt(this),Pt(this);break e}Ze(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rt(this,i)}this.T?(At(this,t,u),G&&this.i&&3==t&&($e(this.W,this.X,"tick",this.pb),this.X.start())):(Ze(this.j,this.m,u,null),Rt(this,u)),4==t&&Nt(this),this.i&&!this.J&&(4==t?er(this.l,this):(this.i=!1,kt(this)))}else(function(e){var t={};e=(e.g&&2<=Ln(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!L(e[n])){var r=Re(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var o=t[i]||[];t[i]=o,o.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==i&&0<u.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),Nt(this),Pt(this)}}}catch(d){}},t.pb=function(){if(this.g){var e=Ln(this.g),t=this.g.ma();this.o<t.length&&(Dt(this),At(this,e,t),this.i&&4!=e&&kt(this))}},t.cancel=function(){this.J=!0,Nt(this)},t.ob=function(){this.C=null;var e=Date.now();0<=e-this.aa?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.M&&(it(3),st(17)),Nt(this),this.s=2,Pt(this)):Ct(this,this.aa-e)};var Lt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jt(e){var t;this.g=this.s=this.j="",this.o=null,this.m=this.h="",this.l=!1,e instanceof jt?(this.l=e.l,Ut(this,e.j),this.s=e.s,this.g=e.g,Vt(this,e.o),this.h=e.h,Bt(this,rn(e.i)),this.m=e.m):e&&(t=String(e).match(Lt))?(this.l=!1,Ut(this,t[1]||"",!0),this.s=Wt(t[2]||""),this.g=Wt(t[3]||"",!0),Vt(this,t[4]),this.h=Wt(t[5]||"",!0),Bt(this,t[6]||"",!0),this.m=Wt(t[7]||"")):(this.l=!1,this.i=new Xt(null,this.l))}function Ft(e){return new jt(e)}function Ut(e,t,n){e.j=n?Wt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.o=t}else e.o=null}function Bt(e,t,n){t instanceof Xt?(e.i=t,function(e,t){t&&!e.j&&(Zt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(en(this,t),nn(this,n,e))}),e)),e.j=t}(e.i,e.l)):(n||(t=Gt(t,$t)),e.i=new Xt(t,e.l))}function zt(e,t,n){e.i.set(t,n)}function qt(e){return zt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}jt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Gt(t,Ht,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Gt(t,Ht,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.o)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Gt(n,"/"==n.charAt(0)?Yt:Qt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Gt(n,Jt)),e.join("")},jt.prototype.resolve=function(e){var t=Ft(this),n=!!e.j;n?Ut(t,e.j):n=!!e.s,n?t.s=e.s:n=!!e.g,n?t.g=e.g:n=null!=e.o;var r=e.h;if(n)Vt(t,e.o);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?Bt(t,rn(e.i)):n=!!e.m,n&&(t.m=e.m),t};var Ht=/[#\/\?@]/g,Qt=/[#\?:]/g,Yt=/[#\?]/g,$t=/[#\?@]/g,Jt=/#/g;function Xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function en(e,t){Zt(e),t=on(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tn(e,t){return Zt(e),t=on(e,t),e.g.has(t)}function nn(e,t,n){en(e,t),0<n.length&&(e.i=null,e.g.set(on(e,t),P(n)),e.h+=n.length)}function rn(e){var t=new Xt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function on(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function sn(e,t){this.g=e,this.map=t}function an(e){this.l=e||cn,y.PerformanceNavigationTiming?e=0<(e=y.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(y.g&&y.g.Na&&y.g.Na()&&y.g.Na().hc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(t=Xt.prototype).add=function(e,t){Zt(this),this.i=null,e=on(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},t.forEach=function(e,t){Zt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},t.wa=function(){Zt(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},t.ba=function(e){Zt(this);var t=[];if("string"===typeof e)tn(this,e)&&(t=t.concat(this.g.get(on(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},t.set=function(e,t){return Zt(this),this.i=null,tn(this,e=on(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&0<(e=this.ba(e)).length?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.ba(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.i=e.join("&")};var un,cn=10;function ln(e){return!!e.h||!!e.g&&e.g.size>=e.j}function hn(e){return e.h?1:e.g?e.g.size:0}function dn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function fn(e,t){e.g?e.g.add(t):e.h=t}function pn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function mn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){for(var t=e.i,n=(e=i(e.g.values())).next();!n.done;n=e.next())t=t.concat(n.value.D);return t}return P(e.i)}function gn(){}function yn(){this.g=new gn}function vn(e,t,n){var r=n||"";try{Mt(e,(function(e,n){var i=e;b(e)&&(i=Oe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function bn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function wn(e){this.l=e.ic||null,this.j=e.rb||!1}function _n(e,t){Ie.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=En,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}an.prototype.cancel=function(){if(this.i=mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(var e=i(this.g.values()),t=e.next();!t.done;t=e.next())t.value.cancel();this.g.clear()}},gn.prototype.stringify=function(e){return y.JSON.stringify(e,void 0)},gn.prototype.parse=function(e){return y.JSON.parse(e,void 0)},A(wn,ht),wn.prototype.g=function(){return new _n(this.l,this.j)},wn.prototype.i=(un={},function(){return un}),A(_n,Ie);var En=0;function Sn(e){e.j.read().then(e.$a.bind(e)).catch(e.na.bind(e))}function Tn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,In(e)}function In(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(t=_n.prototype).open=function(e,t){if(this.readyState!=En)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,In(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||y).fetch(new Request(this.B,t)).then(this.cb.bind(this),this.na.bind(this))},t.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tn(this)),this.readyState=En},t.cb=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,In(this)),this.g&&(this.readyState=3,In(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.ab.bind(this),this.na.bind(this));else if("undefined"!==typeof y.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Sn(this)}else e.text().then(this.bb.bind(this),this.na.bind(this))},t.$a=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tn(this):In(this),3==this.readyState&&Sn(this)}},t.bb=function(e){this.g&&(this.response=this.responseText=e,Tn(this))},t.ab=function(e){this.g&&(this.response=e,Tn(this))},t.na=function(){this.g&&Tn(this)},t.setRequestHeader=function(e,t){this.v.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var xn=y.JSON.parse;function An(e){Ie.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.D=!1,this.B=0,this.A=null,this.L=On,this.M=this.N=!1}A(An,Ie);var On="",kn=/^https?$/i,Cn=["POST","PUT"];function Dn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Pn(e),Rn(e)}function Pn(e){e.D||(e.D=!0,xe(e,"complete"),xe(e,"error"))}function Nn(e){if(e.h&&"undefined"!=typeof g&&(!e.C[1]||4!=Ln(e)||2!=e.fa()))if(e.v&&4==Ln(e))qe(e.Oa,0,e);else if(xe(e,"readystatechange"),4==Ln(e)){e.h=!1;try{var t,n=e.fa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.I).match(Lt)[1]||null;!o&&y.self&&y.self.location&&(o=y.self.location.protocol.slice(0,-1)),i=!kn.test(o?o.toLowerCase():"")}t=i}if(t)xe(e,"complete"),xe(e,"success");else{e.m=6;try{var s=2<Ln(e)?e.g.statusText:""}catch(a){s=""}e.j=s+" ["+e.fa()+"]",Pn(e)}}finally{Rn(e)}}}function Rn(e,t){if(e.g){Mn(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||xe(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Mn(e){e.g&&e.M&&(e.g.ontimeout=null),e.A&&(y.clearTimeout(e.A),e.A=null)}function Ln(e){return e.g?e.g.readyState:0}function jn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.L){case On:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Fn(e){var t="";return se(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Un(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Fn(n),"string"===typeof e?(encodeURIComponent(String(t)),null!=n&&encodeURIComponent(String(n))):zt(e,t,n))}function Vn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Bn(e){this.Ja=0,this.j=[],this.l=new Xe,this.sa=this.za=this.I=this.aa=this.g=this.Ga=this.D=this.qa=this.o=this.W=this.s=null,this.ib=this.Y=0,this.gb=Vn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.ca=!0,this.Ia=this.X=-1,this.da=this.A=this.C=0,this.eb=Vn("baseRetryDelayMs",5e3,e),this.kb=Vn("retryDelaySeedMs",1e4,e),this.hb=Vn("forwardChannelMaxRetries",2,e),this.Aa=Vn("forwardChannelRequestTimeoutMs",2e4,e),this.ya=e&&e.xmlHttpFactory||void 0,this.Ka=e&&e.useFetchStreams||!1,this.M=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.L="",this.i=new an(e&&e.concurrentRequestLimit),this.Ma=new yn,this.R=e&&e.fastHandshake||!1,this.P=e&&e.encodeInitMessageHeaders||!1,this.R&&this.P&&(this.P=!1),this.fb=e&&e.ec||!1,e&&e.Ha&&this.l.Ha(),e&&e.forceLongPolling&&(this.ca=!1),this.ea=!this.R&&this.ca&&e&&e.detectBufferingProxy||!1,this.ta=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ta=e.longPollingTimeout),this.ra=void 0,this.T=0,this.N=!1,this.pa=this.B=null}function zn(e){if(Wn(e),3==e.H){var t=e.Y++,n=Ft(e.I);if(zt(n,"SID",e.L),zt(n,"RID",t),zt(n,"TYPE","terminate"),Hn(e,n),(t=new bt(e,e.l,t)).M=2,t.A=qt(Ft(n)),n=!1,y.navigator&&y.navigator.sendBeacon)try{n=y.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&y.Image&&((new Image).src=t.A,n=!0),n||(t.g=or(t.l,null),t.g.ja(t.A)),t.G=Date.now(),kt(t)}rr(e)}function qn(e){e.g&&(Jn(e),e.g.cancel(),e.g=null)}function Wn(e){qn(e),e.u&&(y.clearTimeout(e.u),e.u=null),Zn(e),e.i.cancel(),e.m&&("number"===typeof e.m&&y.clearTimeout(e.m),e.m=null)}function Gn(e){ln(e.i)||e.m||(e.m=!0,Ue(e.Qa,e),e.C=0)}function Kn(e,t){var n;n=t?t.m:e.Y++;var r=Ft(e.I);zt(r,"SID",e.L),zt(r,"RID",n),zt(r,"AID",e.X),Hn(e,r),e.o&&e.s&&Un(r,e.o,e.s),n=new bt(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.D.concat(e.j)),t=Qn(e,n,1e3),n.setTimeout(Math.round(.5*e.Aa)+Math.round(.5*e.Aa*Math.random())),fn(e.i,n),Tt(n,r,t)}function Hn(e,t){e.qa&&se(e.qa,(function(e,n){zt(t,n,e)})),e.h&&Mt({},(function(e,n){zt(t,n,e)}))}function Qn(e,t,n){n=Math.min(e.j.length,n);var r=e.h?I(e.h.Ya,e.h,e):null;e:for(var i=e.j,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].g,l=i[u].map;if(0>(c-=o))o=Math.max(0,i[u].g-100),a=!1;else try{vn(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break e}}return e=e.j.splice(0,n),t.D=e,r}function Yn(e){e.g||e.u||(e.da=1,Ue(e.Pa,e),e.A=0)}function $n(e){return!(e.g||e.u||3<=e.A)&&(e.da++,e.u=ut(I(e.Pa,e),tr(e,e.A)),e.A++,!0)}function Jn(e){null!=e.B&&(y.clearTimeout(e.B),e.B=null)}function Xn(e){e.g=new bt(e,e.l,"rpc",e.da),null===e.o&&(e.g.I=e.s),e.g.P=0;var t=Ft(e.za);zt(t,"RID","rpc"),zt(t,"SID",e.L),zt(t,"AID",e.X),zt(t,"CI",e.G?"0":"1"),!e.G&&e.ta&&zt(t,"TO",e.ta),zt(t,"TYPE","xmlhttp"),Hn(e,t),e.o&&e.s&&Un(t,e.o,e.s),e.M&&e.g.setTimeout(e.M);var n=e.g;e=e.sa,n.M=1,n.A=qt(Ft(t)),n.u=null,n.T=!0,It(n,e)}function Zn(e){null!=e.v&&(y.clearTimeout(e.v),e.v=null)}function er(e,t){var n=null;if(e.g==t){Zn(e),Jn(e),e.g=null;var r=2}else{if(!dn(e.i,t))return;n=t.D,pn(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;xe(r=nt(),new at(r,n,t,i)),Gn(e)}else Yn(e);else if(3==(i=t.s)||0==i&&0<t.ea||!(1==r&&function(e,t){return!(hn(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.D.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.gb?0:e.hb))&&(e.m=ut(I(e.Qa,e,t),tr(e,e.C)),e.C++,!0))}(e,t)||2==r&&$n(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:nr(e,5);break;case 4:nr(e,10);break;case 3:nr(e,6);break;default:nr(e,2)}}function tr(e,t){var n=e.eb+Math.floor(Math.random()*e.kb);return e.isActive()||(n*=2),n*t}function nr(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=I(e.sb,e);n||(n=new jt("//www.google.com/images/cleardot.gif"),y.location&&"http"==y.location.protocol||Ut(n,"https"),qt(n)),function(e,t){var n=new Xe;if(y.Image){var r=new Image;r.onload=x(bn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=x(bn,n,r,"TestLoadImage: error",!1,t),r.onabort=x(bn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=x(bn,n,r,"TestLoadImage: timeout",!1,t),y.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else st(2);e.H=0,e.h&&e.h.Ca(t),rr(e),Wn(e)}function rr(e){if(e.H=0,e.pa=[],e.h){var t=mn(e.i);0==t.length&&0==e.j.length||(N(e.pa,t),N(e.pa,e.j),e.i.i.length=0,P(e.j),e.j.length=0),e.h.Ba()}}function ir(e,t,n){var r=n instanceof jt?Ft(n):new jt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Vt(r,r.o);else{var i=y.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new jt(null);r&&Ut(o,r),t&&(o.g=t),i&&Vt(o,i),n&&(o.h=n),r=o}return n=e.D,t=e.Ga,n&&t&&zt(r,n,t),zt(r,"VER",e.ua),Hn(e,r),r}function or(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ka&&!e.ya?new An(new wn({rb:n})):new An(e.ya)).Ra(e.J),t}function sr(){}function ar(){if(q&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function ur(e,t){Ie.call(this),this.g=new Bn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Fa&&(e?e["X-WebChannel-Client-Profile"]=t.Fa:e={"X-WebChannel-Client-Profile":t.Fa}),this.g.W=e,(e=t&&t.fc)&&!L(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!L(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hr(this)}function cr(e){gt.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function lr(){yt.call(this),this.status=1}function hr(e){this.g=e}function dr(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function fr(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function pr(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(t=An.prototype).Ra=function(e){this.N=e},t.ja=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():pt.g(),this.C=this.u?dt(this.u):dt(pt),this.g.onreadystatechange=I(this.Oa,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(a){return void Dn(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)n.set(o,r[o]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(var s=(o=i(r.keys())).next();!s.done;s=o.next())s=s.value,n.set(s,r.get(s))}for(r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),o=y.FormData&&e instanceof y.FormData,!(0<=D(Cn,t))||r||o||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r=(t=i(n)).next();!r.done;r=t.next())r=(n=i(r.value)).next().value,n=n.next().value,this.g.setRequestHeader(r,n);this.L&&(this.g.responseType=this.L),"withCredentials"in this.g&&this.g.withCredentials!==this.N&&(this.g.withCredentials=this.N);try{Mn(this),0<this.B&&((this.M=function(e){return q&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=I(this.xa,this)):this.A=qe(this.xa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Dn(this,a)}},t.xa=function(){"undefined"!=typeof g&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xe(this,"timeout"),this.abort(8))},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xe(this,"complete"),xe(this,"abort"),Rn(this))},t.O=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rn(this,!0)),An.Z.O.call(this)},t.Oa=function(){this.s||(this.G||this.v||this.l?Nn(this):this.nb())},t.nb=function(){Nn(this)},t.isActive=function(){return!!this.g},t.fa=function(){try{return 2<Ln(this)?this.g.status:-1}catch(un){return-1}},t.ma=function(){try{return this.g?this.g.responseText:""}catch(un){return""}},t.Za=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xn(t)}},t.La=function(){return this.m},t.Va=function(){return"string"===typeof this.j?this.j:String(this.j)},(t=Bn.prototype).ua=8,t.H=1,t.Qa=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.Y=Math.floor(1e5*Math.random()),e=this.Y++;var t,n=new bt(this,this.l,e),r=this.s;if(this.W&&(r?ce(r=ae(r),this.W):r=this.W),null!==this.o||this.P||(n.I=r,r=null),this.R)e:{for(var i=t=0;i<this.j.length;i++){var o=this.j[i];if(void 0===(o="__data__"in o.map&&"string"===typeof(o=o.map.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.j.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Qn(this,n,t),zt(i=Ft(this.I),"RID",e),zt(i,"CVER",22),this.D&&zt(i,"X-HTTP-Session-Id",this.D),Hn(this,i),r&&(this.P?t="headers="+encodeURIComponent(String(Fn(r)))+"&"+t:this.o&&Un(i,this.o,r)),fn(this.i,n),this.fb&&zt(i,"TYPE","init"),this.R?(zt(i,"$req",t),zt(i,"SID","null"),n.ca=!0,Tt(n,i,null)):Tt(n,i,t),this.H=2}}else 3==this.H&&(e?Kn(this,e):0==this.j.length||ln(this.i)||Kn(this))},t.Pa=function(){if(this.u=null,Xn(this),this.ea&&!(this.N||null==this.g||0>=this.T)){var e=2*this.T;this.l.info("BP detection timer enabled: "+e),this.B=ut(I(this.mb,this),e)}},t.mb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.N=!0,st(10),qn(this),Xn(this))},t.lb=function(){null!=this.v&&(this.v=null,qn(this),$n(this),st(19))},t.sb=function(e){e?(this.l.info("Successfully pinged google.com"),st(2)):(this.l.info("Failed to ping google.com"),st(1))},t.isActive=function(){return!!this.h&&this.h.isActive(this)},(t=sr.prototype).Ea=function(){},t.Da=function(){},t.Ca=function(){},t.Ba=function(){},t.isActive=function(){return!0},t.Ya=function(){},ar.prototype.g=function(e,t){return new ur(e,t)},A(ur,Ie),ur.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;st(0),e.aa=t,e.qa=n||{},e.G=e.ca,e.I=ir(e,null,e.aa),Gn(e)},ur.prototype.close=function(){zn(this.g)},ur.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Oe(e),e=n);t.j.push(new sn(t.ib++,e)),3==t.H&&Gn(t)},ur.prototype.O=function(){this.g.h=null,delete this.j,zn(this.g),delete this.g,ur.Z.O.call(this)},A(cr,gt),A(lr,yt),A(hr,sr),hr.prototype.Ea=function(){xe(this.g,"a")},hr.prototype.Da=function(e){xe(this.g,new cr(e))},hr.prototype.Ca=function(e){xe(this.g,new lr(e))},hr.prototype.Ba=function(){xe(this.g,"b")},A(dr,(function(){this.blockSize=-1})),dr.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},dr.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)fr(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){fr(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){fr(this,r),i=0;break}}this.h=i,this.i+=t},dr.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var mr={};function gr(e){return-128<=e&&128>e?function(e,t){var n=mr;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new pr([0|e],0>e?-1:0)})):new pr([0|e],0>e?-1:0)}function yr(e){if(isNaN(e)||!isFinite(e))return br;if(0>e)return Tr(yr(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=vr;return new pr(t,0)}var vr=4294967296,br=gr(0),wr=gr(1),_r=gr(16777216);function Er(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Sr(e){return-1==e.h}function Tr(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new pr(n,~e.h).add(wr)}function Ir(e,t){return e.add(Tr(t))}function xr(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ar(e,t){this.g=e,this.h=t}function Or(e,t){if(Er(t))throw Error("division by zero");if(Er(e))return new Ar(br,br);if(Sr(e))return t=Or(Tr(e),t),new Ar(Tr(t.g),Tr(t.h));if(Sr(t))return t=Or(e,Tr(t)),new Ar(Tr(t.g),t.h);if(30<e.g.length){if(Sr(e)||Sr(t))throw Error("slowDivide_ only works with positive integers.");for(var n=wr,r=t;0>=r.$(e);)n=kr(n),r=kr(r);var i=Cr(n,1),o=Cr(r,1);for(r=Cr(r,2),n=Cr(n,2);!Er(r);){var s=o.add(r);0>=s.$(e)&&(i=i.add(n),o=s),r=Cr(r,1),n=Cr(n,1)}return t=Ir(e,i.S(t)),new Ar(i,t)}for(i=br;0<=e.$(t);){for(n=Math.max(1,Math.floor(e.ga()/t.ga())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=yr(n)).S(t);Sr(s)||0<s.$(e);)s=(o=yr(n-=r)).S(t);Er(o)&&(o=wr),i=i.add(o),e=Ir(e,s)}return new Ar(i,e)}function kr(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.F(r)<<1|e.F(r-1)>>>31;return new pr(n,e.h)}function Cr(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.F(o+n)>>>t|e.F(o+n+1)<<32-t:e.F(o+n);return new pr(i,e.h)}(t=pr.prototype).ga=function(){if(Sr(this))return-Tr(this).ga();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.F(n);e+=(0<=r?r:vr+r)*t,t*=vr}return e},t.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Er(this))return"0";if(Sr(this))return"-"+Tr(this).toString(e);for(var t=yr(Math.pow(e,6)),n=this,r="";;){var i=Or(n,t).g,o=((0<(n=Ir(n,i.S(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Er(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},t.F=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},t.$=function(e){return Sr(e=Ir(this,e))?-1:Er(e)?0:1},t.abs=function(){return Sr(this)?Tr(this):this},t.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.F(i))+(65535&e.F(i)),s=(o>>>16)+(this.F(i)>>>16)+(e.F(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new pr(n,-2147483648&n[n.length-1]?-1:0)},t.S=function(e){if(Er(this)||Er(e))return br;if(Sr(this))return Sr(e)?Tr(this).S(Tr(e)):Tr(Tr(this).S(e));if(Sr(e))return Tr(this.S(Tr(e)));if(0>this.$(_r)&&0>e.$(_r))return yr(this.ga()*e.ga());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.F(r)>>>16,s=65535&this.F(r),a=e.F(i)>>>16,u=65535&e.F(i);n[2*r+2*i]+=s*u,xr(n,2*r+2*i),n[2*r+2*i+1]+=o*u,xr(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,xr(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,xr(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new pr(n,0)},t.jb=function(e){return Or(this,e).h},t.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.F(r)&e.F(r);return new pr(n,this.h&e.h)},t.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.F(r)|e.F(r);return new pr(n,this.h|e.h)},t.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.F(r)^e.F(r);return new pr(n,this.h^e.h)},ar.prototype.createWebChannel=ar.prototype.g,ur.prototype.send=ur.prototype.u,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,ct.NO_ERROR=0,ct.TIMEOUT=8,ct.HTTP_ERROR=6,lt.COMPLETE="complete",ft.EventType=mt,mt.OPEN="a",mt.CLOSE="b",mt.ERROR="c",mt.MESSAGE="d",Ie.prototype.listen=Ie.prototype.P,An.prototype.listenOnce=An.prototype.R,An.prototype.getLastError=An.prototype.Va,An.prototype.getLastErrorCode=An.prototype.La,An.prototype.getStatus=An.prototype.fa,An.prototype.getResponseJson=An.prototype.Za,An.prototype.getResponseText=An.prototype.ma,An.prototype.send=An.prototype.ja,An.prototype.setWithCredentials=An.prototype.Ra,dr.prototype.digest=dr.prototype.l,dr.prototype.reset=dr.prototype.reset,dr.prototype.update=dr.prototype.j,pr.prototype.add=pr.prototype.add,pr.prototype.multiply=pr.prototype.S,pr.prototype.modulo=pr.prototype.jb,pr.prototype.compare=pr.prototype.$,pr.prototype.toNumber=pr.prototype.ga,pr.prototype.toString=pr.prototype.toString,pr.prototype.getBits=pr.prototype.F,pr.fromNumber=yr,pr.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Tr(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=yr(Math.pow(n,8)),i=br,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=yr(Math.pow(n,s)),i=i.S(s).add(yr(a))):i=(i=i.S(r)).add(yr(a))}return i},e.exports.createWebChannelTransport=function(){return new ar},e.exports.getStatEventTarget=function(){return nt()},e.exports.ErrorCode=ct,e.exports.EventType=lt,e.exports.Event=et,e.exports.Stat={Ab:0,Db:1,Eb:2,Xb:3,bc:4,Zb:5,$b:6,Yb:7,Wb:8,ac:9,PROXY:10,NOPROXY:11,Ub:12,Qb:13,Rb:14,Pb:15,Sb:16,Tb:17,wb:18,vb:19,xb:20},e.exports.FetchXmlHttpFactory=wn,e.exports.WebChannel=ft,e.exports.XhrIo=An,e.exports.Md5=dr,e.exports.Integer=pr}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},9329:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7511);Object.keys(r).forEach((function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}))},125:(e,t,n)=>{"use strict";n.r(t),n.d(t,{createBrowserHistory:()=>T,createHashHistory:()=>C,createLocation:()=>g,createMemoryHistory:()=>P,createPath:()=>m,locationsAreEqual:()=>y,parsePath:()=>p});var r=n(8168);function i(e){return"/"===e.charAt(0)}function o(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}const s=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],s=t&&t.split("/")||[],a=e&&i(e),u=t&&i(t),c=a||u;if(e&&i(e)?s=r:r.length&&(s.pop(),s=s.concat(r)),!s.length)return"/";if(s.length){var l=s[s.length-1];n="."===l||".."===l||""===l}else n=!1;for(var h=0,d=s.length;d>=0;d--){var f=s[d];"."===f?o(s,d):".."===f?(o(s,d),h++):h&&(o(s,d),h--)}if(!c)for(;h--;h)s.unshift("..");!c||""===s[0]||s[0]&&i(s[0])||s.unshift("");var p=s.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function a(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const u=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,r){return e(t,n[r])}));if("object"===typeof t||"object"===typeof n){var r=a(t),i=a(n);return r!==t||i!==n?e(r,i):Object.keys(Object.assign({},t,n)).every((function(r){return e(t[r],n[r])}))}return!1};var c=n(7033);function l(e){return"/"===e.charAt(0)?e:"/"+e}function h(e){return"/"===e.charAt(0)?e.substr(1):e}function d(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function f(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function p(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}function m(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function g(e,t,n,i){var o;"string"===typeof e?(o=p(e)).state=t:(void 0===(o=(0,r.A)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==t&&void 0===o.state&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=s(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function y(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&u(e.state,t.state)}function v(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"===typeof e?e(t,n):e;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var b=!("undefined"===typeof window||!window.document||!window.document.createElement);function w(e,t){t(window.confirm(e))}var _="popstate",E="hashchange";function S(){try{return window.history.state||{}}catch(e){return{}}}function T(e){void 0===e&&(e={}),b||(0,c.A)(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,s=o.forceRefresh,a=void 0!==s&&s,u=o.getUserConfirmation,h=void 0===u?w:u,p=o.keyLength,y=void 0===p?6:p,T=e.basename?f(l(e.basename)):"";function I(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return T&&(o=d(o,T)),g(o,r,n)}function x(){return Math.random().toString(36).substr(2,y)}var A=v();function O(e){(0,r.A)(V,e),V.length=t.length,A.notifyListeners(V.location,V.action)}function k(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(I(e.state))}function C(){P(I(S()))}var D=!1;function P(e){if(D)D=!1,O();else{A.confirmTransitionTo(e,"POP",h,(function(t){t?O({action:"POP",location:e}):function(e){var t=V.location,n=R.indexOf(t.key);-1===n&&(n=0);var r=R.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(D=!0,L(i))}(e)}))}}var N=I(S()),R=[N.key];function M(e){return T+m(e)}function L(e){t.go(e)}var j=0;function F(e){1===(j+=e)&&1===e?(window.addEventListener(_,k),i&&window.addEventListener(E,C)):0===j&&(window.removeEventListener(_,k),i&&window.removeEventListener(E,C))}var U=!1;var V={length:t.length,action:"POP",location:N,createHref:M,push:function(e,r){var i="PUSH",o=g(e,r,x(),V.location);A.confirmTransitionTo(o,i,h,(function(e){if(e){var r=M(o),s=o.key,u=o.state;if(n)if(t.pushState({key:s,state:u},null,r),a)window.location.href=r;else{var c=R.indexOf(V.location.key),l=R.slice(0,c+1);l.push(o.key),R=l,O({action:i,location:o})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",o=g(e,r,x(),V.location);A.confirmTransitionTo(o,i,h,(function(e){if(e){var r=M(o),s=o.key,u=o.state;if(n)if(t.replaceState({key:s,state:u},null,r),a)window.location.replace(r);else{var c=R.indexOf(V.location.key);-1!==c&&(R[c]=o.key),O({action:i,location:o})}else window.location.replace(r)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=A.setPrompt(e);return U||(F(1),U=!0),function(){return U&&(U=!1,F(-1)),t()}},listen:function(e){var t=A.appendListener(e);return F(1),function(){F(-1),t()}}};return V}var I="hashchange",x={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+h(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:h,decodePath:l},slash:{encodePath:l,decodePath:l}};function A(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function O(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function k(e){window.location.replace(A(window.location.href)+"#"+e)}function C(e){void 0===e&&(e={}),b||(0,c.A)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,o=void 0===i?w:i,s=n.hashType,a=void 0===s?"slash":s,u=e.basename?f(l(e.basename)):"",h=x[a],p=h.encodePath,y=h.decodePath;function _(){var e=y(O());return u&&(e=d(e,u)),g(e)}var E=v();function S(e){(0,r.A)(V,e),V.length=t.length,E.notifyListeners(V.location,V.action)}var T=!1,C=null;function D(){var e,t,n=O(),r=p(n);if(n!==r)k(r);else{var i=_(),s=V.location;if(!T&&(t=i,(e=s).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(C===m(i))return;C=null,function(e){if(T)T=!1,S();else{var t="POP";E.confirmTransitionTo(e,t,o,(function(n){n?S({action:t,location:e}):function(e){var t=V.location,n=M.lastIndexOf(m(t));-1===n&&(n=0);var r=M.lastIndexOf(m(e));-1===r&&(r=0);var i=n-r;i&&(T=!0,L(i))}(e)}))}}(i)}}var P=O(),N=p(P);P!==N&&k(N);var R=_(),M=[m(R)];function L(e){t.go(e)}var j=0;function F(e){1===(j+=e)&&1===e?window.addEventListener(I,D):0===j&&window.removeEventListener(I,D)}var U=!1;var V={length:t.length,action:"POP",location:R,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=A(window.location.href)),n+"#"+p(u+m(e))},push:function(e,t){var n="PUSH",r=g(e,void 0,void 0,V.location);E.confirmTransitionTo(r,n,o,(function(e){if(e){var t=m(r),i=p(u+t);if(O()!==i){C=t,function(e){window.location.hash=e}(i);var o=M.lastIndexOf(m(V.location)),s=M.slice(0,o+1);s.push(t),M=s,S({action:n,location:r})}else S()}}))},replace:function(e,t){var n="REPLACE",r=g(e,void 0,void 0,V.location);E.confirmTransitionTo(r,n,o,(function(e){if(e){var t=m(r),i=p(u+t);O()!==i&&(C=t,k(i));var o=M.indexOf(m(V.location));-1!==o&&(M[o]=t),S({action:n,location:r})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=E.setPrompt(e);return U||(F(1),U=!0),function(){return U&&(U=!1,F(-1)),t()}},listen:function(e){var t=E.appendListener(e);return F(1),function(){F(-1),t()}}};return V}function D(e,t,n){return Math.min(Math.max(e,t),n)}function P(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,i=t.initialEntries,o=void 0===i?["/"]:i,s=t.initialIndex,a=void 0===s?0:s,u=t.keyLength,c=void 0===u?6:u,l=v();function h(e){(0,r.A)(w,e),w.length=w.entries.length,l.notifyListeners(w.location,w.action)}function d(){return Math.random().toString(36).substr(2,c)}var f=D(a,0,o.length-1),p=o.map((function(e){return g(e,void 0,"string"===typeof e?d():e.key||d())})),y=m;function b(e){var t=D(w.index+e,0,w.entries.length-1),r=w.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?h({action:"POP",location:r,index:t}):h()}))}var w={length:p.length,action:"POP",location:p[f],index:f,entries:p,createHref:y,push:function(e,t){var r="PUSH",i=g(e,t,d(),w.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=w.index+1,n=w.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),h({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=g(e,t,d(),w.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(w.entries[w.index]=i,h({action:r,location:i}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(e){var t=w.index+e;return t>=0&&t<w.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return w}},3876:(e,t,n)=>{"use strict";var r=n(630),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(e){return r.isMemo(e)?s:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var s=l(n);h&&(s=s.concat(h(n)));for(var a=u(t),m=u(n),g=0;g<s.length;++g){var y=s[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!a||!a[y])){var v=d(n,y);try{c(t,y,v)}catch(b){}}}}return t}},2138:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case u:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=d,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||_(e)===l},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===o},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)},t.typeOf=_},630:(e,t,n)=>{"use strict";e.exports=n(2138)},8803:(e,t)=>{function n(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r(e){return!!e&&!!e[Q]}function i(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===$}(e)||Array.isArray(e)||!!e[H]||!!(null===(t=e.constructor)||void 0===t?void 0:t[H])||h(e)||d(e))}function o(e,t,n){void 0===n&&(n=!1),0===s(e)?(n?Object.keys:J)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function s(e){var t=e[Q];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:h(e)?2:d(e)?3:0}function a(e,t){return 2===s(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function u(e,t){return 2===s(e)?e.get(t):e[t]}function c(e,t,n){var r=s(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function l(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function h(e){return q&&e instanceof Map}function d(e){return W&&e instanceof Set}function f(e){return e.i||e.u}function p(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=X(e);delete t[Q];for(var n=J(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function m(e,t){return void 0===t&&(t=!1),y(e)||r(e)||!i(e)||(s(e)>1&&(e.set=e.add=e.clear=e.delete=g),Object.freeze(e),t&&o(e,(function(e,t){return m(t,!0)}),!0)),e}function g(){n(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function v(e){var t=Z[e];return t||n(18,e),t}function b(e,t){Z[e]||(Z[e]=t)}function w(){return B}function _(e,t){t&&(v("Patches"),e.o=[],e.v=[],e.s=t)}function E(e){S(e),e.p.forEach(I),e.p=null}function S(e){e===B&&(B=e.l)}function T(e){return B={p:[],l:B,h:e,_:!0,m:0}}function I(e){var t=e[Q];0===t.t||1===t.t?t.j():t.O=!0}function x(e,t){t.m=t.p.length;var r=t.p[0],o=void 0!==e&&e!==r;return t.h.S||v("ES5").P(t,e,o),o?(r[Q].g&&(E(t),n(4)),i(e)&&(e=A(t,e),t.l||k(t,e)),t.o&&v("Patches").M(r[Q].u,e,t.o,t.v)):e=A(t,r,[]),E(t),t.o&&t.s(t.o,t.v),e!==K?e:void 0}function A(e,t,n){if(y(t))return t;var r=t[Q];if(!r)return o(t,(function(i,o){return O(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.g)return k(e,r.u,!0),r.u;if(!r.R){r.R=!0,r.A.m--;var i=4===r.t||5===r.t?r.i=p(r.k):r.i,s=i,a=!1;3===r.t&&(s=new Set(i),i.clear(),a=!0),o(s,(function(t,o){return O(e,r,i,t,o,n,a)})),k(e,i,!1),n&&e.o&&v("Patches").F(r,n,e.o,e.v)}return r.i}function O(e,t,n,o,s,u,l){if(r(s)){var h=A(e,s,u&&t&&3!==t.t&&!a(t.N,o)?u.concat(o):void 0);if(c(n,o,h),!r(h))return;e._=!1}else l&&n.add(s);if(i(s)&&!y(s)){if(!e.h.D&&e.m<1)return;A(e,s),t&&t.A.l||k(e,s)}}function k(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e._&&m(t,n)}function C(e,t){var n=e[Q];return(n?f(n):e)[t]}function D(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function P(e){e.g||(e.g=!0,e.l&&P(e.l))}function N(e){e.i||(e.i=p(e.u))}function R(e,t,n){var r=h(t)?v("MapSet").K(t,n):d(t)?v("MapSet").$(t,n):e.S?function(e,t){var n=Array.isArray(e),r={t:n?1:0,A:t?t.A:w(),g:!1,R:!1,N:{},l:t,u:e,k:null,i:null,j:null,C:!1},i=r,o=ee;n&&(i=[r],o=te);var s=Proxy.revocable(i,o),a=s.revoke,u=s.proxy;return r.k=u,r.j=a,u}(t,n):v("ES5").I(t,n);return(n?n.A:w()).p.push(r),r}function M(e){return r(e)||n(22,e),function e(t){if(!i(t))return t;var n,r=t[Q],a=s(t);if(r){if(!r.g&&(r.t<4||!v("ES5").J(r)))return r.u;r.R=!0,n=L(t,a),r.R=!1}else n=L(t,a);return o(n,(function(t,i){r&&u(r.u,t)===i||c(n,t,e(i))})),3===a?new Set(n):n}(e)}function L(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return p(e)}function j(){function e(e,t){var n=s[e];return n?n.enumerable=t:s[e]=n={configurable:!0,enumerable:t,get:function(){return ee.get(this[Q],e)},set:function(t){ee.set(this[Q],e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var r=e[t][Q];if(!r.g)switch(r.t){case 5:i(r)&&P(r);break;case 4:n(r)&&P(r)}}}function n(e){for(var t=e.u,n=e.k,r=J(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==Q){var s=t[o];if(void 0===s&&!a(t,o))return!0;var u=n[o],c=u&&u[Q];if(c?c.u!==s:!l(u,s))return!0}}var h=!!t[Q];return r.length!==J(t).length+(h?0:1)}function i(e){var t=e.k;if(t.length!==e.u.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var s={};b("ES5",{I:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=X(n);delete o[Q];for(var s=J(o),a=0;a<s.length;a++){var u=s[a];o[u]=e(u,t||!!o[u].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={t:r?5:4,A:n?n.A:w(),g:!1,R:!1,N:{},l:n,u:t,k:i,i:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},P:function(e,n,s){s?r(n)&&n[Q].A===e&&t(e.p):(e.o&&function e(t){if(t&&"object"==typeof t){var n=t[Q];if(n){var r=n.u,s=n.k,u=n.N,c=n.t;if(4===c)o(s,(function(t){t!==Q&&(void 0!==r[t]||a(r,t)?u[t]||e(s[t]):(u[t]=!0,P(n)))})),o(r,(function(e){void 0!==s[e]||a(s,e)||(u[e]=!1,P(n))}));else if(5===c){if(i(n)&&(P(n),u.length=!0),s.length<r.length)for(var l=s.length;l<r.length;l++)u[l]=!1;else for(var h=r.length;h<s.length;h++)u[h]=!0;for(var d=Math.min(s.length,r.length),f=0;f<d;f++)s.hasOwnProperty(f)||(u[f]=!0),void 0===u[f]&&e(s[f])}}}}(e.p[0]),t(e.p))},J:function(e){return 4===e.t?n(e):i(e)}})}function F(){function e(t){if(!i(t))return t;if(Array.isArray(t))return t.map(e);if(h(t))return new Map(Array.from(t.entries()).map((function(t){return[t[0],e(t[1])]})));if(d(t))return new Set(Array.from(t).map(e));var n=Object.create(Object.getPrototypeOf(t));for(var r in t)n[r]=e(t[r]);return a(t,H)&&(n[H]=t[H]),n}function t(t){return r(t)?e(t):t}var c="add";b("Patches",{W:function(t,r){return r.forEach((function(r){for(var i=r.path,o=r.op,a=t,l=0;l<i.length-1;l++){var h=s(a),d=i[l];"string"!=typeof d&&"number"!=typeof d&&(d=""+d),0!==h&&1!==h||"__proto__"!==d&&"constructor"!==d||n(24),"function"==typeof a&&"prototype"===d&&n(24),"object"!=typeof(a=u(a,d))&&n(15,i.join("/"))}var f=s(a),p=e(r.value),m=i[i.length-1];switch(o){case"replace":switch(f){case 2:return a.set(m,p);case 3:n(16);default:return a[m]=p}case c:switch(f){case 1:return"-"===m?a.push(p):a.splice(m,0,p);case 2:return a.set(m,p);case 3:return a.add(p);default:return a[m]=p}case"remove":switch(f){case 1:return a.splice(m,1);case 2:return a.delete(m);case 3:return a.delete(r.value);default:return delete a[m]}default:n(17,o)}})),t},F:function(e,n,r,i){switch(e.t){case 0:case 4:case 2:return function(e,n,r,i){var s=e.u,l=e.i;o(e.N,(function(e,o){var h=u(s,e),d=u(l,e),f=o?a(s,e)?"replace":c:"remove";if(h!==d||"replace"!==f){var p=n.concat(e);r.push("remove"===f?{op:f,path:p}:{op:f,path:p,value:d}),i.push(f===c?{op:"remove",path:p}:"remove"===f?{op:c,path:p,value:t(h)}:{op:"replace",path:p,value:t(h)})}}))}(e,n,r,i);case 5:case 1:return function(e,n,r,i){var o=e.u,s=e.N,a=e.i;if(a.length<o.length){var u=[a,o];o=u[0],a=u[1];var l=[i,r];r=l[0],i=l[1]}for(var h=0;h<o.length;h++)if(s[h]&&a[h]!==o[h]){var d=n.concat([h]);r.push({op:"replace",path:d,value:t(a[h])}),i.push({op:"replace",path:d,value:t(o[h])})}for(var f=o.length;f<a.length;f++){var p=n.concat([f]);r.push({op:c,path:p,value:t(a[f])})}o.length<a.length&&i.push({op:"replace",path:n.concat(["length"]),value:o.length})}(e,n,r,i);case 3:return function(e,t,n,r){var i=e.u,o=e.i,s=0;i.forEach((function(e){if(!o.has(e)){var i=t.concat([s]);n.push({op:"remove",path:i,value:e}),r.unshift({op:c,path:i,value:e})}s++})),s=0,o.forEach((function(e){if(!i.has(e)){var o=t.concat([s]);n.push({op:c,path:o,value:e}),r.unshift({op:"remove",path:o,value:e})}s++}))}(e,n,r,i)}},M:function(e,t,n,r){n.push({op:"replace",path:[],value:t===K?void 0:t}),r.push({op:"replace",path:[],value:e})}})}function U(){function e(e,t){function n(){this.constructor=e}a(e,t),e.prototype=(n.prototype=t.prototype,new n)}function t(e){e.i||(e.N=new Map,e.i=new Map(e.u))}function r(e){e.i||(e.i=new Set,e.u.forEach((function(t){if(i(t)){var n=R(e.A.h,t,e);e.p.set(t,n),e.i.add(n)}else e.i.add(t)})))}function s(e){e.O&&n(3,JSON.stringify(f(e)))}var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},u=function(){function n(e,t){return this[Q]={t:2,l:t,A:t?t.A:w(),g:!1,R:!1,i:void 0,N:void 0,u:e,k:this,C:!1,O:!1},this}e(n,Map);var r=n.prototype;return Object.defineProperty(r,"size",{get:function(){return f(this[Q]).size}}),r.has=function(e){return f(this[Q]).has(e)},r.set=function(e,n){var r=this[Q];return s(r),f(r).has(e)&&f(r).get(e)===n||(t(r),P(r),r.N.set(e,!0),r.i.set(e,n),r.N.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var n=this[Q];return s(n),t(n),P(n),n.u.has(e)?n.N.set(e,!1):n.N.delete(e),n.i.delete(e),!0},r.clear=function(){var e=this[Q];s(e),f(e).size&&(t(e),P(e),e.N=new Map,o(e.u,(function(t){e.N.set(t,!1)})),e.i.clear())},r.forEach=function(e,t){var n=this;f(this[Q]).forEach((function(r,i){e.call(t,n.get(i),i,n)}))},r.get=function(e){var n=this[Q];s(n);var r=f(n).get(e);if(n.R||!i(r))return r;if(r!==n.u.get(e))return r;var o=R(n.A.h,r,n);return t(n),n.i.set(e,o),o},r.keys=function(){return f(this[Q]).keys()},r.values=function(){var e,t=this,n=this.keys();return(e={})[Y]=function(){return t.values()},e.next=function(){var e=n.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,n=this.keys();return(e={})[Y]=function(){return t.entries()},e.next=function(){var e=n.next();if(e.done)return e;var r=t.get(e.value);return{done:!1,value:[e.value,r]}},e},r[Y]=function(){return this.entries()},n}(),c=function(){function t(e,t){return this[Q]={t:3,l:t,A:t?t.A:w(),g:!1,R:!1,i:void 0,u:e,k:this,p:new Map,O:!1,C:!1},this}e(t,Set);var n=t.prototype;return Object.defineProperty(n,"size",{get:function(){return f(this[Q]).size}}),n.has=function(e){var t=this[Q];return s(t),t.i?!!t.i.has(e)||!(!t.p.has(e)||!t.i.has(t.p.get(e))):t.u.has(e)},n.add=function(e){var t=this[Q];return s(t),this.has(e)||(r(t),P(t),t.i.add(e)),this},n.delete=function(e){if(!this.has(e))return!1;var t=this[Q];return s(t),r(t),P(t),t.i.delete(e)||!!t.p.has(e)&&t.i.delete(t.p.get(e))},n.clear=function(){var e=this[Q];s(e),f(e).size&&(r(e),P(e),e.i.clear())},n.values=function(){var e=this[Q];return s(e),r(e),e.i.values()},n.entries=function(){var e=this[Q];return s(e),r(e),e.i.entries()},n.keys=function(){return this.values()},n[Y]=function(){return this.values()},n.forEach=function(e,t){for(var n=this.values(),r=n.next();!r.done;)e.call(t,r.value,r.value,this),r=n.next()},t}();b("MapSet",{K:function(e,t){return new u(e,t)},$:function(e,t){return new c(e,t)}})}var V;Object.defineProperty(t,"__esModule",{value:!0});var B,z="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),q="undefined"!=typeof Map,W="undefined"!=typeof Set,G="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,K=z?Symbol.for("immer-nothing"):((V={})["immer-nothing"]=!0,V),H=z?Symbol.for("immer-draftable"):"__$immer_draftable",Q=z?Symbol.for("immer-state"):"__$immer_state",Y="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",$=""+Object.prototype.constructor,J="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,X=Object.getOwnPropertyDescriptors||function(e){var t={};return J(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},Z={},ee={get:function(e,t){if(t===Q)return e;var n=f(e);if(!a(n,t))return function(e,t,n){var r,i=D(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.R||!i(r)?r:r===C(e.u,t)?(N(e),e.i[t]=R(e.A.h,r,e)):r},has:function(e,t){return t in f(e)},ownKeys:function(e){return Reflect.ownKeys(f(e))},set:function(e,t,n){var r=D(f(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.g){var i=C(f(e),t),o=null==i?void 0:i[Q];if(o&&o.u===n)return e.i[t]=n,e.N[t]=!1,!0;if(l(n,i)&&(void 0!==n||a(e.u,t)))return!0;N(e),P(e)}return e.i[t]===n&&(void 0!==n||t in e.i)||Number.isNaN(n)&&Number.isNaN(e.i[t])||(e.i[t]=n,e.N[t]=!0),!0},deleteProperty:function(e,t){return void 0!==C(e.u,t)||t in e.u?(e.N[t]=!1,N(e),P(e)):delete e.N[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var n=f(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.t||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){n(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){n(12)}},te={};o(ee,(function(e,t){te[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),te.deleteProperty=function(e,t){return te.set.call(this,e,t,void 0)},te.set=function(e,t,n){return ee.set.call(this,e[0],t,n,e[0])};var ne=function(){function e(e){var t=this;this.S=G,this.D=!0,this.produce=function(e,r,o){if("function"==typeof e&&"function"!=typeof r){var s=r;r=e;var a=t;return function(e){var t=this;void 0===e&&(e=s);for(var n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return a.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(i))}))}}var u;if("function"!=typeof r&&n(6),void 0!==o&&"function"!=typeof o&&n(7),i(e)){var c=T(t),l=R(t,e,void 0),h=!0;try{u=r(l),h=!1}finally{h?E(c):S(c)}return"undefined"!=typeof Promise&&u instanceof Promise?u.then((function(e){return _(c,o),x(e,c)}),(function(e){throw E(c),e})):(_(c,o),x(u,c))}if(!e||"object"!=typeof e){if(void 0===(u=r(e))&&(u=e),u===K&&(u=void 0),t.D&&m(u,!0),o){var d=[],f=[];v("Patches").M(e,u,d,f),o(d,f)}return u}n(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,o=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,i]})):[o,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){i(e)||n(8),r(e)&&(e=M(e));var t=T(this),o=R(this,e,void 0);return o[Q].C=!0,S(t),o},t.finishDraft=function(e,t){var n=(e&&e[Q]).A;return _(n,t),x(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!G&&n(20),this.S=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var i=t[n];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}n>-1&&(t=t.slice(n+1));var o=v("Patches").W;return r(e)?o(e,t):this.produce(e,(function(e){return o(e,t)}))},e}(),re=new ne,ie=re.produce,oe=re.produceWithPatches.bind(re),se=re.setAutoFreeze.bind(re),ae=re.setUseProxies.bind(re),ue=re.applyPatches.bind(re),ce=re.createDraft.bind(re),le=re.finishDraft.bind(re);t.Immer=ne,t.applyPatches=ue,t.castDraft=function(e){return e},t.castImmutable=function(e){return e},t.createDraft=ce,t.current=M,t.default=ie,t.enableAllPlugins=function(){j(),U(),F()},t.enableES5=j,t.enableMapSet=U,t.enablePatches=F,t.finishDraft=le,t.freeze=m,t.immerable=H,t.isDraft=r,t.isDraftable=i,t.nothing=K,t.original=function(e){return r(e)||n(23,e),e[Q].u},t.produce=ie,t.produceWithPatches=oe,t.setAutoFreeze=se,t.setUseProxies=ae},808:(e,t,n)=>{"use strict";e.exports=n(8803)},949:e=>{"use strict";e.exports=function(e,t,n,r,i,o,s,a){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],l=0;(u=new Error(t.replace(/%s/g,(function(){return c[l++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},2576:e=>{e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},2434:(e,t,n)=>{var r=n(220)(n(4759),"DataView");e.exports=r},1111:(e,t,n)=>{var r=n(6958),i=n(1176),o=n(1787),s=n(231),a=n(7455);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u},5294:(e,t,n)=>{var r=n(8230),i=n(3463);function o(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}o.prototype=r(i.prototype),o.prototype.constructor=o,e.exports=o},5661:(e,t,n)=>{var r=n(2707),i=n(150),o=n(7889),s=n(4349),a=n(3077);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u},8612:(e,t,n)=>{var r=n(8230),i=n(3463);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}o.prototype=r(i.prototype),o.prototype.constructor=o,e.exports=o},1465:(e,t,n)=>{var r=n(220)(n(4759),"Map");e.exports=r},4467:(e,t,n)=>{var r=n(738),i=n(708),o=n(6823),s=n(475),a=n(7859);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=s,u.prototype.set=a,e.exports=u},202:(e,t,n)=>{var r=n(220)(n(4759),"Promise");e.exports=r},7887:(e,t,n)=>{var r=n(220)(n(4759),"Set");e.exports=r},6669:(e,t,n)=>{var r=n(4467),i=n(2274),o=n(4519);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,e.exports=s},5535:(e,t,n)=>{var r=n(5661),i=n(4710),o=n(8384),s=n(7379),a=n(799),u=n(2791);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=u,e.exports=c},4635:(e,t,n)=>{var r=n(4759).Symbol;e.exports=r},8246:(e,t,n)=>{var r=n(4759).Uint8Array;e.exports=r},4801:(e,t,n)=>{var r=n(220)(n(4759),"WeakMap");e.exports=r},5507:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},299:e=>{e.exports=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r}},8951:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},6675:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},6860:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},3107:(e,t,n)=>{var r=n(1049);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},3259:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},7405:(e,t,n)=>{var r=n(4102),i=n(4578),o=n(2279),s=n(6794),a=n(7059),u=n(1641),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),h=!n&&!l&&s(e),d=!n&&!l&&!h&&u(e),f=n||l||h||d,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||p.push(g);return p}},1570:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},7518:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},1516:e=>{e.exports=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}},6010:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},7765:(e,t,n)=>{var r=n(9343)("length");e.exports=r},9508:e=>{e.exports=function(e){return e.split("")}},1983:(e,t,n)=>{var r=n(366),i=n(4206);e.exports=function(e,t,n){(void 0!==n&&!i(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},7305:(e,t,n)=>{var r=n(366),i=n(4206),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var s=e[t];o.call(e,t)&&i(s,n)&&(void 0!==n||t in e)||r(e,t,n)}},5099:(e,t,n)=>{var r=n(4206);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1971:(e,t,n)=>{var r=n(927);e.exports=function(e,t,n,i){return r(e,(function(e,r,o){t(i,e,n(e),o)})),i}},291:(e,t,n)=>{var r=n(3965),i=n(5724);e.exports=function(e,t){return e&&r(t,i(t),e)}},2064:(e,t,n)=>{var r=n(3965),i=n(1235);e.exports=function(e,t){return e&&r(t,i(t),e)}},366:(e,t,n)=>{var r=n(8925);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},9645:(e,t,n)=>{var r=n(5535),i=n(8951),o=n(7305),s=n(291),a=n(2064),u=n(8984),c=n(6321),l=n(1849),h=n(3586),d=n(3660),f=n(6387),p=n(5531),m=n(7203),g=n(997),y=n(5539),v=n(2279),b=n(6794),w=n(7744),_=n(4567),E=n(5738),S=n(5724),T=n(1235),I="[object Arguments]",x="[object Function]",A="[object Object]",O={};O[I]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[A]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[x]=O["[object WeakMap]"]=!1,e.exports=function e(t,n,k,C,D,P){var N,R=1&n,M=2&n,L=4&n;if(k&&(N=D?k(t,C,D,P):k(t)),void 0!==N)return N;if(!_(t))return t;var j=v(t);if(j){if(N=m(t),!R)return c(t,N)}else{var F=p(t),U=F==x||"[object GeneratorFunction]"==F;if(b(t))return u(t,R);if(F==A||F==I||U&&!D){if(N=M||U?{}:y(t),!R)return M?h(t,a(N,t)):l(t,s(N,t))}else{if(!O[F])return D?t:{};N=g(t,F,R)}}P||(P=new r);var V=P.get(t);if(V)return V;P.set(t,N),E(t)?t.forEach((function(r){N.add(e(r,n,k,r,t,P))})):w(t)&&t.forEach((function(r,i){N.set(i,e(r,n,k,i,t,P))}));var B=j?void 0:(L?M?f:d:M?T:S)(t);return i(B||t,(function(r,i){B&&(r=t[i=r]),o(N,i,e(r,n,k,i,t,P))})),N}},8230:(e,t,n)=>{var r=n(4567),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},5901:(e,t,n)=>{var r=n(6669),i=n(3107),o=n(3259),s=n(1570),a=n(5639),u=n(3445);e.exports=function(e,t,n,c){var l=-1,h=i,d=!0,f=e.length,p=[],m=t.length;if(!f)return p;n&&(t=s(t,a(n))),c?(h=o,d=!1):t.length>=200&&(h=u,d=!1,t=new r(t));e:for(;++l<f;){var g=e[l],y=null==n?g:n(g);if(g=c||0!==g?g:0,d&&y===y){for(var v=m;v--;)if(t[v]===y)continue e;p.push(g)}else h(t,y,c)||p.push(g)}return p}},927:(e,t,n)=>{var r=n(423),i=n(3267)(r);e.exports=i},7579:(e,t,n)=>{var r=n(927);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},900:(e,t,n)=>{var r=n(927);e.exports=function(e,t){var n=[];return r(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}},6993:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},6810:(e,t,n)=>{var r=n(7518),i=n(7989);e.exports=function e(t,n,o,s,a){var u=-1,c=t.length;for(o||(o=i),a||(a=[]);++u<c;){var l=t[u];n>0&&o(l)?n>1?e(l,n-1,o,s,a):r(a,l):s||(a[a.length]=l)}return a}},3031:(e,t,n)=>{var r=n(5211)();e.exports=r},423:(e,t,n)=>{var r=n(3031),i=n(5724);e.exports=function(e,t){return e&&r(e,t,i)}},52:(e,t,n)=>{var r=n(6463),i=n(2535);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},4761:(e,t,n)=>{var r=n(7518),i=n(2279);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},2022:(e,t,n)=>{var r=n(4635),i=n(1581),o=n(5336),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},2320:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e,n){return null!=e&&t.call(e,n)}},4591:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},1049:(e,t,n)=>{var r=n(6993),i=n(5381),o=n(7825);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},3012:(e,t,n)=>{var r=n(2022),i=n(9248);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},1404:(e,t,n)=>{var r=n(2130),i=n(9248);e.exports=function e(t,n,o,s,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,s,e,a))}},2130:(e,t,n)=>{var r=n(5535),i=n(9757),o=n(1416),s=n(6195),a=n(5531),u=n(2279),c=n(6794),l=n(1641),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,y){var v=u(e),b=u(t),w=v?d:a(e),_=b?d:a(t),E=(w=w==h?f:w)==f,S=(_=_==h?f:_)==f,T=w==_;if(T&&c(e)){if(!c(t))return!1;v=!0,E=!1}if(T&&!E)return y||(y=new r),v||l(e)?i(e,t,n,m,g,y):o(e,t,w,n,m,g,y);if(!(1&n)){var I=E&&p.call(e,"__wrapped__"),x=S&&p.call(t,"__wrapped__");if(I||x){var A=I?e.value():e,O=x?t.value():t;return y||(y=new r),g(A,O,n,m,y)}}return!!T&&(y||(y=new r),s(e,t,n,m,g,y))}},3530:(e,t,n)=>{var r=n(5531),i=n(9248);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},4489:(e,t,n)=>{var r=n(5535),i=n(1404);e.exports=function(e,t,n,o){var s=n.length,a=s,u=!o;if(null==e)return!a;for(e=Object(e);s--;){var c=n[s];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<a;){var l=(c=n[s])[0],h=e[l],d=c[1];if(u&&c[2]){if(void 0===h&&!(l in e))return!1}else{var f=new r;if(o)var p=o(h,d,l,e,t,f);if(!(void 0===p?i(d,h,3,o,f):p))return!1}}return!0}},5381:e=>{e.exports=function(e){return e!==e}},7949:(e,t,n)=>{var r=n(3008),i=n(3306),o=n(4567),s=n(9131),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,d=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:a).test(s(e))}},3152:(e,t,n)=>{var r=n(5531),i=n(9248);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},8183:(e,t,n)=>{var r=n(2022),i=n(5776),o=n(9248),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},5127:(e,t,n)=>{var r=n(9769),i=n(4104),o=n(9002),s=n(2279),a=n(8857);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?s(e)?i(e[0],e[1]):r(e):a(e)}},7462:(e,t,n)=>{var r=n(2161),i=n(5112),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},8833:(e,t,n)=>{var r=n(4567),i=n(2161),o=n(7175),s=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var a in e)("constructor"!=a||!t&&s.call(e,a))&&n.push(a);return n}},3463:e=>{e.exports=function(){}},6602:(e,t,n)=>{var r=n(927),i=n(7840);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},9769:(e,t,n)=>{var r=n(4489),i=n(3334),o=n(4243);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},4104:(e,t,n)=>{var r=n(1404),i=n(7946),o=n(5321),s=n(5916),a=n(9794),u=n(4243),c=n(2535);e.exports=function(e,t){return s(e)&&a(t)?u(c(e),t):function(n){var s=i(n,e);return void 0===s&&s===t?o(n,e):r(t,s,3)}}},7436:(e,t,n)=>{var r=n(5535),i=n(1983),o=n(3031),s=n(8994),a=n(4567),u=n(1235),c=n(9924);e.exports=function e(t,n,l,h,d){t!==n&&o(n,(function(o,u){if(d||(d=new r),a(o))s(t,n,u,l,e,h,d);else{var f=h?h(c(t,u),o,u+"",t,n,d):void 0;void 0===f&&(f=o),i(t,u,f)}}),u)}},8994:(e,t,n)=>{var r=n(1983),i=n(8984),o=n(8463),s=n(6321),a=n(5539),u=n(4578),c=n(2279),l=n(3815),h=n(6794),d=n(3008),f=n(4567),p=n(5461),m=n(1641),g=n(9924),y=n(8774);e.exports=function(e,t,n,v,b,w,_){var E=g(e,n),S=g(t,n),T=_.get(S);if(T)r(e,n,T);else{var I=w?w(E,S,n+"",e,t,_):void 0,x=void 0===I;if(x){var A=c(S),O=!A&&h(S),k=!A&&!O&&m(S);I=S,A||O||k?c(E)?I=E:l(E)?I=s(E):O?(x=!1,I=i(S,!0)):k?(x=!1,I=o(S,!0)):I=[]:p(S)||u(S)?(I=E,u(E)?I=y(E):f(E)&&!d(E)||(I=a(S))):x=!1}x&&(_.set(S,I),b(I,S,v,w,_),_.delete(S)),r(e,n,I)}}},8245:(e,t,n)=>{var r=n(1570),i=n(52),o=n(5127),s=n(6602),a=n(7311),u=n(5639),c=n(8152),l=n(9002),h=n(2279);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return h(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[l];var d=-1;t=r(t,u(o));var f=s(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return a(f,(function(e,t){return c(e,t,n)}))}},5271:(e,t,n)=>{var r=n(2038),i=n(5321);e.exports=function(e,t){return r(e,t,(function(t,n){return i(e,n)}))}},2038:(e,t,n)=>{var r=n(52),i=n(6992),o=n(6463);e.exports=function(e,t,n){for(var s=-1,a=t.length,u={};++s<a;){var c=t[s],l=r(e,c);n(l,c)&&i(u,o(c,e),l)}return u}},9343:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},4753:(e,t,n)=>{var r=n(52);e.exports=function(e){return function(t){return r(t,e)}}},7008:(e,t,n)=>{var r=n(6949),i=n(7059),o=Array.prototype.splice;e.exports=function(e,t){for(var n=e?t.length:0,s=n-1;n--;){var a=t[n];if(n==s||a!==u){var u=a;i(a)?o.call(e,a,1):r(e,a)}}return e}},3572:e=>{e.exports=function(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}},516:(e,t,n)=>{var r=n(9002),i=n(4295),o=n(1043);e.exports=function(e,t){return o(i(e,t,r),e+"")}},6992:(e,t,n)=>{var r=n(7305),i=n(6463),o=n(7059),s=n(4567),a=n(2535);e.exports=function(e,t,n,u){if(!s(e))return e;for(var c=-1,l=(t=i(t,e)).length,h=l-1,d=e;null!=d&&++c<l;){var f=a(t[c]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(c!=h){var m=d[f];void 0===(p=u?u(m,f,d):void 0)&&(p=s(m)?m:o(t[c+1])?[]:{})}r(d,f,p),d=d[f]}return e}},7992:(e,t,n)=>{var r=n(9002),i=n(4458),o=i?function(e,t){return i.set(e,t),e}:r;e.exports=o},5148:(e,t,n)=>{var r=n(6800),i=n(8925),o=n(9002),s=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=s},4978:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},8258:(e,t,n)=>{var r=n(927);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},7311:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},4102:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1582:(e,t,n)=>{var r=n(4635),i=n(1570),o=n(2279),s=n(184),a=r?r.prototype:void 0,u=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(s(t))return u?u.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},6914:(e,t,n)=>{var r=n(8798),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},5639:e=>{e.exports=function(e){return function(t){return e(t)}}},564:(e,t,n)=>{var r=n(6669),i=n(3107),o=n(3259),s=n(3445),a=n(3739),u=n(6557);e.exports=function(e,t,n){var c=-1,l=i,h=e.length,d=!0,f=[],p=f;if(n)d=!1,l=o;else if(h>=200){var m=t?null:a(e);if(m)return u(m);d=!1,l=s,p=new r}else p=t?[]:f;e:for(;++c<h;){var g=e[c],y=t?t(g):g;if(g=n||0!==g?g:0,d&&y===y){for(var v=p.length;v--;)if(p[v]===y)continue e;t&&p.push(y),f.push(g)}else l(p,y,n)||(p!==f&&p.push(y),f.push(g))}return f}},6949:(e,t,n)=>{var r=n(6463),i=n(7988),o=n(8639),s=n(2535);e.exports=function(e,t){return t=r(t,e),null==(e=o(e,t))||delete e[s(i(t))]}},3445:e=>{e.exports=function(e,t){return e.has(t)}},9036:(e,t,n)=>{var r=n(9002);e.exports=function(e){return"function"==typeof e?e:r}},6463:(e,t,n)=>{var r=n(2279),i=n(5916),o=n(7044),s=n(4008);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(s(e))}},6212:(e,t,n)=>{var r=n(4978);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},9249:(e,t,n)=>{var r=n(1049);e.exports=function(e,t){for(var n=e.length;n--&&r(t,e[n],0)>-1;);return n}},9766:(e,t,n)=>{var r=n(1049);e.exports=function(e,t){for(var n=-1,i=e.length;++n<i&&r(t,e[n],0)>-1;);return n}},5871:(e,t,n)=>{var r=n(8246);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},8984:(e,t,n)=>{e=n.nmd(e);var r=n(4759),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i?r.Buffer:void 0,a=s?s.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}},3863:(e,t,n)=>{var r=n(5871);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},1991:e=>{var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},2106:(e,t,n)=>{var r=n(4635),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},8463:(e,t,n)=>{var r=n(5871);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},656:(e,t,n)=>{var r=n(184);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e===e,s=r(e),a=void 0!==t,u=null===t,c=t===t,l=r(t);if(!u&&!l&&!s&&e>t||s&&a&&c&&!u&&!l||i&&a&&c||!n&&c||!o)return 1;if(!i&&!s&&!l&&e<t||l&&n&&o&&!i&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}},8152:(e,t,n)=>{var r=n(656);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,s=t.criteria,a=o.length,u=n.length;++i<a;){var c=r(o[i],s[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},3922:e=>{var t=Math.max;e.exports=function(e,n,r,i){for(var o=-1,s=e.length,a=r.length,u=-1,c=n.length,l=t(s-a,0),h=Array(c+l),d=!i;++u<c;)h[u]=n[u];for(;++o<a;)(d||o<s)&&(h[r[o]]=e[o]);for(;l--;)h[u++]=e[o++];return h}},1138:e=>{var t=Math.max;e.exports=function(e,n,r,i){for(var o=-1,s=e.length,a=-1,u=r.length,c=-1,l=n.length,h=t(s-u,0),d=Array(h+l),f=!i;++o<h;)d[o]=e[o];for(var p=o;++c<l;)d[p+c]=n[c];for(;++a<u;)(f||o<s)&&(d[p+r[a]]=e[o++]);return d}},6321:e=>{e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},3965:(e,t,n)=>{var r=n(7305),i=n(366);e.exports=function(e,t,n,o){var s=!n;n||(n={});for(var a=-1,u=t.length;++a<u;){var c=t[a],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),s?i(n,c,l):r(n,c,l)}return n}},1849:(e,t,n)=>{var r=n(3965),i=n(8194);e.exports=function(e,t){return r(e,i(e),t)}},3586:(e,t,n)=>{var r=n(3965),i=n(9653);e.exports=function(e,t){return r(e,i(e),t)}},4123:(e,t,n)=>{var r=n(4759)["__core-js_shared__"];e.exports=r},3225:e=>{e.exports=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}},6942:(e,t,n)=>{var r=n(299),i=n(1971),o=n(5127),s=n(2279);e.exports=function(e,t){return function(n,a){var u=s(n)?r:i,c=t?t():{};return u(n,e,o(a,2),c)}}},4681:(e,t,n)=>{var r=n(516),i=n(9042);e.exports=function(e){return r((function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):void 0,a&&i(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,s)}return t}))}},3267:(e,t,n)=>{var r=n(7840);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,s=t?o:-1,a=Object(n);(t?s--:++s<o)&&!1!==i(a[s],s,a););return n}}},5211:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var u=s[e?a:++i];if(!1===n(o[u],u,o))break}return t}}},5088:(e,t,n)=>{var r=n(3557),i=n(4759);e.exports=function(e,t,n){var o=1&t,s=r(e);return function t(){return(this&&this!==i&&this instanceof t?s:e).apply(o?n:this,arguments)}}},6689:(e,t,n)=>{var r=n(6212),i=n(1536),o=n(78),s=n(4008);e.exports=function(e){return function(t){t=s(t);var n=i(t)?o(t):void 0,a=n?n[0]:t.charAt(0),u=n?r(n,1).join(""):t.slice(1);return a[e]()+u}}},3557:(e,t,n)=>{var r=n(8230),i=n(4567);e.exports=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=r(e.prototype),o=e.apply(n,t);return i(o)?o:n}}},9692:(e,t,n)=>{var r=n(5507),i=n(3557),o=n(8581),s=n(6435),a=n(8965),u=n(4652),c=n(4759);e.exports=function(e,t,n){var l=i(e);return function i(){for(var h=arguments.length,d=Array(h),f=h,p=a(i);f--;)d[f]=arguments[f];var m=h<3&&d[0]!==p&&d[h-1]!==p?[]:u(d,p);return(h-=m.length)<n?s(e,t,o,i.placeholder,void 0,d,m,void 0,void 0,n-h):r(this&&this!==c&&this instanceof i?l:e,this,d)}}},8723:(e,t,n)=>{var r=n(8612),i=n(5002),o=n(3443),s=n(1266),a=n(2279),u=n(5257);e.exports=function(e){return i((function(t){var n=t.length,i=n,c=r.prototype.thru;for(e&&t.reverse();i--;){var l=t[i];if("function"!=typeof l)throw new TypeError("Expected a function");if(c&&!h&&"wrapper"==s(l))var h=new r([],!0)}for(i=h?i:n;++i<n;){l=t[i];var d=s(l),f="wrapper"==d?o(l):void 0;h=f&&u(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?h[s(f[0])].apply(h,f[3]):1==l.length&&u(l)?h[d]():h.thru(l)}return function(){var e=arguments,r=e[0];if(h&&1==e.length&&a(r))return h.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}},8581:(e,t,n)=>{var r=n(3922),i=n(1138),o=n(3225),s=n(3557),a=n(6435),u=n(8965),c=n(6416),l=n(4652),h=n(4759);e.exports=function e(t,n,d,f,p,m,g,y,v,b){var w=128&n,_=1&n,E=2&n,S=24&n,T=512&n,I=E?void 0:s(t);return function x(){for(var A=arguments.length,O=Array(A),k=A;k--;)O[k]=arguments[k];if(S)var C=u(x),D=o(O,C);if(f&&(O=r(O,f,p,S)),m&&(O=i(O,m,g,S)),A-=D,S&&A<b){var P=l(O,C);return a(t,n,e,x.placeholder,d,O,P,y,v,b-A)}var N=_?d:this,R=E?N[t]:t;return A=O.length,y?O=c(O,y):T&&A>1&&O.reverse(),w&&v<A&&(O.length=v),this&&this!==h&&this instanceof x&&(R=I||s(R)),R.apply(N,O)}}},6702:(e,t,n)=>{var r=n(5507),i=n(3557),o=n(4759);e.exports=function(e,t,n,s){var a=1&t,u=i(e);return function t(){for(var i=-1,c=arguments.length,l=-1,h=s.length,d=Array(h+c),f=this&&this!==o&&this instanceof t?u:e;++l<h;)d[l]=s[l];for(;c--;)d[l++]=arguments[++i];return r(f,a?n:this,d)}}},6435:(e,t,n)=>{var r=n(5257),i=n(7559),o=n(4191);e.exports=function(e,t,n,s,a,u,c,l,h,d){var f=8&t;t|=f?32:64,4&(t&=~(f?64:32))||(t&=-4);var p=[e,t,a,f?u:void 0,f?c:void 0,f?void 0:u,f?void 0:c,l,h,d],m=n.apply(void 0,p);return r(e)&&i(m,p),m.placeholder=s,o(m,e,t)}},3739:(e,t,n)=>{var r=n(7887),i=n(9208),o=n(6557),s=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=s},6231:(e,t,n)=>{var r=n(7992),i=n(5088),o=n(9692),s=n(8581),a=n(6702),u=n(3443),c=n(315),l=n(7559),h=n(4191),d=n(5171),f=Math.max;e.exports=function(e,t,n,p,m,g,y,v){var b=2&t;if(!b&&"function"!=typeof e)throw new TypeError("Expected a function");var w=p?p.length:0;if(w||(t&=-97,p=m=void 0),y=void 0===y?y:f(d(y),0),v=void 0===v?v:d(v),w-=m?m.length:0,64&t){var _=p,E=m;p=m=void 0}var S=b?void 0:u(e),T=[e,t,n,p,m,_,E,g,y,v];if(S&&c(T,S),e=T[0],t=T[1],n=T[2],p=T[3],m=T[4],!(v=T[9]=void 0===T[9]?b?0:e.length:f(T[9]-w,0))&&24&t&&(t&=-25),t&&1!=t)I=8==t||16==t?o(e,t,v):32!=t&&33!=t||m.length?s.apply(void 0,T):a(e,t,n,p);else var I=i(e,t,n);return h((S?r:l)(I,T),e,t)}},4508:(e,t,n)=>{var r=n(7436),i=n(4567);e.exports=function e(t,n,o,s,a,u){return i(t)&&i(n)&&(u.set(n,t),r(t,n,void 0,e,u),u.delete(n)),t}},1288:(e,t,n)=>{var r=n(5461);e.exports=function(e){return r(e)?void 0:e}},8925:(e,t,n)=>{var r=n(220),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},9757:(e,t,n)=>{var r=n(6669),i=n(6010),o=n(3445);e.exports=function(e,t,n,s,a,u){var c=1&n,l=e.length,h=t.length;if(l!=h&&!(c&&h>l))return!1;var d=u.get(e),f=u.get(t);if(d&&f)return d==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++p<l;){var y=e[p],v=t[p];if(s)var b=c?s(v,y,p,t,e,u):s(y,v,p,e,t,u);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(y===e||a(y,e,n,s,u)))return g.push(t)}))){m=!1;break}}else if(y!==v&&!a(y,v,n,s,u)){m=!1;break}}return u.delete(e),u.delete(t),m}},1416:(e,t,n)=>{var r=n(4635),i=n(8246),o=n(4206),s=n(9757),a=n(943),u=n(6557),c=r?r.prototype:void 0,l=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=a;case"[object Set]":var p=1&r;if(f||(f=u),e.size!=t.size&&!p)return!1;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var g=s(f(e),f(t),r,c,h,d);return d.delete(e),g;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},6195:(e,t,n)=>{var r=n(3660),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,s,a){var u=1&n,c=r(e),l=c.length;if(l!=r(t).length&&!u)return!1;for(var h=l;h--;){var d=c[h];if(!(u?d in t:i.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=u;++h<l;){var y=e[d=c[h]],v=t[d];if(o)var b=u?o(v,y,d,t,e,a):o(y,v,d,e,t,a);if(!(void 0===b?y===v||s(y,v,n,o,a):b)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var w=e.constructor,_=t.constructor;w==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(m=!1)}return a.delete(e),a.delete(t),m}},5002:(e,t,n)=>{var r=n(2964),i=n(4295),o=n(1043);e.exports=function(e){return o(i(e,void 0,r),e+"")}},6658:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},3660:(e,t,n)=>{var r=n(4761),i=n(8194),o=n(5724);e.exports=function(e){return r(e,o,i)}},6387:(e,t,n)=>{var r=n(4761),i=n(9653),o=n(1235);e.exports=function(e){return r(e,o,i)}},3443:(e,t,n)=>{var r=n(4458),i=n(9208),o=r?function(e){return r.get(e)}:i;e.exports=o},1266:(e,t,n)=>{var r=n(8155),i=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],o=i.call(r,t)?n.length:0;o--;){var s=n[o],a=s.func;if(null==a||a==e)return s.name}return t}},8965:e=>{e.exports=function(e){return e.placeholder}},7101:(e,t,n)=>{var r=n(4672);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},3334:(e,t,n)=>{var r=n(9794),i=n(5724);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],s=e[o];t[n]=[o,s,r(s)]}return t}},220:(e,t,n)=>{var r=n(7949),i=n(8166);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},2253:(e,t,n)=>{var r=n(2621)(Object.getPrototypeOf,Object);e.exports=r},1581:(e,t,n)=>{var r=n(4635),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(u){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},8194:(e,t,n)=>{var r=n(6860),i=n(1515),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return o.call(e,t)})))}:i;e.exports=a},9653:(e,t,n)=>{var r=n(7518),i=n(2253),o=n(8194),s=n(1515),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:s;e.exports=a},5531:(e,t,n)=>{var r=n(2434),i=n(1465),o=n(202),s=n(7887),a=n(4801),u=n(2022),c=n(9131),l="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(r),g=c(i),y=c(o),v=c(s),b=c(a),w=u;(r&&w(new r(new ArrayBuffer(1)))!=p||i&&w(new i)!=l||o&&w(o.resolve())!=h||s&&w(new s)!=d||a&&w(new a)!=f)&&(w=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return p;case g:return l;case y:return h;case v:return d;case b:return f}return t}),e.exports=w},8166:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},2561:e=>{var t=/\{\n\/\* \[wrapped with (.+)\] \*/,n=/,? & /;e.exports=function(e){var r=e.match(t);return r?r[1].split(n):[]}},964:(e,t,n)=>{var r=n(6463),i=n(4578),o=n(2279),s=n(7059),a=n(5776),u=n(2535);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,h=!1;++c<l;){var d=u(t[c]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++c!=l?h:!!(l=null==e?0:e.length)&&a(l)&&s(d,l)&&(o(e)||i(e))}},1536:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},6958:(e,t,n)=>{var r=n(3616);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},1176:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},1787:(e,t,n)=>{var r=n(3616),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},231:(e,t,n)=>{var r=n(3616),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},7455:(e,t,n)=>{var r=n(3616);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7203:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},997:(e,t,n)=>{var r=n(5871),i=n(3863),o=n(1991),s=n(2106),a=n(8463);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,n);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return o(e);case"[object Symbol]":return s(e)}}},5539:(e,t,n)=>{var r=n(8230),i=n(2253),o=n(2161);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},5958:e=>{var t=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(e,n){var r=n.length;if(!r)return e;var i=r-1;return n[i]=(r>1?"& ":"")+n[i],n=n.join(r>2?", ":" "),e.replace(t,"{\n/* [wrapped with "+n+"] */\n")}},7989:(e,t,n)=>{var r=n(4635),i=n(4578),o=n(2279),s=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(s&&e&&e[s])}},7059:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},9042:(e,t,n)=>{var r=n(4206),i=n(7840),o=n(7059),s=n(4567);e.exports=function(e,t,n){if(!s(n))return!1;var a=typeof t;return!!("number"==a?i(n)&&o(t,n.length):"string"==a&&t in n)&&r(n[t],e)}},5916:(e,t,n)=>{var r=n(2279),i=n(184),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(s.test(e)||!o.test(e)||null!=t&&e in Object(t))}},4672:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5257:(e,t,n)=>{var r=n(5294),i=n(3443),o=n(1266),s=n(4740);e.exports=function(e){var t=o(e),n=s[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var a=i(n);return!!a&&e===a[0]}},3306:(e,t,n)=>{var r=n(4123),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},2161:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9794:(e,t,n)=>{var r=n(4567);e.exports=function(e){return e===e&&!r(e)}},2707:e=>{e.exports=function(){this.__data__=[],this.size=0}},150:(e,t,n)=>{var r=n(5099),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},7889:(e,t,n)=>{var r=n(5099);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4349:(e,t,n)=>{var r=n(5099);e.exports=function(e){return r(this.__data__,e)>-1}},3077:(e,t,n)=>{var r=n(5099);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},738:(e,t,n)=>{var r=n(1111),i=n(5661),o=n(1465);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},708:(e,t,n)=>{var r=n(7101);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},6823:(e,t,n)=>{var r=n(7101);e.exports=function(e){return r(this,e).get(e)}},475:(e,t,n)=>{var r=n(7101);e.exports=function(e){return r(this,e).has(e)}},7859:(e,t,n)=>{var r=n(7101);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},943:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},4243:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},3734:(e,t,n)=>{var r=n(53);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},315:(e,t,n)=>{var r=n(3922),i=n(1138),o=n(4652),s="__lodash_placeholder__",a=128,u=Math.min;e.exports=function(e,t){var n=e[1],c=t[1],l=n|c,h=l<131,d=c==a&&8==n||c==a&&256==n&&e[7].length<=t[8]||384==c&&t[7].length<=t[8]&&8==n;if(!h&&!d)return e;1&c&&(e[2]=t[2],l|=1&n?0:4);var f=t[3];if(f){var p=e[3];e[3]=p?r(p,f,t[4]):f,e[4]=p?o(e[3],s):t[4]}return(f=t[5])&&(p=e[5],e[5]=p?i(p,f,t[6]):f,e[6]=p?o(e[5],s):t[6]),(f=t[7])&&(e[7]=f),c&a&&(e[8]=null==e[8]?t[8]:u(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=l,e}},4458:(e,t,n)=>{var r=n(4801),i=r&&new r;e.exports=i},3616:(e,t,n)=>{var r=n(220)(Object,"create");e.exports=r},5112:(e,t,n)=>{var r=n(2621)(Object.keys,Object);e.exports=r},7175:e=>{e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},2479:(e,t,n)=>{e=n.nmd(e);var r=n(6658),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=a},5336:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2621:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},4295:(e,t,n)=>{var r=n(5507),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,s=-1,a=i(o.length-t,0),u=Array(a);++s<a;)u[s]=o[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=o[s];return c[t]=n(u),r(e,this,c)}}},8639:(e,t,n)=>{var r=n(52),i=n(4978);e.exports=function(e,t){return t.length<2?e:r(e,i(t,0,-1))}},8155:e=>{e.exports={}},6416:(e,t,n)=>{var r=n(6321),i=n(7059),o=Math.min;e.exports=function(e,t){for(var n=e.length,s=o(t.length,n),a=r(e);s--;){var u=t[s];e[s]=i(u,n)?a[u]:void 0}return e}},4652:e=>{var t="__lodash_placeholder__";e.exports=function(e,n){for(var r=-1,i=e.length,o=0,s=[];++r<i;){var a=e[r];a!==n&&a!==t||(e[r]=t,s[o++]=r)}return s}},4759:(e,t,n)=>{var r=n(6658),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},9924:e=>{e.exports=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}},2274:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},4519:e=>{e.exports=function(e){return this.__data__.has(e)}},7559:(e,t,n)=>{var r=n(7992),i=n(2929)(r);e.exports=i},6557:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},1043:(e,t,n)=>{var r=n(5148),i=n(2929)(r);e.exports=i},4191:(e,t,n)=>{var r=n(2561),i=n(5958),o=n(1043),s=n(6210);e.exports=function(e,t,n){var a=t+"";return o(e,i(a,s(r(a),n)))}},2929:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},4710:(e,t,n)=>{var r=n(5661);e.exports=function(){this.__data__=new r,this.size=0}},8384:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7379:e=>{e.exports=function(e){return this.__data__.get(e)}},799:e=>{e.exports=function(e){return this.__data__.has(e)}},2791:(e,t,n)=>{var r=n(5661),i=n(1465),o=n(4467);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},7825:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},1615:(e,t,n)=>{var r=n(7765),i=n(1536),o=n(1093);e.exports=function(e){return i(e)?o(e):r(e)}},78:(e,t,n)=>{var r=n(9508),i=n(1536),o=n(9892);e.exports=function(e){return i(e)?o(e):r(e)}},7044:(e,t,n)=>{var r=n(3734),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=s},2535:(e,t,n)=>{var r=n(184);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},9131:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},8798:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},1093:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",l=c+u+("(?:\\u200d(?:"+[o,s,a].join("|")+")"+c+u+")*"),h="(?:"+[o+r+"?",r,s,a,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+h+l,"g");e.exports=function(e){for(var t=d.lastIndex=0;d.test(e);)++t;return t}},9892:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",l=c+u+("(?:\\u200d(?:"+[o,s,a].join("|")+")"+c+u+")*"),h="(?:"+[o+r+"?",r,s,a,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+h+l,"g");e.exports=function(e){return e.match(d)||[]}},6210:(e,t,n)=>{var r=n(8951),i=n(3107),o=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(e,t){return r(o,(function(n){var r="_."+n[0];t&n[1]&&!i(e,r)&&e.push(r)})),e.sort()}},7351:(e,t,n)=>{var r=n(5294),i=n(8612),o=n(6321);e.exports=function(e){if(e instanceof r)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},8744:(e,t,n)=>{var r=n(6231);e.exports=function(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,r(e,128,void 0,void 0,void 0,void 0,t)}},5065:(e,t,n)=>{var r=n(7305),i=n(3965),o=n(4681),s=n(7840),a=n(2161),u=n(5724),c=Object.prototype.hasOwnProperty,l=o((function(e,t){if(a(t)||s(t))i(t,u(t),e);else for(var n in t)c.call(t,n)&&r(e,n,t[n])}));e.exports=l},6014:(e,t,n)=>{var r=n(4008),i=n(3414);e.exports=function(e){return i(r(e).toLowerCase())}},8251:(e,t,n)=>{var r=n(4978),i=n(9042),o=n(5171),s=Math.ceil,a=Math.max;e.exports=function(e,t,n){t=(n?i(e,t,n):void 0===t)?1:a(o(t),0);var u=null==e?0:e.length;if(!u||t<1)return[];for(var c=0,l=0,h=Array(s(u/t));c<u;)h[l++]=r(e,c,c+=t);return h}},6467:(e,t,n)=>{var r=n(9645);e.exports=function(e){return r(e,4)}},5117:(e,t,n)=>{var r=n(9645);e.exports=function(e){return r(e,5)}},6800:e=>{e.exports=function(e){return function(){return e}}},1713:(e,t,n)=>{var r=n(6231);function i(e,t,n){var o=r(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return o.placeholder=i.placeholder,o}i.placeholder={},e.exports=i},712:(e,t,n)=>{var r=n(5507),i=n(516),o=n(4508),s=n(9986),a=i((function(e){return e.push(void 0,o),r(s,void 0,e)}));e.exports=a},6039:(e,t,n)=>{var r=n(5901),i=n(6810),o=n(516),s=n(3815),a=n(7988),u=o((function(e,t){var n=a(t);return s(n)&&(n=void 0),s(e)?r(e,i(t,1,s,!0),void 0,n):[]}));e.exports=u},4206:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},8829:(e,t,n)=>{var r=n(6675),i=n(7579),o=n(5127),s=n(2279),a=n(9042);e.exports=function(e,t,n){var u=s(e)?r:i;return n&&a(e,t,n)&&(t=void 0),u(e,o(t,3))}},3386:(e,t,n)=>{var r=n(6860),i=n(900),o=n(5127),s=n(2279);e.exports=function(e,t){return(s(e)?r:i)(e,o(t,3))}},5695:(e,t,n)=>{var r=n(6993),i=n(5127),o=n(5171),s=Math.max;e.exports=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var u=null==n?0:o(n);return u<0&&(u=s(a+u,0)),r(e,i(t,3),u)}},9113:(e,t,n)=>{var r=n(6810),i=n(5876);e.exports=function(e,t){return r(i(e,t),1)}},2964:(e,t,n)=>{var r=n(6810);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},7016:(e,t,n)=>{var r=n(8723)();e.exports=r},6380:(e,t,n)=>{var r=n(8951),i=n(927),o=n(9036),s=n(2279);e.exports=function(e,t){return(s(e)?r:i)(e,o(t))}},1154:(e,t,n)=>{var r=n(1976),i=n(9764),o=Array.prototype.push;function s(e,t){return 2==t?function(t,n){return e(t,n)}:function(t){return e(t)}}function a(e){for(var t=e?e.length:0,n=Array(t);t--;)n[t]=e[t];return n}function u(e,t){return function(){var n=arguments.length;if(n){for(var r=Array(n);n--;)r[n]=arguments[n];var i=r[0]=t.apply(void 0,r);return e.apply(void 0,r),i}}}e.exports=function e(t,n,c,l){var h="function"==typeof n,d=n===Object(n);if(d&&(l=c,c=n,n=void 0),null==c)throw new TypeError;l||(l={});var f={cap:!("cap"in l)||l.cap,curry:!("curry"in l)||l.curry,fixed:!("fixed"in l)||l.fixed,immutable:!("immutable"in l)||l.immutable,rearg:!("rearg"in l)||l.rearg},p=h?c:i,m="curry"in l&&l.curry,g="fixed"in l&&l.fixed,y="rearg"in l&&l.rearg,v=h?c.runInContext():void 0,b=h?c:{ary:t.ary,assign:t.assign,clone:t.clone,curry:t.curry,forEach:t.forEach,isArray:t.isArray,isError:t.isError,isFunction:t.isFunction,isWeakMap:t.isWeakMap,iteratee:t.iteratee,keys:t.keys,rearg:t.rearg,toInteger:t.toInteger,toPath:t.toPath},w=b.ary,_=b.assign,E=b.clone,S=b.curry,T=b.forEach,I=b.isArray,x=b.isError,A=b.isFunction,O=b.isWeakMap,k=b.keys,C=b.rearg,D=b.toInteger,P=b.toPath,N=k(r.aryMethod),R={castArray:function(e){return function(){var t=arguments[0];return I(t)?e(a(t)):e.apply(void 0,arguments)}},iteratee:function(e){return function(){var t=arguments[1],n=e(arguments[0],t),r=n.length;return f.cap&&"number"==typeof t?(t=t>2?t-2:1,r&&r<=t?n:s(n,t)):n}},mixin:function(e){return function(t){var n=this;if(!A(n))return e(n,Object(t));var r=[];return T(k(t),(function(e){A(t[e])&&r.push([e,n.prototype[e]])})),e(n,Object(t)),T(r,(function(e){var t=e[1];A(t)?n.prototype[e[0]]=t:delete n.prototype[e[0]]})),n}},nthArg:function(e){return function(t){var n=t<0?1:D(t)+1;return S(e(t),n)}},rearg:function(e){return function(t,n){var r=n?n.length:0;return S(e(t,n),r)}},runInContext:function(n){return function(r){return e(t,n(r),l)}}};function M(e,t){if(f.cap){var n=r.iterateeRearg[e];if(n)return function(e,t){return V(e,(function(e){var n=t.length;return function(e,t){return 2==t?function(t,n){return e.apply(void 0,arguments)}:function(t){return e.apply(void 0,arguments)}}(C(s(e,n),t),n)}))}(t,n);var i=!h&&r.iterateeAry[e];if(i)return function(e,t){return V(e,(function(e){return"function"==typeof e?s(e,t):e}))}(t,i)}return t}function L(e,t,n){if(f.fixed&&(g||!r.skipFixed[e])){var i=r.methodSpread[e],s=i&&i.start;return void 0===s?w(t,n):function(e,t){return function(){for(var n=arguments.length,r=n-1,i=Array(n);n--;)i[n]=arguments[n];var s=i[t],a=i.slice(0,t);return s&&o.apply(a,s),t!=r&&o.apply(a,i.slice(t+1)),e.apply(this,a)}}(t,s)}return t}function j(e,t,n){return f.rearg&&n>1&&(y||!r.skipRearg[e])?C(t,r.methodRearg[e]||r.aryRearg[n]):t}function F(e,t){for(var n=-1,r=(t=P(t)).length,i=r-1,o=E(Object(e)),s=o;null!=s&&++n<r;){var a=t[n],u=s[a];null==u||A(u)||x(u)||O(u)||(s[a]=E(n==i?u:Object(u))),s=s[a]}return o}function U(t,n){var i=r.aliasToReal[t]||t,o=r.remap[i]||i,s=l;return function(t){var r=h?v:b,a=h?v[o]:n,u=_(_({},s),t);return e(r,i,a,u)}}function V(e,t){return function(){var n=arguments.length;if(!n)return e();for(var r=Array(n);n--;)r[n]=arguments[n];var i=f.rearg?0:n-1;return r[i]=t(r[i]),e.apply(void 0,r)}}function B(e,t,n){var i,o=r.aliasToReal[e]||e,s=t,c=R[o];return c?s=c(t):f.immutable&&(r.mutate.array[o]?s=u(t,a):r.mutate.object[o]?s=u(t,function(e){return function(t){return e({},t)}}(t)):r.mutate.set[o]&&(s=u(t,F))),T(N,(function(e){return T(r.aryMethod[e],(function(t){if(o==t){var n=r.methodSpread[o],a=n&&n.afterRearg;return i=a?L(o,j(o,s,e),e):j(o,L(o,s,e),e),i=function(e,t,n){return m||f.curry&&n>1?S(t,n):t}(0,i=M(o,i),e),!1}})),!i})),i||(i=s),i==t&&(i=m?S(i,1):function(){return t.apply(this,arguments)}),i.convert=U(o,t),i.placeholder=t.placeholder=n,i}if(!d)return B(n,c,p);var z=c,q=[];return T(N,(function(e){T(r.aryMethod[e],(function(e){var t=z[r.remap[e]||e];t&&q.push([e,B(e,t,z)])}))})),T(k(z),(function(e){var t=z[e];if("function"==typeof t){for(var n=q.length;n--;)if(q[n][0]==e)return;t.convert=U(e,t),q.push([e,t])}})),T(q,(function(e){z[e[0]]=e[1]})),z.convert=function(e){return z.runInContext.convert(e)(void 0)},z.placeholder=z,T(k(z),(function(e){T(r.realToAlias[e]||[],(function(t){z[t]=z[e]}))})),z}},1976:(e,t)=>{t.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},t.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},t.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},t.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},t.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},t.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},t.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},t.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},t.realToAlias=function(){var e=Object.prototype.hasOwnProperty,n=t.aliasToReal,r={};for(var i in n){var o=n[i];e.call(r,o)?r[o].push(i):r[o]=[i]}return r}(),t.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},t.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},t.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}},3928:(e,t,n)=>{e.exports={ary:n(8744),assign:n(291),clone:n(6467),curry:n(1713),forEach:n(8951),isArray:n(2279),isError:n(5056),isFunction:n(3008),isWeakMap:n(6516),iteratee:n(1361),keys:n(7462),rearg:n(1377),toInteger:n(5171),toPath:n(5202)}},9064:(e,t,n)=>{var r=n(7506)("assign",n(5065));r.placeholder=n(9764),e.exports=r},7506:(e,t,n)=>{var r=n(1154),i=n(3928);e.exports=function(e,t,n){return r(i,e,t,n)}},6781:(e,t,n)=>{var r=n(7506)("merge",n(953));r.placeholder=n(9764),e.exports=r},9764:e=>{e.exports={}},185:(e,t,n)=>{var r=n(7506)("setWith",n(2674));r.placeholder=n(9764),e.exports=r},6452:(e,t,n)=>{var r=n(7506)("unset",n(7951));r.placeholder=n(9764),e.exports=r},7946:(e,t,n)=>{var r=n(52);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},3684:(e,t,n)=>{var r=n(366),i=n(6942),o=Object.prototype.hasOwnProperty,s=i((function(e,t,n){o.call(e,n)?e[n].push(t):r(e,n,[t])}));e.exports=s},6094:(e,t,n)=>{var r=n(2320),i=n(964);e.exports=function(e,t){return null!=e&&i(e,t,r)}},5321:(e,t,n)=>{var r=n(4591),i=n(964);e.exports=function(e,t){return null!=e&&i(e,t,r)}},9002:e=>{e.exports=function(e){return e}},4578:(e,t,n)=>{var r=n(3012),i=n(9248),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},2279:e=>{var t=Array.isArray;e.exports=t},7840:(e,t,n)=>{var r=n(3008),i=n(5776);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},3815:(e,t,n)=>{var r=n(7840),i=n(9248);e.exports=function(e){return i(e)&&r(e)}},5410:(e,t,n)=>{var r=n(2022),i=n(9248);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},6794:(e,t,n)=>{e=n.nmd(e);var r=n(4759),i=n(3721),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;e.exports=u},6791:(e,t,n)=>{var r=n(7462),i=n(5531),o=n(4578),s=n(2279),a=n(7840),u=n(6794),c=n(2161),l=n(1641),h=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(a(e)&&(s(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||l(e)||o(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!r(e).length;for(var n in e)if(h.call(e,n))return!1;return!0}},9418:(e,t,n)=>{var r=n(1404);e.exports=function(e,t){return r(e,t)}},5056:(e,t,n)=>{var r=n(2022),i=n(9248),o=n(5461);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!o(e)}},3008:(e,t,n)=>{var r=n(2022),i=n(4567);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},5776:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},7744:(e,t,n)=>{var r=n(3530),i=n(5639),o=n(2479),s=o&&o.isMap,a=s?i(s):r;e.exports=a},3003:(e,t,n)=>{var r=n(4489),i=n(3334);e.exports=function(e,t){return e===t||r(e,t,i(t))}},1099:(e,t,n)=>{var r=n(9853);e.exports=function(e){return r(e)&&e!=+e}},9853:(e,t,n)=>{var r=n(2022),i=n(9248);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},4567:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},9248:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},5461:(e,t,n)=>{var r=n(2022),i=n(2253),o=n(9248),s=Function.prototype,a=Object.prototype,u=s.toString,c=a.hasOwnProperty,l=u.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==l}},5738:(e,t,n)=>{var r=n(3152),i=n(5639),o=n(2479),s=o&&o.isSet,a=s?i(s):r;e.exports=a},6801:(e,t,n)=>{var r=n(2022),i=n(2279),o=n(9248);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},184:(e,t,n)=>{var r=n(2022),i=n(9248);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},1641:(e,t,n)=>{var r=n(8183),i=n(5639),o=n(2479),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},7842:e=>{e.exports=function(e){return void 0===e}},6516:(e,t,n)=>{var r=n(5531),i=n(9248);e.exports=function(e){return i(e)&&"[object WeakMap]"==r(e)}},1361:(e,t,n)=>{var r=n(9645),i=n(5127);e.exports=function(e){return i("function"==typeof e?e:r(e,1))}},9076:(e,t,n)=>{var r=n(366),i=n(6942)((function(e,t,n){r(e,n,t)}));e.exports=i},5724:(e,t,n)=>{var r=n(7405),i=n(7462),o=n(7840);e.exports=function(e){return o(e)?r(e):i(e)}},1235:(e,t,n)=>{var r=n(7405),i=n(8833),o=n(7840);e.exports=function(e){return o(e)?r(e,!0):i(e)}},7988:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},5876:(e,t,n)=>{var r=n(1570),i=n(5127),o=n(6602),s=n(2279);e.exports=function(e,t){return(s(e)?r:o)(e,i(t,3))}},6638:(e,t,n)=>{var r=n(366),i=n(423),o=n(5127);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},53:(e,t,n)=>{var r=n(4467);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},953:(e,t,n)=>{var r=n(7436),i=n(4681)((function(e,t,n){r(e,t,n)}));e.exports=i},9986:(e,t,n)=>{var r=n(7436),i=n(4681)((function(e,t,n,i){r(e,t,n,i)}));e.exports=i},9822:e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},9208:e=>{e.exports=function(){}},2093:(e,t,n)=>{var r=n(1570),i=n(9645),o=n(6949),s=n(6463),a=n(3965),u=n(1288),c=n(5002),l=n(6387),h=c((function(e,t){var n={};if(null==e)return n;var c=!1;t=r(t,(function(t){return t=s(t,e),c||(c=t.length>1),t})),a(e,l(e),n),c&&(n=i(n,7,u));for(var h=t.length;h--;)o(n,t[h]);return n}));e.exports=h},3256:(e,t,n)=>{var r=n(5127),i=n(9822),o=n(8936);e.exports=function(e,t){return o(e,i(r(t)))}},263:(e,t,n)=>{var r=n(8245),i=n(2279);e.exports=function(e,t,n,o){return null==e?[]:(i(t)||(t=null==t?[]:[t]),i(n=o?void 0:n)||(n=null==n?[]:[n]),r(e,t,n))}},6401:(e,t,n)=>{var r=n(516),i=n(6231),o=n(8965),s=n(4652),a=r((function(e,t){var n=s(t,o(a));return i(e,64,void 0,t,n)}));a.placeholder={},e.exports=a},5357:(e,t,n)=>{var r=n(5271),i=n(5002)((function(e,t){return null==e?{}:r(e,t)}));e.exports=i},8936:(e,t,n)=>{var r=n(1570),i=n(5127),o=n(2038),s=n(6387);e.exports=function(e,t){if(null==e)return{};var n=r(s(e),(function(e){return[e]}));return t=i(t),o(e,n,(function(e,n){return t(e,n[0])}))}},8857:(e,t,n)=>{var r=n(9343),i=n(4753),o=n(5916),s=n(2535);e.exports=function(e){return o(e)?r(s(e)):i(e)}},1377:(e,t,n)=>{var r=n(6231),i=n(5002),o=i((function(e,t){return r(e,256,void 0,void 0,void 0,t)}));e.exports=o},9874:(e,t,n)=>{var r=n(1516),i=n(927),o=n(5127),s=n(3572),a=n(2279);e.exports=function(e,t,n){var u=a(e)?r:s,c=arguments.length<3;return u(e,o(t,4),n,c,i)}},5875:(e,t,n)=>{var r=n(6860),i=n(900),o=n(5127),s=n(2279),a=n(9822);e.exports=function(e,t){return(s(e)?r:i)(e,a(o(t,3)))}},2792:(e,t,n)=>{var r=n(5127),i=n(7008);e.exports=function(e,t){var n=[];if(!e||!e.length)return n;var o=-1,s=[],a=e.length;for(t=r(t,3);++o<a;){var u=e[o];t(u,o,e)&&(n.push(u),s.push(o))}return i(e,s),n}},5162:(e,t,n)=>{var r=n(4008);e.exports=function(){var e=arguments,t=r(e[0]);return e.length<3?t:t.replace(e[1],e[2])}},5849:(e,t,n)=>{var r=n(6992);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},2674:(e,t,n)=>{var r=n(6992);e.exports=function(e,t,n,i){return i="function"==typeof i?i:void 0,null==e?e:r(e,t,n,i)}},4273:(e,t,n)=>{var r=n(7462),i=n(5531),o=n(7840),s=n(6801),a=n(1615);e.exports=function(e){if(null==e)return 0;if(o(e))return s(e)?a(e):e.length;var t=i(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},1032:(e,t,n)=>{var r=n(6010),i=n(5127),o=n(8258),s=n(2279),a=n(9042);e.exports=function(e,t,n){var u=s(e)?r:o;return n&&a(e,t,n)&&(t=void 0),u(e,i(t,3))}},1515:e=>{e.exports=function(){return[]}},3721:e=>{e.exports=function(){return!1}},2491:(e,t,n)=>{var r=n(4978),i=n(5171);e.exports=function(e,t,n){return e&&e.length?(t=n||void 0===t?1:i(t),r(e,0,t<0?0:t)):[]}},849:(e,t,n)=>{var r=n(4978),i=n(5171);e.exports=function(e,t,n){var o=null==e?0:e.length;return o?(t=n||void 0===t?1:i(t),r(e,(t=o-t)<0?0:t,o)):[]}},314:(e,t,n)=>{var r=n(2588),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},5171:(e,t,n)=>{var r=n(314);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},2588:(e,t,n)=>{var r=n(6914),i=n(4567),o=n(184),s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=a.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?NaN:+e}},5202:(e,t,n)=>{var r=n(1570),i=n(6321),o=n(2279),s=n(184),a=n(7044),u=n(2535),c=n(4008);e.exports=function(e){return o(e)?r(e,u):s(e)?[e]:i(a(c(e)))}},8774:(e,t,n)=>{var r=n(3965),i=n(1235);e.exports=function(e){return r(e,i(e))}},4008:(e,t,n)=>{var r=n(1582);e.exports=function(e){return null==e?"":r(e)}},860:(e,t,n)=>{var r=n(1582),i=n(6914),o=n(6212),s=n(9249),a=n(9766),u=n(78),c=n(4008);e.exports=function(e,t,n){if((e=c(e))&&(n||void 0===t))return i(e);if(!e||!(t=r(t)))return e;var l=u(e),h=u(t),d=a(l,h),f=s(l,h)+1;return o(l,d,f).join("")}},3502:(e,t,n)=>{var r=n(1582),i=n(6212),o=n(9766),s=n(78),a=n(4008),u=/^\s+/;e.exports=function(e,t,n){if((e=a(e))&&(n||void 0===t))return e.replace(u,"");if(!e||!(t=r(t)))return e;var c=s(e),l=o(c,s(t));return i(c,l).join("")}},7292:(e,t,n)=>{var r=n(6810),i=n(5127),o=n(516),s=n(564),a=n(3815),u=n(7988),c=o((function(e){var t=u(e);return a(t)&&(t=void 0),s(r(e,1,a,!0),i(t,2))}));e.exports=c},7951:(e,t,n)=>{var r=n(6949);e.exports=function(e,t){return null==e||r(e,t)}},4668:(e,t,n)=>{var r=n(6860),i=n(1570),o=n(9343),s=n(4102),a=n(3815),u=Math.max;e.exports=function(e){if(!e||!e.length)return[];var t=0;return e=r(e,(function(e){if(a(e))return t=u(e.length,t),!0})),s(t,(function(t){return i(e,o(t))}))}},3414:(e,t,n)=>{var r=n(6689)("toUpperCase");e.exports=r},4740:(e,t,n)=>{var r=n(5294),i=n(8612),o=n(3463),s=n(2279),a=n(9248),u=n(7351),c=Object.prototype.hasOwnProperty;function l(e){if(a(e)&&!s(e)&&!(e instanceof r)){if(e instanceof i)return e;if(c.call(e,"__wrapped__"))return u(e)}return new i(e)}l.prototype=o.prototype,l.prototype.constructor=l,e.exports=l},6977:(e,t,n)=>{var r=n(516)(n(4668));e.exports=r},9051:function(e,t,n){(e=n.nmd(e)).exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(a(e,t))return!1;return!0}function c(e){return void 0===e}function l(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function d(e,t){var n,r=[],i=e.length;for(n=0;n<i;++n)r.push(t(e[n],n));return r}function f(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Qn(e,t,n,r,!0).utc()}function m(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function g(e){return null==e._pf&&(e._pf=m()),e._pf}function y(e){var t=null,r=!1,i=e._d&&!isNaN(e._d.getTime());return i&&(t=g(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)),null!=Object.isFrozen&&Object.isFrozen(e)?i:(e._isValid=i,e._isValid)}function v(e){var t=p(NaN);return null!=e?f(g(t),e):g(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=r.momentProperties=[],w=!1;function _(e,t){var n,r,i,o=b.length;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=g(t)),c(t._locale)||(e._locale=t._locale),o>0)for(n=0;n<o;n++)c(i=t[r=b[n]])||(e[r]=i);return e}function E(e){_(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===w&&(w=!0,r.updateOffset(this),w=!1)}function S(e){return e instanceof E||null!=e&&null!=e._isAMomentObject}function T(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function I(e,t){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,o,s,u=[],c=arguments.length;for(o=0;o<c;o++){if(i="","object"===typeof arguments[o]){for(s in i+="\n["+o+"] ",arguments[0])a(arguments[0],s)&&(i+=s+": "+arguments[0][s]+", ");i=i.slice(0,-2)}else i=arguments[o];u.push(i)}T(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var x,A={};function O(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),A[e]||(T(t),A[e]=!0)}function k(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function C(e){var t,n;for(n in e)a(e,n)&&(k(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function D(e,t){var n,r=f({},e);for(n in t)a(t,n)&&(s(e[n])&&s(t[n])?(r[n]={},f(r[n],e[n]),f(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)a(e,n)&&!a(t,n)&&s(e[n])&&(r[n]=f({},r[n]));return r}function P(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,x=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)a(e,t)&&n.push(t);return n};var N={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function R(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return k(r)?r.call(t,n):r}function M(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var L=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,j=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},U={};function V(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(U[e]=i),t&&(U[t[0]]=function(){return M(i.apply(this,arguments),t[1],t[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function B(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,n,r=e.match(L);for(t=0,n=r.length;t<n;t++)U[r[t]]?r[t]=U[r[t]]:r[t]=B(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=k(r[i])?r[i].call(t,e):r[i];return o}}function q(e,t){return e.isValid()?(t=W(t,e.localeData()),F[t]=F[t]||z(t),F[t](e)):e.localeData().invalidDate()}function W(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(j.lastIndex=0;n>=0&&j.test(e);)e=e.replace(j,r),j.lastIndex=0,n-=1;return e}var G={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function K(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(L).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var H="Invalid date";function Q(){return this._invalidDate}var Y="%d",$=/\d{1,2}/;function J(e){return this._ordinal.replace("%d",e)}var X={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Z(e,t,n,r){var i=this._relativeTime[n];return k(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return k(n)?n(t):n.replace(/%s/i,t)}var te={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function ne(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function re(e){var t,n,r={};for(n in e)a(e,n)&&(t=ne(n))&&(r[t]=e[n]);return r}var ie={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function oe(e){var t,n=[];for(t in e)a(e,t)&&n.push({unit:t,priority:ie[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}var se,ae=/\d/,ue=/\d\d/,ce=/\d{3}/,le=/\d{4}/,he=/[+-]?\d{6}/,de=/\d\d?/,fe=/\d\d\d\d?/,pe=/\d\d\d\d\d\d?/,me=/\d{1,3}/,ge=/\d{1,4}/,ye=/[+-]?\d{1,6}/,ve=/\d+/,be=/[+-]?\d+/,we=/Z|[+-]\d\d:?\d\d/gi,_e=/Z|[+-]\d\d(?::?\d\d)?/gi,Ee=/[+-]?\d+(\.\d{1,3})?/,Se=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Te=/^[1-9]\d?/,Ie=/^([1-9]\d|\d)/;function xe(e,t,n){se[e]=k(t)?t:function(e,r){return e&&n?n:t}}function Ae(e,t){return a(se,e)?se[e](t._strict,t._locale):new RegExp(Oe(e))}function Oe(e){return ke(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function ke(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Ce(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function De(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=Ce(t)),n}se={};var Pe={};function Ne(e,t){var n,r,i=t;for("string"===typeof e&&(e=[e]),l(t)&&(i=function(e,n){n[t]=De(e)}),r=e.length,n=0;n<r;n++)Pe[e[n]]=i}function Re(e,t){Ne(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function Me(e,t,n){null!=t&&a(Pe,e)&&Pe[e](t,n._a,n,e)}function Le(e){return e%4===0&&e%100!==0||e%400===0}var je=0,Fe=1,Ue=2,Ve=3,Be=4,ze=5,qe=6,We=7,Ge=8;function Ke(e){return Le(e)?366:365}V("Y",0,0,(function(){var e=this.year();return e<=9999?M(e,4):"+"+e})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),xe("Y",be),xe("YY",de,ue),xe("YYYY",ge,le),xe("YYYYY",ye,he),xe("YYYYYY",ye,he),Ne(["YYYYY","YYYYYY"],je),Ne("YYYY",(function(e,t){t[je]=2===e.length?r.parseTwoDigitYear(e):De(e)})),Ne("YY",(function(e,t){t[je]=r.parseTwoDigitYear(e)})),Ne("Y",(function(e,t){t[je]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return De(e)+(De(e)>68?1900:2e3)};var He,Qe=$e("FullYear",!0);function Ye(){return Le(this.year())}function $e(e,t){return function(n){return null!=n?(Xe(this,e,n),r.updateOffset(this,t),this):Je(this,e)}}function Je(e,t){if(!e.isValid())return NaN;var n=e._d,r=e._isUTC;switch(t){case"Milliseconds":return r?n.getUTCMilliseconds():n.getMilliseconds();case"Seconds":return r?n.getUTCSeconds():n.getSeconds();case"Minutes":return r?n.getUTCMinutes():n.getMinutes();case"Hours":return r?n.getUTCHours():n.getHours();case"Date":return r?n.getUTCDate():n.getDate();case"Day":return r?n.getUTCDay():n.getDay();case"Month":return r?n.getUTCMonth():n.getMonth();case"FullYear":return r?n.getUTCFullYear():n.getFullYear();default:return NaN}}function Xe(e,t,n){var r,i,o,s,a;if(e.isValid()&&!isNaN(n)){switch(r=e._d,i=e._isUTC,t){case"Milliseconds":return void(i?r.setUTCMilliseconds(n):r.setMilliseconds(n));case"Seconds":return void(i?r.setUTCSeconds(n):r.setSeconds(n));case"Minutes":return void(i?r.setUTCMinutes(n):r.setMinutes(n));case"Hours":return void(i?r.setUTCHours(n):r.setHours(n));case"Date":return void(i?r.setUTCDate(n):r.setDate(n));case"FullYear":break;default:return}o=n,s=e.month(),a=29!==(a=e.date())||1!==s||Le(o)?a:28,i?r.setUTCFullYear(o,s,a):r.setFullYear(o,s,a)}}function Ze(e){return k(this[e=ne(e)])?this[e]():this}function et(e,t){if("object"===typeof e){var n,r=oe(e=re(e)),i=r.length;for(n=0;n<i;n++)this[r[n].unit](e[r[n].unit])}else if(k(this[e=ne(e)]))return this[e](t);return this}function tt(e,t){return(e%t+t)%t}function nt(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=tt(t,12);return e+=(t-n)/12,1===n?Le(e)?29:28:31-n%7%2}He=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),V("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),xe("M",de,Te),xe("MM",de,ue),xe("MMM",(function(e,t){return t.monthsShortRegex(e)})),xe("MMMM",(function(e,t){return t.monthsRegex(e)})),Ne(["M","MM"],(function(e,t){t[Fe]=De(e)-1})),Ne(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[Fe]=i:g(n).invalidMonth=e}));var rt="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),it="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),ot=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,st=Se,at=Se;function ut(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||ot).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone}function ct(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[ot.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function lt(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=He.call(this._shortMonthsParse,s))?i:null:-1!==(i=He.call(this._longMonthsParse,s))?i:null:"MMM"===t?-1!==(i=He.call(this._shortMonthsParse,s))||-1!==(i=He.call(this._longMonthsParse,s))?i:null:-1!==(i=He.call(this._longMonthsParse,s))||-1!==(i=He.call(this._shortMonthsParse,s))?i:null}function ht(e,t,n){var r,i,o;if(this._monthsParseExact)return lt.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function dt(e,t){if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=De(t);else if(!l(t=e.localeData().monthsParse(t)))return e;var n=t,r=e.date();return r=r<29?r:Math.min(r,nt(e.year(),n)),e._isUTC?e._d.setUTCMonth(n,r):e._d.setMonth(n,r),e}function ft(e){return null!=e?(dt(this,e),r.updateOffset(this,!0),this):Je(this,"Month")}function pt(){return nt(this.year(),this.month())}function mt(e){return this._monthsParseExact?(a(this,"_monthsRegex")||yt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(a(this,"_monthsShortRegex")||(this._monthsShortRegex=st),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function gt(e){return this._monthsParseExact?(a(this,"_monthsRegex")||yt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(a(this,"_monthsRegex")||(this._monthsRegex=at),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function yt(){function e(e,t){return t.length-e.length}var t,n,r,i,o=[],s=[],a=[];for(t=0;t<12;t++)n=p([2e3,t]),r=ke(this.monthsShort(n,"")),i=ke(this.months(n,"")),o.push(r),s.push(i),a.push(i),a.push(r);o.sort(e),s.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+o.join("|")+")","i")}function vt(e,t,n,r,i,o,s){var a;return e<100&&e>=0?(a=new Date(e+400,t,n,r,i,o,s),isFinite(a.getFullYear())&&a.setFullYear(e)):a=new Date(e,t,n,r,i,o,s),a}function bt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function wt(e,t,n){var r=7+t-n;return-(7+bt(e,0,r).getUTCDay()-t)%7+r-1}function _t(e,t,n,r,i){var o,s,a=1+7*(t-1)+(7+n-r)%7+wt(e,r,i);return a<=0?s=Ke(o=e-1)+a:a>Ke(e)?(o=e+1,s=a-Ke(e)):(o=e,s=a),{year:o,dayOfYear:s}}function Et(e,t,n){var r,i,o=wt(e.year(),t,n),s=Math.floor((e.dayOfYear()-o-1)/7)+1;return s<1?r=s+St(i=e.year()-1,t,n):s>St(e.year(),t,n)?(r=s-St(e.year(),t,n),i=e.year()+1):(i=e.year(),r=s),{week:r,year:i}}function St(e,t,n){var r=wt(e,t,n),i=wt(e+1,t,n);return(Ke(e)-r+i)/7}function Tt(e){return Et(e,this._week.dow,this._week.doy).week}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),xe("w",de,Te),xe("ww",de,ue),xe("W",de,Te),xe("WW",de,ue),Re(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=De(e)}));var It={dow:0,doy:6};function xt(){return this._week.dow}function At(){return this._week.doy}function Ot(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function kt(e){var t=Et(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Ct(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Dt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Pt(e,t){return e.slice(t,7).concat(e.slice(0,t))}V("d",0,"do","day"),V("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),V("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),V("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),xe("d",de),xe("e",de),xe("E",de),xe("dd",(function(e,t){return t.weekdaysMinRegex(e)})),xe("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),xe("dddd",(function(e,t){return t.weekdaysRegex(e)})),Re(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:g(n).invalidWeekday=e})),Re(["d","e","E"],(function(e,t,n,r){t[r]=De(e)}));var Nt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Rt="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Mt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Lt=Se,jt=Se,Ft=Se;function Ut(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Pt(n,this._week.dow):e?n[e.day()]:n}function Vt(e){return!0===e?Pt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Bt(e){return!0===e?Pt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function zt(e,t,n){var r,i,o,s=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=He.call(this._weekdaysParse,s))?i:null:"ddd"===t?-1!==(i=He.call(this._shortWeekdaysParse,s))?i:null:-1!==(i=He.call(this._minWeekdaysParse,s))?i:null:"dddd"===t?-1!==(i=He.call(this._weekdaysParse,s))||-1!==(i=He.call(this._shortWeekdaysParse,s))||-1!==(i=He.call(this._minWeekdaysParse,s))?i:null:"ddd"===t?-1!==(i=He.call(this._shortWeekdaysParse,s))||-1!==(i=He.call(this._weekdaysParse,s))||-1!==(i=He.call(this._minWeekdaysParse,s))?i:null:-1!==(i=He.call(this._minWeekdaysParse,s))||-1!==(i=He.call(this._weekdaysParse,s))||-1!==(i=He.call(this._shortWeekdaysParse,s))?i:null}function qt(e,t,n){var r,i,o;if(this._weekdaysParseExact)return zt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=Je(this,"Day");return null!=e?(e=Ct(e,this.localeData()),this.add(e-t,"d")):t}function Gt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Kt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Dt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Ht(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(a(this,"_weekdaysRegex")||(this._weekdaysRegex=Lt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Qt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(a(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=jt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Yt(e){return this._weekdaysParseExact?(a(this,"_weekdaysRegex")||$t.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(a(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function $t(){function e(e,t){return t.length-e.length}var t,n,r,i,o,s=[],a=[],u=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=ke(this.weekdaysMin(n,"")),i=ke(this.weekdaysShort(n,"")),o=ke(this.weekdays(n,"")),s.push(r),a.push(i),u.push(o),c.push(r),c.push(i),c.push(o);s.sort(e),a.sort(e),u.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+s.join("|")+")","i")}function Jt(){return this.hours()%12||12}function Xt(){return this.hours()||24}function Zt(e,t){V(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Jt),V("k",["kk",2],0,Xt),V("hmm",0,0,(function(){return""+Jt.apply(this)+M(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Jt.apply(this)+M(this.minutes(),2)+M(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+M(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+M(this.minutes(),2)+M(this.seconds(),2)})),Zt("a",!0),Zt("A",!1),xe("a",en),xe("A",en),xe("H",de,Ie),xe("h",de,Te),xe("k",de,Te),xe("HH",de,ue),xe("hh",de,ue),xe("kk",de,ue),xe("hmm",fe),xe("hmmss",pe),xe("Hmm",fe),xe("Hmmss",pe),Ne(["H","HH"],Ve),Ne(["k","kk"],(function(e,t,n){var r=De(e);t[Ve]=24===r?0:r})),Ne(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Ne(["h","hh"],(function(e,t,n){t[Ve]=De(e),g(n).bigHour=!0})),Ne("hmm",(function(e,t,n){var r=e.length-2;t[Ve]=De(e.substr(0,r)),t[Be]=De(e.substr(r)),g(n).bigHour=!0})),Ne("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ve]=De(e.substr(0,r)),t[Be]=De(e.substr(r,2)),t[ze]=De(e.substr(i)),g(n).bigHour=!0})),Ne("Hmm",(function(e,t,n){var r=e.length-2;t[Ve]=De(e.substr(0,r)),t[Be]=De(e.substr(r))})),Ne("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ve]=De(e.substr(0,r)),t[Be]=De(e.substr(r,2)),t[ze]=De(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=$e("Hours",!0);function on(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var sn,an={calendar:N,longDateFormat:G,invalidDate:H,ordinal:Y,dayOfMonthOrdinalParse:$,relativeTime:X,months:rt,monthsShort:it,week:It,weekdays:Nt,weekdaysMin:Mt,weekdaysShort:Rt,meridiemParse:nn},un={},cn={};function ln(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function dn(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=hn(e[o]).split("-")).length,n=(n=hn(e[o+1]))?n.split("-"):null;t>0;){if(r=pn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&ln(i,n)>=t-1)break;t--}o++}return sn}function fn(e){return!(!e||!e.match("^[^/\\\\]*$"))}function pn(t){var n=null;if(void 0===un[t]&&e&&e.exports&&fn(t))try{n=sn._abbr,Object(function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}()),mn(n)}catch(r){un[t]=null}return un[t]}function mn(e,t){var n;return e&&((n=c(t)?vn(e):gn(e,t))?sn=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),sn._abbr}function gn(e,t){if(null!==t){var n,r=an;if(t.abbr=e,null!=un[e])O("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[e]._config;else if(null!=t.parentLocale)if(null!=un[t.parentLocale])r=un[t.parentLocale]._config;else{if(null==(n=pn(t.parentLocale)))return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return un[e]=new P(D(r,t)),cn[e]&&cn[e].forEach((function(e){gn(e.name,e.config)})),mn(e),un[e]}return delete un[e],null}function yn(e,t){if(null!=t){var n,r,i=an;null!=un[e]&&null!=un[e].parentLocale?un[e].set(D(un[e]._config,t)):(null!=(r=pn(e))&&(i=r._config),t=D(i,t),null==r&&(t.abbr=e),(n=new P(t)).parentLocale=un[e],un[e]=n),mn(e)}else null!=un[e]&&(null!=un[e].parentLocale?(un[e]=un[e].parentLocale,e===mn()&&mn(e)):null!=un[e]&&delete un[e]);return un[e]}function vn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return sn;if(!o(e)){if(t=pn(e))return t;e=[e]}return dn(e)}function bn(){return x(un)}function wn(e){var t,n=e._a;return n&&-2===g(e).overflow&&(t=n[Fe]<0||n[Fe]>11?Fe:n[Ue]<1||n[Ue]>nt(n[je],n[Fe])?Ue:n[Ve]<0||n[Ve]>24||24===n[Ve]&&(0!==n[Be]||0!==n[ze]||0!==n[qe])?Ve:n[Be]<0||n[Be]>59?Be:n[ze]<0||n[ze]>59?ze:n[qe]<0||n[qe]>999?qe:-1,g(e)._overflowDayOfYear&&(t<je||t>Ue)&&(t=Ue),g(e)._overflowWeeks&&-1===t&&(t=We),g(e)._overflowWeekday&&-1===t&&(t=Ge),g(e).overflow=t),e}var _n=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,En=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Sn=/Z|[+-]\d\d(?::?\d\d)?/,Tn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],In=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],xn=/^\/?Date\((-?\d+)/i,An=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,On={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function kn(e){var t,n,r,i,o,s,a=e._i,u=_n.exec(a)||En.exec(a),c=Tn.length,l=In.length;if(u){for(g(e).iso=!0,t=0,n=c;t<n;t++)if(Tn[t][1].exec(u[1])){i=Tn[t][0],r=!1!==Tn[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=l;t<n;t++)if(In[t][1].exec(u[3])){o=(u[2]||" ")+In[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!Sn.exec(u[4]))return void(e._isValid=!1);s="Z"}e._f=i+(o||"")+(s||""),Bn(e)}else e._isValid=!1}function Cn(e,t,n,r,i,o){var s=[Dn(e),it.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&s.push(parseInt(o,10)),s}function Dn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Pn(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Nn(e,t,n){return!e||Rt.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(g(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Rn(e,t,n){if(e)return On[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function Mn(e){var t,n=An.exec(Pn(e._i));if(n){if(t=Cn(n[4],n[3],n[2],n[5],n[6],n[7]),!Nn(n[1],t,e))return;e._a=t,e._tzm=Rn(n[8],n[9],n[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),g(e).rfc2822=!0}else e._isValid=!1}function Ln(e){var t=xn.exec(e._i);null===t?(kn(e),!1===e._isValid&&(delete e._isValid,Mn(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function jn(e,t,n){return null!=e?e:null!=t?t:n}function Fn(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Un(e){var t,n,r,i,o,s=[];if(!e._d){for(r=Fn(e),e._w&&null==e._a[Ue]&&null==e._a[Fe]&&Vn(e),null!=e._dayOfYear&&(o=jn(e._a[je],r[je]),(e._dayOfYear>Ke(o)||0===e._dayOfYear)&&(g(e)._overflowDayOfYear=!0),n=bt(o,0,e._dayOfYear),e._a[Fe]=n.getUTCMonth(),e._a[Ue]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ve]&&0===e._a[Be]&&0===e._a[ze]&&0===e._a[qe]&&(e._nextDay=!0,e._a[Ve]=0),e._d=(e._useUTC?bt:vt).apply(null,s),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ve]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(g(e).weekdayMismatch=!0)}}function Vn(e){var t,n,r,i,o,s,a,u,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,s=4,n=jn(t.GG,e._a[je],Et(Yn(),1,4).year),r=jn(t.W,1),((i=jn(t.E,1))<1||i>7)&&(u=!0)):(o=e._locale._week.dow,s=e._locale._week.doy,c=Et(Yn(),o,s),n=jn(t.gg,e._a[je],c.year),r=jn(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o),r<1||r>St(n,o,s)?g(e)._overflowWeeks=!0:null!=u?g(e)._overflowWeekday=!0:(a=_t(n,r,i,o,s),e._a[je]=a.year,e._dayOfYear=a.dayOfYear)}function Bn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],g(e).empty=!0;var t,n,i,o,s,a,u,c=""+e._i,l=c.length,h=0;for(u=(i=W(e._f,e._locale).match(L)||[]).length,t=0;t<u;t++)o=i[t],(n=(c.match(Ae(o,e))||[])[0])&&((s=c.substr(0,c.indexOf(n))).length>0&&g(e).unusedInput.push(s),c=c.slice(c.indexOf(n)+n.length),h+=n.length),U[o]?(n?g(e).empty=!1:g(e).unusedTokens.push(o),Me(o,n,e)):e._strict&&!n&&g(e).unusedTokens.push(o);g(e).charsLeftOver=l-h,c.length>0&&g(e).unusedInput.push(c),e._a[Ve]<=12&&!0===g(e).bigHour&&e._a[Ve]>0&&(g(e).bigHour=void 0),g(e).parsedDateParts=e._a.slice(0),g(e).meridiem=e._meridiem,e._a[Ve]=zn(e._locale,e._a[Ve],e._meridiem),null!==(a=g(e).era)&&(e._a[je]=e._locale.erasConvertYear(a,e._a[je])),Un(e),wn(e)}else Mn(e);else kn(e)}function zn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function qn(e){var t,n,r,i,o,s,a=!1,u=e._f.length;if(0===u)return g(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<u;i++)o=0,s=!1,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Bn(t),y(t)&&(s=!0),o+=g(t).charsLeftOver,o+=10*g(t).unusedTokens.length,g(t).score=o,a?o<r&&(r=o,n=t):(null==r||o<r||s)&&(r=o,n=t,s&&(a=!0));f(e,n||t)}function Wn(e){if(!e._d){var t=re(e._i),n=void 0===t.day?t.date:t.day;e._a=d([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Un(e)}}function Gn(e){var t=new E(wn(Kn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Kn(e){var t=e._i,n=e._f;return e._locale=e._locale||vn(e._l),null===t||void 0===n&&""===t?v({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),S(t)?new E(wn(t)):(h(t)?e._d=t:o(n)?qn(e):n?Bn(e):Hn(e),y(e)||(e._d=null),e))}function Hn(e){var t=e._i;c(t)?e._d=new Date(r.now()):h(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Ln(e):o(t)?(e._a=d(t.slice(0),(function(e){return parseInt(e,10)})),Un(e)):s(t)?Wn(e):l(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Qn(e,t,n,r,i){var a={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(s(e)&&u(e)||o(e)&&0===e.length)&&(e=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=i,a._l=n,a._i=e,a._f=t,a._strict=r,Gn(a)}function Yn(e,t,n,r){return Qn(e,t,n,r,!1)}r.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var $n=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:v()})),Jn=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=Yn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:v()}));function Xn(e,t){var n,r;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Yn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function Zn(){return Xn("isBefore",[].slice.call(arguments,0))}function er(){return Xn("isAfter",[].slice.call(arguments,0))}var tr=function(){return Date.now?Date.now():+new Date},nr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function rr(e){var t,n,r=!1,i=nr.length;for(t in e)if(a(e,t)&&(-1===He.call(nr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<i;++n)if(e[nr[n]]){if(r)return!1;parseFloat(e[nr[n]])!==De(e[nr[n]])&&(r=!0)}return!0}function ir(){return this._isValid}function or(){return Or(NaN)}function sr(e){var t=re(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,s=t.day||0,a=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=rr(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*a*60*60,this._days=+s+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=vn(),this._bubble()}function ar(e){return e instanceof sr}function ur(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function cr(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),s=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&De(e[r])!==De(t[r]))&&s++;return s+o}function lr(e,t){V(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+M(~~(e/60),2)+t+M(~~e%60,2)}))}lr("Z",":"),lr("ZZ",""),xe("Z",_e),xe("ZZ",_e),Ne(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=dr(_e,e)}));var hr=/([\+\-]|\d\d)/gi;function dr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(hr)||["-",0,0])[1]+De(n[2]))?0:"+"===n[0]?r:-r}function fr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(S(e)||h(e)?e.valueOf():Yn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Yn(e).local()}function pr(e){return-Math.round(e._d.getTimezoneOffset())}function mr(e,t,n){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=dr(_e,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=pr(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?Nr(this,Or(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:pr(this)}function gr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function yr(e){return this.utcOffset(0,e)}function vr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(pr(this),"m")),this}function br(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=dr(we,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function wr(e){return!!this.isValid()&&(e=e?Yn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function _r(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Er(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return _(t,this),(t=Kn(t))._a?(e=t._isUTC?p(t._a):Yn(t._a),this._isDSTShifted=this.isValid()&&cr(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Sr(){return!!this.isValid()&&!this._isUTC}function Tr(){return!!this.isValid()&&this._isUTC}function Ir(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var xr=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ar=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Or(e,t){var n,r,i,o=e,s=null;return ar(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(s=xr.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:De(s[Ue])*n,h:De(s[Ve])*n,m:De(s[Be])*n,s:De(s[ze])*n,ms:De(ur(1e3*s[qe]))*n}):(s=Ar.exec(e))?(n="-"===s[1]?-1:1,o={y:kr(s[2],n),M:kr(s[3],n),w:kr(s[4],n),d:kr(s[5],n),h:kr(s[6],n),m:kr(s[7],n),s:kr(s[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(i=Dr(Yn(o.from),Yn(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new sr(o),ar(e)&&a(e,"_locale")&&(r._locale=e._locale),ar(e)&&a(e,"_isValid")&&(r._isValid=e._isValid),r}function kr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Cr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Dr(e,t){var n;return e.isValid()&&t.isValid()?(t=fr(t,e),e.isBefore(t)?n=Cr(e,t):((n=Cr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Pr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(O(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Nr(this,Or(n,r),e),this}}function Nr(e,t,n,i){var o=t._milliseconds,s=ur(t._days),a=ur(t._months);e.isValid()&&(i=null==i||i,a&&dt(e,Je(e,"Month")+a*n),s&&Xe(e,"Date",Je(e,"Date")+s*n),o&&e._d.setTime(e._d.valueOf()+o*n),i&&r.updateOffset(e,s||a))}Or.fn=sr.prototype,Or.invalid=or;var Rr=Pr(1,"add"),Mr=Pr(-1,"subtract");function Lr(e){return"string"===typeof e||e instanceof String}function jr(e){return S(e)||h(e)||Lr(e)||l(e)||Ur(e)||Fr(e)||null===e||void 0===e}function Fr(e){var t,n,r=s(e)&&!u(e),i=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],c=o.length;for(t=0;t<c;t+=1)n=o[t],i=i||a(e,n);return r&&i}function Ur(e){var t=o(e),n=!1;return t&&(n=0===e.filter((function(t){return!l(t)&&Lr(e)})).length),t&&n}function Vr(e){var t,n,r=s(e)&&!u(e),i=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)n=o[t],i=i||a(e,n);return r&&i}function Br(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function zr(e,t){1===arguments.length&&(arguments[0]?jr(arguments[0])?(e=arguments[0],t=void 0):Vr(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||Yn(),i=fr(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",s=t&&(k(t[o])?t[o].call(this,n):t[o]);return this.format(s||this.localeData().calendar(o,this,Yn(n)))}function qr(){return new E(this)}function Wr(e,t){var n=S(e)?e:Yn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Gr(e,t){var n=S(e)?e:Yn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Kr(e,t,n,r){var i=S(e)?e:Yn(e),o=S(t)?t:Yn(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))}function Hr(e,t){var n,r=S(e)?e:Yn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=ne(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Qr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function Yr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function $r(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=fr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=ne(t)){case"year":o=Jr(this,r)/12;break;case"month":o=Jr(this,r);break;case"quarter":o=Jr(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:Ce(o)}function Jr(e,t){if(e.date()<t.date())return-Jr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Xr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Zr(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?q(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):k(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",q(n,"Z")):q(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ei(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",o="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=o+'[")]',this.format(e+t+n+r)}function ti(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=q(this,e);return this.localeData().postformat(t)}function ni(e,t){return this.isValid()&&(S(e)&&e.isValid()||Yn(e).isValid())?Or({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ri(e){return this.from(Yn(),e)}function ii(e,t){return this.isValid()&&(S(e)&&e.isValid()||Yn(e).isValid())?Or({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function oi(e){return this.to(Yn(),e)}function si(e){var t;return void 0===e?this._locale._abbr:(null!=(t=vn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ai=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function ui(){return this._locale}var ci=1e3,li=60*ci,hi=60*li,di=3506328*hi;function fi(e,t){return(e%t+t)%t}function pi(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-di:new Date(e,t,n).valueOf()}function mi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-di:Date.UTC(e,t,n)}function gi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:pi,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*li),hi);break;case"minute":t=this._d.valueOf(),t-=fi(t,li);break;case"second":t=this._d.valueOf(),t-=fi(t,ci)}return this._d.setTime(t),r.updateOffset(this,!0),this}function yi(e){var t,n;if(void 0===(e=ne(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?mi:pi,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=hi-fi(t+(this._isUTC?0:this.utcOffset()*li),hi)-1;break;case"minute":t=this._d.valueOf(),t+=li-fi(t,li)-1;break;case"second":t=this._d.valueOf(),t+=ci-fi(t,ci)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function vi(){return this._d.valueOf()-6e4*(this._offset||0)}function bi(){return Math.floor(this.valueOf()/1e3)}function wi(){return new Date(this.valueOf())}function _i(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ei(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Si(){return this.isValid()?this.toISOString():null}function Ti(){return y(this)}function Ii(){return f({},g(this))}function xi(){return g(this).overflow}function Ai(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Oi(e,t){var n,i,o,s=this._eras||vn("en")._eras;for(n=0,i=s.length;n<i;++n)switch("string"===typeof s[n].since&&(o=r(s[n].since).startOf("day"),s[n].since=o.valueOf()),typeof s[n].until){case"undefined":s[n].until=1/0;break;case"string":o=r(s[n].until).startOf("day").valueOf(),s[n].until=o.valueOf()}return s}function ki(e,t,n){var r,i,o,s,a,u=this.eras();for(e=e.toUpperCase(),r=0,i=u.length;r<i;++r)if(o=u[r].name.toUpperCase(),s=u[r].abbr.toUpperCase(),a=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return u[r];break;case"NNNN":if(o===e)return u[r];break;case"NNNNN":if(a===e)return u[r]}else if([o,s,a].indexOf(e)>=0)return u[r]}function Ci(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function Di(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Pi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function Ni(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Ri(){var e,t,n,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return(this.year()-r(o[e].since).year())*n+o[e].offset;return this.year()}function Mi(e){return a(this,"_erasNameRegex")||zi.call(this),e?this._erasNameRegex:this._erasRegex}function Li(e){return a(this,"_erasAbbrRegex")||zi.call(this),e?this._erasAbbrRegex:this._erasRegex}function ji(e){return a(this,"_erasNarrowRegex")||zi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Fi(e,t){return t.erasAbbrRegex(e)}function Ui(e,t){return t.erasNameRegex(e)}function Vi(e,t){return t.erasNarrowRegex(e)}function Bi(e,t){return t._eraYearOrdinalRegex||ve}function zi(){var e,t,n,r,i,o=[],s=[],a=[],u=[],c=this.eras();for(e=0,t=c.length;e<t;++e)n=ke(c[e].name),r=ke(c[e].abbr),i=ke(c[e].narrow),s.push(n),o.push(r),a.push(i),u.push(n),u.push(r),u.push(i);this._erasRegex=new RegExp("^("+u.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+s.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function qi(e,t){V(0,[e,e.length],0,t)}function Wi(e){return $i.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function Gi(e){return $i.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ki(){return St(this.year(),1,4)}function Hi(){return St(this.isoWeekYear(),1,4)}function Qi(){var e=this.localeData()._week;return St(this.year(),e.dow,e.doy)}function Yi(){var e=this.localeData()._week;return St(this.weekYear(),e.dow,e.doy)}function $i(e,t,n,r,i){var o;return null==e?Et(this,r,i).year:(t>(o=St(e,r,i))&&(t=o),Ji.call(this,e,t,n,r,i))}function Ji(e,t,n,r,i){var o=_t(e,t,n,r,i),s=bt(o.year,0,o.dayOfYear);return this.year(s.getUTCFullYear()),this.month(s.getUTCMonth()),this.date(s.getUTCDate()),this}function Xi(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}V("N",0,0,"eraAbbr"),V("NN",0,0,"eraAbbr"),V("NNN",0,0,"eraAbbr"),V("NNNN",0,0,"eraName"),V("NNNNN",0,0,"eraNarrow"),V("y",["y",1],"yo","eraYear"),V("y",["yy",2],0,"eraYear"),V("y",["yyy",3],0,"eraYear"),V("y",["yyyy",4],0,"eraYear"),xe("N",Fi),xe("NN",Fi),xe("NNN",Fi),xe("NNNN",Ui),xe("NNNNN",Vi),Ne(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?g(n).era=i:g(n).invalidEra=e})),xe("y",ve),xe("yy",ve),xe("yyy",ve),xe("yyyy",ve),xe("yo",Bi),Ne(["y","yy","yyy","yyyy"],je),Ne(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[je]=n._locale.eraYearOrdinalParse(e,i):t[je]=parseInt(e,10)})),V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),qi("gggg","weekYear"),qi("ggggg","weekYear"),qi("GGGG","isoWeekYear"),qi("GGGGG","isoWeekYear"),xe("G",be),xe("g",be),xe("GG",de,ue),xe("gg",de,ue),xe("GGGG",ge,le),xe("gggg",ge,le),xe("GGGGG",ye,he),xe("ggggg",ye,he),Re(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=De(e)})),Re(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),V("Q",0,"Qo","quarter"),xe("Q",ae),Ne("Q",(function(e,t){t[Fe]=3*(De(e)-1)})),V("D",["DD",2],"Do","date"),xe("D",de,Te),xe("DD",de,ue),xe("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ne(["D","DD"],Ue),Ne("Do",(function(e,t){t[Ue]=De(e.match(de)[0])}));var Zi=$e("Date",!0);function eo(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}V("DDD",["DDDD",3],"DDDo","dayOfYear"),xe("DDD",me),xe("DDDD",ce),Ne(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=De(e)})),V("m",["mm",2],0,"minute"),xe("m",de,Ie),xe("mm",de,ue),Ne(["m","mm"],Be);var to=$e("Minutes",!1);V("s",["ss",2],0,"second"),xe("s",de,Ie),xe("ss",de,ue),Ne(["s","ss"],ze);var no,ro,io=$e("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),xe("S",me,ae),xe("SS",me,ue),xe("SSS",me,ce),no="SSSS";no.length<=9;no+="S")xe(no,ve);function oo(e,t){t[qe]=De(1e3*("0."+e))}for(no="S";no.length<=9;no+="S")Ne(no,oo);function so(){return this._isUTC?"UTC":""}function ao(){return this._isUTC?"Coordinated Universal Time":""}ro=$e("Milliseconds",!1),V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var uo=E.prototype;function co(e){return Yn(1e3*e)}function lo(){return Yn.apply(null,arguments).parseZone()}function ho(e){return e}uo.add=Rr,uo.calendar=zr,uo.clone=qr,uo.diff=$r,uo.endOf=yi,uo.format=ti,uo.from=ni,uo.fromNow=ri,uo.to=ii,uo.toNow=oi,uo.get=Ze,uo.invalidAt=xi,uo.isAfter=Wr,uo.isBefore=Gr,uo.isBetween=Kr,uo.isSame=Hr,uo.isSameOrAfter=Qr,uo.isSameOrBefore=Yr,uo.isValid=Ti,uo.lang=ai,uo.locale=si,uo.localeData=ui,uo.max=Jn,uo.min=$n,uo.parsingFlags=Ii,uo.set=et,uo.startOf=gi,uo.subtract=Mr,uo.toArray=_i,uo.toObject=Ei,uo.toDate=wi,uo.toISOString=Zr,uo.inspect=ei,"undefined"!==typeof Symbol&&null!=Symbol.for&&(uo[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),uo.toJSON=Si,uo.toString=Xr,uo.unix=bi,uo.valueOf=vi,uo.creationData=Ai,uo.eraName=Di,uo.eraNarrow=Pi,uo.eraAbbr=Ni,uo.eraYear=Ri,uo.year=Qe,uo.isLeapYear=Ye,uo.weekYear=Wi,uo.isoWeekYear=Gi,uo.quarter=uo.quarters=Xi,uo.month=ft,uo.daysInMonth=pt,uo.week=uo.weeks=Ot,uo.isoWeek=uo.isoWeeks=kt,uo.weeksInYear=Qi,uo.weeksInWeekYear=Yi,uo.isoWeeksInYear=Ki,uo.isoWeeksInISOWeekYear=Hi,uo.date=Zi,uo.day=uo.days=Wt,uo.weekday=Gt,uo.isoWeekday=Kt,uo.dayOfYear=eo,uo.hour=uo.hours=rn,uo.minute=uo.minutes=to,uo.second=uo.seconds=io,uo.millisecond=uo.milliseconds=ro,uo.utcOffset=mr,uo.utc=yr,uo.local=vr,uo.parseZone=br,uo.hasAlignedHourOffset=wr,uo.isDST=_r,uo.isLocal=Sr,uo.isUtcOffset=Tr,uo.isUtc=Ir,uo.isUTC=Ir,uo.zoneAbbr=so,uo.zoneName=ao,uo.dates=I("dates accessor is deprecated. Use date instead.",Zi),uo.months=I("months accessor is deprecated. Use month instead",ft),uo.years=I("years accessor is deprecated. Use year instead",Qe),uo.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",gr),uo.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Er);var fo=P.prototype;function po(e,t,n,r){var i=vn(),o=p().set(r,t);return i[n](o,e)}function mo(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return po(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=po(e,r,n,"month");return i}function go(e,t,n,r){"boolean"===typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var i,o=vn(),s=e?o._week.dow:0,a=[];if(null!=n)return po(t,(n+s)%7,r,"day");for(i=0;i<7;i++)a[i]=po(t,(i+s)%7,r,"day");return a}function yo(e,t){return mo(e,t,"months")}function vo(e,t){return mo(e,t,"monthsShort")}function bo(e,t,n){return go(e,t,n,"weekdays")}function wo(e,t,n){return go(e,t,n,"weekdaysShort")}function _o(e,t,n){return go(e,t,n,"weekdaysMin")}fo.calendar=R,fo.longDateFormat=K,fo.invalidDate=Q,fo.ordinal=J,fo.preparse=ho,fo.postformat=ho,fo.relativeTime=Z,fo.pastFuture=ee,fo.set=C,fo.eras=Oi,fo.erasParse=ki,fo.erasConvertYear=Ci,fo.erasAbbrRegex=Li,fo.erasNameRegex=Mi,fo.erasNarrowRegex=ji,fo.months=ut,fo.monthsShort=ct,fo.monthsParse=ht,fo.monthsRegex=gt,fo.monthsShortRegex=mt,fo.week=Tt,fo.firstDayOfYear=At,fo.firstDayOfWeek=xt,fo.weekdays=Ut,fo.weekdaysMin=Bt,fo.weekdaysShort=Vt,fo.weekdaysParse=qt,fo.weekdaysRegex=Ht,fo.weekdaysShortRegex=Qt,fo.weekdaysMinRegex=Yt,fo.isPM=tn,fo.meridiem=on,mn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===De(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=I("moment.lang is deprecated. Use moment.locale instead.",mn),r.langData=I("moment.langData is deprecated. Use moment.localeData instead.",vn);var Eo=Math.abs;function So(){var e=this._data;return this._milliseconds=Eo(this._milliseconds),this._days=Eo(this._days),this._months=Eo(this._months),e.milliseconds=Eo(e.milliseconds),e.seconds=Eo(e.seconds),e.minutes=Eo(e.minutes),e.hours=Eo(e.hours),e.months=Eo(e.months),e.years=Eo(e.years),this}function To(e,t,n,r){var i=Or(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Io(e,t){return To(this,e,t,1)}function xo(e,t){return To(this,e,t,-1)}function Ao(e){return e<0?Math.floor(e):Math.ceil(e)}function Oo(){var e,t,n,r,i,o=this._milliseconds,s=this._days,a=this._months,u=this._data;return o>=0&&s>=0&&a>=0||o<=0&&s<=0&&a<=0||(o+=864e5*Ao(Co(a)+s),s=0,a=0),u.milliseconds=o%1e3,e=Ce(o/1e3),u.seconds=e%60,t=Ce(e/60),u.minutes=t%60,n=Ce(t/60),u.hours=n%24,s+=Ce(n/24),a+=i=Ce(ko(s)),s-=Ao(Co(i)),r=Ce(a/12),a%=12,u.days=s,u.months=a,u.years=r,this}function ko(e){return 4800*e/146097}function Co(e){return 146097*e/4800}function Do(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=ne(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+ko(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Co(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function Po(e){return function(){return this.as(e)}}var No=Po("ms"),Ro=Po("s"),Mo=Po("m"),Lo=Po("h"),jo=Po("d"),Fo=Po("w"),Uo=Po("M"),Vo=Po("Q"),Bo=Po("y"),zo=No;function qo(){return Or(this)}function Wo(e){return e=ne(e),this.isValid()?this[e+"s"]():NaN}function Go(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ko=Go("milliseconds"),Ho=Go("seconds"),Qo=Go("minutes"),Yo=Go("hours"),$o=Go("days"),Jo=Go("months"),Xo=Go("years");function Zo(){return Ce(this.days()/7)}var es=Math.round,ts={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ns(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function rs(e,t,n,r){var i=Or(e).abs(),o=es(i.as("s")),s=es(i.as("m")),a=es(i.as("h")),u=es(i.as("d")),c=es(i.as("M")),l=es(i.as("w")),h=es(i.as("y")),d=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||s<=1&&["m"]||s<n.m&&["mm",s]||a<=1&&["h"]||a<n.h&&["hh",a]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(d=d||l<=1&&["w"]||l<n.w&&["ww",l]),(d=d||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,d[3]=+e>0,d[4]=r,ns.apply(null,d)}function is(e){return void 0===e?es:"function"===typeof e&&(es=e,!0)}function os(e,t){return void 0!==ts[e]&&(void 0===t?ts[e]:(ts[e]=t,"s"===e&&(ts.ss=t-1),!0))}function ss(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=ts;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(o=Object.assign({},ts,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),r=rs(this,!i,o,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var as=Math.abs;function us(e){return(e>0)-(e<0)||+e}function cs(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,o,s,a,u=as(this._milliseconds)/1e3,c=as(this._days),l=as(this._months),h=this.asSeconds();return h?(e=Ce(u/60),t=Ce(e/60),u%=60,e%=60,n=Ce(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",o=us(this._months)!==us(h)?"-":"",s=us(this._days)!==us(h)?"-":"",a=us(this._milliseconds)!==us(h)?"-":"",i+"P"+(n?o+n+"Y":"")+(l?o+l+"M":"")+(c?s+c+"D":"")+(t||e||u?"T":"")+(t?a+t+"H":"")+(e?a+e+"M":"")+(u?a+r+"S":"")):"P0D"}var ls=sr.prototype;return ls.isValid=ir,ls.abs=So,ls.add=Io,ls.subtract=xo,ls.as=Do,ls.asMilliseconds=No,ls.asSeconds=Ro,ls.asMinutes=Mo,ls.asHours=Lo,ls.asDays=jo,ls.asWeeks=Fo,ls.asMonths=Uo,ls.asQuarters=Vo,ls.asYears=Bo,ls.valueOf=zo,ls._bubble=Oo,ls.clone=qo,ls.get=Wo,ls.milliseconds=Ko,ls.seconds=Ho,ls.minutes=Qo,ls.hours=Yo,ls.days=$o,ls.weeks=Zo,ls.months=Jo,ls.years=Xo,ls.humanize=ss,ls.toISOString=cs,ls.toString=cs,ls.toJSON=cs,ls.locale=si,ls.localeData=ui,ls.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",cs),ls.lang=ai,V("X",0,0,"unix"),V("x",0,0,"valueOf"),xe("x",be),xe("X",Ee),Ne("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Ne("x",(function(e,t,n){n._d=new Date(De(e))})),r.version="2.30.1",i(Yn),r.fn=uo,r.min=Zn,r.max=er,r.now=tr,r.utc=p,r.unix=co,r.months=yo,r.isDate=h,r.locale=mn,r.invalid=v,r.duration=Or,r.isMoment=S,r.weekdays=bo,r.parseZone=lo,r.localeData=vn,r.isDuration=ar,r.monthsShort=vo,r.weekdaysMin=_o,r.defineLocale=gn,r.updateLocale=yn,r.locales=bn,r.weekdaysShort=wo,r.normalizeUnits=ne,r.relativeTimeRounding=is,r.relativeTimeThreshold=os,r.calendarFormat=Br,r.prototype=uo,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()},7960:(e,t,n)=>{var r=n(2576);e.exports=f,e.exports.parse=o,e.exports.compile=function(e,t){return a(o(e,t),t)},e.exports.tokensToFunction=a,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,s=0,a="",l=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],d=n[1],f=n.index;if(a+=e.slice(s,f),s=f+h.length,d)a+=d[1];else{var p=e[s],m=n[2],g=n[3],y=n[4],v=n[5],b=n[6],w=n[7];a&&(r.push(a),a="");var _=null!=m&&null!=p&&p!==m,E="+"===b||"*"===b,S="?"===b||"*"===b,T=n[2]||l,I=y||v;r.push({name:g||o++,prefix:m||"",delimiter:T,optional:S,repeat:E,partial:_,asterisk:!!w,pattern:I?c(I):w?".*":"[^"+u(T)+"]+?"})}}return s<e.length&&(a+=e.substr(s)),a&&r.push(a),r}function s(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function a(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",h(t)));return function(t,i){for(var o="",a=t||{},u=(i||{}).pretty?s:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var h,d=a[l.name];if(null==d){if(l.optional){l.partial&&(o+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(r(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=u(d[f]),!n[c].test(h))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===f?l.prefix:l.delimiter)+h}}else{if(h=l.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(d),!n[c].test(h))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+h+'"');o+=l.prefix+h}}else o+=l}return o}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function l(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,s="",a=0;a<e.length;a++){var c=e[a];if("string"===typeof c)s+=u(c);else{var d=u(c.prefix),f="(?:"+c.pattern+")";t.push(c),c.repeat&&(f+="(?:"+d+f+")*"),s+=f=c.optional?c.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=u(n.delimiter||"/"),m=s.slice(-p.length)===p;return i||(s=(m?s.slice(0,-p.length):s)+"(?:"+p+"(?=$))?"),s+=o?"$":i&&m?"":"(?="+p+"|$)",l(new RegExp("^"+s,h(n)),t)}function f(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return l(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(f(e[i],t,n).source);return l(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(o(e,n),t,n)}(e,t,n)}},3488:(e,t,n)=>{"use strict";var r=n(3959);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},1942:(e,t,n)=>{e.exports=n(3488)()},3959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},8345:(e,t,n)=>{"use strict";var r=n(9950),i=n(5340);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),A=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,j=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var u="\n"+i[s].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case E:return"Portal";case I:return"Profiler";case T:return"StrictMode";case k:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function oe(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Se=null,Te=null;function Ie(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function xe(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Ae(){if(Se){var e=Se,t=Te;if(Te=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Oe(e,t){return e(t)}function ke(){}var Ce=!1;function De(e,t,n){if(Ce)return e(t,n);Ce=!0;try{return Oe(e,t,n)}finally{Ce=!1,(null!==Se||null!==Te)&&(ke(),Ae())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(l)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(le){Ne=!1}function Me(e,t,n,r,i,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,je=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,je=e}};function Be(e,t,n,r,i,o,s,a,u){Le=!1,je=null,Me.apply(Ve,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return We(i),e;if(s===r)return We(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=s;break}if(u===r){a=!0,r=i,n=s;break}u=u.sibling}if(!a){for(u=s.child;u;){if(u===n){a=!0,n=s,r=i;break}if(u===r){a=!0,r=s,n=i;break}u=u.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ut|0)|0},at=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,St,Tt,It,xt=!1,At=[],Ot=null,kt=null,Ct=null,Dt=new Map,Pt=new Map,Nt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){xt=!1,null!==Ot&&Ft(Ot)&&(Ot=null),null!==kt&&Ft(kt)&&(kt=null),null!==Ct&&Ft(Ct)&&(Ct=null),Dt.forEach(Ut),Pt.forEach(Ut)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,xt||(xt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function zt(e){function t(t){return Bt(t,e)}if(0<At.length){Bt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&Bt(Ot,e),null!==kt&&Bt(kt,e),null!==Ct&&Bt(Ct,e),Dt.forEach(t),Pt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)jt(n),null===n.blockedOn&&Nt.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=1,Ht(e,t,n,r)}finally{bt=i,qt.transition=o}}function Kt(e,t,n,r){var i=bt,o=qt.transition;qt.transition=null;try{bt=4,Ht(e,t,n,r)}finally{bt=i,qt.transition=o}}function Ht(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ot=Lt(Ot,e,t,n,r,i),!0;case"dragenter":return kt=Lt(kt,e,t,n,r,i),!0;case"mouseover":return Ct=Lt(Ct,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Dt.set(o,Lt(Dt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=_e(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(cn),hn=j({},cn,{view:0,detail:0}),dn=on(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(sn=e.screenX-un.screenX,an=e.screenY-un.screenY):an=sn=0,un=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),mn=on(j({},fn,{dataTransfer:0})),gn=on(j({},hn,{relatedTarget:0})),yn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),wn=on(j({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return Tn}var xn=j({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(xn),On=on(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=on(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Cn=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(Dn),Nn=[9,13,27,32],Rn=l&&"CompositionEvent"in window,Mn=null;l&&"documentMode"in document&&(Mn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Mn,jn=l&&(!Rn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){xe(r),0<(t=Kr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Hn=null;function Qn(e){Fr(e,0)}function Yn(e){if(H(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Hn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Gn(t,Hn,e,_e(e)),De(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function or(e,t){if("click"===e)return Yn(t)}function sr(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=lr(n,o);var s=lr(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ur(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Sr={},Tr={};function Ir(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Sr[e]=n[t];return e}l&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var xr=Ir("animationend"),Ar=Ir("animationiteration"),Or=Ir("animationstart"),kr=Ir("transitionend"),Cr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Cr.set(e,t),u(t,[e])}for(var Nr=0;Nr<Dr.length;Nr++){var Rr=Dr[Nr];Pr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Pr(xr,"onAnimationEnd"),Pr(Ar,"onAnimationIteration"),Pr(Or,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(kr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,u,c){if(Be.apply(this,arguments),Le){if(!Le)throw Error(o(198));var l=je;Le=!1,je=null,Fe||(Fe=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;jr(i,a,c),o=u}else for(s=0;s<r.length;s++){if(u=(a=r[s]).instance,c=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;jr(i,a,c),o=u}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,s.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Vr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Kt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var u=s.tag;if((3===u||4===u)&&((u=s.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=vi(a)))return;if(5===(u=s.tag)||6===u){r=o=s;continue e}a=a.parentNode}}r=r.return}De((function(){var r=o,i=_e(n),s=[];e:{var a=Cr.get(e);if(void 0!==a){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":c="focus",u=gn;break;case"focusout":c="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=kn;break;case xr:case Ar:case Or:u=yn;break;case kr:u=Cn;break;case"scroll":u=dn;break;case"wheel":u=Pn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=On}var l=0!==(4&t),h=!l&&"scroll"===e,d=l?null!==a?a+"Capture":null:a;l=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&l.push(Gr(p,m,f)))),h)break;p=p.return}0<l.length&&(a=new u(a,c,null,n,i),s.push({event:a,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==u?a:wi(u),f=null==c?a:wi(c),(a=new l(m,p+"leave",u,n,i)).target=h,a.relatedTarget=f,m=null,vi(i)===r&&((l=new l(d,p+"enter",c,n,i)).target=f,l.relatedTarget=h,m=l),h=m,u&&c)e:{for(d=c,p=0,f=l=u;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)l=Hr(l),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(l===d||null!==d&&l===d.alternate)break e;l=Hr(l),d=Hr(d)}l=null}else l=null;null!==u&&Qr(s,a,u,l,!1),null!==c&&null!==h&&Qr(s,h,c,l,!0)}if("select"===(u=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var g=$n;else if(Wn(a))if(Jn)g=sr;else{g=ir;var y=rr}else(u=a.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(s,g,n,i):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?wi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(s,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:y}),v?b.data=v:null!==(v=Bn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Vn(e,t)?(e=en(),Zt=Xt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=v))}Fr(s,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(Gr(e,o,i)),null!=(o=Pe(e,t))&&r.push(Gr(e,o,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(null!==u&&u===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(u=Pe(n,o))&&s.unshift(Gr(n,u,a)):i||null!=(u=Pe(n,o))&&s.push(Gr(n,u,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[di])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var Ei=[],Si=-1;function Ti(e){return{current:e}}function Ii(e){0>Si||(e.current=Ei[Si],Ei[Si]=null,Si--)}function xi(e,t){Si++,Ei[Si]=e.current,e.current=t}var Ai={},Oi=Ti(Ai),ki=Ti(!1),Ci=Ai;function Di(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Ii(ki),Ii(Oi)}function Ri(e,t,n){if(Oi.current!==Ai)throw Error(o(168));xi(Oi,t),xi(ki,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,q(e)||"Unknown",i));return j({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ci=Oi.current,xi(Oi,e),xi(ki,ki.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Mi(e,t,Ci),r.__reactInternalMemoizedMergedChildContext=e,Ii(ki),Ii(Oi),xi(Oi,e)):Ii(ki),xi(ki,n)}var Fi=null,Ui=!1,Vi=!1;function Bi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!Vi&&null!==Fi){Vi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),He(Ze,zi),i}finally{bt=t,Vi=!1}}return null}var qi=[],Wi=0,Gi=null,Ki=0,Hi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Wi++]=Ki,qi[Wi++]=Gi,Gi=e,Ki=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$i=1<<32-st(t)+i|n<<i|r,Ji=o+e}else $i=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function to(e){for(;e===Gi;)Gi=qi[--Wi],qi[Wi]=null,Ki=qi[--Wi],qi[Wi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(uo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return lo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vo=Ti(null),bo=null,wo=null,_o=null;function Eo(){_o=wo=bo=null}function So(e){var t=vo.current;Ii(vo),e._currentValue=t}function To(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Io(e,t){bo=e,_o=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function xo(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var Ao=null;function Oo(e){null===Ao?Ao=[e]:Ao.push(e)}function ko(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Oo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Co(e,r)}function Co(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Do=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function No(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ro(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ku)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Co(e,n)}return null===(i=r.interleaved)?(t.next=t,Oo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Co(e,n)}function Lo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function jo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var i=e.updateQueue;Do=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var u=a,c=u.next;u.next=null,null===s?o=c:s.next=c,s=u;var l=e.alternate;null!==l&&((a=(l=l.updateQueue).lastBaseUpdate)!==s&&(null===a?l.firstBaseUpdate=c:a.next=c,l.lastBaseUpdate=u))}if(null!==o){var h=i.baseState;for(s=0,l=c=u=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==l&&(l=l.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Do=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===l?(c=l=f,u=h):l=l.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);ju|=s,e.lanes=s,e.memoizedState=h}}function Uo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Vo=(new r.Component).refs;function Bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zo={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Ro(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Mo(e,o,i))&&(rc(t,e,i,r),Lo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Ro(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Mo(e,o,i))&&(rc(t,e,i,r),Lo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ro(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Mo(e,i,r))&&(rc(t,e,r,n),Lo(t,e,r))}};function qo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Wo(e,t,n){var r=!1,i=Ai,o=t.contextType;return"object"===typeof o&&null!==o?o=xo(o):(i=Pi(t)?Ci:Oi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Di(e,i):Ai),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zo.enqueueReplaceState(t,t.state,null)}function Ko(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vo,Po(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=xo(o):(o=Pi(t)?Ci:Oi.current,i.context=Di(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Bo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zo.enqueueReplaceState(i,i.state,null),Fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ho(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Vo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===S?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Yo(o)===t.type)?((r=i(t,n.props)).ref=Ho(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Ho(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Ho(e,null,t),n.return=e,n;case E:return(t=Uc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Qo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?l(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);Qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);Qo(t,r)}return null}function m(i,o,a,u){for(var c=null,l=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,a[m],u);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),o=s(y,o,m),null===l?c=y:l.sibling=y,l=y,h=g}if(m===a.length)return n(i,h),io&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],u))&&(o=s(h,o,m),null===l?c=h:l.sibling=h,l=h);return io&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],u))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===l?c=g:l.sibling=g,l=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Xi(i,m),c}function g(i,a,u,c){var l=M(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var h=l=null,m=a,g=a=0,y=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===h?l=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),io&&Xi(i,g),l;if(null===m){for(;!v.done;g++,v=u.next())null!==(v=d(i,v.value,c))&&(a=s(v,a,g),null===h?l=v:h.sibling=v,h=v);return io&&Xi(i,g),l}for(m=r(i,m);!v.done;g++,v=u.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=s(v,a,g),null===h?l=v:h.sibling=v,h=v);return e&&m.forEach((function(e){return t(i,e)})),io&&Xi(i,g),l}return function e(r,o,s,u){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,l=o;null!==l;){if(l.key===c){if((c=s.type)===S){if(7===l.tag){n(r,l.sibling),(o=i(l,s.props.children)).return=r,r=o;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Yo(c)===l.type){n(r,l.sibling),(o=i(l,s.props)).ref=Ho(r,l,s),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}s.type===S?((o=Lc(s.props.children,r.mode,u,s.key)).return=r,r=o):((u=Mc(s.type,s.key,s.props,null,r.mode,u)).ref=Ho(r,o,s),u.return=r,r=u)}return a(r);case E:e:{for(l=s.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Uc(s,r.mode,u)).return=r,r=o}return a(r);case P:return e(r,o,(l=s._init)(s._payload),u)}if(te(s))return m(r,o,s,u);if(M(s))return g(r,o,s,u);Qo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fc(s,r.mode,u)).return=r,r=o),a(r)):n(r,o)}}var Jo=$o(!0),Xo=$o(!1),Zo={},es=Ti(Zo),ts=Ti(Zo),ns=Ti(Zo);function rs(e){if(e===Zo)throw Error(o(174));return e}function is(e,t){switch(xi(ns,t),xi(ts,e),xi(es,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ii(es),xi(es,t)}function os(){Ii(es),Ii(ts),Ii(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=ue(t,e.type);t!==n&&(xi(ts,e),xi(es,n))}function as(e){ts.current===e&&(Ii(es),Ii(ts))}var us=Ti(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ls=[];function hs(){for(var e=0;e<ls.length;e++)ls[e]._workInProgressVersionPrimary=null;ls.length=0}var ds=w.ReactCurrentDispatcher,fs=w.ReactCurrentBatchConfig,ps=0,ms=null,gs=null,ys=null,vs=!1,bs=!1,ws=0,_s=0;function Es(){throw Error(o(321))}function Ss(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Ts(e,t,n,r,i,s){if(ps=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:ua,e=n(r,i),bs){s=0;do{if(bs=!1,ws=0,25<=s)throw Error(o(301));s+=1,ys=gs=null,t.updateQueue=null,ds.current=ca,e=n(r,i)}while(bs)}if(ds.current=sa,t=null!==gs&&null!==gs.next,ps=0,ys=gs=ms=null,vs=!1,t)throw Error(o(300));return e}function Is(){var e=0!==ws;return ws=0,e}function xs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ys?ms.memoizedState=ys=e:ys=ys.next=e,ys}function As(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===ys?ms.memoizedState:ys.next;if(null!==t)ys=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===ys?ms.memoizedState=ys=e:ys=ys.next=e}return ys}function Os(e,t){return"function"===typeof t?t(e):t}function ks(e){var t=As(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var u=a=null,c=null,l=s;do{var h=l.lane;if((ps&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=d,a=r):c=c.next=d,ms.lanes|=h,ju|=h}l=l.next}while(null!==l&&l!==s);null===c?a=r:c.next=u,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ms.lanes|=s,ju|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Cs(e){var t=As(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ds(){}function Ps(e,t){var n=ms,r=As(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,Ws(Ms.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==ys&&1&ys.memoizedState.tag){if(n.flags|=2048,Us(9,Rs.bind(null,n,r,i,t),void 0,null),null===Cu)throw Error(o(349));0!==(30&ps)||Ns(n,t,i)}return i}function Ns(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Rs(e,t,n,r){t.value=n,t.getSnapshot=r,Ls(t)&&js(e)}function Ms(e,t,n){return n((function(){Ls(t)&&js(e)}))}function Ls(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function js(e){var t=Co(e,1);null!==t&&rc(t,e,1,-1)}function Fs(e){var t=xs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ms,e),[t.memoizedState,e]}function Us(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vs(){return As().memoizedState}function Bs(e,t,n,r){var i=xs();ms.flags|=e,i.memoizedState=Us(1|t,n,void 0,void 0===r?null:r)}function zs(e,t,n,r){var i=As();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&Ss(r,s.deps))return void(i.memoizedState=Us(t,n,o,r))}ms.flags|=e,i.memoizedState=Us(1|t,n,o,r)}function qs(e,t){return Bs(8390656,8,e,t)}function Ws(e,t){return zs(2048,8,e,t)}function Gs(e,t){return zs(4,2,e,t)}function Ks(e,t){return zs(4,4,e,t)}function Hs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zs(4,4,Hs.bind(null,t,e),n)}function Ys(){}function $s(e,t){var n=As();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ss(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=As();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ss(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xs(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ms.lanes|=n,ju|=n,e.baseState=!0),t)}function Zs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{bt=n,fs.transition=r}}function ea(){return As().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=ko(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var u=t.interleaved;return null===u?(i.next=i,Oo(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=ko(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ia(e,t){bs=vs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var sa={readContext:xo,useCallback:Es,useContext:Es,useEffect:Es,useImperativeHandle:Es,useInsertionEffect:Es,useLayoutEffect:Es,useMemo:Es,useReducer:Es,useRef:Es,useState:Es,useDebugValue:Es,useDeferredValue:Es,useTransition:Es,useMutableSource:Es,useSyncExternalStore:Es,useId:Es,unstable_isNewReconciler:!1},aa={readContext:xo,useCallback:function(e,t){return xs().memoizedState=[e,void 0===t?null:t],e},useContext:xo,useEffect:qs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bs(4194308,4,Hs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bs(4,2,e,t)},useMemo:function(e,t){var n=xs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=xs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,ms,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xs().memoizedState=e},useState:Fs,useDebugValue:Ys,useDeferredValue:function(e){return xs().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=Zs.bind(null,e[1]),xs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ms,i=xs();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Cu)throw Error(o(349));0!==(30&ps)||Ns(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,qs(Ms.bind(null,r,s,e),[e]),r.flags|=2048,Us(9,Rs.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=xs(),t=Cu.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-st($i)-1)).toString(32)+n),0<(n=ws++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_s++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ua={readContext:xo,useCallback:$s,useContext:xo,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Gs,useLayoutEffect:Ks,useMemo:Js,useReducer:ks,useRef:Vs,useState:function(){return ks(Os)},useDebugValue:Ys,useDeferredValue:function(e){return Xs(As(),gs.memoizedState,e)},useTransition:function(){return[ks(Os)[0],As().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ps,useId:ea,unstable_isNewReconciler:!1},ca={readContext:xo,useCallback:$s,useContext:xo,useEffect:Ws,useImperativeHandle:Qs,useInsertionEffect:Gs,useLayoutEffect:Ks,useMemo:Js,useReducer:Cs,useRef:Vs,useState:function(){return Cs(Os)},useDebugValue:Ys,useDeferredValue:function(e){var t=As();return null===gs?t.memoizedState=e:Xs(t,gs.memoizedState,e)},useTransition:function(){return[Cs(Os)[0],As().memoizedState]},useMutableSource:Ds,useSyncExternalStore:Ps,useId:ea,unstable_isNewReconciler:!1};function la(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ro(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gu||(Gu=!0,Ku=r),da(0,t)},n}function ma(e,t,n){(n=Ro(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xc.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ro(-1,1)).tag=2,Mo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=w.ReactCurrentOwner,wa=!1;function _a(e,t,n,r){t.child=null===e?Xo(t,null,n,r):Jo(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var o=t.ref;return Io(t,i),r=Ts(e,t,n,r,o,i),n=Is(),null===e||wa?(io&&n&&eo(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Sa(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Nc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ta(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(s,r)&&e.ref===t.ref)return Ga(e,t,i)}return t.flags|=1,(e=Rc(o,r)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ga(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Aa(e,t,n,r,i)}function Ia(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},xi(Ru,Nu),Nu|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,xi(Ru,Nu),Nu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,xi(Ru,Nu),Nu|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,xi(Ru,Nu),Nu|=r;return _a(e,t,i,n),t.child}function xa(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,i){var o=Pi(n)?Ci:Oi.current;return o=Di(t,o),Io(t,i),n=Ts(e,t,n,r,o,i),r=Is(),null===e||wa?(io&&r&&eo(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ga(e,t,i))}function Oa(e,t,n,r,i){if(Pi(n)){var o=!0;Li(t)}else o=!1;if(Io(t,i),null===t.stateNode)Wa(e,t),Wo(t,n,r),Ko(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var u=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=xo(c):c=Di(t,c=Pi(n)?Ci:Oi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==c)&&Go(t,s,r,c),Do=!1;var d=t.memoizedState;s.state=d,Fo(t,r,s,i),u=t.memoizedState,a!==r||d!==u||ki.current||Do?("function"===typeof l&&(Bo(t,n,l,r),u=t.memoizedState),(a=Do||qo(t,n,a,r,d,u,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,No(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:yo(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(u=n.contextType)&&null!==u?u=xo(u):u=Di(t,u=Pi(n)?Ci:Oi.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==u)&&Go(t,s,r,u),Do=!1,d=t.memoizedState,s.state=d,Fo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||ki.current||Do?("function"===typeof f&&(Bo(t,n,f,r),p=t.memoizedState),(c=Do||qo(t,n,c,r,d,p,u)||!1)?(l||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=u,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return ka(e,t,n,r,o,i)}function ka(e,t,n,r,i,o){xa(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&ji(t,n,!1),Ga(e,t,o);r=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Ca(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),is(e,t.containerInfo)}function Da(e,t,n,r,i){return po(),mo(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Na,Ra,Ma,La={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,s=us.current,a=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),xi(us,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,a?(i=t.mode,a=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=u):a=jc(u,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=La,e):Ua(t,u));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Va(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(s=Lc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=La,s);if(0===(1&t.mode))return Va(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Va(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(u=0!==(a&e.childLanes),wa||u){if(null!==(r=Cu)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Co(e,i),rc(r,e,i,-1))}return gc(),Va(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Oc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Ua(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,s,n);if(a){a=i.fallback,u=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Rc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Rc(r,a):(a=Lc(a,u,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,u=null===(u=e.child.memoizedState)?ja(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Rc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ua(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Va(e,t,n,r){return null!==r&&mo(r),Jo(t,e.child,null,n),(e=Ua(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),To(e.return,t,n)}function za(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=us.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xi(us,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,o);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ga(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ju|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Pi(t.type)&&Ni(),Ha(t),null;case 3:return r=t.stateNode,os(),Ii(ki),Ii(Oi),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Na(e,t),Ha(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Ra(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ha(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,s),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ur("invalid",r);break;case"textarea":ie(r,s),Ur("invalid",r)}for(var u in ve(n,s),i=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Ur("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)Ur(Mr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(s in ve(n,i),c=i)if(c.hasOwnProperty(s)){var l=c[s];"style"===s?ge(e,l):"dangerouslySetInnerHTML"===s?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===s?"string"===typeof l?("textarea"!==n||""!==l)&&de(e,l):"number"===typeof l&&de(e,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=l&&"onScroll"===s&&Ur("scroll",e):null!=l&&b(e,s,l,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Ii(us),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&us.current)?0===Mu&&(Mu=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return os(),Na(e,t),null===e&&zr(t.stateNode.containerInfo),Ha(t),null;case 10:return So(t.type._context),Ha(t),null;case 19:if(Ii(us),null===(s=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(u=s.rendering))if(r)Ka(s,!1);else{if(0!==Mu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=cs(e))){for(t.flags|=128,Ka(s,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(u=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,e=u.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return xi(us,1&us.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>qu&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(s,!0),null===s.tail&&"hidden"===s.tailMode&&!u.alternate&&!io)return Ha(t),null}else 2*Je()-s.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304);s.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=s.last)?n.sibling=u:t.child=u,s.last=u)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=us.current,xi(us,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nu)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ya(e,t){switch(to(t),t.tag){case 1:return Pi(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ii(ki),Ii(Oi),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ii(us),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ii(us),null;case 4:return os(),null;case 10:return So(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Na=function(){},Ra=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),s=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ve(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(a.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(s=s||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(a.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),s||u===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tu(t,n,o)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function su(e){var t=e.alternate;null!==t&&(e.alternate=null,su(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function au(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var hu=null,du=!1;function fu(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||eu(n,t);case 6:var r=hu,i=du;hu=null,fu(e,t,n),du=i,null!==(hu=r)&&(du?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(du?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=du,hu=n.stateNode.containerInfo,du=!0,fu(e,t,n),hu=r,du=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tu(n,t,s),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!Ja&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ic(n,t,a)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fu(e,t,n),Ja=r):fu(e,t,n);break;default:fu(e,t,n)}}function mu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=kc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,u=a;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,du=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,du=!0;break e}u=u.return}if(null===hu)throw Error(o(160));pu(s,a,i),hu=null,du=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gu(t,e),vu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(g){Ic(e,e.return,g)}try{ru(5,e,e.return)}catch(g){Ic(e,e.return,g)}}break;case 1:gu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(gu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ic(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===s.type&&null!=s.name&&J(i,s),be(u,a);var l=be(u,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,l)}switch(u){case"input":X(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Ic(e,e.return,g)}}break;case 6:if(gu(t,e),vu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ic(e,e.return,g)}}break;case 3:if(gu(t,e),vu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Ic(e,e.return,g)}break;case 4:default:gu(t,e),vu(e);break;case 13:gu(t,e),vu(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zu=Je())),4&r&&mu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(l=Ja)||h,gu(t,e),Ja=l):gu(t,e),vu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return);break;case 1:eu(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ic(r,n,g)}}break;case 5:eu(f,f.return);break;case 22:if(null!==f.memoizedState){Eu(d);continue}}null!==p?(p.return=f,Za=p):Eu(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,l?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(u=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=me("display",a))}catch(g){Ic(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Ic(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gu(t,e),vu(e),4&r&&mu(e);case 21:}}function vu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(au(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cu(e,uu(e),s);break;default:throw Error(o(161))}}catch(a){Ic(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Za=e,wu(e,t,n)}function wu(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||$a;if(!s){var a=i.alternate,u=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=s,(Ja=u)&&!c)for(Za=i;null!==Za;)u=(s=Za).child,22===s.tag&&null!==s.memoizedState?Su(i):null!==u?(u.return=s,Za=u):Su(i);for(;null!==o;)Za=o,wu(o,t,n),o=o.sibling;Za=i,$a=a,Ja=c}_u(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Za=o):_u(e)}}function _u(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Uo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Uo(t,a,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(o(163))}Ja||512&t.flags&&ou(t)}catch(f){Ic(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Eu(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Su(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ic(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ic(t,i,u)}}var o=t.return;try{ou(t)}catch(u){Ic(t,o,u)}break;case 5:var s=t.return;try{ou(t)}catch(u){Ic(t,s,u)}}}catch(u){Ic(t,t.return,u)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Tu,Iu=Math.ceil,xu=w.ReactCurrentDispatcher,Au=w.ReactCurrentOwner,Ou=w.ReactCurrentBatchConfig,ku=0,Cu=null,Du=null,Pu=0,Nu=0,Ru=Ti(0),Mu=0,Lu=null,ju=0,Fu=0,Uu=0,Vu=null,Bu=null,zu=0,qu=1/0,Wu=null,Gu=!1,Ku=null,Hu=null,Qu=!1,Yu=null,$u=0,Ju=0,Xu=null,Zu=-1,ec=0;function tc(){return 0!==(6&ku)?Je():-1!==Zu?Zu:Zu=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&ku)&&0!==Pu?Pu&-Pu:null!==go.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Ju)throw Ju=0,Xu=null,Error(o(185));yt(e,n,r),0!==(2&ku)&&e===Cu||(e===Cu&&(0===(2&ku)&&(Fu|=n),4===Mu&&uc(e,Pu)),ic(e,r),1===n&&0===ku&&0===(1&t.mode)&&(qu=Je()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,u=i[s];-1===u?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):u<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Cu?Pu:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),si((function(){0===(6&ku)&&zi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Zu=-1,ec=0,0!==(6&ku))throw Error(o(327));var n=e.callbackNode;if(Sc()&&e.callbackNode!==n)return null;var r=dt(e,e===Cu?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=ku;ku|=2;var s=mc();for(Cu===e&&Pu===t||(Wu=null,qu=Je()+500,fc(e,t));;)try{bc();break}catch(u){pc(e,u)}Eo(),xu.current=s,ku=i,null!==Du?t=0:(Cu=null,Pu=0,t=Mu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Lu,fc(e,0),uc(e,r),ic(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(s=pt(e))&&(r=s,t=sc(e,s))),1===t))throw n=Lu,fc(e,0),uc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Ec(e,Bu,Wu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=zu+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,Bu,Wu),t);break}Ec(e,Bu,Wu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Iu(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,Bu,Wu),r);break}Ec(e,Bu,Wu);break;default:throw Error(o(329))}}}return ic(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Bu,Bu=n,null!==t&&ac(t)),e}function ac(e){null===Bu?Bu=e:Bu.push.apply(Bu,e)}function uc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&ku))throw Error(o(327));Sc();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Lu,fc(e,0),uc(e,t),ic(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Bu,Wu),ic(e,Je()),null}function lc(e,t){var n=ku;ku|=1;try{return e(t)}finally{0===(ku=n)&&(qu=Je()+500,Ui&&zi())}}function hc(e){null!==Yu&&0===Yu.tag&&0===(6&ku)&&Sc();var t=ku;ku|=1;var n=Ou.transition,r=bt;try{if(Ou.transition=null,bt=1,e)return e()}finally{bt=r,Ou.transition=n,0===(6&(ku=t))&&zi()}}function dc(){Nu=Ru.current,Ii(Ru)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:os(),Ii(ki),Ii(Oi),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ii(us);break;case 10:So(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Cu=e,Du=e=Rc(e.current,null),Pu=Nu=t,Mu=0,Lu=null,Uu=Fu=ju=0,Bu=Vu=null,null!==Ao){for(t=0;t<Ao.length;t++)if(null!==(r=(n=Ao[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Ao=null}return e}function pc(e,t){for(;;){var n=Du;try{if(Eo(),ds.current=sa,vs){for(var r=ms.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}vs=!1}if(ps=0,ys=gs=ms=null,bs=!1,ws=0,Au.current=null,null===n||null===n.return){Mu=1,Lu=t,Du=null;break}e:{var s=e,a=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,u,0,t),1&p.mode&&ga(s,l,t),c=l;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(s,l,t),gc();break e}c=Error(o(426))}else if(io&&1&u.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,u,0,t),mo(la(c,u));break e}}s=c=la(c,u),4!==Mu&&(Mu=2),null===Vu?Vu=[s]:Vu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,jo(s,pa(0,c,t));break e;case 1:u=c;var v=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hu||!Hu.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,jo(s,ma(s,u,t));break e}}s=s.return}while(null!==s)}_c(n)}catch(w){t=w,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function mc(){var e=xu.current;return xu.current=sa,null===e?sa:e}function gc(){0!==Mu&&3!==Mu&&2!==Mu||(Mu=4),null===Cu||0===(268435455&ju)&&0===(268435455&Fu)||uc(Cu,Pu)}function yc(e,t){var n=ku;ku|=2;var r=mc();for(Cu===e&&Pu===t||(Wu=null,fc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Eo(),ku=n,xu.current=r,null!==Du)throw Error(o(261));return Cu=null,Pu=0,Mu}function vc(){for(;null!==Du;)wc(Du)}function bc(){for(;null!==Du&&!Ye();)wc(Du)}function wc(e){var t=Tu(e.alternate,e,Nu);e.memoizedProps=e.pendingProps,null===t?_c(e):Du=t,Au.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Nu)))return void(Du=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Du=n);if(null===e)return Mu=6,void(Du=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===Mu&&(Mu=5)}function Ec(e,t,n){var r=bt,i=Ou.transition;try{Ou.transition=null,bt=1,function(e,t,n,r){do{Sc()}while(null!==Yu);if(0!==(6&ku))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Cu&&(Du=Cu=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qu||(Qu=!0,Cc(tt,(function(){return Sc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ou.transition,Ou.transition=null;var a=bt;bt=1;var u=ku;ku|=4,Au.current=null,function(e,t){if(ei=Wt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,u=-1,c=-1,l=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(u=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++l===i&&(u=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:yo(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(_){Ic(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nu,nu=!1}(e,n),yu(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,bu(n,e,i),$e(),ku=u,bt=a,Ou.transition=s}else e.current=n;if(Qu&&(Qu=!1,Yu=e,$u=i),s=e.pendingLanes,0===s&&(Hu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gu)throw Gu=!1,e=Ku,Ku=null,e;0!==(1&$u)&&0!==e.tag&&Sc(),s=e.pendingLanes,0!==(1&s)?e===Xu?Ju++:(Ju=0,Xu=e):Ju=0,zi()}(e,t,n,r)}finally{Ou.transition=i,bt=r}return null}function Sc(){if(null!==Yu){var e=wt($u),t=Ou.transition,n=bt;try{if(Ou.transition=null,bt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,$u=0,0!==(6&ku))throw Error(o(331));var i=ku;for(ku|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var u=s.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Za=l;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:ru(8,h,s)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(su(h),h===l){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:ru(9,s,s.return)}var v=s.sibling;if(null!==v){v.return=s.return,Za=v;break e}Za=s.return}}var b=e.current;for(Za=b;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=b;null!==Za;){if(0!==(2048&(u=Za).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(E){Ic(u,u.return,E)}if(u===a){Za=null;break e}var _=u.sibling;if(null!==_){_.return=u.return,Za=_;break e}Za=u.return}}if(ku=i,zi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,Ou.transition=t}}return!1}function Tc(e,t,n){e=Mo(e,t=pa(0,t=la(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Ic(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Mo(t,e=ma(t,e=la(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function xc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Cu===e&&(Pu&n)===n&&(4===Mu||3===Mu&&(130023424&Pu)===Pu&&500>Je()-zu?fc(e,0):Uu|=n),ic(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Co(e,t))&&(yt(e,t,n),ic(e,n))}function Oc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function kc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Ac(e,n)}function Cc(e,t){return He(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Dc(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Nc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Lc(n.children,i,s,t);case T:a=8,i|=8;break;case I:return(e=Pc(12,n,t,2|i)).elementType=I,e.lanes=s,e;case k:return(e=Pc(13,n,t,i)).elementType=k,e.lanes=s,e;case C:return(e=Pc(19,n,t,i)).elementType=C,e.lanes=s,e;case N:return jc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:a=10;break e;case A:a=9;break e;case O:a=11;break e;case D:a=14;break e;case P:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,o,s,a,u){return e=new Vc(e,t,n,a,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(o),e}function zc(e){if(!e)return Ai;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Mi(e,n,t)}return t}function qc(e,t,n,r,i,o,s,a,u){return(e=Bc(n,r,!0,e,0,o,0,a,u)).context=zc(null),n=e.current,(o=Ro(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Mo(n,o,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Wc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ro(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Mo(i,t,s))&&(rc(e,i,s,o),Lo(e,i,s)),s}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Tu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ki.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Ca(t),po();break;case 5:ss(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;xi(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(xi(us,1&us.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(xi(us,1&us.current),null!==(e=Ga(e,t,n))?e.sibling:null);xi(us,1&us.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),xi(us,us.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Ga(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wa(e,t),e=t.pendingProps;var i=Di(t,Oi.current);Io(t,n),i=Ts(null,t,r,e,i,n);var s=Is();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(s=!0,Li(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Po(t),i.updater=zo,t.stateNode=i,i._reactInternals=t,Ko(t,r,e,n),t=ka(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===O)return 11;if(e===D)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=Oa(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,yo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Aa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Oa(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Ca(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,No(e,t),Fo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Da(e,t,r,n,i=la(Error(o(423)),t));break e}if(r!==i){t=Da(e,t,r,n,i=la(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ga(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),xa(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fa(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,xi(vo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!ki.current){t=Ga(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Ro(-1,n&-n)).tag=2;var l=s.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),To(s.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),To(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Io(t,n),r=r(i=xo(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),Sa(e,t,r,i=yo(r.type,i),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Wa(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Io(t,n),Wo(t,r,i),Ko(t,r,i,n),ka(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Ia(e,t,n)}throw Error(o(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Gc(s);a.call(e)}}Wc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Gc(s);o.call(e)}}var s=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),hc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Gc(u);a.call(e)}}var u=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,u,n,r)})),u}(n,t,e,i,r);return Gc(s)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&jt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Je()),0===(6&ku)&&(qu=Je()+500,zi()))}break;case 13:hc((function(){var t=Co(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},Et=function(e){if(13===e.tag){var t=Co(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},St=function(e){if(13===e.tag){var t=nc(e),n=Co(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Tt=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));H(r),X(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Oe=lc,ke=hc;var tl={usingClientEntryPoint:!1,Events:[bi,wi,_i,xe,Ae,lc]},nl={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),ot=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(o(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(o(40));return!!e._reactRootContainer&&(hc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1352:(e,t,n)=>{"use strict";var r=n(7119);t.H=r.createRoot,r.hydrateRoot},7119:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(8345)},8319:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(9950).createContext)(null);t.default=r,e.exports=t.default},7567:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(9950)),i=u(n(1942)),o=u(n(9678)),s=u(n(8319)),a=u(n(418));function u(e){return e&&e.__esModule?e:{default:e}}function c(){return c=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)}function l(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.children,n=e.config,i=e.dispatch,u=e.firebase,l=e.initializeAuth,h=e.createFirestoreInstance,d=r.default.useMemo((function(){var e=(0,o.default)(u,n,i);return l&&e.initializeAuth(),e}),[u,n,i]);return h?r.default.createElement(s.default.Provider,{value:d},r.default.createElement(a.default,c({},e,{initializeAuth:!1}),t)):r.default.createElement(s.default.Provider,{value:d},t)}l.defaultProps={initializeAuth:!0},l.propTypes={children:i.default.node,config:i.default.object.isRequired,dispatch:i.default.func.isRequired,firebase:i.default.object.isRequired,initializeAuth:i.default.bool,createFirestoreInstance:i.default.func};var h=l;t.default=h,e.exports=t.default},7916:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(9950).createContext)(null);t.default=r,e.exports=t.default},418:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(9950)),i=a(n(1942)),o=a(n(7916)),s=a(n(9678));function a(e){return e&&e.__esModule?e:{default:e}}function u(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.children,n=e.config,i=e.dispatch,a=e.firebase,u=e.createFirestoreInstance,c=e.initializeAuth,l=r.default.useMemo((function(){var e=a._reactReduxFirebaseExtended?a:(0,s.default)(a,n,i),t=u(a,n,i);return c&&e.initializeAuth(),t}),[a,n,i,u,c]);return r.default.createElement(o.default.Provider,{value:l},t)}u.defaultProps={initializeAuth:!0},u.propTypes={children:i.default.node,config:i.default.object.isRequired,dispatch:i.default.func.isRequired,createFirestoreInstance:i.default.func.isRequired,initializeAuth:i.default.bool,firebase:i.default.object.isRequired};var c=u;t.default=c,e.exports=t.default},8406:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserProfile=t.createUser=t.confirmPasswordReset=t.applyActionCode=void 0,t.handleProfileWatchResponse=b,t.init=t.handleRedirectResult=void 0,t.linkAndRetrieveDataWithCredential=function(e,t,n){return x(t.auth().currentUser.linkAndRetrieveDataWithCredential,[n],e,t)},t.linkWithCredential=void 0,t.linkWithPopup=function(e,t,n){return x(t.auth().currentUser.linkWithPopup,[n],e,t)},t.linkWithRedirect=function(e,t,n){return x(t.auth().currentUser.linkWithRedirect,[n],e,t)},t.resetPassword=t.reloadAuth=t.reauthenticate=t.logout=t.login=void 0,t.signInWithPhoneNumber=function(e,t,n,r){return T(t,e,m({phoneNumber:n,applicationVerifier:r},4<arguments.length&&void 0!==arguments[4]?arguments[4]:{}))},t.unWatchUserProfile=v,t.watchUserProfile=t.verifyPasswordResetCode=t.updateProfile=t.updateEmail=t.updateAuth=void 0;var r=h(n(5357)),i=h(n(2093)),o=h(n(6380)),s=n(9363),a=n(4579),u=n(5980),c=n(1816),l=n(1556);function h(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?p(Object(t),!0).forEach((function(n){g(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return e(m(m({type:s.actionTypes.LOGIN_ERROR},n),{},{authError:t}))}function v(e){var t=e._,n=t.authUid,r=t.config,i=r.userProfile,o=r.useFirestoreForProfile;e._.profileWatch&&(o&&e.firestore?e._.profileWatch():i&&e.database&&e.database().ref().child("".concat(i,"/").concat(n)).off("value",e._.profileWatch),e._.profileWatch=null)}function b(e,t,n,r){var i,c=t._.config,h=c.profileParamsToPopulate,d=c.autoPopulateProfile,f=c.useFirestoreForProfile,p=c.logErrors,g=(i=n)&&i.val?i.val():i&&i.data&&i.exists?i.data():null;h&&!f&&(Array.isArray(h)||(0,u.isString)(h))?(0,l.promisesForPopulate)(t,n.key,g,h).then((function(t){if((0,o.default)(t,(function(t,n){e({type:s.actionTypes.SET,path:n,data:t,timestamp:Date.now(),requesting:!1,requested:!0})})),d){var i=(0,l.getPopulateObjs)(h),u=n.val();e({type:s.actionTypes.SET_PROFILE,profile:(0,a.populate)({profile:r?m(m({},u),{},{token:r}):u,data:t},"profile",i)})}else e({type:s.actionTypes.SET_PROFILE,profile:r?m(m({},g),{},{token:r}):g})})).catch((function(t){p&&console.error("RRF: Error retrieving data for profile population. Firebase:",t),e({type:s.actionTypes.UNAUTHORIZED_ERROR,authError:"Error during profile population: ".concat(t.message)}),e({type:s.actionTypes.SET_PROFILE,profile:g})})):(f&&h&&console.warn("Profile population is not yet supported for Firestore"),e({type:s.actionTypes.SET_PROFILE,profile:r?m(m({},g),{},{token:r}):g}))}function w(e,t){var n=t._.config,r=n.onProfileListenerError,i=n.logErrors;return function(e){if(i&&console.error("Error with profile listener: ".concat(e.message||""),e),"function"==typeof r){var n=r(e,t);if("function"==typeof n.then)return n}return Promise.reject(e)}}var _=function(e,t){var n=t._,r=n.authUid,i=n.config,o=i.userProfile,a=i.useFirestoreForProfile,u=i.enableClaims;if(v(t),o)if(a&&t.firestore)t._.profileWatch=t.firestore().collection(o).doc(r).onSnapshot((function(n){return u?t.auth().currentUser.getIdTokenResult(!0).then((function(r){return b(e,t,n,r)})):b(e,t,n,null)}),w(0,t));else{if(!t.database)throw new Error("Real Time Database or Firestore must be included to enable user profile");t._.profileWatch=t.database().ref().child("".concat(o,"/").concat(r)).on("value",(function(n){u?t.auth().currentUser.getIdTokenResult(!0).then((function(r){return b(e,t,n,r)})):b(e,t,n,null)}),w(0,t))}else u&&(t._.profileWatch=t.auth().currentUser.getIdTokenResult(!0).then((function(t){e({type:s.actionTypes.SET_PROFILE,profile:{token:t}})})))};t.watchUserProfile=_;var E=function(e,t,n,o){var a=t._.config;if(!a.userProfile||!t.database&&!t.firestore)return Promise.resolve(n);if("function"==typeof a.profileFactory)try{o=a.profileFactory(n,o,t)}catch(u){return console.error("Error occurred within profileFactory function:",u.message||u),Promise.reject(u)}return a.useFirestoreForProfile?t.firestore().collection(a.userProfile).doc(n.uid||n.user.uid).get().then((function(e){if(!a.updateProfileOnLogin&&e.exists)return e.data();var t=o;if(!t){var s=n.uid?n.toJSON?n.toJSON():n:n.user.toJSON?n.user.toJSON():n.user;t=m(m({},(0,i.default)(s,a.keysToRemoveFromAuth)),{},{avatarUrl:s.photoURL})}return Array.isArray(t.providerData)&&(t.providerData=t.providerData.map((function(e){return(0,r.default)(e,a.keysToPreserveFromProviderData)}))),e.ref.set(t,{merge:!0}).then((function(){return t}))})).catch((function(t){return e({type:s.actionTypes.UNAUTHORIZED_ERROR,authError:t}),Promise.reject(t)})):t.database().ref().child("".concat(a.userProfile,"/").concat(n.user?n.user.uid:n.uid)).once("value").then((function(e){return a.updateProfileOnLogin||null===e.val()?e.ref.update(o).then((function(){return o})):e.val()})).catch((function(n){return e({type:s.actionTypes.UNAUTHORIZED_ERROR,authError:n}),"function"==typeof a.onProfileWriteError&&a.onProfileWriteError(n,t),Promise.reject(n)}))};t.createUserProfile=E;var S=function(e,t,n){if("function"==typeof t._.config.onRedirectResult&&t._.config.onRedirectResult(n,t,e),n&&n.user){var r=n.user;return t._.authUid=r.uid,_(e,t),e({type:s.actionTypes.LOGIN,auth:r,preserve:t._.config.preserveOnLogin}),E(e,t,r,{email:r.email,displayName:r.providerData[0].displayName||r.email,avatarUrl:r.providerData[0].photoURL,providerData:r.providerData})}};t.handleRedirectResult=S;t.init=function(e,t){t.auth&&(e({type:s.actionTypes.AUTHENTICATION_INIT_STARTED}),t.auth().onAuthStateChanged((function(n){return function(e,t,n){var r=t._.config;n?(t._.authUid=n.uid,r.presence&&(0,c.setupPresence)(e,t),e({type:s.actionTypes.LOGIN,auth:n,preserve:r.preserveOnLogin}),_(e,t),"function"==typeof r.onAuthStateChanged&&r.onAuthStateChanged(n,t,e)):("function"==typeof r.onAuthStateChanged&&t._.config.onAuthStateChanged(n,t,e),e({type:s.actionTypes.AUTH_EMPTY_CHANGE,preserve:r.preserveOnEmptyAuthChange}),v(t))}(e,t,n)})),t._.config.enableRedirectHandling&&"function"==typeof t.auth().getRedirectResult&&"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("http")&&t.auth().getRedirectResult().then((function(n){return S(e,t,n)})).catch((function(t){return y(e,t),Promise.reject(t)})),t.auth().currentUser,e({type:s.actionTypes.AUTHENTICATION_INIT_FINISHED}))};var T=function(e,t,n){var r;t._.config.resetBeforeLogin&&y(e,null);var i=(0,c.getLoginMethodAndParams)(t,n),o=i.method,s=i.params;return(r=t.auth())[o].apply(r,d(s)).then((function(r){if(!r)return Promise.resolve(null);if(["signInWithEmailAndPassword","signInAndRetrieveDataWithEmailAndPassword","signInWithEmailLink"].includes(o))return{user:r};if(["signInWithCustomToken","signInAndRetrieveDataWithCustomToken"].includes(o))return t._.config.updateProfileOnLogin?E(e,t,r,n.profile):{user:r};if("signInWithPhoneNumber"===o)return m(m({},r),{},{confirm:function(n){return r.confirm(n).then((function(n){var r=n.user,i=n.additionalUserInfo;return E(e,t,r,{phoneNumber:r.providerData[0].phoneNumber,providerData:r.providerData}).then((function(e){return{profile:e,user:r,additionalUserInfo:i}}))}))}});var i=r.user||r;return E(e,t,i,n.profile||{email:i.email,displayName:i.providerData[0].displayName||i.email,avatarUrl:i.providerData[0].photoURL,providerData:i.providerData}).then((function(e){return m({profile:e},r)}))})).catch((function(t){return y(e,t),Promise.reject(t)}))};t.login=T;t.reauthenticate=function(e,t,n){var r,i=(0,c.getReauthenticateMethodAndParams)(t,n),o=i.method,s=i.params;return(r=t.auth().currentUser)[o].apply(r,d(s)).then((function(r){if(!r)return Promise.resolve(null);if("reauthenticateWithPhoneNumber"===o)return m(m({},r),{},{confirm:function(n){return r.confirm(n).then((function(n){var r=n.user,i=n.additionalUserInfo;return E(e,t,r,{phoneNumber:r.providerData[0].phoneNumber,providerData:r.providerData}).then((function(e){return{profile:e,user:r,additionalUserInfo:i}}))}))}});var i=r.user||r;return E(e,t,i,n.profile||{email:i.email,displayName:i.providerData[0].displayName||i.email,avatarUrl:i.providerData[0].photoURL,providerData:i.providerData}).then((function(e){return m({profile:e},r)}))})).catch((function(t){return y(e,t,{reauthenticate:!0}),Promise.reject(t)}))};t.logout=function(e,t){return v(t),t.auth().signOut().then((function(){var n={type:s.actionTypes.LOGOUT};return t._.config.preserveOnLogout&&(n.preserve=t._.config.preserveOnLogout),e(n),t._.authUid=null,t}))};t.createUser=function(e,t,n,r){var i=n.email,o=n.password;if(y(e,null),!i||!o){var s=new Error("Email and Password are required to create user");return y(e,s),Promise.reject(s)}return t.auth().createUserWithEmailAndPassword(i,o).then((function(n){return E(e,t,n,r||{email:i})})).catch((function(t){return y(e,t),Promise.reject(t)}))};t.resetPassword=function(e,t,n){return y(e,null),t.auth().sendPasswordResetEmail(n).catch((function(t){if(t){if("auth/user-not-found"===t.code)y(e,m(m({},t),{},{message:"The specified user account does not exist."}));else y(e,t);return Promise.reject(t)}}))};t.confirmPasswordReset=function(e,t,n,r){return y(e,null),t.auth().confirmPasswordReset(n,r).catch((function(t){if(t){switch(t.code){case"auth/expired-action-code":y(e,new Error("The action code has expired."));break;case"auth/invalid-action-code":y(e,new Error("The action code is invalid."));break;case"auth/user-disabled":y(e,new Error("The user is disabled."));break;case"auth/user-not-found":y(e,new Error("The user is not found."));break;case"auth/weak-password":y(e,new Error("The password is not strong enough."));break;default:y(e,t)}return Promise.reject(t)}}))};t.verifyPasswordResetCode=function(e,t,n){return y(e,null),t.auth().verifyPasswordResetCode(n).catch((function(t){return t&&y(e,t),Promise.reject(t)}))};t.applyActionCode=function(e,t,n){return y(e,null),t.auth().applyActionCode(n).catch((function(t){return t&&y(e,t),Promise.reject(t)}))};var I=function(e,t,n,r){var i=t._.config;return e({type:s.actionTypes.PROFILE_UPDATE_START,payload:n}),(i.useFirestoreForProfile?c.updateProfileOnFirestore:c.updateProfileOnRTDB)(t,n,r).then((function(t){return e({type:s.actionTypes.PROFILE_UPDATE_SUCCESS,payload:i.useFirestoreForProfile?t.data():t.val()}),t})).catch((function(t){return e({type:s.actionTypes.PROFILE_UPDATE_ERROR,error:t}),Promise.reject(t)}))};t.updateProfile=I;t.updateAuth=function(e,t,n,r){if(e({type:s.actionTypes.AUTH_UPDATE_START,payload:n}),!t.auth().currentUser){var i=new Error("User must be logged in to update auth.");return e({type:s.actionTypes.AUTH_UPDATE_ERROR,payload:i}),Promise.reject(i)}return t.auth().currentUser.updateProfile(n).then((function(i){return e({type:s.actionTypes.AUTH_UPDATE_SUCCESS,auth:t.auth().currentUser}),r?I(e,t,n):i})).catch((function(t){return e({type:s.actionTypes.AUTH_UPDATE_ERROR,error:t}),Promise.reject(t)}))};t.updateEmail=function(e,t,n,r){if(e({type:s.actionTypes.EMAIL_UPDATE_START,payload:n}),!t.auth().currentUser){var i=new Error("User must be logged in to update email.");return e({type:s.actionTypes.EMAIL_UPDATE_ERROR,error:i}),Promise.reject(i)}return t.auth().currentUser.updateEmail(n).then((function(i){return e({type:s.actionTypes.EMAIL_UPDATE_SUCCESS,payload:n}),r?I(e,t,{email:n}):i})).catch((function(t){return e({type:s.actionTypes.EMAIL_UPDATE_ERROR,error:t}),Promise.reject(t)}))};t.reloadAuth=function(e,t){if(e({type:s.actionTypes.AUTH_RELOAD_START}),!t.auth().currentUser){var n=new Error("User must be logged in to reload auth.");return e({type:s.actionTypes.AUTH_RELOAD_ERROR,error:n}),Promise.reject(n)}return t.auth().currentUser.reload().then((function(){var n=t.auth().currentUser;return e({type:s.actionTypes.AUTH_RELOAD_SUCCESS,payload:n}),n})).catch((function(t){return e({type:s.actionTypes.AUTH_RELOAD_ERROR,error:t}),Promise.reject(t)}))};function x(e,t,n,r){if(n({type:s.actionTypes.AUTH_LINK_START}),!r.auth().currentUser){var i=new Error("User must be logged in to link with credential.");return n({type:s.actionTypes.AUTH_LINK_ERROR,error:i}),Promise.reject(i)}return e.apply(void 0,d(t)).then((function(e){return n({type:s.actionTypes.AUTH_LINK_SUCCESS,payload:e}),e})).catch((function(e){return n({type:s.actionTypes.AUTH_LINK_ERROR,error:e}),Promise.reject(e)}))}t.linkWithCredential=function(e,t,n){if(e({type:s.actionTypes.AUTH_LINK_START}),!t.auth().currentUser){var r=new Error("User must be logged in to link with credential.");return e({type:s.actionTypes.AUTH_LINK_ERROR,error:r}),Promise.reject(r)}return t.auth().currentUser.linkWithCredential(n).then((function(t){return e({type:s.actionTypes.AUTH_LINK_SUCCESS,payload:t}),t})).catch((function(t){return e({type:s.actionTypes.AUTH_LINK_ERROR,error:t}),Promise.reject(t)}))}},5850:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remove=function(e,t,n){var i=(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).dispatchAction,o=e._.config.dispatchRemoveAction;return e.database().ref(n).remove().then((function(){return o&&(!(void 0!==i)||i)&&t({type:r.actionTypes.REMOVE,path:n}),n})).catch((function(e){return t({type:r.actionTypes.ERROR,payload:e}),Promise.reject(e)}))},t.unWatchEvent=s,t.unWatchEvents=function(e,t,n){null===n||void 0===n||n.forEach((function(n){return s(e,t,n)}))},t.watchEvent=o,t.watchEvents=function(e,t,n){if(!Array.isArray(n))throw new Error("Events config must be an Array");return n.map((function(n){return o(e,t,n)}))};var r=n(9363),i=n(7236);function o(e,t,n){if(!e.database||"function"!=typeof e.database)throw new Error("Firebase database is required to create watchers");var o=n.type,s=n.path,a=n.populates,u=n.queryParams,c=n.queryId,l=n.isQuery,h=n.storeAs,d=e._.config.logErrors,f=h?"".concat(s,"@").concat(h):s,p=c||(0,i.getQueryIdFromPath)(s),m=(0,i.getWatcherCount)(e,o,f,p);if(0<m&&p&&(0,i.unsetWatcher)(e,t,o,s,p),(0,i.setWatcher)(e,t,o,f,p),!(0<m)){if("first_child"===o)return e.database().ref().child(s).orderByKey().limitToFirst(1).once("value").then((function(e){return null===e.val()&&t({type:r.actionTypes.NO_VALUE,path:h||s}),e})).catch((function(e){return t({type:r.actionTypes.ERROR,path:h||s,payload:e}),Promise.reject(e)}));var g=e.database().ref().child(s);return l&&(g=(0,i.applyParamsToQuery)(u,g)),t({type:r.actionTypes.START,path:h||s}),"once"===o?g.once("value").then((function(n){return null===n.val()?t({type:r.actionTypes.NO_VALUE,path:h||s}):a?(0,i.populateAndDispatch)(e,t,{path:s,storeAs:h,snapshot:n,data:n.val(),populates:a}):t({type:r.actionTypes.SET,path:h||s,data:n.val(),ordered:(0,i.orderedFromSnapshot)(n)})})).catch((function(e){return t({type:r.actionTypes.UNAUTHORIZED_ERROR,payload:e}),Promise.reject(e)})):void g.on(o,(function(n){var u="child_removed"===o?void 0:n.val(),c=h||"value"===o?s:"".concat(s,"/").concat(n.key);if(!a){var l="child_added"===o?[{key:n.key,value:n.val()}]:(0,i.orderedFromSnapshot)(n);return t({type:r.actionTypes.SET,path:h||c,data:u,ordered:l})}return(0,i.populateAndDispatch)(e,t,{path:s,storeAs:h,snapshot:n,data:n.val(),populates:a})}),(function(e){d&&console.log("Error retrieving data for path: ".concat(s,", storeAs: ").concat(h,". Firebase:"),e),t({type:r.actionTypes.ERROR,storeAs:h,path:s,payload:e})}))}}function s(e,t,n){var r=n.type,o=n.path,s=n.storeAs,a=n.queryId,u=s?"".concat(o,"@").concat(s):o;(0,i.unsetWatcher)(e,t,r,u,a)}},687:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFile=function(e,t,n){var r=n.path,i=n.dbPath;return(0,s.wrapInDispatch)(e,{method:a.deleteFile,args:[t,{path:r,dbPath:i}],types:[m,y,g]})},t.uploadFile=v,t.uploadFiles=function(e,t,n){var r=n.files,o=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,u);return Promise.all((0,i.default)(r,(function(n){return v(e,t,l({file:n},o))})))};var r,i=(r=n(5876))&&r.__esModule?r:{default:r},o=n(9363),s=n(3943),a=n(5853),u=["files"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?c(Object(t),!0).forEach((function(n){h(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=o.actionTypes.FILE_UPLOAD_START,f=o.actionTypes.FILE_UPLOAD_ERROR,p=o.actionTypes.FILE_UPLOAD_COMPLETE,m=o.actionTypes.FILE_DELETE_START,g=o.actionTypes.FILE_DELETE_ERROR,y=o.actionTypes.FILE_DELETE_COMPLETE;function v(e,t,n){if(!t.storage)throw new Error("Firebase storage is required to upload files");var r=n||{},i=r.path,o=r.file,s=r.dbPath,u=r.options,c=void 0===u?{progress:!1}:u,h=(c||{}).metadata,m=t._.config.logErrors,g=("function"==typeof c.name?c.name(o,t,n):c.name)||o.name,y=l(l({},n),{},{filename:g});return e({type:d,payload:l(l({},n),{},{filename:g})}),(c.progress?(0,a.uploadFileWithProgress)(e,t,{path:i,file:o,filename:g,meta:y,fileMetadata:h}):t.storage().ref("".concat(i,"/").concat(g)).put(o,h)).then((function(r){return s&&(t.database||t.firestore)?(0,a.writeMetadataToDb)({firebase:t,uploadTaskSnapshot:r,dbPath:s,options:c}).then((function(t){return e({type:p,meta:l(l({},n),{},{filename:g}),payload:t}),t})):(e({type:p,meta:l(l({},n),{},{filename:g}),payload:{uploadTaskSnapshot:r,uploadTaskSnaphot:r}}),{uploadTaskSnapshot:r,uploadTaskSnaphot:r})})).catch((function(t){return m&&console.error&&console.error("RRF: Error uploading file: ".concat(t.message||t),t),e({type:f,path:i,payload:t}),Promise.reject(t)}))}},9363:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.v3ErrorMessage=t.topLevelPaths=t.supportedAuthProviders=t.defaultConfig=t.default=t.actionsPrefix=t.actionTypes=void 0;t.actionsPrefix="@@reactReduxFirebase";var n={START:"".concat("@@reactReduxFirebase","/START"),SET:"".concat("@@reactReduxFirebase","/SET"),REMOVE:"".concat("@@reactReduxFirebase","/REMOVE"),MERGE:"".concat("@@reactReduxFirebase","/MERGE"),SET_PROFILE:"".concat("@@reactReduxFirebase","/SET_PROFILE"),LOGIN:"".concat("@@reactReduxFirebase","/LOGIN"),LOGOUT:"".concat("@@reactReduxFirebase","/LOGOUT"),LOGIN_ERROR:"".concat("@@reactReduxFirebase","/LOGIN_ERROR"),NO_VALUE:"".concat("@@reactReduxFirebase","/NO_VALUE"),UNAUTHORIZED_ERROR:"".concat("@@reactReduxFirebase","/UNAUTHORIZED_ERROR"),ERROR:"".concat("@@reactReduxFirebase","/ERROR"),CLEAR_ERRORS:"".concat("@@reactReduxFirebase","/CLEAR_ERRORS"),SET_LISTENER:"".concat("@@reactReduxFirebase","/SET_LISTENER"),UNSET_LISTENER:"".concat("@@reactReduxFirebase","/UNSET_LISTENER"),AUTHENTICATION_INIT_STARTED:"".concat("@@reactReduxFirebase","/AUTHENTICATION_INIT_STARTED"),AUTHENTICATION_INIT_FINISHED:"".concat("@@reactReduxFirebase","/AUTHENTICATION_INIT_FINISHED"),SESSION_START:"".concat("@@reactReduxFirebase","/SESSION_START"),SESSION_END:"".concat("@@reactReduxFirebase","/SESSION_END"),FILE_UPLOAD_START:"".concat("@@reactReduxFirebase","/FILE_UPLOAD_START"),FILE_UPLOAD_ERROR:"".concat("@@reactReduxFirebase","/FILE_UPLOAD_ERROR"),FILE_UPLOAD_PROGRESS:"".concat("@@reactReduxFirebase","/FILE_UPLOAD_PROGRESS"),FILE_UPLOAD_COMPLETE:"".concat("@@reactReduxFirebase","/FILE_UPLOAD_COMPLETE"),FILE_DELETE_START:"".concat("@@reactReduxFirebase","/FILE_DELETE_START"),FILE_DELETE_ERROR:"".concat("@@reactReduxFirebase","/FILE_DELETE_ERROR"),FILE_DELETE_COMPLETE:"".concat("@@reactReduxFirebase","/FILE_DELETE_COMPLETE"),AUTH_UPDATE_START:"".concat("@@reactReduxFirebase","/AUTH_UPDATE_START"),AUTH_UPDATE_SUCCESS:"".concat("@@reactReduxFirebase","/AUTH_UPDATE_SUCCESS"),AUTH_UPDATE_ERROR:"".concat("@@reactReduxFirebase","/AUTH_UPDATE_ERROR"),PROFILE_UPDATE_START:"".concat("@@reactReduxFirebase","/PROFILE_UPDATE_START"),PROFILE_UPDATE_SUCCESS:"".concat("@@reactReduxFirebase","/PROFILE_UPDATE_SUCCESS"),PROFILE_UPDATE_ERROR:"".concat("@@reactReduxFirebase","/PROFILE_UPDATE_ERROR"),EMAIL_UPDATE_START:"".concat("@@reactReduxFirebase","/EMAIL_UPDATE_START"),EMAIL_UPDATE_SUCCESS:"".concat("@@reactReduxFirebase","/EMAIL_UPDATE_SUCCESS"),EMAIL_UPDATE_ERROR:"".concat("@@reactReduxFirebase","/EMAIL_UPDATE_ERROR"),AUTH_RELOAD_START:"".concat("@@reactReduxFirebase","/AUTH_RELOAD_START"),AUTH_RELOAD_ERROR:"".concat("@@reactReduxFirebase","/AUTH_RELOAD_ERROR"),AUTH_RELOAD_SUCCESS:"".concat("@@reactReduxFirebase","/AUTH_RELOAD_SUCCESS"),AUTH_LINK_START:"".concat("@@reactReduxFirebase","/AUTH_LINK_START"),AUTH_LINK_ERROR:"".concat("@@reactReduxFirebase","/AUTH_LINK_ERROR"),AUTH_LINK_SUCCESS:"".concat("@@reactReduxFirebase","/AUTH_LINK_SUCCESS"),AUTH_EMPTY_CHANGE:"".concat("@@reactReduxFirebase","/AUTH_EMPTY_CHANGE")};t.actionTypes=n;var r={userProfile:null,presence:null,sessions:"sessions",enableLogging:!1,logErrors:!0,preserveOnLogout:null,preserveOnEmptyAuthChange:null,resetBeforeLogin:!0,updateProfileOnLogin:!0,enableRedirectHandling:!0,autoPopulateProfile:!1,setProfilePopulateResults:!1,dispatchOnUnsetListener:!0,dispatchRemoveAction:!1,enableEmptyAuthChanges:!0,firebaseStateName:"firebase",attachAuthIsReady:!1,keysToRemoveFromAuth:["appName","apiKey","authDomain","redirectEventId","stsTokenManager","uid"],keysToPreserveFromProviderData:["email","phoneNumber","photoURL","providerId","uid"]};t.defaultConfig=r;t.supportedAuthProviders=["google","github","twitter","facebook","microsoft.com","apple.com","yahoo.com"];t.topLevelPaths=["auth","profile","ordered","data"];t.v3ErrorMessage="Context from react-redux not found. If you are using react-redux v6 a v3.*.* version of react-redux-firebase is required. Please checkout the v3 migration guide: http://bit.ly/2SRNdiO";var i={actionTypes:n,defaultConfig:r};t.default=i},9678:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){t&&t.enableLogging&&e.database&&"function"==typeof e.database.enableLogging&&(console.warn("The enableLogging config option is disabled and will be removed in a future version of react-redux-firebase. Enable logging as part of instance initialization."),e.database.enableLogging(t.enableLogging)),e._=(0,o.default)({watchers:{},listeners:{},callbacks:{},queries:{},config:t,authUid:null},e._);var r=function(t,n,r,i){if((0,s.default)(r)){var o="update"===t?"updated":"created",a=g(g({},r),{},y({},"".concat(o,"At"),e.database.ServerValue.TIMESTAMP));return e.auth().currentUser&&(a["".concat(o,"By")]=e.auth().currentUser.uid),e.database().ref(n)[t](a,i)}return e.database().ref(n)[t](r,i)},d=(0,u.mapWithFirebaseAndDispatch)(e,n,{signInWithPhoneNumber:c.signInWithPhoneNumber},{initializeAuth:c.init});return i=Object.assign(e,g({_reactReduxFirebaseExtended:!0,ref:function(t){return e.database().ref(t)},set:function(t,n,r){return e.database().ref(t).set(n,r)},setWithMeta:function(e,t,n){return r("set",e,t,n)},uniqueSet:function(t,n,r){return e.database().ref(t).transaction((function(e){return null===e?n:void 0})).then((function(e){var t=e.committed,n=e.snapshot;if(!t){var i=new Error("Path already exists.");return r&&r(i),Promise.reject(i)}return r&&r(n),n}))},push:function(t,n,r){return e.database().ref(t).push(n,r)},pushWithMeta:function(e,t,n){return r("push",e,t,n)},remove:function(t,r,i){return l.remove(e,n,t,i).then((function(){return"function"==typeof r&&r(),t}))},update:function(t,n,r){return e.database().ref(t).update(n,r)},updateWithMeta:function(e,t,n){return r("update",e,t,n)},login:function(t){return c.login(n,e,t)},reauthenticate:function(t){return c.reauthenticate(n,e,t)},handleRedirectResult:function(t){return c.handleRedirectResult(n,e,t)},logout:function(){return c.logout(n,e)},updateAuth:function(t,r){return c.updateAuth(n,e,t,r)},updateEmail:function(t,r){return c.updateEmail(n,e,t,r)},updateProfile:function(t,r){return c.updateProfile(n,e,t,r)},uploadFile:function(t,r,i,o){return h.uploadFile(n,e,{path:t,file:r,dbPath:i,options:o})},uploadFiles:function(t,r,i,o){return h.uploadFiles(n,e,{path:t,files:r,dbPath:i,options:o})},deleteFile:function(t,r){return h.deleteFile(n,e,{path:t,dbPath:r})},createUser:function(t,r){return c.createUser(n,e,t,r)},resetPassword:function(t){return c.resetPassword(n,e,t)},confirmPasswordReset:function(t,r){return c.confirmPasswordReset(n,e,t,r)},verifyPasswordResetCode:function(t){return c.verifyPasswordResetCode(n,e,t)},applyActionCode:function(t){return c.applyActionCode(n,e,t)},watchEvent:function(t,r,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return l.watchEvent(e,n,g({type:t,path:r,storeAs:i},o))},unWatchEvent:function(t,r,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return l.unWatchEvent(e,n,g({type:t,path:r,queryId:i},o))},reloadAuth:function(){return c.reloadAuth(n,e)},linkWithCredential:function(t){return c.linkWithCredential(n,e,t)},promiseEvents:function(t,r){var i=(0,a.createCallable)(t)(r,e),o=(0,a.getEventsFromInput)(i);return Promise.all(o.map((function(t){return l.watchEvent(e,n,t)})))},dispatch:n},d))},t.getFirebase=function(){if(!i)throw new Error("Firebase instance does not yet exist. Check your compose function.");return i};var i,o=p(n(6781)),s=p(n(4567)),a=n(5980),u=n(3943),c=f(n(8406)),l=f(n(5850)),h=f(n(687));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!=s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?m(Object(t),!0).forEach((function(n){y(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},903:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return function(t){function n(e){return s.default.createElement(h.default.Consumer,null,(function(t){return s.default.createElement(d,p({},e,{dispatch:t.dispatch,firebase:t}))}))}var d=function(n){function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return w(v(e=f.call.apply(f,[this].concat(n))),"firebaseEvents",[]),w(v(e),"firebase",null),w(v(e),"prevData",null),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,n);var u,h,d,f=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}(this,n)}}(a);return u=a,h=[{key:"componentDidMount",value:function(){var t=this.props,n=t.firebase,r=t.dispatch,i=(0,l.createCallable)(e);this.prevData=i(this.props,this.props);var o=n.ref,s=n.helpers,a=n.storage,u=n.database,h=n.auth;this.firebase=function(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?m(Object(t),!0).forEach((function(n){w(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}({ref:o,storage:a,database:u,auth:h},s),this._firebaseEvents=(0,l.getEventsFromInput)(this.prevData),(0,c.watchEvents)(n,r,this._firebaseEvents)}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.firebase,n=e.dispatch;(0,c.unWatchEvents)(t,n,this._firebaseEvents)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var n=this.props,r=n.firebase,s=n.dispatch,a=(0,l.createCallable)(e)(t,this.store);if(!(0,o.default)(a,this.prevData)){var u=(0,i.default)(a,this.prevData,o.default),h=(0,i.default)(this.prevData,a,o.default);this.prevData=a,(0,c.unWatchEvents)(r,s,(0,l.getEventsFromInput)(h)),this._firebaseEvents=(0,l.getEventsFromInput)(a),(0,c.watchEvents)(r,s,(0,l.getEventsFromInput)(u))}}},{key:"render",value:function(){return s.default.createElement(t,this.props)}}],h&&g(u.prototype,h),d&&g(u,d),a}(s.Component);return w(d,"displayName",(0,l.wrapDisplayName)(t,"FirebaseConnectWrapped")),w(d,"wrappedComponent",t),d.propTypes={dispatch:a.default.func.isRequired,firebase:a.default.object.isRequired},n.displayName=(0,l.wrapDisplayName)(t,"FirebaseConnect"),n.wrappedComponent=t,(0,u.default)(n,t)}};var i=f(n(6039)),o=f(n(9418)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!=s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(9950)),a=f(n(1942)),u=f(n(3876)),c=n(5850),l=n(5980),h=f(n(8319));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e){return e&&e.__esModule?e:{default:e}}function p(){return p=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},p.apply(this,arguments)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=t.default},4329:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return function(t){function n(e){return o.default.createElement(l.default.Consumer,null,(function(t){return o.default.createElement(c.default.Consumer,null,(function(n){return o.default.createElement(h,f({},e,{dispatch:t.dispatch,firestore:n,firebase:t}))}))}))}var h=function(n){function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return v(g(e=h.call.apply(h,[this].concat(n))),"prevData",null),e}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(s,n);var a,c,l,h=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,n)}}(s);return a=s,(c=[{key:"firestoreIsEnabled",get:function(){return!!this.props.firestore}},{key:"componentDidMount",value:function(){if(this.firestoreIsEnabled){var t=(0,u.createCallable)(e);this.prevData=t(this.props,this.props),this.props.firestore.setListeners(this.prevData)}}},{key:"componentWillUnmount",value:function(){this.firestoreIsEnabled&&this.prevData&&this.props.firestore.unsetListeners(this.prevData)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var n=this.props.firestore,r=(0,u.createCallable)(e)(t,this.props);if(this.firestoreIsEnabled&&!(0,i.default)(r,this.prevData)){var o=(0,u.getChanges)(r,this.prevData);this.prevData=r,n.unsetListeners(o.removed),n.setListeners(o.added)}}},{key:"render",value:function(){return o.default.createElement(t,this.props)}}])&&p(a.prototype,c),l&&p(a,l),s}(o.Component);return v(h,"wrappedComponent",t),v(h,"displayName",(0,u.wrapDisplayName)(t,"FirestoreConnectWrapped")),h.propTypes={dispatch:s.default.func.isRequired,firebase:s.default.object,firestore:s.default.object},n.displayName=(0,u.wrapDisplayName)(t,"FirestoreConnect"),n.wrappedComponent=t,(0,a.default)(n,t)}};var i=d(n(9418)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!=s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}(n(9950)),s=d(n(1942)),a=d(n(3876)),u=n(5980),c=d(n(7916)),l=d(n(8319));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function d(e){return e&&e.__esModule?e:{default:e}}function f(){return f=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},f.apply(this,arguments)}function p(e,t){for(var n,r=0;r<t.length;r++)(n=t[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=t.default},4579:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fixPath=function(e){return("/"===e.substring(0,1)?"":"/")+e},t.getVal=function(e,t,n){if(!e)return n;var r=(0,p.getDotStrPath)(t);return(0,c.default)(e,r,n)},t.isEmpty=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!(t&&t.length)||t.some((function(e){return!(e&&(0,h.default)(e))||!0===e.isEmpty}))},t.isLoaded=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return!(t&&t.length)||t.every((function(e){return void 0!==e&&!1!==(0,c.default)(e,"isLoaded")}))},t.populate=function(e,t,n,l){var h=t.split("/").filter(Boolean),p=-1===d.topLevelPaths.indexOf(h[0])?["data"].concat((v=h,function(e){if(Array.isArray(e))return g(e)}(v)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(v)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(v)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())):h,m=p.join("."),y=(0,c.default)(e,m,l);var v;if(!e||y===l)return l;if(null===y)return null;var b=(0,f.getPopulateObjs)("function"==typeof n?n(p.slice(-1)[0],y):n);if(Array.isArray(y)){var _=(0,r.default)(b,(function(e){return(t=y,function(e){return(0,r.default)(t,(function(t){return(0,u.default)(t,e)}))})(["value",e.child]);var t}));return _?y.map((function(t){var n=t.key,r=t.value;return{key:n,value:b.map((function(t){return w(e,r,t)})).reduce((function(e,t){return(0,i.default)(t,e)}),r)}})):y}return(0,r.default)(b,(function(e){return(0,u.default)(y,e.child)}))?b.map((function(t){return w(e,y,t)})).reduce((function(e,t){return(0,i.default)(t,e)}),y):-1===p.indexOf("profile")?(0,s.default)(y,(function(t,s){var c="ordered"===p[0]?t.key:s,l=(0,f.getPopulateObjs)("function"==typeof n?n(c,t):n);return(0,r.default)(l,(function(e){return(0,u.default)(t,e.child)}))?(0,o.default)((0,a.default)(l,(function(n){return w(e,t,n)})),(function(e,t){return(0,i.default)(t,e)}),t):t})):y};var r=m(n(1032)),i=m(n(712)),o=m(n(9874)),s=m(n(6638)),a=m(n(5876)),u=m(n(6094)),c=m(n(7946)),l=m(n(5849)),h=m(n(4273)),d=n(9363),f=n(1556),p=n(6340);function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?y(Object(t),!0).forEach((function(n){b(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n){var r=(0,c.default)(t,n.child);if(!t||!r)return null;if("string"==typeof r||r instanceof String){var i=[(n.storeAs?n.storeAs:n.root).split("/").filter(Boolean).join("."),r];n.childParam&&i.push(n.childParam);var o=i.join("."),u=(0,c.default)(e.data,o);return u?(0,l.default)({},n.childAlias||n.child,n.keyProp?v(b({},n.keyProp,r),u):u):t}return(0,l.default)({},n.childAlias||n.child,function(e,t,n){return(Array.isArray(t)?a.default:s.default)(t,(function(t,r){var i=t;(!0===t||n.populateByKey)&&(i=r);var o=[(0,p.getDotStrPath)(n.root),i];n.childParam&&o.push(n.childParam);var s=o.join(".");return(0,c.default)(e.data,s)?n.keyProp?v(b({},n.keyProp,i),(0,c.default)(e.data,s)):(0,c.default)(e.data,s):!0===t||n.populateByKey?t:i}))}(e,r,n))}},1522:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=S(n(9678)),o=_(n(7567)),s=_(n(8319)),a=_(n(418)),u=_(n(7916)),c=_(n(903)),l=_(n(4329)),h=_(n(7349)),d=_(n(7071)),f=_(n(6172)),p=_(n(2808)),m=_(n(3360)),g=_(n(9628)),y=_(n(8718)),v=S(n(9363)),b=n(1816),w=S(n(4579));function _(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function S(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!=s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?T(Object(t),!0).forEach((function(n){I(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}({ReactReduxFirebaseProvider:o.default,ReactReduxFirebaseContext:s.default,ReduxFirestoreContext:u.default,ReduxFirestoreProvider:a.default,createFirebaseInstance:i.default,firebaseConnect:c.default,firestoreConnect:l.default,withFirebase:h.default,withFirestore:d.default,useFirebase:m.default,useFirebaseConnect:f.default,useFirestore:g.default,useFirestoreConnect:p.default,reducer:y.default,firebaseReducer:y.default,constants:v.default,actionTypes:v.actionTypes,getFirebase:i.getFirebase,authIsReady:b.authIsReady},w);t.default=x,e.exports=t.default},8718:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(6340),i=n(9093),o=(0,r.combineReducers)({requesting:i.requestingReducer,requested:i.requestedReducer,timestamps:i.timestampsReducer,data:i.dataReducer,ordered:i.orderedReducer,auth:i.authReducer,authError:i.authErrorReducer,profile:i.profileReducer,listeners:i.listenersReducer,isInitializing:i.isInitializingReducer,errors:i.errorsReducer});t.default=o,e.exports=t.default},9093:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authErrorReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length?arguments[1]:void 0;switch(t.type){case _:case E:return null;case S:case N:return t.authError;default:return e}},t.authReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isLoaded:!1,isEmpty:!0},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case _:case R:if(!t.auth)return{isEmpty:!0,isLoaded:!0};var n=t.auth.toJSON?t.auth.toJSON():t.auth;return t.preserve&&t.preserve.auth?(0,l.preserveValuesFromState)(e,t.preserve.auth,m(m({},n),{},{isEmpty:!1,isLoaded:!0})):m(m({},n),{},{isEmpty:!1,isLoaded:!0});case P:case M:return t.payload?m(m({},t.payload.toJSON?t.payload.toJSON():t.payload),{},{isEmpty:!1,isLoaded:!0}):{isEmpty:!0,isLoaded:!0};case S:case D:case E:return t.reauthenticate?(0,l.preserveValuesFromState)(e,!0,{}):t.preserve&&t.preserve.auth?(0,l.preserveValuesFromState)(e,t.preserve.auth,{isLoaded:!0,isEmpty:!0}):{isLoaded:!0,isEmpty:!0};default:return e}},t.dataReducer=void 0,t.errorsReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0;switch(t.type){case S:case N:if(!Array.isArray(e))throw new Error("Errors state must be an array");return[].concat(d(e),[t.authError]);case E:case T:if(t.preserve&&t.preserve.errors){if("function"!=typeof t.preserve.errors)throw new Error("Preserve for the errors state currently only supports functions");return e.filter(t.preserve.errors)}return[];default:return e}},t.isInitializingReducer=function(){var e=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];switch((1<arguments.length?arguments[1]:void 0).type){case k:return!0;case C:return!1;default:return e}},t.orderedReducer=t.listenersReducer=void 0,t.profileReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{isLoaded:!1,isEmpty:!0},t=1<arguments.length?arguments[1]:void 0;switch(t.type){case b:return t.profile?m(m({},t.profile),{},{isEmpty:!1,isLoaded:!0}):m(m({},e),{},{isEmpty:!0,isLoaded:!0});case L:return Object.assign({},e,t.payload);case _:return t.preserve&&t.preserve.profile?(0,l.preserveValuesFromState)(e,t.preserve.profile,{isLoaded:!0,isEmpty:!0}):{isEmpty:!0,isLoaded:!1};case E:case D:return t.preserve&&t.preserve.profile?(0,l.preserveValuesFromState)(e,t.preserve.profile,{isLoaded:!0,isEmpty:!0}):{isLoaded:!0,isEmpty:!0};default:return e}},t.requestedReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=t.type,r=t.path;return n===y?m(m({},e),{},g({},(0,l.getSlashStrPath)(r),!1)):n===x||n===v?m(m({},e),{},g({},(0,l.getSlashStrPath)(r),!0)):e},t.requestingReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=t.type,r=t.path;return n===y?m(m({},e),{},g({},(0,l.getSlashStrPath)(r),!0)):n===x||n===v?m(m({},e),{},g({},(0,l.getSlashStrPath)(r),!1)):e},t.timestampsReducer=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=t.type,r=t.path;return n===y||n===x||n===v?m(m({},e),{},g({},(0,l.getSlashStrPath)(r),Date.now())):e};var r=h(n(9064)),i=h(n(185)),o=h(n(4567)),s=h(n(7946)),a=h(n(2093)),u=h(n(5357)),c=n(9363),l=n(6340);function h(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?p(Object(t),!0).forEach((function(n){g(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=c.actionTypes.START,v=c.actionTypes.SET,b=c.actionTypes.SET_PROFILE,w=c.actionTypes.MERGE,_=c.actionTypes.LOGIN,E=c.actionTypes.LOGOUT,S=c.actionTypes.LOGIN_ERROR,T=c.actionTypes.CLEAR_ERRORS,I=c.actionTypes.REMOVE,x=c.actionTypes.NO_VALUE,A=c.actionTypes.SET_LISTENER,O=c.actionTypes.UNSET_LISTENER,k=c.actionTypes.AUTHENTICATION_INIT_STARTED,C=c.actionTypes.AUTHENTICATION_INIT_FINISHED,D=c.actionTypes.AUTH_EMPTY_CHANGE,P=c.actionTypes.AUTH_LINK_SUCCESS,N=c.actionTypes.UNAUTHORIZED_ERROR,R=c.actionTypes.AUTH_UPDATE_SUCCESS,M=c.actionTypes.AUTH_RELOAD_SUCCESS,L=c.actionTypes.PROFILE_UPDATE_SUCCESS;function j(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"data";return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;switch(n.type){case v:return(0,i.default)(Object,(0,l.getDotStrPath)(n.path),n[e],t);case w:var a=(0,s.default)(t,(0,l.getDotStrPath)(n.path),{}),c=(0,r.default)(a,n[e]);return(0,i.default)(Object,(0,l.getDotStrPath)(n.path),c,t);case x:return(0,i.default)(Object,(0,l.getDotStrPath)(n.path),null,t);case I:return"data"===e?(0,l.recursiveUnset)((0,l.getDotStrPath)(n.path),t):t;case E:if(n.preserve){if(Array.isArray(n.preserve))return(0,u.default)(t,n.preserve);if((0,o.default)(n.preserve))return n.preserve[e]?(0,l.preserveValuesFromState)(t,n.preserve[e],{}):{};throw new Error("Invalid preserve parameter. It must be an Object or an Array")}return{};default:return t}}}var F=(0,l.combineReducers)({byId:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length?arguments[1]:void 0,n=t.type,r=t.path,i=t.payload;return n===A?m(m({},e),{},g({},i.id,{id:i.id,path:r})):n===O?(0,a.default)(e,[i.id]):e},allIds:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=t.type,r=(t.path,t.payload);return n===A?[].concat(d(e),[r.id]):n===O?e.filter((function(e){return e!==r.id})):e}});t.listenersReducer=F;var U=j();t.dataReducer=U;var V=j("ordered");t.orderedReducer=V},3360:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.useContext)(o.default)};var r,i=n(9950),o=(r=n(8319))&&r.__esModule?r:{default:r};e.exports=t.default},6172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,u.default)(),n=(0,o.useRef)(),c=(0,o.useRef)(),l=(0,o.useMemo)((function(){return(0,a.invokeArrayQuery)(e)}),[e]);(0,o.useEffect)((function(){if(null!==l&&!(0,i.default)(l,c.current)){var e=(0,r.default)(l,c.current,i.default),o=(0,r.default)(c.current,l,i.default);c.current=l,(0,s.unWatchEvents)(t,t.dispatch,(0,a.getEventsFromInput)(o)),n.current=(0,a.getEventsFromInput)(l),(0,s.watchEvents)(t,t.dispatch,(0,a.getEventsFromInput)(e))}}),[l]),(0,o.useEffect)((function(){return function(){(0,s.unWatchEvents)(t,t.dispatch,n.current)}}),[])};var r=c(n(6039)),i=c(n(9418)),o=n(9950),s=n(5850),a=n(5980),u=c(n(3360));function c(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},9628:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.useContext)(o.default)};var r,i=n(9950),o=(r=n(7916))&&r.__esModule?r:{default:r};e.exports=t.default},2808:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,s.default)(),n=!!t,a=(0,i.useRef)(),u=(0,i.useMemo)((function(){return(0,o.invokeArrayQuery)(e)}),[e]);(0,i.useEffect)((function(){if(n&&!(0,r.default)(u,a.current)){var e=(0,o.getChanges)(u,a.current);a.current=u,t.unsetListeners(e.removed),t.setListeners(e.added)}}),[u]),(0,i.useEffect)((function(){return function(){n&&a.current&&t.unsetListeners(a.current)}}),[])};var r=a(n(9418)),i=n(9950),o=n(5980),s=a(n(9628));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},3943:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapWithFirebaseAndDispatch=function(e,t,n,i){var o=h(e,t),s=h(e,t,!0);return a(a({},(0,r.default)(n,o)),(0,r.default)(i,s))},t.wrapInDispatch=function(e,t){var n=t.meta,r=t.method,o=t.args,s=void 0===o?[]:o,a=(f=t.types,p=3,function(e){if(Array.isArray(e))return e}(f)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(u){a=!0,i=u}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}}(f,p)||c(f,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=a[0],h=a[1],d=a[2];var f,p;return e({type:(0,i.default)(u)?u.type:u,meta:n,payload:(0,i.default)(u)?u.payload:{args:s}}),r.apply(void 0,function(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(s)).then((function(t){return e({type:(0,i.default)(h)?h.type:h,meta:n,payload:(0,i.default)(h)?h.payload:t}),t})).catch((function(t){return e({type:d,meta:n,payload:t}),Promise.reject(t)}))};var r=o(n(6638)),i=o(n(4567));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?s(Object(t),!0).forEach((function(n){u(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t,n){return function(r){return function(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return r.apply(e,n?[t,e].concat(o):[e,t].concat(o))}}}},1816:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authIsReady=u,t.createAuthIsReady=function(e,t){return"function"==typeof t.authIsReady?t.authIsReady(e,t):u(e,t.firebaseStateName)},t.getLoginMethodAndParams=function(e,t){var n=t.email,r=t.password,i=t.provider,a=t.type,u=t.token,c=t.scopes,l=t.phoneNumber,h=t.applicationVerifier,d=t.credential,f=t.emailLink;if(d){return e.auth().signInAndRetrieveDataWithCredential?{method:"signInAndRetrieveDataWithCredential",params:[d]}:{method:"signInWithCredential",params:[d]}}if(i){if(-1===o.supportedAuthProviders.indexOf(i.toLowerCase()))throw new Error("".concat(i," is not a valid Auth Provider"));if(u)throw new Error("provider with token no longer supported, use credential parameter instead");var p=s(e,i,c);return"popup"===a?{method:"signInWithPopup",params:[p]}:{method:"signInWithRedirect",params:[p]}}if(u){return e.auth().signInAndRetrieveDataWithCustomToken?{method:"signInAndRetrieveDataWithCustomToken",params:[u]}:{method:"signInWithCustomToken",params:[u]}}if(l){if(!h)throw new Error("Application verifier is required for phone authentication");return{method:"signInWithPhoneNumber",params:[l,h]}}return f&&n?{method:"signInWithEmailLink",params:[n,f]}:e.auth().signInWithEmailAndPassword?{method:"signInWithEmailAndPassword",params:[n,r]}:{method:"signInAndRetrieveDataWithEmailAndPassword",params:[n,r]}},t.getReauthenticateMethodAndParams=function(e,t){var n=t.provider,r=t.type,i=t.scopes,a=t.phoneNumber,u=t.applicationVerifier,c=t.credential;if(c){return e.auth().reauthenticateAndRetrieveDataWithCredential?{method:"reauthenticateAndRetrieveDataWithCredential",params:[c]}:{method:"reauthenticateWithCredential",params:[c]}}if(n){if(-1===o.supportedAuthProviders.indexOf(n.toLowerCase()))throw new Error("".concat(n," is not a valid Auth Provider"));var l=s(e,n,i);return"popup"===r?{method:"reauthenticateWithPopup",params:[l]}:{method:"reauthenticateWithRedirect",params:[l]}}if(!u)throw new Error("Application verifier is required for phone authentication");return{method:"reauthenticateWithPhoneNumber",params:[a,u]}},t.setupPresence=function(e,t){if(t.database&&t.database.ServerValue){var n=t.database().ref(),r=t._,i=r.config,s=i.presence,a=i.sessions,u=r.authUid,c=n.child(".info/connected"),l=n.child("function"==typeof s?s(t.auth().currentUser,t):s).child(u),h="function"==typeof a?a(t.auth().currentUser,t):a;h&&(h=n.child(a)),c.on("value",(function(n){if(n.val()){if(h){e({type:o.actionTypes.SESSION_START,payload:u});var r=h.push({startedAt:t.database.ServerValue.TIMESTAMP,user:u});"function"==typeof r.setPriority&&r.setPriority(u),r.child("endedAt").onDisconnect().set(t.database.ServerValue.TIMESTAMP,(function(){e({type:o.actionTypes.SESSION_END})}))}l.set(!0),l.onDisconnect().remove()}}))}},t.updateProfileOnFirestore=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},r=n.useSet,i=n.merge,o=e.firestore,s=e._,a=s.config,u=s.authUid,c=o().doc("".concat(a.userProfile,"/").concat(u));return(void 0===r||r?c.set(t,{merge:!(void 0!==i)||i}):c.update(t)).then((function(){return c.get()}))},t.updateProfileOnRTDB=function(e,t){var n=e._,r=n.config,i=n.authUid,o=e.database().ref("".concat(r.userProfile,"/").concat(i));return o.update(t).then((function(){return o.once("value")}))};var r,i=(r=n(6014))&&r.__esModule?r:{default:r},o=n(9363);function s(e,t,n){var r=t.toLowerCase();if("microsoft.com"===r||"apple.com"===r||"yahoo.com"===r)return new e.auth.OAuthProvider(t);var o="".concat((0,i.default)(t),"AuthProvider");if(!e.auth[o])throw new Error("".concat(t," is not a valid auth provider for your firebase instance. If using react-native, use a RN specific auth library."));var s=new e.auth[o],a=e._.config.customAuthParameters;return a&&a[t]&&s.setCustomParameters(a[t]),"twitter"===r||"function"!=typeof s.addScope||(s.addScope("email"),n&&(Array.isArray(n)&&n.forEach((function(e){s.addScope(e)})),("string"==typeof n||n instanceof String)&&s.addScope(n))),s}function a(e,t){var n=e.getState(),r=t?n[t]:n;if(!(r&&r.auth))throw new Error("The Firebase auth state could not be found in the store under the attribute '".concat(t?"".concat(t,"."):"","auth'. Make sure your react-redux-firebase reducer is correctly set in the store"));return r.auth.isLoaded}function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"firebase";return new Promise((function(n){if(a(e,t))n();else var r=e.subscribe((function(){a(e,t)&&(r(),n())}))}))}},3751:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getEventsFromInput=l,t.pathStrToObj=c;var r=u(n(2792)),i=u(n(4567)),o=u(n(9113)),s=n(1556),a=n(7236);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t={path:e,type:"value",isQuery:!1},n=(0,a.getQueryIdFromPath)(e);if(n){var i=e.split("#");t=Object.assign({},t,{queryId:n,isQuery:!0,path:i[0],queryParams:i[1].split("&")}),(0,s.getPopulates)(i[1].split("&"))&&(t.populates=(0,s.getPopulates)(i[1].split("&")),t.queryParams=(0,r.default)(i[1].split("&"),(function(e){return-1===e.indexOf("populate")})))}return t}function l(e){return(0,o.default)(e,(function(e){if("string"==typeof e||e instanceof String)return[c(e)];if(Array.isArray(e))return[{type:"first_child",path:e[0]},{type:"child_added",path:e[0]},{type:"child_removed",path:e[0]},{type:"child_moved",path:e[0]},{type:"child_changed",path:e[0]}];if((0,i.default)(e)){if(!e.path)throw new Error("Path is a required parameter within definition object");var t=e.path;return e.storeAs&&(t+="@".concat(e.storeAs)),e.queryParams&&(t+="#".concat(e.queryParams.join("&"))),[e=Object.assign({},c(t),e)]}throw new Error("Invalid Path Definition: ".concat(e,". Only strings, objects, and arrays accepted."))}))}var h={getEventsFromInput:l};t.default=h},5980:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCallable=c,t.getChanges=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n={};return n.added=(0,r.default)(e,(function(e){return!(0,i.default)(t,(function(t){return(0,o.default)(e,t)}))})),n.removed=(0,r.default)(t,(function(t){return!(0,i.default)(e,(function(e){return(0,o.default)(t,e)}))})),n},Object.defineProperty(t,"getEventsFromInput",{enumerable:!0,get:function(){return a.getEventsFromInput}}),t.invokeArrayQuery=function(e,t){var n=c(e)(t);return Array.isArray(n)?n:n?[n]:null},t.isString=function(e){return"string"==typeof e||e instanceof String},t.wrapDisplayName=function(e,t){return"".concat(t,"(").concat((n=e,"string"==typeof n?n:n?n.displayName||n.name||"Component":void 0),")");var n};var r=u(n(3386)),i=u(n(1032)),o=u(n(9418)),s=u(n(6800)),a=n(3751);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return"function"==typeof e?e:(0,s.default)(e)}},1556:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getChildType=function(e){return(0,h.isString)(e)?"string":Array.isArray(e)?"array":(0,c.default)(e)?"object":"other"},t.getPopulateChild=m,t.getPopulateObj=f,t.getPopulateObjs=p,t.getPopulates=function(e){var t=(0,l.default)(e,(function(e){return-1!==e.indexOf("populate")||(0,c.default)(e)&&e.populates})).map((function(e){return e.split("=")[1]}));return t.length?t.map(f):null},t.populateList=g,t.promisesForPopulate=function(e,t,n,u){var l=[],d={},y=p("function"==typeof u?u(t,n):u);return(0,r.default)(y,(function(e){return(0,i.default)(n,e.child)}))?(0,s.default)(y,(function(t){return(0,h.isString)((0,a.default)(n,t.child))?l.push(m(e,t,(0,a.default)(n,t.child)).then((function(e){e&&(0,o.default)(d,"".concat(t.root,".").concat((0,a.default)(n,t.child)),e)}))):l.push(g(e,(0,a.default)(n,t.child),t,d))})):(0,s.default)(n,(function(t,n){var r=f("function"==typeof u?u(n,t):u);(0,s.default)(r,(function(n){var r=(0,a.default)(t,n.child);return r?(0,h.isString)(r)?l.push(m(e,n,r).then((function(e){return e&&(0,o.default)(d,"".concat(n.root,".").concat(r),e),d}))):Array.isArray(r)||(0,c.default)(r)?l.push(g(e,r,n,d)):void 0:void 0}))})),Promise.all(l).then((function(){return d}))};var r=d(n(1032)),i=d(n(6094)),o=d(n(5849)),s=d(n(6380)),a=d(n(7946)),u=d(n(5876)),c=d(n(4567)),l=d(n(3386)),h=n(5980);function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if(!(0,h.isString)(e))return e;var t=e.split(":");return{child:t[0],root:t[1]}}function p(e){return Array.isArray(e)?e.map((function(e){return(0,c.default)(e)?e:f(e)})):e}function m(e,t,n){var r=t.childParam?"/".concat(t.childParam):"",i="".concat(t.root,"/").concat(n).concat(r);return e.database().ref().child(i).once("value").then((function(e){return e.val()}))}function g(e,t,n,r){return r[n.root]||(0,o.default)(r,n.root,{}),Promise.all((0,u.default)(t,(function(t,i){var s=!0===t||n.populateByKey?i:t;return m(e,n,s).then((function(e){return e?(0,o.default)(r,"".concat(n.root,".").concat(s),e):r}))})))}},7236:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyParamsToQuery=function(e,t){var n=!1;return e&&e.forEach((function(e){switch((e=e.split("="))[0]){case"orderByValue":t=t.orderByValue(),n=!0;break;case"orderByPriority":t=t.orderByPriority(),n=!0;break;case"orderByKey":t=t.orderByKey(),n=!0;break;case"orderByChild":t=t.orderByChild(e[1]);break;case"limitToFirst":t=t.limitToFirst(parseInt(e[1],10));break;case"limitToLast":t=t.limitToLast(parseInt(e[1],10));break;case"notParsed":n=!0;break;case"parsed":n=!1;break;case"equalTo":var r=n?e[1]:c(e[1]);r="true"===(r="false"!==(r="null"===r?null:r)&&r)||r,t=3===e.length?t.equalTo(r,e[2]):t.equalTo(r);break;case"startAt":var i=n?e[1]:c(e[1]);i="null"===i?null:i,t=3===e.length?t.startAt(i,e[2]):t.startAt(i);break;case"endAt":var o=n?e[1]:c(e[1]);o="null"===o?null:o,t=3===e.length?t.endAt(o,e[2]):t.endAt(o)}})),t},t.getQueryIdFromPath=h,t.getWatchPath=l,t.getWatcherCount=function(e,t,n,r){var i=r||h(n,t)||l(t,n);return e._.watchers[i]},t.orderedFromSnapshot=d,t.populateAndDispatch=function(e,t,n){var i=n.data,a=n.populates,u=n.snapshot,c=n.path,l=n.storeAs;return(0,s.promisesForPopulate)(e,u.key,i,a).then((function(e){return(0,r.default)(e,(function(e,n){t({type:o.actionTypes.MERGE,path:n,data:e})})),t({type:o.actionTypes.SET,path:l||c,data:i,ordered:d(u)}),e})).catch((function(e){return t({type:o.actionTypes.ERROR,payload:e}),Promise.reject(e)}))},t.setWatcher=function(e,t,n,r,i){var s=i||h(r,n)||l(n,r);return e._.watchers[s]?e._.watchers[s]++:e._.watchers[s]=1,t({type:o.actionTypes.SET_LISTENER,path:r,payload:{id:s}}),e._.watchers[s]},t.unsetWatcher=function(e,t,n,r,i){var s=i||h(r,n)||l(n,r);r=r.split("#")[0];var a=e._.watchers;1>=a[s]?(delete a[s],"first_child"!==n&&"once"!==n&&e.database().ref().child(r).off(n)):a[s]&&a[s]--,t({type:o.actionTypes.UNSET_LISTENER,path:r,payload:{id:s}})};var r=u(n(6380)),i=u(n(1099)),o=n(9363),s=n(1556),a=n(5980);function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=+e;return(0,i.default)(t)?e:t}function l(e,t){if(!e||""===e||!t)throw new Error("Event and path are required");return"".concat(e,":").concat("/"===t.substring(0,1)?"":"/").concat(t)}function h(e,t){if(!(0,a.isString)(e))throw new Error("Query path must be a string");var n=e,r=e.split("#");e=r[0];var i=1<r.length,o=i?r[1].split("&"):[],s=i?o.map((function(e){var t=e.split("=");if("queryId"===t[0])return t[1]})).filter((function(e){return e})):void 0;return s&&0<s.length?t?"".concat(t,":/").concat(s):s[0]:i?n:void 0}function d(e){if(e.hasChildren&&!e.hasChildren())return null;var t=[];return e.forEach&&e.forEach((function(e){t.push({key:e.key,value:e.val()})})),t.length?t:null}},6340:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combineReducers=function(e){return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0;return Object.keys(e).reduce((function(r,i){return r[i]=e[i](t[i],n),r}),{})}},t.getDotStrPath=function(e){return h(e).join(".")},t.getSlashStrPath=function(e){return h(e).join("/")},t.pathToArr=h,t.preserveValuesFromState=function(e,t,n){if("function"==typeof t)return t(e,n);if(!0===t)return n?c(c({},e),n):e;if(Array.isArray(t))return(0,i.default)(e,t);throw new Error("Invalid preserve parameter. It must be an Object or an Array")},t.recursiveUnset=function e(t,n){var i=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(!t)return n;if(0<(0,o.default)((0,s.default)(n,t))&&i)return n;var a=(0,r.default)(t,n),u=t.match(/\./)?t.replace(/\.[^.]*$/,""):"";return e(u,a,!0)};var r=a(n(6452)),i=a(n(5357)),o=a(n(4273)),s=a(n(7946));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t,n=1;n<arguments.length;n++)t=null==arguments[n]?{}:arguments[n],n%2?u(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}));return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return e?e.split(/\//).filter((function(e){return!!e})):[]}},5853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFile=function(e,t){var n=t.path,r=t.dbPath;return e.storage().ref(n).delete().then((function(){return r&&(e.database||e.firestore)?(e._.config.useFirestoreForStorageMeta?e.firestore().doc(r).delete():e.database().ref(r).remove()).then((function(){return{path:n,dbPath:r}})):{path:n}}))},t.uploadFileWithProgress=function(e,t,n){var r=n.path,i=n.file,o=n.filename,s=n.meta,c=n.fileMetadata,l=t.storage().ref("".concat(r,"/").concat(o)).put(i,c),h=l.on(t.storage.TaskEvent.STATE_CHANGED,{next:function(t){e({type:u,meta:s,payload:{snapshot:t,percent:Math.floor(t.bytesTransferred/t.totalBytes*100)}})},error:function(t){e({type:a,meta:s,payload:t}),h()},complete:function(){h()}});return l},t.writeMetadataToDb=function(e){var t=e.firebase,n=e.uploadTaskSnapshot,o=e.dbPath,s=e.options,a=t._.config,u=a.fileMetadataFactory,c=a.useFirestoreForStorageMeta,l=s.metadataFactory,h=s.documentId,d=s.useSetForMetadata,f=l||u;return function(e){return e.ref&&"function"==typeof e.ref.getDownloadURL?e.ref.getDownloadURL():Promise.resolve(e.downloadURLs&&e.downloadURLs[0])}(n).then((function(e){var s="function"==typeof f?f(n,t,n.metadata,e):(0,i.default)(n.metadata,r.default),a=function(e){var t=e.fileData,n=e.firebase,r=e.uploadTaskSnapshot,i=e.downloadURL;return function(e){var o=n._.config.useFirestoreForStorageMeta,s={snapshot:e,key:e.key||e.id,File:t,metaDataSnapshot:e,uploadTaskSnapshot:r,uploadTaskSnaphot:r,createdAt:o?n.firestore.FieldValue.serverTimestamp():n.database.ServerValue.TIMESTAMP};return e.id&&(s.id=e.id),i&&(s.downloadURL=i),s}}({fileData:s,firebase:t,uploadTaskSnapshot:n,downloadURL:e}),u="function"==typeof h?h(n,t,n.metadata,e):h;return function(e){if(c){if(u){var n=t.firestore().collection(o).doc(u);return!1===d?n.update(e).then((function(){return n})):n.set(e,{merge:!0}).then((function(){return n}))}return t.firestore().collection(o).add(e)}var r=t.database().ref(o).push();return r.set(e).then((function(){return r}))}(s).then(a)}))};var r=s(n(7842)),i=s(n(3256)),o=n(9363);function s(e){return e&&e.__esModule?e:{default:e}}var a=o.actionTypes.FILE_UPLOAD_ERROR,u=o.actionTypes.FILE_UPLOAD_PROGRESS},7349:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t){return r.default.createElement(s.default.Consumer,null,(function(n){return r.default.createElement(e,u({firebase:n,dispatch:n&&n.dispatch},t))}))}return t.displayName=(0,o.wrapDisplayName)(e,"withFirebase"),t.wrappedComponent=e,(0,i.default)(t,e)};var r=a(n(9950)),i=a(n(3876)),o=n(5980),s=a(n(8319));function a(e){return e&&e.__esModule?e:{default:e}}function u(){return u=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},u.apply(this,arguments)}e.exports=t.default},7071:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t){return r.default.createElement(s.default.Consumer,null,(function(n){return r.default.createElement(a.default.Consumer,null,(function(i){return r.default.createElement(e,c({firestore:i,firebase:n,dispatch:n.dispatch},t))}))}))}return t.displayName=(0,o.wrapDisplayName)(e,"withFirestore"),t.wrappedComponent=e,(0,i.default)(t,e)};var r=u(n(9950)),i=u(n(3876)),o=n(5980),s=u(n(8319)),a=u(n(7916));function u(e){return e&&e.__esModule?e:{default:e}}function c(){return c=Object.assign||function(e){for(var t,n=1;n<arguments.length;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},c.apply(this,arguments)}e.exports=t.default},5355:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case u:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===h||e===a||e===s||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)}},863:(e,t,n)=>{"use strict";e.exports=n(5355)},7062:(e,t,n)=>{"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var i=n(6673),o=r(n(9950)),s=n(125);n(1942),n(4783);var a=r(n(7022));function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){e.prototype=Object.create(t.prototype),l(e.prototype.constructor=e,t)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}var d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=s.createBrowserHistory(t.props),t}return c(t,e),t.prototype.render=function(){return o.createElement(i.Router,{history:this.history,children:this.props.children})},t}(o.Component),f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=s.createHashHistory(t.props),t}return c(t,e),t.prototype.render=function(){return o.createElement(i.Router,{history:this.history,children:this.props.children})},t}(o.Component),p=function(e,t){return"function"==typeof e?e(t):e},m=function(e,t){return"string"==typeof e?s.createLocation(e,null,null,t):e},g=function(e){return e},y=o.forwardRef;void 0===y&&(y=g);var v=y((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,s=h(e,["innerRef","navigate","onClick"]),a=s.target,c=u({},s,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),r())}});return c.ref=g!==y&&t||n,o.createElement("a",c)})),b=y((function(e,t){var n=e.component,r=void 0===n?v:n,c=e.replace,l=e.to,d=e.innerRef,f=h(e,["component","replace","to","innerRef"]);return o.createElement(i.__RouterContext.Consumer,null,(function(e){e||a(!1);var n=e.history,i=m(p(l,e.location),e.location),h=i?n.createHref(i):"",v=u({},f,{href:h,navigate:function(){var t=p(l,e.location),r=s.createPath(e.location)===s.createPath(m(t));(c||r?n.replace:n.push)(t)}});return g!==y?v.ref=t||d:v.innerRef=d,o.createElement(r,v)}))})),w=function(e){return e},_=o.forwardRef;void 0===_&&(_=w);var E=_((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,s=e.activeClassName,c=void 0===s?"active":s,l=e.activeStyle,d=e.className,f=e.exact,g=e.isActive,y=e.location,v=e.sensitive,E=e.strict,S=e.style,T=e.to,I=e.innerRef,x=h(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.createElement(i.__RouterContext.Consumer,null,(function(e){e||a(!1);var n=y||e.location,s=m(p(T,n),n),h=s.pathname,A=h&&h.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),O=A?i.matchPath(n.pathname,{path:A,exact:f,sensitive:v,strict:E}):null,k=!!(g?g(O,n):O),C="function"==typeof d?d(k):d,D="function"==typeof S?S(k):S;k&&(C=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(C,c),D=u({},D,l));var P=u({"aria-current":k&&r||null,className:C,style:D,to:s},x);return w!==_?P.ref=t||I:P.innerRef=I,o.createElement(b,P)}))}));Object.defineProperty(t,"rd",{enumerable:!0,get:function(){return i.Redirect}})},6673:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MemoryRouter:()=>E,Prompt:()=>T,Redirect:()=>k,Route:()=>R,Router:()=>_,StaticRouter:()=>V,Switch:()=>B,__HistoryContext:()=>b,__RouterContext:()=>w,generatePath:()=>O,matchPath:()=>N,useHistory:()=>W,useLocation:()=>G,useParams:()=>K,useRouteMatch:()=>H,withRouter:()=>z});var r=n(5540),i=n(9950),o=n(1942),s=n.n(o),a=n(125),u=n(7033),c=n(8168),l=n(7960),h=n.n(l),d=(n(4390),n(8587)),f=n(3876),p=n.n(f),m=1073741823,g="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var y=i.createContext||function(e,t){var n,o,a="__create-react-context-"+function(){var e="__global_unique_id__";return g[e]=(g[e]||0)+1}()+"__",u=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}(t.props.value),t}(0,r.A)(n,e);var i=n.prototype;return i.getChildContext=function(){var e;return(e={})[a]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((o=r)===(s=i)?0!==o||1/o===1/s:o!==o&&s!==s)?n=0:(n="function"===typeof t?t(r,i):m,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,s},i.render=function(){return this.props.children},n}(i.Component);u.childContextTypes=((n={})[a]=s().object.isRequired,n);var c=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}(0,r.A)(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?m:t},i.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?m:e},i.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},i.getValue=function(){return this.context[a]?this.context[a].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(i.Component);return c.contextTypes=((o={})[a]=s().object,o),{Provider:u,Consumer:c}},v=function(e){var t=y();return t.displayName=e,t},b=v("Router-History"),w=v("Router"),_=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}(0,r.A)(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return i.createElement(w.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},i.createElement(b.Provider,{children:this.props.children||null,value:this.props.history}))},t}(i.Component);var E=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,a.createMemoryHistory)(t.props),t}return(0,r.A)(t,e),t.prototype.render=function(){return i.createElement(_,{history:this.history,children:this.props.children})},t}(i.Component);var S=function(e){function t(){return e.apply(this,arguments)||this}(0,r.A)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(i.Component);function T(e){var t=e.message,n=e.when,r=void 0===n||n;return i.createElement(w.Consumer,null,(function(e){if(e||(0,u.A)(!1),!r||e.staticContext)return null;var n=e.history.block;return i.createElement(S,{onMount:function(e){e.release=n(t)},onUpdate:function(e,r){r.message!==t&&(e.release(),e.release=n(t))},onUnmount:function(e){e.release()},message:t})}))}var I={},x=1e4,A=0;function O(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(I[e])return I[e];var t=h().compile(e);return A<x&&(I[e]=t,A++),t}(e)(t,{pretty:!0})}function k(e){var t=e.computedMatch,n=e.to,r=e.push,o=void 0!==r&&r;return i.createElement(w.Consumer,null,(function(e){e||(0,u.A)(!1);var r=e.history,s=e.staticContext,l=o?r.push:r.replace,h=(0,a.createLocation)(t?"string"===typeof n?O(n,t.params):(0,c.A)({},n,{pathname:O(n.pathname,t.params)}):n);return s?(l(h),null):i.createElement(S,{onMount:function(){l(h)},onUpdate:function(e,t){var n=(0,a.createLocation)(t.to);(0,a.locationsAreEqual)(n,(0,c.A)({},h,{key:n.key}))||l(h)},to:n})}))}var C={},D=1e4,P=0;function N(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,s=n.strict,a=void 0!==s&&s,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=C[n]||(C[n]={});if(r[e])return r[e];var i=[],o={regexp:h()(e,i,t),keys:i};return P<D&&(r[e]=o,P++),o}(n,{end:o,strict:a,sensitive:c}),i=r.regexp,s=r.keys,u=i.exec(e);if(!u)return null;var l=u[0],d=u.slice(1),f=e===l;return o&&!f?null:{path:n,url:"/"===n&&""===l?"/":l,isExact:f,params:s.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var R=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.A)(t,e),t.prototype.render=function(){var e=this;return i.createElement(w.Consumer,null,(function(t){t||(0,u.A)(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?N(n.pathname,e.props):t.match,o=(0,c.A)({},t,{location:n,match:r}),s=e.props,a=s.children,l=s.component,h=s.render;return Array.isArray(a)&&function(e){return 0===i.Children.count(e)}(a)&&(a=null),i.createElement(w.Provider,{value:o},o.match?a?"function"===typeof a?a(o):a:l?i.createElement(l,o):h?h(o):null:"function"===typeof a?a(o):null)}))},t}(i.Component);function M(e){return"/"===e.charAt(0)?e:"/"+e}function L(e,t){if(!e)return t;var n=M(e);return 0!==t.pathname.indexOf(n)?t:(0,c.A)({},t,{pathname:t.pathname.substr(n.length)})}function j(e){return"string"===typeof e?e:(0,a.createPath)(e)}function F(e){return function(){(0,u.A)(!1)}}function U(){}var V=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePush=function(e){return t.navigateTo(e,"PUSH")},t.handleReplace=function(e){return t.navigateTo(e,"REPLACE")},t.handleListen=function(){return U},t.handleBlock=function(){return U},t}(0,r.A)(t,e);var n=t.prototype;return n.navigateTo=function(e,t){var n=this.props,r=n.basename,i=void 0===r?"":r,o=n.context,s=void 0===o?{}:o;s.action=t,s.location=function(e,t){return e?(0,c.A)({},t,{pathname:M(e)+t.pathname}):t}(i,(0,a.createLocation)(e)),s.url=j(s.location)},n.render=function(){var e=this.props,t=e.basename,n=void 0===t?"":t,r=e.context,o=void 0===r?{}:r,s=e.location,u=void 0===s?"/":s,l=(0,d.A)(e,["basename","context","location"]),h={createHref:function(e){return M(n+j(e))},action:"POP",location:L(n,(0,a.createLocation)(u)),push:this.handlePush,replace:this.handleReplace,go:F(),goBack:F(),goForward:F(),listen:this.handleListen,block:this.handleBlock};return i.createElement(_,(0,c.A)({},l,{history:h,staticContext:o}))},t}(i.Component);var B=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.A)(t,e),t.prototype.render=function(){var e=this;return i.createElement(w.Consumer,null,(function(t){t||(0,u.A)(!1);var n,r,o=e.props.location||t.location;return i.Children.forEach(e.props.children,(function(e){if(null==r&&i.isValidElement(e)){n=e;var s=e.props.path||e.props.from;r=s?N(o.pathname,(0,c.A)({},e.props,{path:s})):t.match}})),r?i.cloneElement(n,{location:o,computedMatch:r}):null}))},t}(i.Component);function z(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=(0,d.A)(t,["wrappedComponentRef"]);return i.createElement(w.Consumer,null,(function(t){return t||(0,u.A)(!1),i.createElement(e,(0,c.A)({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,p()(n,e)}var q=i.useContext;function W(){return q(b)}function G(){return q(w).location}function K(){var e=q(w).match;return e?e.params:{}}function H(e){var t=G(),n=q(w).match;return e?N(t.pathname,e):n}},330:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,v=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case o:case a:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case u:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}},4390:(e,t,n)=>{"use strict";n(330)},2654:(e,t,n)=>{"use strict";var r=n(9950),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:a.current}}t.jsx=c,t.jsxs=c},2049:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)E.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function O(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var u=!1;if(null===e)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return s=s(u=e),e=""===o?"."+O(u,0):o,_(s)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),k(s,t,i,"",(function(e){return e}))):null!=s&&(x(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+e)),t.push(s)),1;if(u=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var l=o+O(a=e[c],c);u+=k(a,t,i,l,s)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(a=e.next()).done;)u+=k(a=a.value,t,i,l=o+O(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function C(e,t,n){if(null==e)return e;var r=[],i=0;return k(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},N={transition:null},R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:N,ReactCurrentOwner:S};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)E.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},9950:(e,t,n)=>{"use strict";e.exports=n(2049)},4414:(e,t,n)=>{"use strict";e.exports=n(2654)},3326:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="function"!==typeof t[0]&&t.shift(),i=t;if("undefined"===typeof r)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];var a="undefined"===typeof e,u="undefined"===typeof t;return a&&u&&r?r:i.reduce((function(e,n,r){if("undefined"===typeof n)throw new TypeError("An undefined reducer was passed in at index "+r);return n.apply(void 0,[e,t].concat(o))}),a&&!u&&r?r:e)}}},7997:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add=d,t.default=void 0,t.deleteRef=function(e,t,n){var r=(0,a.getQueryConfig)(n),u=e._.config;if(!r.doc||r.subcollections&&!(0,i.default)(r.subcollections,"doc"))return"function"===typeof u.onAttemptCollectionDelete?u.onAttemptCollectionDelete(n,t,e):Promise.reject(new Error("Only documents can be deleted."));return(0,o.wrapInDispatch)(t,{ref:(0,a.firestoreRef)(e,r),method:"delete",meta:r,types:[s.actionTypes.DELETE_REQUEST,{type:s.actionTypes.DELETE_SUCCESS,preserve:e._.config.preserveOnDelete},s.actionTypes.DELETE_FAILURE]})},t.get=f,t.mutate=w,t.runTransaction=b,t.set=function(e,t,n){for(var r=(0,a.getQueryConfig)(n),i=arguments.length,u=new Array(i>3?i-3:0),c=3;c<i;c++)u[c-3]=arguments[c];return(0,o.wrapInDispatch)(t,{ref:(0,a.firestoreRef)(e,r),method:"set",meta:r,args:u,types:[s.actionTypes.SET_REQUEST,s.actionTypes.SET_SUCCESS,s.actionTypes.SET_FAILURE]})},t.setListener=m,t.setListeners=g,t.unsetListener=y,t.unsetListeners=v,t.update=p;var r,i=(r=n(8829))&&r.__esModule?r:{default:r},o=n(3045),s=n(9049),a=n(6590);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),u=3;u<r;u++)i[u-3]=arguments[u];var c=(0,a.getQueryConfig)(n);return(0,o.wrapInDispatch)(t,{ref:(0,a.firestoreRef)(e,c),method:"add",meta:c,args:i,types:[s.actionTypes.ADD_REQUEST,{type:s.actionTypes.ADD_SUCCESS,payload:function(e){var t={id:e.id,data:i[0]};return a.snapshotCache.set(t,e),t}},s.actionTypes.ADD_FAILURE]})}function f(e,t,n){var r=(0,a.getQueryConfig)(n),i=e._.config||{},u=i.mergeOrdered,c=i.mergeOrderedDocUpdates,l=i.mergeOrderedCollectionUpdates;return(0,o.wrapInDispatch)(t,{ref:(0,a.firestoreRef)(e,r),method:"get",meta:r,types:[s.actionTypes.GET_REQUEST,{type:s.actionTypes.GET_SUCCESS,payload:function(e){var t;return{data:(0,a.dataByIdSnapshot)(e),ordered:(0,a.orderedFromSnap)(e),fromCache:"boolean"!==typeof(null===(t=e.metadata)||void 0===t?void 0:t.fromCache)||e.metadata.fromCache}},merge:{docs:u&&c,collections:u&&l}},s.actionTypes.GET_FAILURE]})}function p(e,t,n){for(var r=(0,a.getQueryConfig)(n),i=arguments.length,u=new Array(i>3?i-3:0),c=3;c<i;c++)u[c-3]=arguments[c];return(0,o.wrapInDispatch)(t,{ref:(0,a.firestoreRef)(e,r),method:"update",meta:r,args:u,types:[s.actionTypes.UPDATE_REQUEST,s.actionTypes.UPDATE_SUCCESS,s.actionTypes.UPDATE_FAILURE]})}function m(e,t,n,r,i){var o=(0,a.getQueryConfig)(n),u=function(n){return o.populates?(0,a.getPopulateActions)({firebase:e,docData:n,meta:o}).then((function(r){r.forEach((function(e){t(l(l({},e),{},{type:s.actionTypes.LISTENER_RESPONSE,timestamp:Date.now()}))})),(0,a.dispatchListenerResponse)({dispatch:t,docData:n,meta:o,firebase:e})})).catch((function(t){var n=(e._.config||{}).logListenerError;!1!==n&&!1!==n&&console&&"function"===typeof console.error&&console.error("redux-firestore error populating:",t),"function"===typeof i&&i(t)})):((0,a.dispatchListenerResponse)({dispatch:t,docData:n,meta:o,firebase:e}),"function"===typeof r&&r(n),Promise.resolve())},c=function(n){var r=e._.config||{},a=r.mergeOrdered,u=r.mergeOrderedDocUpdates,c=r.mergeOrderedCollectionUpdates,l=r.logListenerError,h=r.preserveOnListenerError;!1!==l&&console&&"function"===typeof console.error&&console.error("redux-firestore listener error:",n),t({type:s.actionTypes.LISTENER_ERROR,meta:o,payload:n,merge:{docs:a&&u,collections:a&&c},preserve:h}),"function"===typeof i&&i(n)},h=n&&n.includeMetadataChanges||!1,d=h?(0,a.firestoreRef)(e,o).onSnapshot({includeMetadataChanges:h},u,c):(0,a.firestoreRef)(e,o).onSnapshot(u,c);return(0,a.attachListener)(e,t,o,d),d}function g(e,t,n){if(!Array.isArray(n))throw new Error("Listeners must be an Array of listener configs (Strings/Objects).");var r=e._.config;if(r.oneListenerPerPath)n.forEach((function(n){var r=(0,a.getQueryName)(n),i=e._.pathListenerCounts[r]||0;e._.pathListenerCounts[r]=i+1,i>0||m(e,t,n)}));else{var i=r.allowMultipleListeners;n.forEach((function(n){var r=(0,a.getQueryName)(n),o=e._.pathListenerCounts[r]||0,s="function"===typeof i?i(n,e._.listeners):i;e._.pathListenerCounts[r]=o+1,(0===o||s)&&m(e,t,n)}))}}function y(e,t,n){return(0,a.detachListener)(e,t,(0,a.getQueryConfig)(n))}function v(e,t,n){if(!Array.isArray(n))throw new Error("Listeners must be an Array of listener configs (Strings/Objects).");var r=e._.config.allowMultipleListeners;n.forEach((function(n){var i=(0,a.getQueryName)(n),o=e._.pathListenerCounts[i]>=1,s="function"===typeof r?r(n,e._.listeners):r;o&&(e._.pathListenerCounts[i]-=1,(0===e._.pathListenerCounts[i]||s)&&y(e,t,n))}))}function b(e,t,n){return(0,o.wrapInDispatch)(t,{ref:e.firestore(),method:"runTransaction",args:[n],types:[s.actionTypes.TRANSACTION_START,s.actionTypes.TRANSACTION_SUCCESS,s.actionTypes.TRANSACTION_FAILURE]})}function w(e,t,n){var r="".concat(+new Date);return(0,o.wrapInDispatch)(t,{ref:e,method:"mutate",meta:{timestamp:r},args:[n],types:[{type:s.actionTypes.MUTATE_START,payload:{data:n}},s.actionTypes.MUTATE_SUCCESS,{type:s.actionTypes.MUTATE_FAILURE,meta:{timestamp:r},payload:{data:n}}]})}var _={get:f,firestoreRef:a.firestoreRef,add:d,update:p,setListener:m,setListeners:g,unsetListener:y,unsetListeners:v,runTransaction:b,mutate:w};t.default=_},9608:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.firestoreActions=t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=o(t);if(n&&n.has(e))return n.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var u=s?Object.getOwnPropertyDescriptor(e,a):null;u&&(u.get||u.set)?Object.defineProperty(i,a,u):i[a]=e[a]}i.default=e,n&&n.set(e,i);return i}(n(7997));function o(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(o=function(e){return e?n:t})(e)}t.firestoreActions=i;var s={firestoreActions:i};t.default=s},9049:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.methodsToAddFromFirestore=t.defaultConfig=t.default=t.actionsPrefix=t.actionTypes=void 0;var n="@@reduxFirestore";t.actionsPrefix=n;var r={START:"".concat(n,"/START"),ERROR:"".concat(n,"/ERROR"),CLEAR_DATA:"".concat(n,"/CLEAR_DATA"),CLEAR_ERROR:"".concat(n,"/CLEAR_ERROR"),CLEAR_ERRORS:"".concat(n,"/CLEAR_ERRORS"),SET_LISTENER:"".concat(n,"/SET_LISTENER"),UNSET_LISTENER:"".concat(n,"/UNSET_LISTENER"),GET_REQUEST:"".concat(n,"/GET_REQUEST"),GET_SUCCESS:"".concat(n,"/GET_SUCCESS"),GET_FAILURE:"".concat(n,"/GET_FAILURE"),SET_REQUEST:"".concat(n,"/SET_REQUEST"),SET_SUCCESS:"".concat(n,"/SET_SUCCESS"),SET_FAILURE:"".concat(n,"/SET_FAILURE"),ADD_REQUEST:"".concat(n,"/ADD_REQUEST"),ADD_SUCCESS:"".concat(n,"/ADD_SUCCESS"),ADD_FAILURE:"".concat(n,"/ADD_FAILURE"),UPDATE_REQUEST:"".concat(n,"/UPDATE_REQUEST"),UPDATE_SUCCESS:"".concat(n,"/UPDATE_SUCCESS"),UPDATE_FAILURE:"".concat(n,"/UPDATE_FAILURE"),DELETE_REQUEST:"".concat(n,"/DELETE_REQUEST"),DELETE_SUCCESS:"".concat(n,"/DELETE_SUCCESS"),DELETE_FAILURE:"".concat(n,"/DELETE_FAILURE"),ATTACH_LISTENER:"".concat(n,"/ATTACH_LISTENER"),LISTENER_RESPONSE:"".concat(n,"/LISTENER_RESPONSE"),LISTENER_ERROR:"".concat(n,"/LISTENER_ERROR"),ON_SNAPSHOT_REQUEST:"".concat(n,"/ON_SNAPSHOT_REQUEST"),ON_SNAPSHOT_SUCCESS:"".concat(n,"/ON_SNAPSHOT_SUCCESS"),ON_SNAPSHOT_FAILURE:"".concat(n,"/ON_SNAPSHOT_FAILURE"),DOCUMENT_ADDED:"".concat(n,"/DOCUMENT_ADDED"),DOCUMENT_MODIFIED:"".concat(n,"/DOCUMENT_MODIFIED"),DOCUMENT_REMOVED:"".concat(n,"/DOCUMENT_REMOVED"),TRANSACTION_START:"".concat(n,"/TRANSACTION_START"),TRANSACTION_SUCCESS:"".concat(n,"/TRANSACTION_SUCCESS"),TRANSACTION_FAILURE:"".concat(n,"/TRANSACTION_FAILURE"),OPTIMISTIC_ADDED:"".concat(n,"/OPTIMISTIC_ADDED"),OPTIMISTIC_MODIFIED:"".concat(n,"/OPTIMISTIC_MODIFIED"),OPTIMISTIC_REMOVED:"".concat(n,"/OPTIMISTIC_REMOVED"),MUTATE_START:"".concat(n,"/MUTATE_START"),MUTATE_SUCCESS:"".concat(n,"/MUTATE_SUCCESS"),MUTATE_FAILURE:"".concat(n,"/MUTATE_FAILURE")};t.actionTypes=r;var i={logListenerError:!0,enhancerNamespace:"firestore",helpersNamespace:null,allowMultipleListeners:!1,preserveOnDelete:null,preserveOnListenerError:null,preserveCacheAfterUnset:!0,onAttemptCollectionDelete:null,mergeOrdered:!0,mergeOrderedDocUpdates:!0,mergeOrderedCollectionUpdates:!0,globalDataConverter:null};t.defaultConfig=i;t.methodsToAddFromFirestore=["collection","collectionGroup","configureClient","doc","batch","disableNetwork","enableNetwork","enablePersistence","ensureClientConfigured","setLogLevel","settings","mutate"];var o={actionsPrefix:n,actionTypes:r,defaultConfig:i};t.default=o},5290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r={listeners:{},pathListenerCounts:{},config:h(h({},u.defaultConfig),t)};e._=(0,o.default)(r,e._);var c=[{action:s.firestoreActions.deleteRef,name:"delete"},{action:s.firestoreActions.setListener,name:"onSnapshot"}],l=(0,a.mapWithFirebaseAndDispatch)(e,n,s.firestoreActions,c),f=u.methodsToAddFromFirestore.reduce((function(t,n){return e.firestore&&"function"===typeof e.firestore()[n]?h(h({},t),{},d({},n,e.firestore()[n].bind(e.firestore()))):t}),{});return i=Object.assign(f,e.firestore,{_:e._},t.helpersNamespace?d({},t.helpersNamespace,l):l)},t.getFirestore=function(){if(!i)throw new Error("Firestore instance does not yet exist. Check your setup.");return i};var r,i,o=(r=n(6781))&&r.__esModule?r:{default:r},s=n(9608),a=n(3045),u=n(9049);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5134:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return function(n){return function(r,a,u){var l=n(r,a,u),h=c(c({},o.defaultConfig),t);return i=(0,s.default)(e.firebase_||e,h,l.dispatch),l.firestore=i,l}}},t.getFirestore=function(){if(!i)throw new Error("Firebase instance does not yet exist. Check your compose function.");return i};var r,i,o=n(9049),s=(r=n(5290))&&r.__esModule?r:{default:r};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},7188:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"TJ",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"iJ",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"aU",{enumerable:!0,get:function(){return a.getFirestore}}),Object.defineProperty(t,"ih",{enumerable:!0,get:function(){return i.default}});var i=f(n(5134)),o=f(n(6256)),s=n(9608),a=d(n(5290)),u=d(n(9049)),c=d(n(1770)),l=n(6590);function h(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,n&&n.set(e,i),i}function f(e){return e&&e.__esModule?e:{default:e}}var p="2.0.1";var m=function(e,t){return new Promise((function(n,r){e.cache=(0,o.default)(e,{type:u.actionTypes.MUTATE_START,payload:{data:t},_promise:{resolve:n,reject:r}}).cache}))};o.default,o.default,i.default,i.default,a.default,s.firestoreActions,a.getFirestore,l.getSnapshotByObject,u.default,u.actionTypes,c.default,c.CALL_FIRESTORE},1770:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CALL_FIRESTORE=void 0,t.default=function(e){return function(t){return function(n){return function(r){var i=r.type===c?r:void 0;if("undefined"===typeof i)return n(r);var s=i.method;if("function"===typeof s&&(s=s(t.getState())),"string"!==typeof s)throw new Error("Specify a method.");var u=i.args,h=l[s];if(!Array.isArray(h)||3!==h.length)throw new Error("Expected an array of three action types.");if(!h.every((function(e){return"string"===typeof e})))throw new Error("Expected action types to be strings.");var d,f,p=(f=3,function(e){if(Array.isArray(e))return e}(d=h)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(d,f)||function(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(d,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=p[0],g=p[1],y=p[2];return n({type:m}),function(e,t){var n=t.method,r=t.modelArgs,i=t.methodArgs;Array.isArray(r)||(r=[r]);Array.isArray(i)||(i=[i]);if(!e||!e.firestore)throw new Error("firestore is not a Firebase namespace");return i?e.firestore()[n].apply(e,i):e.firestore()[n]}(e,{method:s}).then((function(e){return n({response:e,method:s,args:u,type:g})})).catch((function(e){return n(function(e){var t=a(a({},r),e);return delete t[c],t}({type:y,error:e.message||e||"Something bad happened"}))}))}}}};var r=n(9049);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c="CALL_FIRESTORE";t.CALL_FIRESTORE=c;var l={get:[r.actionTypes.GET_REQUEST,r.actionTypes.GET_SUCCESS,r.actionTypes.GET_FAILURE]}},6256:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(3326))&&r.__esModule?r:{default:r},o=n(8249),s=n(6648);var a=(0,o.combineReducers)({status:s.statusReducer,data:s.dataReducer,ordered:s.orderedReducer,listeners:s.listenersReducer,errors:s.errorsReducer,cache:s.cacheReducer,queries:s.queriesReducer,composite:function(e){return e}}),u=(0,i.default)(a,s.crossSliceReducer);t.default=u},4892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=oe[t.type];if(!n)return e;var r=t.meta&&t.meta.collection?t.meta.storeAs||(0,T.getBaseQueryName)(t.meta):null,i=t.meta?t.meta.collection:null;return n(e,{action:t,key:r,path:i})};var r,i=x(n(9002)),o=x(n(6791)),s=x(n(849)),a=x(n(9418)),u=x(n(7946)),c=x(n(3003)),l=x(n(5695)),h=x(n(2674)),d=x(n(6977)),f=x(n(6401)),p=x(n(5876)),m=x(n(2491)),g=x(n(263)),y=x(n(7016)),v=x(n(3386)),b=x(n(7951)),w=x(n(5849)),_=x(n(808)),E=n(9329),S=n(9049),T=n(6590),I=["collection","path","doc","id","data"];function x(e){return e&&e.__esModule?e:{default:e}}function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function O(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"===typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=function(e){return e instanceof Object&&void 0!==e.seconds},j={"<":function(e,t){return e<t},"<=":function(e,t){return e<=t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},">=":function(e,t){return e>=t},">":function(e,t){return e>t},"array-contains":function(e,t){return e.includes(t)},in:function(e,t){return Array.isArray(t)&&t.includes(e)},"array-contains-any":function(e,t){return t.some((function(t){return e.includes(t)}))},"not-in":function(e,t){return!t.includes(e)},"*":function(){return!0}},F={"<":function(e,t){return e.seconds<t.seconds||e.seconds===t.seconds&&e.nanoseconds<t.nanoseconds},"<=":function(e,t){return e.seconds<t.seconds||e.seconds===t.seconds&&e.nanoseconds<=t.nanoseconds},"==":function(e,t){return e.seconds===t.seconds&&e.nanoseconds===t.nanoseconds},"!=":function(e,t){return e.seconds!==t.seconds||e.nanoseconds!==t.nanoseconds},">=":function(e,t){return e.seconds>t.seconds||e.seconds===t.seconds&&e.nanoseconds>=t.nanoseconds},">":function(e,t){return e.seconds>t.seconds||e.seconds===t.seconds&&e.nanoseconds>t.nanoseconds},"array-contains":function(e,t){return e.includes(t)},in:function(e,t){return Array.isArray(t)&&t.includes(e)},"array-contains-any":function(e,t){return t.some((function(t){return e.includes(t)}))},"not-in":function(e,t){return!t.includes(e)},"*":function(){return!0}},U=function(e){return(0,f.default)(p.default,(function(e){return e}))},V=function(e){var t=e.collection;return function(e){var n=e.database,r=void 0===n?{}:n,i=e.databaseOverrides,o=void 0===i?{}:i,s=new Set([].concat(N(Object.keys(r[t]||{})),N(Object.keys(o[t]||{}))));return[Array.from(s).map((function(e){return[t,e]}))]}},B=function(e,t){var n=e.where;return n?("string"===typeof n[0]?[n]:n).map((function(e){var n=P(e,3),r=n[0],i=n[1],o=n[2],s=L(o)?F[i]:j[i]||function(){return!0};return(0,f.default)(p.default,(function(e){return(0,v.default)(e,(function(){var e,n=P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],2),i=n[0],a=n[1];return!(!i||!a)&&(void 0===(e="__name__"===r?a:r.includes(".")?r.split(".").reduce((function(e,t){return e&&e[t]}),t(i,a)):t(i,a)[r])&&(e=null),s(e,o))}))}))})):[(0,f.default)(p.default,i.default)]},z=function(e,t){var n=e.orderBy;if(!n)return i.default;var r="string"===typeof n[0]?[n]:n,o=d.default.apply(void 0,N(r.map((function(e){var t=P(e,2),n=t[0];return[function(e){return"string"===typeof e[n]?e[n].toLowerCase():L(e[n])?e[n].seconds:e[n]},t[1]||"asc"]})))),s=P(o,2),a=s[0],u=s[1];return(0,f.default)(p.default,(function(e){var n=e.map((function(e){var n=P(e,2),r=n[0],i=n[1];return t(r,i)}));return(0,g.default)(n,a,u).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.path;return n&&t&&[n,t]}))}))},q=function(e){var t=e.limit,n=e.endAt,r=e.endBefore;return t?void 0!==(n||r)?function(){var e=P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],1)[0];return[(0,s.default)(e,t)]}:function(){var e=P(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],1)[0];return[(0,m.default)(e,t)]}:i.default},W=function(e,t){var n=e.orderBy,r=e.limit,o=e.startAt,s=e.startAfter,a=e.endAt,u=e.endBefore,c=o||s,l=a||u,h=void 0!==s,d=void 0!==u;if(!(c||l||!1)||!n)return i.default;var m="string"===typeof n[0]?[n]:n,g=function(e,t){return void 0!==m.find((function(n,r){var i=P(n,2),c=i[0],l=i[1],h=void 0===l?"asc":l,d=Array.isArray(t)?t[r]:t;if(void 0===d)return!1;var f=L(e[c])?F:j,p=process["=="];return(o||a)&&(p=f["desc"===h?"<=":">="]),(s||u)&&(p=f["desc"===h?"<":">"]),p(e[c],d)}))};return(0,f.default)(p.default,(function(e){var n=[],i=void 0===c;return e.forEach((function(e){var o=P(e,2),s=o[0],a=o[1];r&&n.length>=r||(!i&&c&&g(t(s,a),c,void 0,h)&&(i=!0),i&&l&&g(t(s,a),l,d,void 0)&&(i=!1),i&&n.push([s,a]))})),n}))};function G(e,t){var n=t.database,r=t.databaseOverrides,i=e.via,o=void 0===i?"memory":i,s=e.collection,a=n&&n[s]||{},u=r&&r[s],c=function(e,t){var n=a[t]||{},r=null===u||void 0===u?void 0:u[t];return r?C(C({},n),r):n},l=(0,y.default)([V(e),U("xfAllIds")].concat(N(B(e,c)),[U("xfWhere"),z(e,c),U("xfOrder"),W(e,c),U("xfPaginate"),q(e),U("xfLimit")]))(t)[0];return"memory"===o&&0===l.length?void 0:l}function K(e,t){var n,r=[],i=Array.isArray(t)?t:[t],s=null===(n=e.databaseOverrides)||void 0===n?void 0:n[t];Object.keys(e).forEach((function(t){var n;if(!["database","databaseOverrides"].includes(t)&&i.includes(e[t].collection)&&!function(e,t){var n=t.databaseOverrides,r=void 0===n?{}:n,i=e.collection,s=e.via,a=["cache","server"].includes(s),u=(0,o.default)(r[i]);return!(!a||!u)}(e[t],e)){r.push(t);var a=G(e[t],e);e[t].ordered&&(null!==a&&void 0!==a?a:[]).toString()===(null!==(n=e[t].ordered)&&void 0!==n?n:[]).toString()||((0,w.default)(e,[t,"ordered"],a),(0,w.default)(e,[t,"via"],(0,o.default)(s)?"memory":"optimistic"))}}))}var H=function(e){return"string"===typeof e[0]&&0===e[0].indexOf("::")?null:e},Q=function(e,t,n){delete e[t];var r=t.split(".");return r.reduce((function(e,t,i){return void 0===e[t]&&(e[t]={}),i===r.length-1&&(e[t]=n),e[t]}),e),e},Y=function(e,t,n){return"::arrayUnion"!==e?null:(n()||[]).concat([t])},$=function(e,t,n){return"::arrayRemove"===e&&(n()||[]).filter((function(e){return e!==t}))},J=function(e,t,n){return"::increment"===e&&"number"===typeof t&&(n()||0)+t},X=function(e){return"::serverTimestamp"===e&&E.Timestamp.now()};function Z(e){var t=e.payload,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.data||{},s=i.reads,a=i.writes;a?Array.isArray(a)||(a=[a]):a=Array.isArray(t.data)?t.data:[t.data];var u={};s&&(u=Object.keys(s).reduce((function(e,t){var i,o,a,u;if("function"===typeof s[t])return C(C({},e),{},D({},t,s[t]()));var c=(null===(i=s[t])||void 0===i?void 0:i.path)||(null===(o=s[t])||void 0===o?void 0:o.collection),l=(null===(a=s[t])||void 0===a?void 0:a.id)||(null===(u=s[t])||void 0===u?void 0:u.doc),h=n[c]||{},d=r[c]||{};return C(C({},e),{},D({},t,C(C({id:l,path:c},h[l]),d[l]||{})))}),{}));var c=a.map((function(e){return"function"===typeof e?e(u):e})).filter((function(e){return!e||!(0,o.default)(e)})).reduce((function(e,t){return[].concat(N(e),N(Array.isArray(t)?t:[t]))}),[]).map((function(e){var t=e.collection,r=e.path,i=e.doc,o=e.id,s=e.data,a=O(e,I),u=r||t,c=o||i;return C({path:u,id:c},function(e,t){return Object.keys(e).reduce((function(e,n){var r=e[n];return n.includes(".")?Q(e,n,r):Array.isArray(r)&&r.length>0&&(e[n]=H(r)||X(r[0])||Y(r[0],r[1],(function(){return t(n)}))||$(r[0],r[1],(function(){return t(n)}))||J(r[0],r[1],(function(){return t(n)}))),e}),JSON.parse(JSON.stringify(e)))}(t?s:a,(function(e){return(((Object.keys(n).length>0?n:{})[u]||{})[c]||{})[e]})))}));return c}function ee(e,t){var n=t.path,r=t.id,i=t.data;if(n&&r){var o=(0,u.default)(e,["databaseOverrides",n,r],!1);if(o&&(!i||(0,c.default)(i,o))){var s=Object.keys(o),l=i?s.filter((function(e){var t=(0,u.default)(i,e),n=o[e];return null===t||void 0===t?t===n:Array.isArray(t)?t.every((function(e,t){return e===n[t]})):"object"===A(t)?Object.keys(t).every((function(e){return t[e]===n[e]})):(0,a.default)(i[e],o[e])})):s,h=l.length===Object.keys(o).length;h&&1===Object.keys(e.databaseOverrides[n]||{}).length?(0,b.default)(e,["databaseOverrides",n]):h?(0,b.default)(e,["databaseOverrides",n,r]):l.forEach((function(t){(0,b.default)(e,["databaseOverrides",n,r,t])}))}}}var te=function(e,t){var n=t.action,r=(t.key,t.path);return(0,_.default)(e,(function(e){var t,i;e.database||((0,w.default)(e,["database"],{}),(0,w.default)(e,["databaseOverrides"],{}));var s={undefined:!(0,o.default)(null===(t=e.databaseOverrides)||void 0===t?void 0:t[r])?"optimistic":"memory",true:"cache",false:"server"}[n.payload.fromCache];n.payload.data&&Object.keys(n.payload.data).forEach((function(t){(0,h.default)(e,["database",r,t],n.payload.data[t],Object),ee(e,{path:r,id:t,data:n.payload.data[t]})}));var a=(null===(i=n.payload.ordered)||void 0===i?void 0:i.map((function(e){return[e.path,e.id]})))||G(n.meta,e);return(0,w.default)(e,[n.meta.storeAs],C(C({ordered:a},n.meta),{},{via:s})),K(e,r),e}))},ne=function(e,t){var n=t.action,r=t.key,i=t.path;return(0,_.default)(e,(function(e){(0,h.default)(e,["database",i,n.meta.doc],n.payload.data,Object),ee(e,{path:i,id:n.meta.doc,data:n.payload.data});var t=n.payload,o=t.ordered||{},s=o.oldIndex,a=void 0===s?0:s,u=o.newIndex,c=void 0===u?0:u;if(c!==a){var d=t.data&&[t.data.path,t.data.id]||e[r].ordered[a],f=(e[r]||{ordered:[]}).ordered,p=(0,l.default)(f,[1,n.meta.doc]),m=-1!==p,g=-1===a||m;(-1===c||m)&&p>-1?f.splice(p,0):g&&f.splice(c,0,d),(0,w.default)(e,[r,"ordered"],f)}return!1!==n.meta.reprocess&&K(e,i),e}))},re=function(e,t){var n=t.action,r=(t.key,t.path);return(0,_.default)(e,(function(e){if(n.payload.data||n.payload.args){var t=(n.payload.data?[{writes:[n.payload.data]}]:n.payload.args).reduce((function(t,n){var i=n.writes;return[].concat(N(t),N(i.map((function(t){var n=t.collection,i=t.path,o=t.doc,s=t.id;return ee(e,{path:i||n,id:s||o}),r||n}))))}),[]),i=Array.from(new Set(t));i.length>0&&K(e,i)}return e}))},ie=function(e,t){var n=t.action,r=(t.key,t.path);return(0,_.default)(e,(function(e){return(0,h.default)(e,["databaseOverrides",r,n.meta.doc],n.payload.data,Object),K(e,r),e}))},oe=(D(r={},S.actionTypes.SET_LISTENER,te),D(r,S.actionTypes.LISTENER_RESPONSE,te),D(r,S.actionTypes.GET_SUCCESS,te),D(r,S.actionTypes.UNSET_LISTENER,(function(e,t){var n=t.action,r=t.key,i=t.path;return(0,_.default)(e,(function(e){return e[r]&&(n.payload.preserveCache||(0,b.default)(e,[r]),K(e,i)),e}))})),D(r,S.actionTypes.DOCUMENT_ADDED,ne),D(r,S.actionTypes.DOCUMENT_MODIFIED,ne),D(r,S.actionTypes.DELETE_SUCCESS,(function(e,t){var n=t.action,r=t.key,i=t.path;return(0,_.default)(e,(function(e){if(e.database&&e.database[i]&&(0,b.default)(e,["database",i,n.meta.doc]),ee(e,{path:i,id:n.meta.doc}),e[r]&&e[r].ordered){var t=(0,l.default)(e[r].ordered,[1,n.meta.doc]);e[r].ordered.splice(t,1)}return K(e,i),e}))})),D(r,S.actionTypes.DOCUMENT_REMOVED,(function(e,t){var n=t.action,r=t.key,i=t.path;return(0,_.default)(e,(function(e){if(ee(e,{path:i,id:n.meta.doc,data:n.payload.data}),e[r]&&e[r].ordered){var t=(0,l.default)(e[r].ordered,[1,n.meta.doc]);-1!==t&&e[r].ordered.splice(t,1)}return K(e,i),e}))})),D(r,S.actionTypes.OPTIMISTIC_ADDED,ie),D(r,S.actionTypes.OPTIMISTIC_MODIFIED,ie),D(r,S.actionTypes.OPTIMISTIC_REMOVED,(function(e,t){var n=t.action,r=(t.key,t.path);return(0,_.default)(e,(function(e){return ee(e,{path:r,id:n.meta.doc}),K(e,r),e}))})),D(r,S.actionTypes.MUTATE_FAILURE,re),D(r,S.actionTypes.DELETE_FAILURE,re),D(r,S.actionTypes.UPDATE_FAILURE,re),D(r,S.actionTypes.SET_FAILURE,re),D(r,S.actionTypes.ADD_FAILURE,re),D(r,S.actionTypes.MUTATE_START,(function(e,t){var n=t.action,r=(t.key,t.path,n._promise);try{return(0,_.default)(e,(function(e){if(n.payload&&n.payload.data){var t=Z(n,e.database)||[];t.forEach((function(t){(0,h.default)(e,["databaseOverrides",t.path,t.id],t,Object)})),N(new Set(t.map((function(e){return e.path})))).forEach((function(t){K(e,t)}))}return null===r||void 0===r||r.resolve(),e}))}catch(i){return null===r||void 0===r||r.reject(i),e}})),r)},5550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,a.default)(e,(function(n){switch(t.type){case u.actionTypes.DOCUMENT_MODIFIED:case u.actionTypes.DOCUMENT_ADDED:case u.actionTypes.DOCUMENT_REMOVED:case u.actionTypes.LISTENER_RESPONSE:case u.actionTypes.UNSET_LISTENER:var a=(0,s.default)(!!e.queries&&Object.values(e.queries)||[],(function(e){return e.storeAs||e.collection}));return Object.keys(a).forEach((function(e){var t={};a[e].forEach((function(e){return(0,o.default)(t,(0,r.default)(e,"data",{}))})),(0,i.default)(n,["composite",e],t)})),n;default:return e}}))};var r=c(n(7946)),i=c(n(5849)),o=c(n(953)),s=c(n(3684)),a=c(n(808)),u=n(9049);function c(e){return e&&e.__esModule?e:{default:e}}},3100:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:case l:var n=t.meta,o=t.payload;if(!o||void 0===o.data)return e;var a=function e(t){return t.subcollections?e(t.subcollections.slice(-1)[0]):t.doc}(n),g=a?(0,i.default)(o.data,a):o.data;return!(0,i.default)(e,n.storeAs?[n.storeAs]:(0,s.pathFromMeta)(n))||n.subcollections,(0,r.default)(Object,n.storeAs?[n.storeAs]:(0,s.pathFromMeta)(n),g,e);case p:case f:return(0,r.default)(Object,(0,s.pathFromMeta)(t.meta),t.payload.data,e);case m:case d:var y=(0,s.pathFromMeta)(t.meta),v=(0,r.default)(Object,y,null,e);return t.preserve&&t.preserve.data?(0,s.preserveValuesFromState)(e,t.preserve.data,v):v;case u:return t.preserve&&t.preserve.data?(0,s.preserveValuesFromState)(e,t.preserve.data,{}):{};case h:var b=(0,r.default)(Object,(0,s.pathFromMeta)(t.meta),null,e);return t.preserve&&t.preserve.data?(0,s.preserveValuesFromState)(e,t.preserve.data,b):(0,i.default)(e,(0,s.pathFromMeta)(t.meta))?e:b;default:return e}};var r=a(n(185)),i=a(n(7946)),o=n(9049),s=n(8249);function a(e){return e&&e.__esModule?e:{default:e}}var u=o.actionTypes.CLEAR_DATA,c=o.actionTypes.GET_SUCCESS,l=o.actionTypes.LISTENER_RESPONSE,h=o.actionTypes.LISTENER_ERROR,d=o.actionTypes.DELETE_SUCCESS,f=o.actionTypes.DOCUMENT_ADDED,p=o.actionTypes.DOCUMENT_MODIFIED,m=o.actionTypes.DOCUMENT_REMOVED},7517:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(9049),o=n(6590),s=n(8249);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=i.actionTypes.CLEAR_ERRORS,f=i.actionTypes.CLEAR_ERROR,p=i.actionTypes.LISTENER_ERROR,m=i.actionTypes.ERROR;var g=(0,s.combineReducers)({byQuery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.meta,r=t.payload;switch(t.type){case m:case p:return u(u({},e),{},c({},(0,o.getQueryName)(n),r));case f:return u(u({},e),{},c({},(0,o.getQueryName)(n),null));default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.meta;switch(t.type){case p:case m:return-1!==e.indexOf((0,o.getQueryName)(n))?e:[].concat(l(e),[(0,o.getQueryName)(n)]);case d:return[];case f:return e.filter((function(e){return e!==(0,o.getQueryName)(n)}));default:return e}}});t.default=g},6648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"cacheReducer",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"crossSliceReducer",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"dataReducer",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"errorsReducer",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"listenersReducer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"orderedReducer",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"queriesReducer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"statusReducer",{enumerable:!0,get:function(){return u.default}});var r=h(n(3100)),i=h(n(7517)),o=h(n(6813)),s=h(n(6061)),a=h(n(7782)),u=h(n(1866)),c=h(n(5550)),l=h(n(4892));function h(e){return e&&e.__esModule?e:{default:e}}},6813:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(2093))&&r.__esModule?r:{default:r},o=n(9049);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=(0,n(8249).combineReducers)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.path,s=t.payload;switch(n){case o.actionTypes.SET_LISTENER:return l(l({},e),{},h({},s.name,{name:s.name,path:r}));case o.actionTypes.UNSET_LISTENER:return(0,i.default)(e,[s.name]);default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case o.actionTypes.SET_LISTENER:return[].concat(a(e),[r.name]);case o.actionTypes.UNSET_LISTENER:return e.filter((function(e){return e!==r.name}));default:return e}}});t.default=d},6061:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t.type)return e;if(t.type===A)return t.preserve&&t.preserve.ordered?(0,m.preserveValuesFromState)(e,t.preserve.ordered,{}):{};if(!Object.prototype.hasOwnProperty.call(R,t.type))return e;if(!t.meta||!t.meta.storeAs&&!t.meta.collection)return e;var n=t.meta.storeAs||t.meta.collection,r=(0,d.default)(e,n);return b(b({},e),{},w({},n,M(r,t)))};var i,o=g(n(6781)),s=g(n(9418)),a=g(n(9076)),u=g(n(5876)),c=g(n(2093)),l=g(n(5875)),h=g(n(7292)),d=g(n(7946)),f=g(n(4273)),p=n(9049),m=n(8249);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"===typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=p.actionTypes.DOCUMENT_ADDED,I=p.actionTypes.GET_SUCCESS,x=p.actionTypes.LISTENER_RESPONSE,A=p.actionTypes.CLEAR_DATA,O=p.actionTypes.DELETE_SUCCESS,k=p.actionTypes.DOCUMENT_REMOVED,C=p.actionTypes.DOCUMENT_MODIFIED;function D(e,t){if(t.payload.ordered){var n=t.payload.ordered,r=n.newIndex,i=n.oldIndex;if(null!==r&&null!==i&&r>-1&&i>-1&&r!==i)return function(e,t,n,r){var i=t.doc,o=n||{},s=o.oldIndex,a=o.newIndex,u=[].concat(_(e.slice(0,s)),_(e.slice(s+1)));return[].concat(_(u.slice(0,a)),[b({id:i},r)||b({},e[s])],_(u.slice(a)))}(e,t.meta,t.payload.ordered,t.payload.data)}if(!t.meta.subcollections||t.meta.storeAs)return(0,m.updateItemInArray)(e,t.meta.doc,(function(e){return b({id:t.meta.doc},t.payload.data)}));var s=y((0,m.pathToArr)(t.meta.path),4),a=s[1],u=s[2],c=s[3];return(0,m.updateItemInArray)(e,a,(function(e){return b(b({},e),{},w({},u,(0,m.updateItemInArray)((0,d.default)(e,u,[]),c,(function(e){return(0,o.default)(e,t.payload.data)}))))}))}function P(e,t){if(!t.meta.subcollections||t.meta.storeAs)return(0,l.default)(e,{id:t.meta.doc});var n=t.meta.subcollections[0];return n.doc?(0,m.updateItemInArray)(e,t.meta.doc,(function(t){return(0,d.default)(t,n.collection,[]).length?b(b({},t),{},w({},n.collection,(0,l.default)(e,{id:n.doc}))):t})):(0,m.updateItemInArray)(e,t.meta.doc,(function(e){return(0,c.default)(e,[n.collection])}))}function N(e,t){var n=t.meta,r=t.merge,i=void 0===r?{doc:!0,collections:!0}:r;if(n.storeAs)return t.payload.ordered;var l=(0,f.default)(e),p=!!(0,f.default)(t.payload.ordered);if(n.doc&&i.doc&&l)return D(e,t);if(l&&i.collections){if(!p)return[];var g=e&&(0,a.default)(e,"id");return(0,u.default)(t.payload.ordered,(function(e){var t=(0,d.default)(g,e.id);return t&&!(0,s.default)(t,e)?b(b({},t),e):e}))}if(n.doc&&n.subcollections){var y=n.subcollections[0];return l?(0,m.updateItemInArray)(e,n.doc,(function(e){return p?b(b({},e),{},w({},y.collection,(0,h.default)((0,d.default)(e,y.collection,[]),t.payload.ordered,"id"))):(0,c.default)(e,[y.collection])})):[w({id:n.doc},y.collection,t.payload.ordered)]}return n.doc&&l?(0,f.default)(t.payload.ordered)?(0,m.updateItemInArray)(e,n.doc,(function(e){return(0,o.default)(e,t.payload.ordered[0])})):e:t.payload.ordered}var R=(w(i={},T,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.meta,r=t.payload;return!n.subcollections||n.storeAs?[].concat(_(e.slice(0,r.ordered.newIndex)),[b({id:n.doc},r.data)],_(e.slice(r.ordered.newIndex))):D(e,t)})),w(i,C,D),w(i,k,P),w(i,O,P),w(i,x,N),w(i,I,N),i),M=(0,m.createReducer)(void 0,R)},7782:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,s.default)(e,(function(n){if(!f(t))return e;var i=(0,u.getBaseQueryName)(t.meta);switch(t.type){case a.actionTypes.GET_SUCCESS:case a.actionTypes.LISTENER_RESPONSE:return n[i]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({data:t.payload.data},t.meta),n;case a.actionTypes.UNSET_LISTENER:return n[i]&&(n[i].data=void 0),n;case a.actionTypes.DOCUMENT_ADDED:case a.actionTypes.DOCUMENT_MODIFIED:return(0,o.default)(n,[i,"data",t.meta.doc],t.payload.data),n;case a.actionTypes.DOCUMENT_REMOVED:case a.actionTypes.DELETE_SUCCESS:return(0,r.default)(n,[i,"data",t.meta.doc]),n;default:return e}}))},t.isComposable=f;var r=c(n(7951)),i=c(n(7946)),o=c(n(5849)),s=c(n(808)),a=n(9049),u=n(6590);function c(e){return e&&e.__esModule?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return!!(0,i.default)(e,"meta.where")&&!!(0,i.default)(e,"meta.collection")}},1866:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.requestedReducer=m,t.requestingReducer=p,t.timestampsReducer=g;var r=n(9049),i=n(8249),o=n(6590);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===s(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=r.actionTypes.SET_LISTENER,h=r.actionTypes.UNSET_LISTENER,d=r.actionTypes.LISTENER_ERROR,f=r.actionTypes.LISTENER_RESPONSE;function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.meta;switch(n){case l:return u(u({},e),{},c({},(0,i.getSlashStrPath)((0,o.getQueryName)(r)),!0));case d:case f:case h:return u(u({},e),{},c({},(0,i.getSlashStrPath)((0,o.getQueryName)(r)),!1));default:return e}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.meta;switch(n){case l:case h:return u(u({},e),{},c({},(0,o.getQueryName)(r),!1));case d:case f:return u(u({},e),{},c({},(0,o.getQueryName)(r),!0));default:return e}}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.meta;return n===l?u(u({},e),{},c({},(0,o.getQueryName)(r),Date.now())):e}var y=(0,i.combineReducers)({requesting:p,requested:m,timestamps:g});t.default=y},3045:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.mapWithFirebaseAndDispatch=function(e,t,n,r){var o=function(e,t){return function(n){return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n.apply(e,[e,t].concat(i))}}}(e,t);return c(c({},(0,i.default)(n,o)),r.reduce((function(e,t){var n=t.action,r=t.name;return c(c({},e),{},l({},r,o(n)))}),{}))},t.wrapInDispatch=function(e,t){var n=t.ref,r=t.meta,i=void 0===r?{}:r,a=t.method,u=t.args,c=void 0===u?[]:u,l=t.types;if("function"!==typeof e)throw new Error("dispatch is not a function");var f=d(l,3),p=f[0],g=f[1],y=f[2],v={type:(0,o.default)(p)?p.type:p,meta:i,payload:(0,o.default)(p)?p.payload:{args:c}},b=new Promise((function(t,n){Object.defineProperty(v,"_promise",{enumerable:!1,configurable:!1,writable:!1,value:{resolve:t,reject:n}}),"mutate"!==a&&t(),e(v)})),w="mutate"===a?s.default.apply(void 0,[n].concat(h(c))):n[a].apply(n,h(c));return w.then((function(t){var n=(0,o.default)(g),r={type:n?g.type:g,meta:i,payload:n&&g.payload?m(g,t):{args:c}};return n&&g.preserve&&(r.preserve=g.preserve),n&&g.merge&&(r.merge=g.merge),e(r),t})).catch((function(t){return e({type:y,meta:i,payload:t}),Promise.reject(t)})),Promise.allSettled([w,b]).then((function(e){var t=d(e,2),n=t[0],r=t[1];return"rejected"===r.status?Promise.reject(r.reason):"rejected"===n.status?Promise.reject(n.reason):n.value}))};var i=a(n(6638)),o=a(n(4567)),s=a(n(750));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=e.payload;return"function"===typeof n?n(t):n}},750:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("string"===typeof(null===t||void 0===t?void 0:t.path)||"string"===typeof(null===t||void 0===t?void 0:t.collection))return function(e,t){var n=O(e,t);return n}(e,t);if(Array.isArray(t))return function(e,t){return C.apply(this,arguments)}(e,t);return function(e,t){return D.apply(this,arguments)}(e,t)};var i=l(n(6638)),o=l(n(2964)),s=l(n(5117)),a=l(n(8251)),u=n(6590),c=["collection","path","doc","id","data"];function l(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(){m=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(C){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof f?t:f,s=Object.create(o.prototype),a=new A(r||[]);return i(s,"_invoke",{value:S(e,n,a)}),s}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(C){return{type:"throw",arg:C}}}e.wrap=l;var d={};function f(){}function p(){}function g(){}var y={};c(y,s,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(O([])));b&&b!==t&&n.call(b,s)&&(y=b);var w=g.prototype=f.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function o(i,s,a,u){var c=h(e[i],e,s);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==r(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,u)}),(function(e){o("throw",e,a,u)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,u)}))}u(c.arg)}var s;i(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return s=s?s.then(r,r):r()}})}function S(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=T(s,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function T(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function O(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=g,i(w,"constructor",{value:g,configurable:!0}),i(g,"constructor",{value:p,configurable:!0}),p.displayName=c(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(E.prototype),c(E.prototype,a,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var s=new E(l(t,n,r,i),o);return e.isGeneratorFunction(n)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(w),c(w,u,"Generator"),c(w,s,(function(){return this})),c(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=O,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return s.type="throw",s.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(a&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;x(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:O(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(c){return void n(c)}a.done?t(u):Promise.resolve(u).then(r,i)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){v(o,r,i,s,a,"next",e)}function a(e){v(o,r,i,s,a,"throw",e)}s(void 0)}))}}var w=function(){var e=b(m().mark((function e(t){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Object,e.next=3,Promise.all(Object.entries(t).map((function(e){var t=g(e,2),n=t[0];return t[1].then((function(e){return[n,e]}))})));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.fromEntries.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.doc;return"string"===typeof e.id||"string"===typeof t},E=function(e){return!e||e.empty&&e.empty()||e.exists&&e.exists()},S=function(e){return Array.isArray(e)&&"string"===typeof e[0]&&0===e[0].indexOf("::")?null:e},T=function(e,t){var n;if("::arrayUnion"!==t)return null;for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return(n=e.firestore.FieldValue).arrayUnion.apply(n,i)},I=function(e,t){var n;if("::arrayRemove"!==t)return null;for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return(n=e.firestore.FieldValue).arrayRemove.apply(n,i)},x=function(e,t,n){return"::increment"===t&&"number"===typeof n&&e.firestore.FieldValue.increment(n)},A=function(e,t){return"::serverTimestamp"===t&&e.firestore.FieldValue.serverTimestamp()};function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.collection,i=t.path,o=t.doc,a=t.id,u=t.data,l=h(t,c),d=e.firestore().doc("".concat(i||r,"/").concat(a||o)),p=function(e,t){var n=!1;return[Object.keys(t).reduce((function(t,r){var i=f({},t),o=i[r];if(r.includes(".")&&(n=!0),!o)return i;var s=S(o)||A(e,o[0])||T(e,o[0],o[1])||I(e,o[0],o[1])||x(e,o[0],o[1]);return Array.isArray(o)&&o.length>0&&(i[r]=s),i}),(0,s.default)(t)),n]}(e,u||l),m=g(p,2),y=m[0],v=m[1],b=void 0!==v&&v;return n?(b?n.update(d,y):n.set(d,y,{merge:!0}),f({id:d.id,path:d.parent.path},y)):b?d.update(y):d.set(y,{merge:!0})}var k=500;function C(){return(C=b(m().mark((function e(t,n){var r;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,a.default)(n,k).map((function(e){var n=t.firestore().batch(),r=e.map((function(e){return O(t,e,n)}));return n.commit().then((function(){return r}))})),e.abrupt("return",Promise.all(r).then(o.default));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return D=b(m().mark((function e(t,n){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.firestore().runTransaction(function(){var e=b(m().mark((function e(r){var o,s,a,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){return e?f(f({},e.data()),{},{id:e.ref.id,path:e.ref.parent.path}):null},s=(0,i.default)(n.reads,function(){var e=b(m().mark((function e(n){var i,s,a,c,l;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!==typeof n){e.next=2;break}return e.abrupt("return",n());case 2:if(!_(n)){e.next=8;break}return i=(0,u.firestoreRef)(t,n),e.next=6,r.get(i);case 6:return s=e.sent,e.abrupt("return",o(!1===s.exsits?null:s));case 8:return a=(0,u.firestoreRef)(t,n),e.next=11,a.get();case 11:if(c=e.sent,!E(c)&&0!==c.docs.length){e.next=14;break}return e.abrupt("return",[]);case 14:return e.next=16,Promise.all(c.docs.map((function(e){return r.get(e)})));case 16:return l=e.sent,e.abrupt("return",l.map(o));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,w(s);case 4:return a=e.sent,c=[],n.writes.forEach((function(e){var n="function"===typeof e?e(a):e;Array.isArray(n)?(n.map((function(e){return O(t,e,r)})),c.push(n)):c.push(O(t,n,r))})),e.abrupt("return",{reads:a,writes:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}},6590:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.attachListener=function(e,t,n,r){j(e,n);var i=L(n);e._.listeners[i]||(e._.listeners[i]=r);return t({type:p.actionTypes.SET_LISTENER,meta:n,payload:{name:i}}),e._.listeners},t.dataByIdSnapshot=B,t.detachListener=function(e,t,n){var r=L(n);e._.listeners[r]&&(e._.listeners[r](),delete e._.listeners[r]);var i=(e._.config||{}).preserveCacheAfterUnset;t({type:p.actionTypes.UNSET_LISTENER,meta:n,payload:{name:r,preserveCache:i}})},t.dispatchListenerResponse=function(e){var t,n=e.dispatch,r=e.docData,o=e.meta,s=e.firebase._.config||{},a=s.mergeOrdered,u=s.mergeOrderedDocUpdates,c=s.mergeOrderedCollectionUpdates,l="boolean"!==typeof(null===(t=r.metadata)||void 0===t?void 0:t.fromCache)||r.metadata.fromCache,h="function"===typeof r.docChanges?r.docChanges():r.docChanges;h&&h.length<r.size?h.forEach((function(e,t){var r=t===h.length-1;n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=_(_({},(0,i.default)(t)),{},{path:e.doc.ref.parent.path});t.subcollections&&!t.storeAs?n.subcollections[0]=_(_({},n.subcollections[0]),{},{doc:e.doc.id}):n.doc=e.doc.id;var r=_({id:e.doc.id,path:e.doc.ref.parent.path},e.doc.data());return{type:G[e.type]||p.actionTypes.DOCUMENT_MODIFIED,meta:n,payload:{data:r,ordered:{oldIndex:e.oldIndex,newIndex:e.newIndex}}}}(e,_({reprocess:r},o)))})):n({type:p.actionTypes.LISTENER_RESPONSE,meta:o,payload:{data:B(r),ordered:V(r),fromCache:l},merge:{docs:a&&u,collections:a&&c}})},t.firestoreRef=P,t.getBaseQueryName=function(e){if("string"===typeof e||e instanceof String)return e;var t=e.path,n=e.collection,r=e.collectionGroup,i=e.subcollections,o=b(e,g);if(!t&&!n&&!r)throw new Error("Collection or Collection Group is required to build query name");var s=t||n||r;if((t||n)&&i){var a=i.map((function(e){return L(e)}));s="".concat(s,"/").concat(a.join("/"))}var u=R(o);if(!(0,h.default)(u)){if(u.where&&!Array.isArray(u.where))throw new Error("where parameter must be an array.");s=s.concat("?",M(u))}return s},t.getPopulateActions=function(e){var t=e.firebase,n=e.docData,r=e.meta;return function(e,t,n,r){var i=[],a={},l=W("function"===typeof r?r(t,n):r);l.some((function(e){return(0,u.default)(n,e.child)}))?l.forEach((function(t){var r=(0,s.default)(n,t.child);return"string"===typeof r||r instanceof String?i.push(z(e,t,r).then((function(e){e&&(0,o.default)(a,"".concat(t.storeAs?t.storeAs:t.root,".").concat(r),e)}))):i.push(q(e,r,t,a))})):(0,c.default)(n,(function(t,n){var u=W("function"===typeof r?r(n,t):r);(0,c.default)(u,(function(n){var r=(0,s.default)(t,n.child);if(r)return"string"===typeof r||r instanceof String?i.push(z(e,n,r).then((function(e){return e&&(0,o.default)(a,"".concat(n.storeAs?n.storeAs:n.root,".").concat(r),e),a}))):Array.isArray(r)||(0,f.default)(r)?i.push(q(e,r,n,a)):void 0}))}));return Promise.all(i).then((function(){return a}))}(t,n.id,B(n),r.populates).then((function(e){return Object.keys(e).map((function(t){return{meta:{collection:t},payload:{data:e[t]},requesting:!1,requested:!0}}))})).catch((function(e){return console.error("Error with populate:",e,r),Promise.reject(e)}))},t.getQueryConfig=U,t.getQueryConfigs=function(e){if(Array.isArray(e))return e.map(U);if("string"===typeof e||e instanceof String)return F(e);if((0,f.default)(e))return[U(e)];throw new Error("Querie(s) must be an Array or a string.")},t.getQueryName=L,t.getSnapshotByObject=function(e){return A.get(e)},t.listenerExists=function(e,t){j(e,t);var n=L(t);return!!e._.listeners[n]},t.orderedFromSnap=V,t.queryStrToObj=F,t.snapshotCache=void 0;var i=y(n(5117)),o=y(n(5849)),s=y(n(7946)),a=y(n(5876)),u=y(n(6094)),c=y(n(6380)),l=y(n(860)),h=y(n(6791)),d=y(n(9853)),f=y(n(4567)),p=n(9049),m=["path","collection","collectionGroup","id","doc","subcollections","storeAs"],g=["path","collection","collectionGroup","subcollections"];function y(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(e){if(Array.isArray(e))return e}(e)||I(e)||T(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return function(e){if(Array.isArray(e))return x(e)}(e)||I(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"===typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function I(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=new WeakMap;function O(e,t){if(!Array.isArray(t))throw new Error("where parameter must be an array.");return Array.isArray(t[0])?t.reduce((function(e,t){return O(e,t)}),e):e.where.apply(e,S(t))}function k(e,t){if(!Array.isArray(t)&&!("string"===typeof t||t instanceof String))throw new Error("orderBy parameter must be an array or string.");return"string"===typeof t||t instanceof String?e.orderBy(t):"string"===typeof t[0]||t[0]instanceof String?e.orderBy.apply(e,S(t)):t.reduce((function(e,t){return k(e,t)}),e)}function C(e){return[].concat(e)}function D(e,t){return Array.isArray(t)&&t.forEach((function(t){if(t.collection){if("function"!==typeof e.collection)throw new Error('Collection can only be run on a document. Check that query config for subcollection: "'.concat(t.collection,'" contains a doc parameter.'));e=e.collection(t.collection)}var n,r,i,o;(t.id&&(e=e.doc(t.id)),t.doc&&(e=e.doc(t.doc)),t.where&&(e=O(e,t.where)),t.orderBy&&(e=k(e,t.orderBy)),t.limit&&(e=e.limit(t.limit)),t.startAt)&&(e=(n=e).startAt.apply(n,S(C(t.startAt))));t.startAfter&&(e=(r=e).startAfter.apply(r,S(C(t.startAfter))));t.endAt&&(e=(i=e).endAt.apply(i,S(C(t.endAt))));t.endBefore&&(e=(o=e).endBefore.apply(o,S(C(t.endBefore))));e=D(e,t.subcollections)})),e}function P(e,t){var n,r,i,o;if(!e.firestore)throw new Error("Firestore must be required and initalized.");var s=t.path,a=t.collection,u=t.collectionGroup,c=t.id,l=t.doc,h=t.subcollections,d=t.where,f=t.orderBy,p=t.limit,m=t.startAt,g=t.startAfter,y=t.endAt,v=t.endBefore,b=e.firestore();if(a&&u)throw new Error("Reference cannot contain both Collection and CollectionGroup.");var w=(e&&e._&&e._.config||{}).globalDataConvertor;return(s||a)&&(b=b.collection(s||a)),u&&(b=b.collectionGroup(u)),(c||l)&&(b=b.doc(c||l)),b=D(b,h),d&&(b=O(b,d)),f&&(b=k(b,f)),p&&(b=b.limit(p)),m&&(b=(n=b).startAt.apply(n,S(C(m)))),g&&(b=(r=b).startAfter.apply(r,S(C(g)))),y&&(b=(i=b).endAt.apply(i,S(C(y)))),v&&(b=(o=b).endBefore.apply(o,S(C(v)))),w&&(b=b.withConverter(w)),b}function N(e,t){return"string"===typeof t||t instanceof String||(0,d.default)(t)?"".concat(e,"=").concat(t):"string"===typeof t[0]||t[0]instanceof String?"".concat(e,"=").concat(t.join(":")):t&&"function"===typeof t.toString?"".concat(e,"=").concat(t.toString()):t.map((function(t){return N(e,t)}))}function R(e){return["where","orderBy","limit","startAfter","startAt","endAt","endBefore"].reduce((function(t,n){return e[n]?_(_({},t),{},E({},n,e[n])):t}),{})}function M(e){return Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return N(t,e[t])})).join("&")}function L(e){if("string"===typeof e||e instanceof String)return e;var t=e.path,n=e.collection,r=e.collectionGroup,i=e.id,o=e.doc,s=e.subcollections,a=e.storeAs,u=b(e,m);if(!t&&!n&&!r)throw new Error("Collection or Collection Group is required to build query name");if(a)return a;var c=t||n||r;if((i||o)&&(c=c.concat("/".concat(i||o))),(t||n)&&s){console.error('Queries with subcollections must use "storeAs" to prevent invalid store updates. This closley matches the upcoming major release (v1), which stores subcollections at the top level by default.');var l=s.map((function(e){return L(e)}));c="".concat(c,"/").concat(l.join("/"))}var d=R(u);if(!(0,h.default)(d)){if(d.where&&!Array.isArray(d.where))throw new Error("where parameter must be an array.");c=c.concat("?",M(d))}return c}function j(e,t){if(!t)throw new Error("Meta data is required to attach listener.");if(!e||!e._||!e._.listeners)throw new Error("Internal Firebase object required to attach listener. Confirm that reduxFirestore enhancer was added when you were creating your store")}function F(e,t){var n=v(t||(0,l.default)(e,["/"]).split("/")),r=n[0],i=n[1],o=n.slice(2),s={};return r&&(s.collection=r),i&&(s.doc=i),o.length&&(s.subcollections=[F("",o)]),s}function U(e){if("string"===typeof e||e instanceof String)return F(e);if((0,f.default)(e)){if(!e.collection&&!e.collectionGroup&&!e.doc)throw new Error("Collection, Collection Group and/or Doc are required parameters within query definition object.");return e}throw new Error("Invalid Path Definition: Only Strings and Objects are accepted.")}function V(e){var t=[];if(e.data&&e.exists){var n=e.id,r=e.ref.parent.path,i=(0,f.default)(e.data())?_(_({},e.data()||e.data),{},{id:n,path:r}):{id:n,path:r,data:e.data()};A.set(i,e),t.push(i)}else e.forEach&&e.forEach((function(e){var n=e.id,r=e.ref.parent.path,i=(0,f.default)(e.data())?_(_({},e.data()||e.data),{},{id:n,path:r}):{id:n,path:r,data:e.data()};A.set(i,e),t.push(i)}));return A.set(t,e),t}function B(e){var t={};if(e.data){var n=e.exists?e.data():null;n?(A.set(n,e),t[e.id]=_(_({},n),{},{id:e.id,path:e.ref.parent.path})):t[e.id]=null}else e.forEach&&e.forEach((function(e){var n=e.data()||e;A.set(n,e),t[e.id]=_(_({},n),{},{id:e.id,path:e.ref.parent.path})}));return t&&Object.keys(t).length?(A.set(t,e),t):null}function z(e,t,n){return P(e,{collection:t.root,doc:n}).get().then((function(e){return _({id:n},e.data())}))}function q(e,t,n,r){return r[n.root]||(0,o.default)(r,n.root,{}),Promise.all((0,a.default)(t,(function(t,i){var s=!0===t||n.populateByKey?i:t;return z(e,n,s).then((function(e){return e?(0,o.default)(r,"".concat(n.root,".").concat(s),e):r}))})))}function W(e){return Array.isArray(e)?e.map((function(e){return(0,f.default)(e)?e:function(e){if("string"===typeof e||e instanceof String)return e;var t=e.split(":");return{child:t[0],root:t[1]}}(e)})):e}t.snapshotCache=A;var G={added:p.actionTypes.DOCUMENT_ADDED,removed:p.actionTypes.DOCUMENT_REMOVED,modified:p.actionTypes.DOCUMENT_MODIFIED}},8249:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.combineReducers=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return Object.keys(e).reduce((function(r,i){return r[i]=e[i](t[i],n),r}),{})}},t.createReducer=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(r.type)?t[r.type](n,r):n}},t.getDotStrPath=function(e){return m(e).join(".")},t.getSlashStrPath=function(e){return(0,o.default)((0,s.default)(e,/[.]/g,"/"),"/")},t.pathFromMeta=function e(t){if(!t)throw new Error("Action meta is required to build path for reducers.");var n=t.collection,r=t.collectionGroup,o=t.doc,s=t.subcollections,a=t.storeAs;if(a)return o?[a,o]:[a];if(t.path)return t.path.split("/");if(!n&&!r)throw new Error("Collection or Collection Group is required to construct reducer path.");var u=[n||r];o&&(u=[].concat(f(u),[o]));if(!s)return u;var c=s.map(e);return[].concat(f(u),f((0,i.default)(c)))},t.pathToArr=m,t.preserveValuesFromState=function(e,t,n){if((0,u.default)(t))return n?h(h({},e),n):e;if("function"===typeof t)return t(e,n);if(Array.isArray(t))return(0,a.default)(e,t);throw new Error("Invalid preserve parameter. It must be an Object or an Array.")},t.updateItemInArray=function(e,t,n){var r=!1,i=Array.isArray(e)?e.map((function(e){return e&&e.id===t?(r=!0,n(e)):e})):[];r||i.push(n({id:t}));return i};var i=c(n(2964)),o=c(n(3502)),s=c(n(5162)),a=c(n(5357)),u=c(n(5410));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){return e?e.split(/\//).filter((function(e){return!!e})):[]}},1761:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,u=e[a],c=a+1,l=e[c];if(0>o(u,n))c<i&&0>o(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[a]=n,r=a);else{if(!(c<i&&0>o(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var c=[],l=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,N(E);else{var t=r(l);null!==t&&R(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(x),x=-1),p=!0;var o=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!k());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var u=!0;else{var h=r(l);null!==h&&R(_,h.startTime-n),u=!1}return u}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,I=null,x=-1,A=5,O=-1;function k(){return!(t.unstable_now()-O<A)}function C(){if(null!==I){var e=t.unstable_now();O=e;var n=!0;try{n=I(!0,e)}finally{n?S():(T=!1,I=null)}}else T=!1}if("function"===typeof b)S=function(){b(C)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=C,S=function(){P.postMessage(null)}}else S=function(){y(C,0)};function N(e){I=e,T||(T=!0,S())}function R(e,n){x=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,N(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(l,e),null===r(c)&&e===r(l)&&(g?(v(x),x=-1):g=!0,R(_,o-s))):(e.sortIndex=a,n(c,e),m||p||(m=!0,N(E))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5340:(e,t,n)=>{"use strict";e.exports=n(1761)},7022:e=>{"use strict";var t="Invariant failed";e.exports=function(e,n){if(!e)throw new Error(t)}},4783:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r=function(e,t){}},8168:(e,t,n)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},5540:(e,t,n)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}n.d(t,{A:()=>i})},8587:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{A:()=>r})},4272:(e,t,n)=>{"use strict";n.r(t),n.d(t,{deleteDB:()=>y,openDB:()=>g,unwrap:()=>m,wrap:()=>p});const r=(e,t)=>t.some((t=>e instanceof t));let i,o;const s=new WeakMap,a=new WeakMap,u=new WeakMap,c=new WeakMap,l=new WeakMap;let h={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(m(this),n),p(s.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(e.apply(m(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(m(this),t,...r);return u.set(o,t.sort?t.sort():[t]),p(o)}}function f(e){return"function"===typeof e?d(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));a.set(e,t)}(e),r(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,h):e)}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(p(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&s.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(c.has(e))return c.get(e);const t=f(e);return t!==e&&(c.set(e,t),l.set(t,e)),t}const m=e=>l.get(e);function g(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=p(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(p(s.result),e.oldVersion,e.newVersion,p(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}function y(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",(e=>t(e.oldVersion,e))),p(n).then((()=>{}))}const v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function _(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),u=1;u<s;u++)a[u-1]=arguments[u];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return w.set(t,o),o}h=(e=>({...e,get:(t,n,r)=>_(t,n)||e.get(t,n,r),has:(t,n)=>!!_(t,n)||e.has(t,n)}))(h)},7033:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=!0,i="Invariant failed";function o(e,t){if(!e){if(r)throw new Error(i);var n="function"===typeof t?t():t,o=n?"".concat(i,": ").concat(n):i;throw new Error(o)}}},7827:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__addDisposableResource:()=>R,__assign:()=>o,__asyncDelegator:()=>I,__asyncGenerator:()=>T,__asyncValues:()=>x,__await:()=>S,__awaiter:()=>p,__classPrivateFieldGet:()=>D,__classPrivateFieldIn:()=>N,__classPrivateFieldSet:()=>P,__createBinding:()=>g,__decorate:()=>a,__disposeResources:()=>L,__esDecorate:()=>c,__exportStar:()=>y,__extends:()=>i,__generator:()=>m,__importDefault:()=>C,__importStar:()=>k,__makeTemplateObject:()=>A,__metadata:()=>f,__param:()=>u,__propKey:()=>h,__read:()=>b,__rest:()=>s,__runInitializers:()=>l,__setFunctionName:()=>d,__spread:()=>w,__spreadArray:()=>E,__spreadArrays:()=>_,__values:()=>v,default:()=>j});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t,n,r,i,o){function s(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var a,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",l=!t&&e?r.static?e:e.prototype:null,h=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d=!1,f=n.length-1;f>=0;f--){var p={};for(var m in r)p[m]="access"===m?{}:r[m];for(var m in r.access)p.access[m]=r.access[m];p.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var g=(0,n[f])("accessor"===u?{get:h.get,set:h.set}:h[c],p);if("accessor"===u){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(a=s(g.get))&&(h.get=a),(a=s(g.set))&&(h.set=a),(a=s(g.init))&&i.unshift(a)}else(a=s(g))&&("field"===u?i.unshift(a):h[c]=a)}l&&Object.defineProperty(l,r.name,h),d=!0}function l(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function h(e){return"symbol"===typeof e?e:"".concat(e)}function d(e,t,n){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function f(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))}function m(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}var g=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function y(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function v(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function w(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function _(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function E(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function T(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof S?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(r){l(o[0][3],r)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function I(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:S(e[r](t)),done:!1}:i?i(t):t}:i}}function x(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=v(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function A(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function k(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&g(t,e,n);return O(t,e),t}function C(e){return e&&e.__esModule?e:{default:e}}function D(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function P(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function N(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function R(e,t,n){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if("function"!==typeof r)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var M="function"===typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function L(e){function t(t){e.error=e.hasError?new M(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}return function n(){for(;e.stack.length;){var r=e.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,(function(e){return t(e),n()}))}catch(o){t(o)}}if(e.hasError)throw e.error}()}const j={__extends:i,__assign:o,__rest:s,__decorate:a,__param:u,__metadata:f,__awaiter:p,__generator:m,__createBinding:g,__exportStar:y,__values:v,__read:b,__spread:w,__spreadArrays:_,__spreadArray:E,__await:S,__asyncGenerator:T,__asyncDelegator:I,__asyncValues:x,__makeTemplateObject:A,__importStar:k,__importDefault:C,__classPrivateFieldGet:D,__classPrivateFieldSet:P,__classPrivateFieldIn:N,__addDisposableResource:R,__disposeResources:L}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>at,SDK_VERSION:()=>Qt,_DEFAULT_ENTRY_NAME:()=>Lt,_addComponent:()=>Vt,_addOrOverwriteComponent:()=>Bt,_apps:()=>Ft,_clearComponents:()=>Gt,_components:()=>Ut,_getProvider:()=>qt,_registerComponent:()=>zt,_removeServiceInstance:()=>Wt,deleteApp:()=>Xt,getApp:()=>$t,getApps:()=>Jt,initializeApp:()=>Yt,onLog:()=>en,registerVersion:()=>Zt,setLogLevel:()=>tn});var t=n(9950),r=n(6673),i=n(5540),o=n(125),s=n(8168),a=n(8587),u=n(7033),c=function(e){function n(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=(0,o.createBrowserHistory)(t.props),t}return(0,i.A)(n,e),n.prototype.render=function(){return t.createElement(r.Router,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var l=function(e,t){return"function"===typeof e?e(t):e},h=function(e,t){return"string"===typeof e?(0,o.createLocation)(e,null,null,t):e},d=function(e){return e},f=t.forwardRef;"undefined"===typeof f&&(f=d);var p=f((function(e,n){var r=e.innerRef,i=e.navigate,o=e.onClick,u=(0,a.A)(e,["innerRef","navigate","onClick"]),c=u.target,l=(0,s.A)({},u,{onClick:function(e){try{o&&o(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||c&&"_self"!==c||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),i())}});return l.ref=d!==f&&n||r,t.createElement("a",l)}));var m=f((function(e,n){var i=e.component,c=void 0===i?p:i,m=e.replace,g=e.to,y=e.innerRef,v=(0,a.A)(e,["component","replace","to","innerRef"]);return t.createElement(r.__RouterContext.Consumer,null,(function(e){e||(0,u.A)(!1);var r=e.history,i=h(l(g,e.location),e.location),a=i?r.createHref(i):"",p=(0,s.A)({},v,{href:a,navigate:function(){var t=l(g,e.location),n=(0,o.createPath)(e.location)===(0,o.createPath)(h(t));(m||n?r.replace:r.push)(t)}});return d!==f?p.ref=n||y:p.innerRef=y,t.createElement(c,p)}))})),g=function(e){return e},y=t.forwardRef;"undefined"===typeof y&&(y=g);var v=y((function(e,n){var i=e["aria-current"],o=void 0===i?"page":i,c=e.activeClassName,d=void 0===c?"active":c,f=e.activeStyle,p=e.className,v=e.exact,b=e.isActive,w=e.location,_=e.sensitive,E=e.strict,S=e.style,T=e.to,I=e.innerRef,x=(0,a.A)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(r.__RouterContext.Consumer,null,(function(e){e||(0,u.A)(!1);var i=w||e.location,a=h(l(T,i),i),c=a.pathname,A=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),O=A?(0,r.matchPath)(i.pathname,{path:A,exact:v,sensitive:_,strict:E}):null,k=!!(b?b(O,i):O),C="function"===typeof p?p(k):p,D="function"===typeof S?S(k):S;k&&(C=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(C,d),D=(0,s.A)({},D,f));var P=(0,s.A)({"aria-current":k&&o||null,className:C,style:D,to:a},x);return g!==y?P.ref=n||I:P.innerRef=I,t.createElement(m,P)}))})),b=n(1942),w=n.n(b),_=w().shape({trySubscribe:w().func.isRequired,tryUnsubscribe:w().func.isRequired,notifyNestedSubs:w().func.isRequired,isSubscribed:w().func.isRequired}),E=w().shape({subscribe:w().func.isRequired,dispatch:w().func.isRequired,getState:w().func.isRequired});t.forwardRef;const S=function(e){var n;void 0===e&&(e="store");var r=e+"Subscription",o=function(n){(0,i.A)(s,n);var o=s.prototype;function s(t,r){var i;return(i=n.call(this,t,r)||this)[e]=t.store,i}return o.getChildContext=function(){var t;return(t={})[e]=this[e],t[r]=null,t},o.render=function(){return t.Children.only(this.props.children)},s}(t.Component);return o.propTypes={store:E.isRequired,children:w().element.isRequired},o.childContextTypes=((n={})[e]=E.isRequired,n[r]=_,n),o}();function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var I=n(3876),x=n.n(I),A=n(949),O=n.n(A),k=n(863),C=null,D={notify:function(){}};var P=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=D}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=function(){var e=[],t=[];return{clear:function(){t=C,e=C},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==C&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}}())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=D)},e}(),N="undefined"!==typeof t.forwardRef,R=0,M={};function L(){}function j(e,n){var r,o;void 0===n&&(n={});var u=n,c=u.getDisplayName,l=void 0===c?function(e){return"ConnectAdvanced("+e+")"}:c,h=u.methodName,d=void 0===h?"connectAdvanced":h,f=u.renderCountProp,p=void 0===f?void 0:f,m=u.shouldHandleStateChanges,g=void 0===m||m,y=u.storeKey,v=void 0===y?"store":y,b=u.withRef,w=void 0!==b&&b,S=(0,a.A)(u,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),I=v+"Subscription",A=R++,C=((r={})[v]=E,r[I]=_,r),D=((o={})[I]=_,o);return function(n){O()((0,k.isValidElementType)(n),"You must pass a component to the function returned by "+d+". Instead received "+JSON.stringify(n));var r=n.displayName||n.name||"Component",o=l(r),a=(0,s.A)({},S,{getDisplayName:l,methodName:d,renderCountProp:p,shouldHandleStateChanges:g,storeKey:v,withRef:w,displayName:o,wrappedComponentName:r,WrappedComponent:n}),u=function(r){function u(e,t){var n;return(n=r.call(this,e,t)||this).version=A,n.state={},n.renderCount=0,n.store=e[v]||t[v],n.propsMode=Boolean(e[v]),n.setWrappedInstance=n.setWrappedInstance.bind(T(T(n))),O()(n.store,'Could not find "'+v+'" in either the context or props of "'+o+'". Either wrap the root component in a <Provider>, or explicitly pass "'+v+'" as a prop to "'+o+'".'),n.initSelector(),n.initSubscription(),n}(0,i.A)(u,r);var c=u.prototype;return c.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[I]=t||this.context[I],e},c.componentDidMount=function(){g&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},c.componentWillReceiveProps=function(e){this.selector.run(e)},c.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},c.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=L,this.store=null,this.selector.run=L,this.selector.shouldComponentUpdate=!1},c.getWrappedInstance=function(){return O()(w,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+d+"() call."),this.wrappedInstance},c.setWrappedInstance=function(e){this.wrappedInstance=e},c.initSelector=function(){var t=e(this.store.dispatch,a);this.selector=function(e,t){var n={run:function(r){try{var i=e(t.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(o){n.shouldComponentUpdate=!0,n.error=o}}};return n}(t,this.store),this.selector.run(this.props)},c.initSubscription=function(){if(g){var e=(this.propsMode?this.props:this.context)[I];this.subscription=new P(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},c.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(M)):this.notifyNestedSubs()},c.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},c.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},c.addExtraProps=function(e){if(!w&&!p&&(!this.propsMode||!this.subscription))return e;var t=(0,s.A)({},e);return w&&(t.ref=this.setWrappedInstance),p&&(t[p]=this.renderCount++),this.propsMode&&this.subscription&&(t[I]=this.subscription),t},c.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return(0,t.createElement)(n,this.addExtraProps(e.props))},u}(t.Component);return N&&(u.prototype.UNSAFE_componentWillReceiveProps=u.prototype.componentWillReceiveProps,delete u.prototype.componentWillReceiveProps),u.WrappedComponent=n,u.displayName=o,u.childContextTypes=D,u.contextTypes=C,u.propTypes=C,x()(u,n)}}var F=Object.prototype.hasOwnProperty;function U(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function V(e,t){if(U(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!F.call(t,n[i])||!U(e[n[i]],t[n[i]]))return!1;return!0}function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function z(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:String(t)}function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){var r,i,o;r=e,i=t,o=n[t],(i=z(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var K="function"===typeof Symbol&&Symbol.observable||"@@observable",H=function(){return Math.random().toString(36).substring(7).split("").join(".")},Q={INIT:"@@redux/INIT"+H(),REPLACE:"@@redux/REPLACE"+H(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+H()}};function Y(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function $(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(G(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(G(1));return n($)(e,t)}if("function"!==typeof e)throw new Error(G(2));var i=e,o=t,s=[],a=s,u=!1;function c(){a===s&&(a=s.slice())}function l(){if(u)throw new Error(G(3));return o}function h(e){if("function"!==typeof e)throw new Error(G(4));if(u)throw new Error(G(5));var t=!0;return c(),a.push(e),function(){if(t){if(u)throw new Error(G(6));t=!1,c();var n=a.indexOf(e);a.splice(n,1),s=null}}}function d(e){if(!Y(e))throw new Error(G(7));if("undefined"===typeof e.type)throw new Error(G(8));if(u)throw new Error(G(9));try{u=!0,o=i(o,e)}finally{u=!1}for(var t=s=a,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:Q.INIT}),(r={dispatch:d,subscribe:h,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(G(10));i=e,d({type:Q.REPLACE})}})[K]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(G(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[K]=function(){return this},e},r}function J(e,t){return function(){return t(e.apply(this,arguments))}}function X(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Z(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function ee(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function te(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=ee(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=ee(i),i=r(t,n)),i},r}}const ne=[function(e){return"function"===typeof e?te(e):void 0},function(e){return e?void 0:Z((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?Z((function(t){return function(e,t){if("function"===typeof e)return J(e,t);if("object"!==typeof e||null===e)throw new Error(G(16));var n={};for(var r in e){var i=e[r];"function"===typeof i&&(n[r]=J(i,t))}return n}(e,t)})):void 0}];const re=[function(e){return"function"===typeof e?te(e):void 0},function(e){return e?void 0:Z((function(){return{}}))}];function ie(e,t,n){return(0,s.A)({},n,e,t)}const oe=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,s=!1;return function(t,n,a){var u=e(t,n,a);return s?i&&o(u,r)||(r=u):(s=!0,r=u),r}}}(e):void 0},function(e){return e?void 0:function(){return ie}}];function se(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function ae(e,t,n,r,i){var o,s,a,u,c,l=i.areStatesEqual,h=i.areOwnPropsEqual,d=i.areStatePropsEqual,f=!1;function p(i,f){var p=!h(f,s),m=!l(i,o);return o=i,s=f,p&&m?(a=e(o,s),t.dependsOnOwnProps&&(u=t(r,s)),c=n(a,u,s)):p?(e.dependsOnOwnProps&&(a=e(o,s)),t.dependsOnOwnProps&&(u=t(r,s)),c=n(a,u,s)):m?function(){var t=e(o,s),r=!d(t,a);return a=t,r&&(c=n(a,u,s)),c}():c}return function(i,l){return f?p(i,l):(a=e(o=i,s=l),u=t(r,s),c=n(a,u,s),f=!0,c)}}function ue(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=(0,a.A)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),s=n(e,o),u=r(e,o),c=i(e,o);return(o.pure?ae:se)(s,u,c,e,o)}function ce(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function le(e,t){return e===t}const he=function(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?j:n,i=t.mapStateToPropsFactories,o=void 0===i?re:i,u=t.mapDispatchToPropsFactories,c=void 0===u?ne:u,l=t.mergePropsFactories,h=void 0===l?oe:l,d=t.selectorFactory,f=void 0===d?ue:d;return function(e,t,n,i){void 0===i&&(i={});var u=i,l=u.pure,d=void 0===l||l,p=u.areStatesEqual,m=void 0===p?le:p,g=u.areOwnPropsEqual,y=void 0===g?V:g,v=u.areStatePropsEqual,b=void 0===v?V:v,w=u.areMergedPropsEqual,_=void 0===w?V:w,E=(0,a.A)(u,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),S=ce(e,o,"mapStateToProps"),T=ce(t,c,"mapDispatchToProps"),I=ce(n,h,"mergeProps");return r(f,(0,s.A)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:S,initMapDispatchToProps:T,initMergeProps:I,pure:d,areStatesEqual:m,areOwnPropsEqual:y,areStatePropsEqual:b,areMergedPropsEqual:_},E))}}();var de=n(4414);const fe=he(null,(e=>({signOut:()=>e(((e,t,n)=>{let{getFirebase:r}=n;r().auth().signOut().then((()=>{e({type:"SIGNOUT_SUCCESS"})}))}))})))((e=>(0,de.jsxs)("ul",{className:"right",children:[(0,de.jsx)("li",{children:(0,de.jsx)(v,{to:"/create",children:"New Project"})}),(0,de.jsx)("li",{children:(0,de.jsx)("a",{onClick:e.signOut,children:"Log Out"})}),(0,de.jsx)("li",{children:(0,de.jsx)(v,{to:"/",className:"btn btn-floating pink lighten-1",children:e.profile.initials})})]}))),pe=()=>(0,de.jsxs)("ul",{className:"right",children:[(0,de.jsx)("li",{children:(0,de.jsx)(v,{to:"/signup",children:"Signup"})}),(0,de.jsx)("li",{children:(0,de.jsx)(v,{to:"/signin",children:"Login"})})]}),me=he((e=>({auth:e.firebase.auth,profile:e.firebase.profile})))((e=>{const{auth:t,profile:n}=e,r=t.uid?(0,de.jsx)(fe,{profile:n}):(0,de.jsx)(pe,{});return(0,de.jsx)("nav",{className:"nav-wrapper grey darken-3",children:(0,de.jsxs)("div",{className:"container",children:[(0,de.jsx)(m,{to:"/",className:"brand-logo",children:"MarioPlan"}),r]})})}));var ge=n(9051),ye=n.n(ge);const ve=e=>{let{project:t}=e;return(0,de.jsx)("div",{className:"card z-depth-0 project-summary",children:(0,de.jsxs)("div",{className:"card-content grey-text text-darken-3",children:[(0,de.jsx)("span",{className:"card-title ",children:t.title}),(0,de.jsxs)("p",{children:["Posted by ",t.authorFirstName," ",t.authorLastName]}),(0,de.jsx)("p",{className:"grey-text",children:ye()(t.createdAt.toDate().toString()).calendar()})]})})},be=e=>{let{projects:t}=e;return(0,de.jsx)("div",{className:"project-list section",children:t&&t.map((e=>(0,de.jsx)(m,{to:"/project/"+e.id,children:(0,de.jsx)(ve,{project:e})},e.id)))})},we=e=>{const{notifications:t}=e;return(0,de.jsx)("div",{className:"section",children:(0,de.jsx)("div",{className:"card z-depth-0",children:(0,de.jsxs)("div",{className:"card-content",children:[(0,de.jsx)("span",{className:"card-title",children:"Notifications"}),(0,de.jsx)("ul",{className:"online-users",children:t&&t.map((e=>(0,de.jsxs)("li",{children:[(0,de.jsxs)("span",{className:"pink-text",children:[e.user," "]}),(0,de.jsx)("span",{children:e.content}),(0,de.jsx)("div",{className:"grey-text note-date",children:ye()(e.time.toDate()).fromNow()})]},e.id)))})]})})})};var _e=n(1522),Ee=n(7062);class Se extends t.Component{render(){const{projects:e,auth:t,notifications:n}=this.props;return t.uid?(0,de.jsx)("div",{className:"dashboard container",children:(0,de.jsxs)("div",{className:"row",children:[(0,de.jsx)("div",{className:"col s12 m6",children:(0,de.jsx)(be,{projects:e})}),(0,de.jsx)("div",{className:"col s12 m5 offset-m1",children:(0,de.jsx)(we,{notifications:n})})]})}):(0,de.jsx)(Ee.rd,{to:"/signin"})}}const Te=X((0,_e.firestoreConnect)((()=>[{collection:"projects",orderBy:["createdAt","desc"]},{collection:"notifications",orderBy:["time","desc"]}])),he((e=>({projects:e.firestore.ordered.projects,auth:e.firebase.auth,notifications:e.firestore.ordered.notifications}))))(Se);const Ie=X(he(((e,t)=>{const n=t.match.params.id,r=e.firestore.data.projects;return{project:r?r[n]:null,auth:e.firebase.auth}})),(0,_e.firestoreConnect)([{collection:"projects"}]))((function(e){const{project:t,auth:n}=e;return n.uid?t?(0,de.jsx)("div",{className:"container section project-details",children:(0,de.jsxs)("div",{className:"card z-depth-0",children:[(0,de.jsxs)("div",{className:"card-content",children:[(0,de.jsx)("span",{className:"card-title",children:t.title}),(0,de.jsx)("p",{children:t.content})]}),(0,de.jsxs)("div",{className:"card-action grey lighten-4 grey-text",children:[(0,de.jsxs)("div",{children:["Posted by ",t.authorFirstName," ",t.authorLastName," "]}),(0,de.jsx)("div",{children:ye()(t.createdAt.toDate().toString()).calendar()})]})]})}):(0,de.jsx)("div",{className:"container center",children:(0,de.jsx)("p",{children:"Loading project..."})}):(0,de.jsx)(Ee.rd,{to:"/signin"})}));class xe extends t.Component{constructor(){super(...arguments),this.state={email:"",password:""},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.handleSubmit=e=>{e.preventDefault(),this.props.signIn(this.state)}}render(){const{authError:e,auth:t}=this.props;return t.uid?(0,de.jsx)(Ee.rd,{to:"/"}):(0,de.jsx)("div",{className:"container",children:(0,de.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[(0,de.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign In"}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("label",{htmlFor:"email",children:"Email"}),(0,de.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("label",{htmlFor:"password",children:"Password"}),(0,de.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Login"}),(0,de.jsx)("div",{className:"red-text center",children:e?(0,de.jsx)("p",{children:e}):null})]})]})})}}const Ae=he((e=>({authError:e.auth.authError,auth:e.firebase.auth})),(e=>({signIn:t=>{return e((n=t,(e,t,r)=>{let{getFirebase:i}=r;i().auth().signInWithEmailAndPassword(n.email,n.password).then((()=>{e({type:"LOGIN_SUCCESS"})})).catch((t=>{e({type:"LOGIN_ERROR",err:t})}))}));var n}})))(xe);class Oe extends t.Component{constructor(){super(...arguments),this.state={email:"",password:"",firstName:"",lastName:""},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.handleSubmit=e=>{e.preventDefault(),this.props.signUp(this.state)}}render(){const{auth:e,authError:t}=this.props;return e.uid?(0,de.jsx)(Ee.rd,{to:"/"}):(0,de.jsx)("div",{className:"container",children:(0,de.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[(0,de.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign Up"}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("label",{htmlFor:"email",children:"Email"}),(0,de.jsx)("input",{type:"email",id:"email",onChange:this.handleChange})]}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("label",{htmlFor:"password",children:"Password"}),(0,de.jsx)("input",{type:"password",id:"password",onChange:this.handleChange})]}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),(0,de.jsx)("input",{type:"text",id:"lastName",onChange:this.handleChange})]}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("label",{htmlFor:"firstName",children:"First Name"}),(0,de.jsx)("input",{type:"text",id:"firstName",onChange:this.handleChange})]}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"SIGNUP"}),(0,de.jsx)("div",{className:"red-text center",children:t?(0,de.jsx)("p",{children:t}):null})]})]})})}}const ke=he((e=>({auth:e.firebase.auth,authError:e.auth.authError})),(e=>({signUp:t=>e((e=>(t,n,r)=>{let{getFirebase:i,getFirestore:o}=r;const s=i(),a=o();s.auth().createUserWithEmailAndPassword(e.email,e.password).then((t=>a.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]}))).then((()=>{t({type:"SIGNUP_SUCCESS"})})).catch((e=>{t({type:"SIGNUP_ERROR",err:e})}))})(t))})))(Oe);class Ce extends t.Component{constructor(){super(...arguments),this.state={title:"",content:""},this.handleChange=e=>{this.setState({[e.target.id]:e.target.value})},this.handleSubmit=e=>{e.preventDefault(),this.props.createProject(this.state),this.props.history.push("/")}}render(){const{auth:e}=this.props;return e.uid?(0,de.jsx)("div",{className:"container",children:(0,de.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[(0,de.jsx)("h5",{className:"grey-text text-darken-3",children:"Create"}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("label",{htmlFor:"title",children:"Title"}),(0,de.jsx)("input",{type:"text",id:"title",onChange:this.handleChange})]}),(0,de.jsxs)("div",{className:"input-field",children:[(0,de.jsx)("label",{htmlFor:"content",children:"Project Content"}),(0,de.jsx)("textarea",{id:"content",className:"materialize-textarea",onChange:this.handleChange})]}),(0,de.jsx)("div",{className:"input-field",children:(0,de.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Create"})})]})}):(0,de.jsx)(Ee.rd,{to:"/signin"})}}const De=he((e=>({auth:e.firebase.auth})),(e=>({createProject:t=>e((e=>(t,n,r)=>{let{getFirestore:i}=r;const o=i(),s=n().firebase.profile,a=n().firebase.auth.uid;o.collection("projects").add({...e,authorFirstName:s.firstName,authorLastName:s.lastName,authorId:a,createdAt:new Date}).then((()=>{t({type:"CREATE_PROJECT_SUCCESS",project:e})})).catch((n=>{t({type:"CREATE_PROJECT_ERROR",project:e})}))})(t))})))(Ce);class Pe extends t.Component{render(){return(0,de.jsx)(c,{children:(0,de.jsxs)("div",{className:"App",children:[(0,de.jsx)(me,{}),(0,de.jsxs)(r.Switch,{children:[(0,de.jsx)(r.Route,{exact:!0,path:"/",component:Te}),(0,de.jsx)(r.Route,{path:"/project/:id",component:Ie}),(0,de.jsx)(r.Route,{path:"/signin",component:Ae}),(0,de.jsx)(r.Route,{path:"/signup",component:ke}),(0,de.jsx)(r.Route,{path:"/create",component:De})]})]})})}}const Ne=Pe,Re={authError:null},Me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return console.log("login failed"),{...e,authError:t.err.message};case"LOGIN_SUCCESS":return console.log("login success"),{...e,authError:null};case"SIGNOUT_SUCCESS":return console.log("signout success"),e;case"SIGNUP_SUCCESS":return console.log("signup success"),{...e,authError:null};case"SIGNUP_ERROR":return console.log("signup error"),{...e,authError:t.err.message};default:return e}},Le={projects:[{id:"1",title:"help me find peach",content:"blah blah blah"},{id:"2",title:"collect all the stars",content:"blah blah blah"},{id:"3",title:"egg hunt with yoshi",content:"blah blah blah"}]},je=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_PROJECT_SUCCESS":return console.log("create project success",t.project),e;case"CREATE_PROJECT_ERROR":return console.log("create project error",t.err),e;default:return e}};var Fe=n(7188);const Ue=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var o,s=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:Q.INIT}))throw new Error(G(12));if("undefined"===typeof n(void 0,{type:Q.PROBE_UNKNOWN_ACTION()}))throw new Error(G(13))}))}(n)}catch(a){o=a}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},a=0;a<s.length;a++){var u=s[a],c=n[u],l=e[u],h=c(l,t);if("undefined"===typeof h){t&&t.type;throw new Error(G(14))}i[u]=h,r=r||h!==l}return(r=r||s.length!==Object.keys(e).length)?i:e}}({auth:Me,project:je,firestore:Fe.iJ,firebase:_e.firebaseReducer});function Ve(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Be=Ve();Be.withExtraArgument=Ve;const ze=Be;var qe=n(1352);const We=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,u=a?e[i+2]:0,c=t>>2,l=(3&t)<<4|s>>4;let h=(15&s)<<2|u>>6,d=63&u;a||(d=64,o||(h=64)),r.push(n[c],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(We(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Ke;const u=t<<2|o>>4;if(r.push(u),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ke extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const He=function(e){return function(e){const t=We(e);return Ge.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Qe=function(e){try{return Ge.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ye(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Ye(e[n],t[n]));return e}const $e=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Je=()=>{try{return $e()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Qe(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Xe=()=>{var e;return null===(e=Je())||void 0===e?void 0:e.config};class Ze{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function et(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function tt(){var e;const t=null===(e=Je())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function nt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function rt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function it(){const e=et();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ot(){return!tt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function st(){try{return"object"===typeof indexedDB}catch(e){return!1}}class at extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,at.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ut.prototype.create)}}class ut{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(ct,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new at(n,o,t)}}const ct=/\{\$([^}]+)}/g;function lt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ht(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(dt(n)&&dt(o)){if(!ht(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function dt(e){return null!==e&&"object"===typeof e}function ft(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function pt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function mt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function gt(e,t){const n=new yt(e,t);return n.subscribe.bind(n)}class yt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=vt),void 0===r.error&&(r.error=vt),void 0===r.complete&&(r.complete=vt);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function vt(){}function bt(e){return e&&e._delegate?e._delegate:e}class wt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const _t="[DEFAULT]";class Et{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ze;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:_t})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===_t?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t;return this.component?this.component.multipleInstances?e:_t:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class St{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Et(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Tt=[];var It;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(It||(It={}));const xt={debug:It.DEBUG,verbose:It.VERBOSE,info:It.INFO,warn:It.WARN,error:It.ERROR,silent:It.SILENT},At=It.INFO,Ot={[It.DEBUG]:"log",[It.VERBOSE]:"log",[It.INFO]:"info",[It.WARN]:"warn",[It.ERROR]:"error"},kt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Ot[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class Ct{constructor(e){this.name=e,this._logLevel=At,this._logHandler=kt,this._userLogHandler=null,Tt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in It))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?xt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.DEBUG,...t),this._logHandler(this,It.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.VERBOSE,...t),this._logHandler(this,It.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.INFO,...t),this._logHandler(this,It.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.WARN,...t),this._logHandler(this,It.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,It.ERROR,...t),this._logHandler(this,It.ERROR,...t)}}var Dt=n(4272);class Pt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Nt="@firebase/app",Rt="0.9.28",Mt=new Ct("@firebase/app"),Lt="[DEFAULT]",jt={[Nt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ft=new Map,Ut=new Map;function Vt(e,t){try{e.container.addComponent(t)}catch(n){Mt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Bt(e,t){e.container.addOrOverwriteComponent(t)}function zt(e){const t=e.name;if(Ut.has(t))return Mt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ut.set(t,e);for(const n of Ft.values())Vt(n,e);return!0}function qt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Wt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Lt;qt(e,t).clearInstance(n)}function Gt(){Ut.clear()}const Kt=new ut("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ht{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new wt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kt.create("app-deleted",{appName:this._name})}}const Qt="10.8.1";function Yt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Lt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Kt.create("bad-app-name",{appName:String(i)});if(n||(n=Xe()),!n)throw Kt.create("no-options");const o=Ft.get(i);if(o){if(ht(n,o.options)&&ht(r,o.config))return o;throw Kt.create("duplicate-app",{appName:i})}const s=new St(i);for(const u of Ut.values())s.addComponent(u);const a=new Ht(n,r,s);return Ft.set(i,a),a}function $t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt;const t=Ft.get(e);if(!t&&e===Lt&&Xe())return Yt();if(!t)throw Kt.create("no-app",{appName:e});return t}function Jt(){return Array.from(Ft.values())}async function Xt(e){const t=e.name;Ft.has(t)&&(Ft.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Zt(e,t,n){var r;let i=null!==(r=jt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Mt.warn(e.join(" "))}zt(new wt("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function en(e,t){if(null!==e&&"function"!==typeof e)throw Kt.create("invalid-log-argument");!function(e,t){for(const n of Tt){let r=null;t&&t.level&&(r=xt[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];const a=o.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:It[n].toLowerCase(),message:a,args:o,type:t.name})}}}(e,t)}function tn(e){var t;t=e,Tt.forEach((e=>{e.setLogLevel(t)}))}const nn="firebase-heartbeat-database",rn=1,on="firebase-heartbeat-store";let sn=null;function an(){return sn||(sn=(0,Dt.openDB)(nn,rn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(on)}catch(n){console.warn(n)}}}).catch((e=>{throw Kt.create("idb-open",{originalErrorMessage:e.message})}))),sn}async function un(e,t){try{const n=(await an()).transaction(on,"readwrite"),r=n.objectStore(on);await r.put(t,cn(e)),await n.done}catch(n){if(n instanceof at)Mt.warn(n.message);else{const e=Kt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});Mt.warn(e.message)}}}function cn(e){return"".concat(e.name,"!").concat(e.options.appId)}class ln{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=hn();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=hn(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),fn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),fn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=He(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function hn(){return(new Date).toISOString().substring(0,10)}class dn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!st()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await an()).transaction(on),n=await t.objectStore(on).get(cn(e));return await t.done,n}catch(t){if(t instanceof at)Mt.warn(t.message);else{const e=Kt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});Mt.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return un(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return un(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function fn(e){return He(JSON.stringify({version:2,heartbeats:e})).length}var pn;pn="",zt(new wt("platform-logger",(e=>new Pt(e)),"PRIVATE")),zt(new wt("heartbeat",(e=>new ln(e)),"PRIVATE")),Zt(Nt,Rt,pn),Zt(Nt,Rt,"esm2017"),Zt("fire-js","");class mn{constructor(e,t){this._delegate=e,this.firebase=t,Vt(e,new wt("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Xt(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lt;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Vt(this._delegate,e)}_addOrOverwriteComponent(e){Bt(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const gn=new ut("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const yn=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Yt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(lt(n,i.name))return n[i.name];const o=new t(i,r);return n[i.name]=o,o},app:i,registerVersion:Zt,setLogLevel:tn,onLog:en,apps:null,SDK_VERSION:Qt,INTERNAL:{registerComponent:function(e){const n=e.name,o=n.replace("-compat","");if(zt(e)&&"PUBLIC"===e.type){const s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[o])throw gn.create("invalid-app-argument",{appName:n});return e[o]()};void 0!==e.serviceProps&&Ye(s,e.serviceProps),r[o]=s,t.prototype[o]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[o]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!lt(n,e=e||Lt))throw gn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(mn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ye(n,e)},createSubscribe:gt,ErrorFactory:ut,deepExtend:Ye}),n}(),vn=new Ct("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){vn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&vn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const bn=yn;!function(e){Zt("@firebase/app-compat","0.2.28",e)}();bn.registerVersion("firebase","10.8.1","app-compat");var wn,_n="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},En={},Sn=Sn||{},Tn=_n||self;function In(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function xn(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var An="closure_uid_"+(1e9*Math.random()>>>0),On=0;function kn(e,t,n){return e.call.apply(e.bind,arguments)}function Cn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Dn(e,t,n){return(Dn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kn:Cn).apply(null,arguments)}function Pn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Nn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Rn(){this.s=this.s,this.o=this.o}Rn.prototype.s=!1,Rn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,An)&&e[An]||(e[An]=++On))},Rn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Mn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ln(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function jn(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(In(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Fn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Fn.prototype.h=function(){this.defaultPrevented=!0};var Un=function(){if(!Tn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Tn.addEventListener("test",e,t),Tn.removeEventListener("test",e,t)}catch(n){}return e}();function Vn(e){return/^[\s\xa0]*$/.test(e)}function Bn(){var e=Tn.navigator;return e&&(e=e.userAgent)?e:""}function zn(e){return-1!=Bn().indexOf(e)}function qn(e){return qn[" "](e),e}qn[" "]=function(){};var Wn,Gn,Kn=zn("Opera"),Hn=zn("Trident")||zn("MSIE"),Qn=zn("Edge"),Yn=Qn||Hn,$n=zn("Gecko")&&!(-1!=Bn().toLowerCase().indexOf("webkit")&&!zn("Edge"))&&!(zn("Trident")||zn("MSIE"))&&!zn("Edge"),Jn=-1!=Bn().toLowerCase().indexOf("webkit")&&!zn("Edge");function Xn(){var e=Tn.document;return e?e.documentMode:void 0}e:{var Zn="",er=function(){var e=Bn();return $n?/rv:([^\);]+)(\)|;)/.exec(e):Qn?/Edge\/([\d\.]+)/.exec(e):Hn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Jn?/WebKit\/(\S+)/.exec(e):Kn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(er&&(Zn=er?er[1]:""),Hn){var tr=Xn();if(null!=tr&&tr>parseFloat(Zn)){Wn=String(tr);break e}}Wn=Zn}if(Tn.document&&Hn){var nr=Xn();Gn=nr||(parseInt(Wn,10)||void 0)}else Gn=void 0;var rr=Gn;function ir(e,t){if(Fn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if($n){e:{try{qn(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:or[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ir.$.h.call(this)}}Nn(ir,Fn);var or={2:"touch",3:"pen",4:"mouse"};ir.prototype.h=function(){ir.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var sr="closure_listenable_"+(1e6*Math.random()|0),ar=0;function ur(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++ar,this.fa=this.ia=!1}function cr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function lr(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function hr(e){const t={};for(const n in e)t[n]=e[n];return t}const dr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fr(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<dr.length;t++)n=dr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function pr(e){this.src=e,this.g={},this.h=0}function mr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Mn(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(cr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function gr(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}pr.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=gr(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new ur(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var yr="closure_lm_"+(1e6*Math.random()|0),vr={};function br(e,t,n,r,i){if(r&&r.once)return _r(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)br(e,t[o],n,r,i);return null}return n=Or(n),e&&e[sr]?e.O(t,n,xn(r)?!!r.capture:!!r,i):wr(e,t,n,!1,r,i)}function wr(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=xn(i)?!!i.capture:!!i,a=xr(e);if(a||(e[yr]=a=new pr(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Ir;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Un||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Tr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function _r(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)_r(e,t[o],n,r,i);return null}return n=Or(n),e&&e[sr]?e.P(t,n,xn(r)?!!r.capture:!!r,i):wr(e,t,n,!0,r,i)}function Er(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Er(e,t[o],n,r,i);else r=xn(r)?!!r.capture:!!r,n=Or(n),e&&e[sr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=gr(o=e.g[t],n,r,i))&&(cr(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=xr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=gr(t,n,r,i)),(n=-1<e?t[e]:null)&&Sr(n))}function Sr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[sr])mr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Tr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=xr(t))?(mr(n,e),0==n.h&&(n.src=null,t[yr]=null)):cr(e)}}}function Tr(e){return e in vr?vr[e]:vr[e]="on"+e}function Ir(e,t){if(e.fa)e=!0;else{t=new ir(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Sr(e),e=n.call(r,t)}return e}function xr(e){return(e=e[yr])instanceof pr?e:null}var Ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function Or(e){return"function"===typeof e?e:(e[Ar]||(e[Ar]=function(t){return e.handleEvent(t)}),e[Ar])}function kr(){Rn.call(this),this.i=new pr(this),this.S=this,this.J=null}function Cr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Fn(t,e);else if(t instanceof Fn)t.target=t.target||e;else{var i=t;fr(t=new Fn(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Dr(s,r,!0,t)&&i}if(i=Dr(s=t.g=e,r,!0,t)&&i,i=Dr(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Dr(s=t.g=n[o],r,!1,t)&&i}function Dr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&mr(e.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Nn(kr,Rn),kr.prototype[sr]=!0,kr.prototype.removeEventListener=function(e,t,n,r){Er(this,e,t,n,r)},kr.prototype.N=function(){if(kr.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cr(n[r]);delete t.g[e],t.h--}}this.J=null},kr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},kr.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Pr=Tn.JSON.stringify;function Nr(){var e=Vr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Rr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Mr),(e=>e.reset()));class Mr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Lr(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function jr(e){Tn.setTimeout((()=>{throw e}),0)}let Fr,Ur=!1,Vr=new class{constructor(){this.h=this.g=null}add(e,t){const n=Rr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Br=()=>{const e=Tn.Promise.resolve(void 0);Fr=()=>{e.then(zr)}};var zr=()=>{for(var e;e=Nr();){try{e.h.call(e.g)}catch(n){jr(n)}var t=Rr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ur=!1};function qr(e,t){kr.call(this),this.h=e||1,this.g=t||Tn,this.j=Dn(this.qb,this),this.l=Date.now()}function Wr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Gr(e,t,n){if("function"===typeof e)n&&(e=Dn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Dn(e.handleEvent,e)}return 2147483647<Number(t)?-1:Tn.setTimeout(e,t||0)}function Kr(e){e.g=Gr((()=>{e.g=null,e.i&&(e.i=!1,Kr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Nn(qr,kr),(wn=qr.prototype).ga=!1,wn.T=null,wn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Cr(this,"tick"),this.ga&&(Wr(this),this.start()))}},wn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wn.N=function(){qr.$.N.call(this),Wr(this),delete this.g};class Hr extends Rn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Kr(this)}N(){super.N(),this.g&&(Tn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qr(e){Rn.call(this),this.h=e,this.g={}}Nn(Qr,Rn);var Yr=[];function $r(e,t,n,r){Array.isArray(n)||(n&&(Yr[0]=n.toString()),n=Yr);for(var i=0;i<n.length;i++){var o=br(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Jr(e){lr(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Sr(e)}),e),e.g={}}function Xr(){this.g=!0}function Zr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Pr(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}Qr.prototype.N=function(){Qr.$.N.call(this),Jr(this)},Qr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xr.prototype.Ea=function(){this.g=!1},Xr.prototype.info=function(){};var ei={},ti=null;function ni(){return ti=ti||new kr}function ri(e){Fn.call(this,ei.Ta,e)}function ii(e){const t=ni();Cr(t,new ri(t))}function oi(e,t){Fn.call(this,ei.STAT_EVENT,e),this.stat=t}function si(e){const t=ni();Cr(t,new oi(t,e))}function ai(e,t){Fn.call(this,ei.Ua,e),this.size=t}function ui(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Tn.setTimeout((function(){e()}),t)}ei.Ta="serverreachability",Nn(ri,Fn),ei.STAT_EVENT="statevent",Nn(oi,Fn),ei.Ua="timingevent",Nn(ai,Fn);var ci={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},li={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function hi(){}function di(e){return e.h||(e.h=e.i())}function fi(){}hi.prototype.h=null;var pi,mi={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gi(){Fn.call(this,"d")}function yi(){Fn.call(this,"c")}function vi(){}function bi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Qr(this),this.P=_i,e=Yn?125:void 0,this.V=new qr(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new wi}function wi(){this.i=null,this.g="",this.h=!1}Nn(gi,Fn),Nn(yi,Fn),Nn(vi,hi),vi.prototype.g=function(){return new XMLHttpRequest},vi.prototype.i=function(){return{}},pi=new vi;var _i=45e3,Ei={},Si={};function Ti(e,t,n){e.L=1,e.A=qi(Fi(t)),e.u=n,e.S=!0,Ii(e,null)}function Ii(e,t){e.G=Date.now(),ki(e),e.B=Fi(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),no(n.i,"t",r),e.o=0,n=e.l.J,e.h=new wi,e.g=is(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Hr(Dn(e.Pa,e,e.g),e.O)),$r(e.U,e.g,"readystatechange",e.nb),t=e.I?hr(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),ii(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function xi(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Ai(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Oi(e,n),r==Si){4==t&&(e.s=4,si(14),i=!1),Zr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ei){e.s=4,si(15),Zr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Zr(e.j,e.m,r,null),Ri(e,r)}xi(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,si(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),$o(t),t.M=!0,si(11))):(Zr(e.j,e.m,n,"[Invalid Chunked Response]"),Ni(e),Pi(e))}function Oi(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Si:(n=Number(t.substring(n,r)),isNaN(n)?Ei:(r+=1)+n>t.length?Si:(t=t.slice(r,r+n),e.o=r+n,t))}function ki(e){e.Y=Date.now()+e.P,Ci(e,e.P)}function Ci(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ui(Dn(e.lb,e),t)}function Di(e){e.C&&(Tn.clearTimeout(e.C),e.C=null)}function Pi(e){0==e.l.H||e.J||Zo(e.l,e)}function Ni(e){Di(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Wr(e.V),Jr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ri(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||co(n.i,e)))if(!e.K&&co(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Xo(n),zo(n)}Yo(n),si(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ui(Dn(n.ib,n),6e3));if(1>=uo(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else ts(n,11)}else if((e.K||n.g==e)&&Xo(n),!Vn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const l=c[5];null!=l&&"number"===typeof l&&0<l&&(r=1.5*l,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(lo(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,zi(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=rs(r,r.J?r.pa:null,r.Y),s.K){ho(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Di(a),ki(a)),r.g=s}else Qo(r);0<n.j.length&&Wo(n)}else"stop"!=c[0]&&"close"!=c[0]||ts(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ts(n,7):Bo(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}ii()}catch(c){}}function Mi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(In(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(In(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(In(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(wn=bi.prototype).setTimeout=function(e){this.P=e},wn.nb=function(e){e=e.target;const t=this.M;t&&3==Mo(e)?t.l():this.Pa(e)},wn.Pa=function(e){try{if(e==this.g)e:{const l=Mo(this.g);var t=this.g.Ia();this.g.da();if(!(3>l)&&(3!=l||Yn||this.g&&(this.h.h||this.g.ja()||Lo(this.g)))){this.J||4!=l||7==t||ii(),Di(this);var n=this.g.da();this.ca=n;t:if(xi(this)){var r=Lo(this.g);e="";var i=r.length,o=4==Mo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ni(this),Pi(this);var s="";break t}this.h.i=new Tn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vn(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,si(12),Ni(this),Pi(this);break e}Zr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ri(this,n)}this.S?(Ai(this,l,s),Yn&&this.i&&3==l&&($r(this.U,this.V,"tick",this.mb),this.V.start())):(Zr(this.j,this.m,s,null),Ri(this,s)),4==l&&Ni(this),this.i&&!this.J&&(4==l?Zo(this.l,this):(this.i=!1,ki(this)))}else(function(e){const t={};e=(e.g&&2<=Mo(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Vn(e[r]))continue;var n=Lr(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,si(12)):(this.s=0,si(13)),Ni(this),Pi(this)}}}catch(l){}},wn.mb=function(){if(this.g){var e=Mo(this.g),t=this.g.ja();this.o<t.length&&(Di(this),Ai(this,e,t),this.i&&4!=e&&ki(this))}},wn.cancel=function(){this.J=!0,Ni(this)},wn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(ii(),si(17)),Ni(this),this.s=2,Pi(this)):Ci(this,this.Y-e)};var Li=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ji(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof ji){this.h=e.h,Ui(this,e.j),this.s=e.s,this.g=e.g,Vi(this,e.m),this.l=e.l;var t=e.i,n=new Xi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Bi(this,n),this.o=e.o}else e&&(t=String(e).match(Li))?(this.h=!1,Ui(this,t[1]||"",!0),this.s=Wi(t[2]||""),this.g=Wi(t[3]||"",!0),Vi(this,t[4]),this.l=Wi(t[5]||"",!0),Bi(this,t[6]||"",!0),this.o=Wi(t[7]||"")):(this.h=!1,this.i=new Xi(null,this.h))}function Fi(e){return new ji(e)}function Ui(e,t,n){e.j=n?Wi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Vi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Bi(e,t,n){t instanceof Xi?(e.i=t,function(e,t){t&&!e.j&&(Zi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(eo(this,t),no(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Gi(t,$i)),e.i=new Xi(t,e.h))}function zi(e,t,n){e.i.set(t,n)}function qi(e){return zi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Wi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ki),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ki(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ji.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Gi(t,Hi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Gi(t,Hi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Gi(n,"/"==n.charAt(0)?Yi:Qi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Gi(n,Ji)),e.join("")};var Hi=/[#\/\?@]/g,Qi=/[#\?:]/g,Yi=/[#\?]/g,$i=/[#\?@]/g,Ji=/#/g;function Xi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Zi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function eo(e,t){Zi(e),t=ro(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function to(e,t){return Zi(e),t=ro(e,t),e.g.has(t)}function no(e,t,n){eo(e,t),0<n.length&&(e.i=null,e.g.set(ro(e,t),Ln(n)),e.h+=n.length)}function ro(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(wn=Xi.prototype).add=function(e,t){Zi(this),this.i=null,e=ro(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},wn.forEach=function(e,t){Zi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},wn.ta=function(){Zi(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},wn.Z=function(e){Zi(this);let t=[];if("string"===typeof e)to(this,e)&&(t=t.concat(this.g.get(ro(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},wn.set=function(e,t){return Zi(this),this.i=null,to(this,e=ro(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},wn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},wn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var io=class{constructor(e,t){this.g=e,this.map=t}};function oo(e){this.l=e||so,Tn.PerformanceNavigationTiming?e=0<(e=Tn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Tn.g&&Tn.g.Ka&&Tn.g.Ka()&&Tn.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var so=10;function ao(e){return!!e.h||!!e.g&&e.g.size>=e.j}function uo(e){return e.h?1:e.g?e.g.size:0}function co(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function lo(e,t){e.g?e.g.add(t):e.h=t}function ho(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function fo(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ln(e.i)}oo.prototype.cancel=function(){if(this.i=fo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var po,mo=class{stringify(e){return Tn.JSON.stringify(e,void 0)}parse(e){return Tn.JSON.parse(e,void 0)}};function go(){this.g=new mo}function yo(e,t,n){const r=n||"";try{Mi(e,(function(e,n){let i=e;xn(e)&&(i=Pr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function vo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function bo(e){this.l=e.ec||null,this.j=e.ob||!1}function wo(e,t){kr.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=_o,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Nn(bo,hi),bo.prototype.g=function(){return new wo(this.l,this.j)},bo.prototype.i=(po={},function(){return po}),Nn(wo,kr);var _o=0;function Eo(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function So(e){e.readyState=4,e.l=null,e.j=null,e.A=null,To(e)}function To(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(wn=wo.prototype).open=function(e,t){if(this.readyState!=_o)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,To(this)},wn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Tn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},wn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,So(this)),this.readyState=_o},wn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Tn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Eo(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},wn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?So(this):To(this),3==this.readyState&&Eo(this)}},wn.Za=function(e){this.g&&(this.response=this.responseText=e,So(this))},wn.Ya=function(e){this.g&&(this.response=e,So(this))},wn.ka=function(){this.g&&So(this)},wn.setRequestHeader=function(e,t){this.v.append(e,t)},wn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},wn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(wo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Io=Tn.JSON.parse;function xo(e){kr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ao,this.L=this.M=!1}Nn(xo,kr);var Ao="",Oo=/^https?$/i,ko=["POST","PUT"];function Co(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Do(e),No(e)}function Do(e){e.F||(e.F=!0,Cr(e,"complete"),Cr(e,"error"))}function Po(e){if(e.h&&"undefined"!=typeof Sn&&(!e.C[1]||4!=Mo(e)||2!=e.da()))if(e.v&&4==Mo(e))Gr(e.La,0,e);else if(Cr(e,"readystatechange"),4==Mo(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Li)[1]||null;!i&&Tn.self&&Tn.self.location&&(i=Tn.self.location.protocol.slice(0,-1)),r=!Oo.test(i?i.toLowerCase():"")}n=r}if(n)Cr(e,"complete"),Cr(e,"success");else{e.m=6;try{var o=2<Mo(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Do(e)}}finally{No(e)}}}function No(e,t){if(e.g){Ro(e);const r=e.g,i=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Cr(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Ro(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Tn.clearTimeout(e.A),e.A=null)}function Mo(e){return e.g?e.g.readyState:0}function Lo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ao:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(qs){return null}}function jo(e){let t="";return lr(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Fo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):zi(e,t,n))}function Uo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vo(e){this.Ga=0,this.j=[],this.l=new Xr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Uo("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Uo("baseRetryDelayMs",5e3,e),this.hb=Uo("retryDelaySeedMs",1e4,e),this.eb=Uo("forwardChannelMaxRetries",2,e),this.xa=Uo("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new oo(e&&e.concurrentRequestLimit),this.Ja=new go,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Bo(e){if(qo(e),3==e.H){var t=e.W++,n=Fi(e.I);if(zi(n,"SID",e.K),zi(n,"RID",t),zi(n,"TYPE","terminate"),Ko(e,n),(t=new bi(e,e.l,t)).L=2,t.A=qi(Fi(n)),n=!1,Tn.navigator&&Tn.navigator.sendBeacon)try{n=Tn.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Tn.Image&&((new Image).src=t.A,n=!0),n||(t.g=is(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ki(t)}ns(e)}function zo(e){e.g&&($o(e),e.g.cancel(),e.g=null)}function qo(e){zo(e),e.u&&(Tn.clearTimeout(e.u),e.u=null),Xo(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Tn.clearTimeout(e.m),e.m=null)}function Wo(e){if(!ao(e.i)&&!e.m){e.m=!0;var t=e.Na;Fr||Br(),Ur||(Fr(),Ur=!0),Vr.add(t,e),e.C=0}}function Go(e,t){var n;n=t?t.m:e.W++;const r=Fi(e.I);zi(r,"SID",e.K),zi(r,"RID",n),zi(r,"AID",e.V),Ko(e,r),e.o&&e.s&&Fo(r,e.o,e.s),n=new bi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Ho(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),lo(e.i,n),Ti(n,r,t)}function Ko(e,t){e.na&&lr(e.na,(function(e,n){zi(t,n,e)})),e.h&&Mi({},(function(e,n){zi(t,n,e)}))}function Ho(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Dn(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let s=0;s<n;s++){let n=i[s].g;const a=i[s].map;if(n-=t,0>n)t=Math.max(0,i[s].g-100),o=!1;else try{yo(a,e,"req"+n+"_")}catch(su){r&&r(a)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Qo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Fr||Br(),Ur||(Fr(),Ur=!0),Vr.add(t,e),e.A=0}}function Yo(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ui(Dn(e.Ma,e),es(e,e.A)),e.A++,!0)}function $o(e){null!=e.B&&(Tn.clearTimeout(e.B),e.B=null)}function Jo(e){e.g=new bi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Fi(e.wa);zi(t,"RID","rpc"),zi(t,"SID",e.K),zi(t,"AID",e.V),zi(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&zi(t,"TO",e.qa),zi(t,"TYPE","xmlhttp"),Ko(e,t),e.o&&e.s&&Fo(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=qi(Fi(t)),n.u=null,n.S=!0,Ii(n,e)}function Xo(e){null!=e.v&&(Tn.clearTimeout(e.v),e.v=null)}function Zo(e,t){var n=null;if(e.g==t){Xo(e),$o(e),e.g=null;var r=2}else{if(!co(e.i,t))return;n=t.F,ho(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Cr(r=ni(),new ai(r,n)),Wo(e)}else Qo(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(uo(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ui(Dn(e.Na,e,t),es(e,e.C)),e.C++,!0))}(e,t)||2==r&&Yo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ts(e,5);break;case 4:ts(e,10);break;case 3:ts(e,6);break;default:ts(e,2)}}function es(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ts(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Dn(e.pb,e);n||(n=new ji("//www.google.com/images/cleardot.gif"),Tn.location&&"http"==Tn.location.protocol||Ui(n,"https"),qi(n)),function(e,t){const n=new Xr;if(Tn.Image){const r=new Image;r.onload=Pn(vo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Pn(vo,n,r,"TestLoadImage: error",!1,t),r.onabort=Pn(vo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Pn(vo,n,r,"TestLoadImage: timeout",!1,t),Tn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else si(2);e.H=0,e.h&&e.h.za(t),ns(e),qo(e)}function ns(e){if(e.H=0,e.ma=[],e.h){const t=fo(e.i);0==t.length&&0==e.j.length||(jn(e.ma,t),jn(e.ma,e.j),e.i.i.length=0,Ln(e.j),e.j.length=0),e.h.ya()}}function rs(e,t,n){var r=n instanceof ji?Fi(n):new ji(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Vi(r,r.m);else{var i=Tn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new ji(null);r&&Ui(o,r),t&&(o.g=t),i&&Vi(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&zi(r,n,t),zi(r,"VER",e.ra),Ko(e,r),r}function is(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new xo(new bo({ob:n})):new xo(e.va)).Oa(e.J),t}function os(){}function ss(){if(Hn&&!(10<=Number(rr)))throw Error("Environmental error: no available transport.")}function as(e,t){kr.call(this),this.g=new Vo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Vn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Vn(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new ls(this)}function us(e){gi.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function cs(){yi.call(this),this.status=1}function ls(e){this.g=e}function hs(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ds(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function fs(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(wn=xo.prototype).Oa=function(e){this.M=e},wn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pi.g(),this.C=this.u?di(this.u):di(pi),this.g.onreadystatechange=Dn(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void Co(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Tn.FormData&&e instanceof Tn.FormData,!(0<=Mn(ko,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ro(this),0<this.B&&((this.L=function(e){return Hn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Dn(this.ua,this)):this.A=Gr(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Co(this,o)}},wn.ua=function(){"undefined"!=typeof Sn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cr(this,"timeout"),this.abort(8))},wn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Cr(this,"complete"),Cr(this,"abort"),No(this))},wn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),No(this,!0)),xo.$.N.call(this)},wn.La=function(){this.s||(this.G||this.v||this.l?Po(this):this.kb())},wn.kb=function(){Po(this)},wn.isActive=function(){return!!this.g},wn.da=function(){try{return 2<Mo(this)?this.g.status:-1}catch(po){return-1}},wn.ja=function(){try{return this.g?this.g.responseText:""}catch(po){return""}},wn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Io(t)}},wn.Ia=function(){return this.m},wn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(wn=Vo.prototype).ra=8,wn.H=1,wn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new bi(this,this.l,e);let o=this.s;if(this.U&&(o?(o=hr(o),fr(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Ho(this,i,t),zi(n=Fi(this.I),"RID",e),zi(n,"CVER",22),this.F&&zi(n,"X-HTTP-Session-Id",this.F),Ko(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(jo(o)))+"&"+t:this.o&&Fo(n,this.o,o)),lo(this.i,i),this.bb&&zi(n,"TYPE","init"),this.P?(zi(n,"$req",t),zi(n,"SID","null"),i.aa=!0,Ti(i,n,null)):Ti(i,n,t),this.H=2}}else 3==this.H&&(e?Go(this,e):0==this.j.length||ao(this.i)||Go(this))},wn.Ma=function(){if(this.u=null,Jo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ui(Dn(this.jb,this),e)}},wn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,si(10),zo(this),Jo(this))},wn.ib=function(){null!=this.v&&(this.v=null,zo(this),Yo(this),si(19))},wn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),si(2)):(this.l.info("Failed to ping google.com"),si(1))},wn.isActive=function(){return!!this.h&&this.h.isActive(this)},(wn=os.prototype).Ba=function(){},wn.Aa=function(){},wn.za=function(){},wn.ya=function(){},wn.isActive=function(){return!0},wn.Va=function(){},ss.prototype.g=function(e,t){return new as(e,t)},Nn(as,kr),as.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;si(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=rs(e,null,e.Y),Wo(e)},as.prototype.close=function(){Bo(this.g)},as.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Pr(e),e=n);t.j.push(new io(t.fb++,e)),3==t.H&&Wo(t)},as.prototype.N=function(){this.g.h=null,delete this.j,Bo(this.g),delete this.g,as.$.N.call(this)},Nn(us,gi),Nn(cs,yi),Nn(ls,os),ls.prototype.Ba=function(){Cr(this.g,"a")},ls.prototype.Aa=function(e){Cr(this.g,new us(e))},ls.prototype.za=function(e){Cr(this.g,new cs)},ls.prototype.ya=function(){Cr(this.g,"b")},Nn(hs,(function(){this.blockSize=-1})),hs.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},hs.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)ds(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){ds(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){ds(this,r),i=0;break}}this.h=i,this.i+=t},hs.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ps={};function ms(e){return-128<=e&&128>e?function(e,t){var n=ps;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new fs([0|e],0>e?-1:0)})):new fs([0|e],0>e?-1:0)}function gs(e){if(isNaN(e)||!isFinite(e))return vs;if(0>e)return Ss(gs(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=ys;return new fs(t,0)}var ys=4294967296,vs=ms(0),bs=ms(1),ws=ms(16777216);function _s(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Es(e){return-1==e.h}function Ss(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new fs(n,~e.h).add(bs)}function Ts(e,t){return e.add(Ss(t))}function Is(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function xs(e,t){this.g=e,this.h=t}function As(e,t){if(_s(t))throw Error("division by zero");if(_s(e))return new xs(vs,vs);if(Es(e))return t=As(Ss(e),t),new xs(Ss(t.g),Ss(t.h));if(Es(t))return t=As(e,Ss(t)),new xs(Ss(t.g),t.h);if(30<e.g.length){if(Es(e)||Es(t))throw Error("slowDivide_ only works with positive integers.");for(var n=bs,r=t;0>=r.X(e);)n=Os(n),r=Os(r);var i=ks(n,1),o=ks(r,1);for(r=ks(r,2),n=ks(n,2);!_s(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=ks(r,1),n=ks(n,1)}return t=Ts(e,i.R(t)),new xs(i,t)}for(i=vs;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=gs(n)).R(t);Es(s)||0<s.X(e);)s=(o=gs(n-=r)).R(t);_s(o)&&(o=bs),i=i.add(o),e=Ts(e,s)}return new xs(i,e)}function Os(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new fs(n,e.h)}function ks(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new fs(i,e.h)}(wn=fs.prototype).ea=function(){if(Es(this))return-Ss(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:ys+r)*t,t*=ys}return e},wn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(_s(this))return"0";if(Es(this))return"-"+Ss(this).toString(e);for(var t=gs(Math.pow(e,6)),n=this,r="";;){var i=As(n,t).g,o=((0<(n=Ts(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(_s(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},wn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},wn.X=function(e){return Es(e=Ts(this,e))?-1:_s(e)?0:1},wn.abs=function(){return Es(this)?Ss(this):this},wn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new fs(n,-2147483648&n[n.length-1]?-1:0)},wn.R=function(e){if(_s(this)||_s(e))return vs;if(Es(this))return Es(e)?Ss(this).R(Ss(e)):Ss(Ss(this).R(e));if(Es(e))return Ss(this.R(Ss(e)));if(0>this.X(ws)&&0>e.X(ws))return gs(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,u=65535&e.D(i);n[2*r+2*i]+=s*u,Is(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Is(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Is(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Is(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new fs(n,0)},wn.gb=function(e){return As(this,e).h},wn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new fs(n,this.h&e.h)},wn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new fs(n,this.h|e.h)},wn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new fs(n,this.h^e.h)},ss.prototype.createWebChannel=ss.prototype.g,as.prototype.send=as.prototype.u,as.prototype.open=as.prototype.m,as.prototype.close=as.prototype.close,ci.NO_ERROR=0,ci.TIMEOUT=8,ci.HTTP_ERROR=6,li.COMPLETE="complete",fi.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",kr.prototype.listen=kr.prototype.O,xo.prototype.listenOnce=xo.prototype.P,xo.prototype.getLastError=xo.prototype.Sa,xo.prototype.getLastErrorCode=xo.prototype.Ia,xo.prototype.getStatus=xo.prototype.da,xo.prototype.getResponseJson=xo.prototype.Wa,xo.prototype.getResponseText=xo.prototype.ja,xo.prototype.send=xo.prototype.ha,xo.prototype.setWithCredentials=xo.prototype.Oa,hs.prototype.digest=hs.prototype.l,hs.prototype.reset=hs.prototype.reset,hs.prototype.update=hs.prototype.j,fs.prototype.add=fs.prototype.add,fs.prototype.multiply=fs.prototype.R,fs.prototype.modulo=fs.prototype.gb,fs.prototype.compare=fs.prototype.X,fs.prototype.toNumber=fs.prototype.ea,fs.prototype.toString=fs.prototype.toString,fs.prototype.getBits=fs.prototype.D,fs.fromNumber=gs,fs.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ss(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=gs(Math.pow(n,8)),i=vs,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=gs(Math.pow(n,s)),i=i.R(s).add(gs(a))):i=(i=i.R(r)).add(gs(a))}return i};var Cs=En.createWebChannelTransport=function(){return new ss},Ds=En.getStatEventTarget=function(){return ni()},Ps=En.ErrorCode=ci,Ns=En.EventType=li,Rs=En.Event=ei,Ms=En.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ls=(En.FetchXmlHttpFactory=bo,En.WebChannel=fi),js=En.XhrIo=xo,Fs=En.Md5=hs,Us=En.Integer=fs;const Vs="@firebase/firestore";class Bs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bs.UNAUTHENTICATED=new Bs(null),Bs.GOOGLE_CREDENTIALS=new Bs("google-credentials-uid"),Bs.FIRST_PARTY=new Bs("first-party-uid"),Bs.MOCK_USER=new Bs("mock-user");let zs="10.8.1";const qs=new Ct("@firebase/firestore");function Ws(){return qs.logLevel}function Gs(e){if(qs.logLevel<=It.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Qs);qs.debug("Firestore (".concat(zs,"): ").concat(e),...i)}}function Ks(e){if(qs.logLevel<=It.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Qs);qs.error("Firestore (".concat(zs,"): ").concat(e),...i)}}function Hs(e){if(qs.logLevel<=It.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Qs);qs.warn("Firestore (".concat(zs,"): ").concat(e),...i)}}function Qs(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(zs,") INTERNAL ASSERTION FAILED: ")+e;throw Ks(t),new Error(t)}function $s(e,t){e||Ys()}function Js(e,t){return e}const Xs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Zs extends at{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class ea{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class ta{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class na{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bs.UNAUTHENTICATED)))}shutdown(){}}class ra{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ia{constructor(e){this.t=e,this.currentUser=Bs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ea,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Gs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Gs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ea)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Gs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?($s("string"==typeof t.accessToken),new ta(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return $s(null===e||"string"==typeof e),new Bs(e)}}class oa{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Bs.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sa{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new oa(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Bs.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class aa{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ua{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Gs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Gs("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Gs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Gs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?($s("string"==typeof e.token),this.R=e.token,new aa(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ca(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class la{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ca(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function ha(e,t){return e<t?-1:e>t?1:0}function da(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function fa(e){return e+"\0"}class pa{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Zs(Xs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Zs(Xs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Zs(Xs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Zs(Xs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pa.fromMillis(Date.now())}static fromDate(e){return pa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new pa(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ha(this.nanoseconds,e.nanoseconds):ha(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ma{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ma(e)}static min(){return new ma(new pa(0,0))}static max(){return new ma(new pa(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ga{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ys(),void 0===n?n=e.length-t:n>e.length-t&&Ys(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ga.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ga?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ya extends ga{construct(e,t,n){return new ya(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ya(e)}static emptyPath(){return new ya([])}}const va=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ba extends ga{construct(e,t,n){return new ba(e,t,n)}static isValidIdentifier(e){return va.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ba.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ba(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Zs(Xs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Zs(Xs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Zs(Xs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ba(t)}static emptyPath(){return new ba([])}}class wa{constructor(e){this.path=e}static fromPath(e){return new wa(ya.fromString(e))}static fromName(e){return new wa(ya.fromString(e).popFirst(5))}static empty(){return new wa(ya.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ya.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ya.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new wa(new ya(e.slice()))}}class _a{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function Ea(e){return e.fields.find((e=>2===e.kind))}function Sa(e){return e.fields.filter((e=>2!==e.kind))}_a.UNKNOWN_ID=-1;class Ta{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ia{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ia(0,Oa.min())}}function xa(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ma.fromTimestamp(1e9===r?new pa(n+1,0):new pa(n,r));return new Oa(i,wa.empty(),t)}function Aa(e){return new Oa(e.readTime,e.key,-1)}class Oa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Oa(ma.min(),wa.empty(),-1)}static max(){return new Oa(ma.max(),wa.empty(),-1)}}function ka(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=wa.comparator(e.documentKey,t.documentKey),0!==n?n:ha(e.largestBatchId,t.largestBatchId))}const Ca="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Da{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Pa(e){if(e.code!==Xs.FAILED_PRECONDITION||e.message!==Ca)throw e;Gs("LocalStore","Unexpectedly lost primary lease")}class Na{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ys(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Na(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Na?t:Na.resolve(t)}catch(e){return Na.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Na.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Na.reject(t)}static resolve(e){return new Na(((t,n)=>{t(e)}))}static reject(e){return new Na(((t,n)=>{n(e)}))}static waitFor(e){return new Na(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Na.resolve(!1);for(const n of e)t=t.next((e=>e?Na.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Na(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const u=a;t(e[u]).next((e=>{o[u]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Na(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Ra{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ea,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ja(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=za(t.target.error);this.V.reject(new ja(e,n))}}static open(e,t,n,r){try{return new Ra(t,e.transaction(r,n))}catch(e){throw new ja(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Gs("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ua(t)}}class Ma{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Ma.S(et())&&Ks("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Gs("SimpleDb","Removing database:",e),Va(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!st())return!1;if(Ma.C())return!0;const e=et(),t=Ma.S(e),n=0<t&&t<10,r=Ma.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Gs("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new ja(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Zs(Xs.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Zs(Xs.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new ja(e,r))},r.onupgradeneeded=e=>{Gs("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Gs("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=Ra.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),Na.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Gs("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class La{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Va(this.k.delete())}}class ja extends Zs{constructor(e,t){super(Xs.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Fa(e){return"IndexedDbTransactionError"===e.name}class Ua{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Gs("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Gs("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Va(n)}add(e){return Gs("SimpleDb","ADD",this.store.name,e,e),Va(this.store.add(e))}get(e){return Va(this.store.get(e)).next((t=>(void 0===t&&(t=null),Gs("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Gs("SimpleDb","DELETE",this.store.name,e),Va(this.store.delete(e))}count(){return Gs("SimpleDb","COUNT",this.store.name),Va(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Na(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Na(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Gs("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new Na(((n,r)=>{t.onerror=e=>{const t=za(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new Na(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new La(i),s=t(i.primaryKey,i.value,o);if(s instanceof Na){const e=s.catch((e=>(o.done(),Na.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>Na.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Va(e){return new Na(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=za(e.target.error);n(t)}}))}let Ba=!1;function za(e){const t=Ma.S(et());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Zs("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ba||(Ba=!0,setTimeout((()=>{throw e}),0)),e}}return e}class qa{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Gs("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Gs("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Fa(e)?Gs("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await Pa(e)}await this.ee(6e4)}))}}class Wa{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return Na.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Gs("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Gs("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=Aa(t);ka(r,n)>0&&(n=r)})),new Oa(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ga{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ka(e){return null==e}function Ha(e){return 0===e&&1/e==-1/0}function Qa(e){return"number"==typeof e&&Number.isInteger(e)&&!Ha(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Ya(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ja(t)),t=$a(e.get(n),t);return Ja(t)}function $a(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Ja(e){return e+"\x01\x01"}function Xa(e){const t=e.length;if($s(t>=2),2===t)return $s("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ya.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("\x01",o);switch((t<0||t>n)&&Ys(),e.charAt(t+1)){case"\x01":const n=e.substring(o,t);let s;0===i.length?s=n:(i+=n,s=i,i=""),r.push(s);break;case"\x10":i+=e.substring(o,t),i+="\0";break;case"\x11":i+=e.substring(o,t+1);break;default:Ys()}o=t+2}return new ya(r)}Ga._e=-1;const Za=["userId","batchId"];function eu(e,t){return[e,Ya(t)]}function tu(e,t,n){return[e,Ya(t),n]}const nu={},ru=["prefixPath","collectionGroup","readTime","documentId"],iu=["prefixPath","collectionGroup","documentId"],ou=["collectionGroup","readTime","prefixPath","documentId"],su=["canonicalId","targetId"],au=["targetId","path"],uu=["path","targetId"],cu=["collectionId","parent"],lu=["indexId","uid"],hu=["uid","sequenceNumber"],du=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fu=["indexId","uid","orderedDocumentKey"],pu=["userId","collectionPath","documentId"],mu=["userId","collectionPath","largestBatchId"],gu=["userId","collectionGroup","largestBatchId"],yu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vu=[...yu,"documentOverlays"],bu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],wu=bu,_u=[...wu,"indexConfiguration","indexState","indexEntries"];class Eu extends Da{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function Su(e,t){const n=Js(e);return Ma.M(n.ae,t)}function Tu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Iu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Au{constructor(e,t){this.comparator=e,this.root=t||ku.EMPTY}insert(e,t){return new Au(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ku.BLACK,null,null))}remove(e){return new Au(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ku.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ou(this.root,e,this.comparator,!0)}}class Ou{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ku{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ku.RED,this.left=null!=r?r:ku.EMPTY,this.right=null!=i?i:ku.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ku(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ku.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ku.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ku.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ku.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ys();if(this.right.isRed())throw Ys();const e=this.left.check();if(e!==this.right.check())throw Ys();return e+(this.isRed()?0:1)}}ku.EMPTY=null,ku.RED=!0,ku.BLACK=!1,ku.EMPTY=new class{constructor(){this.size=0}get key(){throw Ys()}get value(){throw Ys()}get color(){throw Ys()}get left(){throw Ys()}get right(){throw Ys()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ku(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cu{constructor(e){this.comparator=e,this.data=new Au(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Du(this.data.getIterator())}getIteratorFrom(e){return new Du(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Cu))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Cu(this.comparator);return t.data=e,t}}class Du{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pu(e){return e.hasNext()?e.getNext():void 0}class Nu{constructor(e){this.fields=e,e.sort(ba.comparator)}static empty(){return new Nu([])}unionWith(e){let t=new Cu(ba.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Nu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return da(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Ru extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Mu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ru("Invalid base64 string: "+e):e}}(e);return new Mu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Mu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ha(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mu.EMPTY_BYTE_STRING=new Mu("");const Lu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ju(e){if($s(!!e),"string"==typeof e){let t=0;const n=Lu.exec(e);if($s(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Fu(e.seconds),nanos:Fu(e.nanos)}}function Fu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Uu(e){return"string"==typeof e?Mu.fromBase64String(e):Mu.fromUint8Array(e)}function Vu(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Bu(e){const t=e.mapValue.fields.__previous_value__;return Vu(t)?Bu(t):t}function zu(e){const t=ju(e.mapValue.fields.__local_write_time__.timestampValue);return new pa(t.seconds,t.nanos)}class qu{constructor(e,t,n,r,i,o,s,a,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=u}}class Wu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Wu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Wu&&e.projectId===this.projectId&&e.database===this.database}}const Gu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ku={nullValue:"NULL_VALUE"};function Hu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Vu(e)?4:ac(e)?9007199254740991:10:Ys()}function Qu(e,t){if(e===t)return!0;const n=Hu(e);if(n!==Hu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return zu(e).isEqual(zu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ju(e.timestampValue),r=ju(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Uu(e.bytesValue).isEqual(Uu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Fu(e.geoPointValue.latitude)===Fu(t.geoPointValue.latitude)&&Fu(e.geoPointValue.longitude)===Fu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Fu(e.integerValue)===Fu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Fu(e.doubleValue),r=Fu(t.doubleValue);return n===r?Ha(n)===Ha(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return da(e.arrayValue.values||[],t.arrayValue.values||[],Qu);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Tu(n)!==Tu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qu(n[i],r[i])))return!1;return!0}(e,t);default:return Ys()}}function Yu(e,t){return void 0!==(e.values||[]).find((e=>Qu(e,t)))}function $u(e,t){if(e===t)return 0;const n=Hu(e),r=Hu(t);if(n!==r)return ha(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ha(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Fu(e.integerValue||e.doubleValue),r=Fu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ju(e.timestampValue,t.timestampValue);case 4:return Ju(zu(e),zu(t));case 5:return ha(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Uu(e),r=Uu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ha(n[i],r[i]);if(0!==e)return e}return ha(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ha(Fu(e.latitude),Fu(t.latitude));return 0!==n?n:ha(Fu(e.longitude),Fu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=$u(n[i],r[i]);if(e)return e}return ha(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Gu.mapValue&&t===Gu.mapValue)return 0;if(e===Gu.mapValue)return 1;if(t===Gu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=ha(r[s],o[s]);if(0!==e)return e;const t=$u(n[r[s]],i[o[s]]);if(0!==t)return t}return ha(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Ys()}}function Ju(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ha(e,t);const n=ju(e),r=ju(t),i=ha(n.seconds,r.seconds);return 0!==i?i:ha(n.nanos,r.nanos)}function Xu(e){return Zu(e)}function Zu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ju(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Uu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return wa.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Zu(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Zu(e.fields[i]));return n+"}"}(e.mapValue):Ys()}function ec(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function tc(e){return!!e&&"integerValue"in e}function nc(e){return!!e&&"arrayValue"in e}function rc(e){return!!e&&"nullValue"in e}function ic(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function oc(e){return!!e&&"mapValue"in e}function sc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Iu(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=sc(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=sc(e.arrayValue.values[n]);return t}return Object.assign({},e)}function ac(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function uc(e){return"nullValue"in e?Ku:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?ec(Wu.empty(),wa.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ys()}function cc(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?ec(Wu.empty(),wa.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Gu:Ys()}function lc(e,t){const n=$u(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function hc(e,t){const n=$u(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class dc{constructor(e){this.value=e}static empty(){return new dc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!oc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=sc(t)}setAll(e){let t=ba.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=sc(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());oc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];oc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Iu(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new dc(sc(this.value))}}function fc(e){const t=[];return Iu(e.fields,((e,n)=>{const r=new ba([e]);if(oc(n)){const e=fc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Nu(t)}class pc{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new pc(e,0,ma.min(),ma.min(),ma.min(),dc.empty(),0)}static newFoundDocument(e,t,n,r){return new pc(e,1,t,ma.min(),n,r,0)}static newNoDocument(e,t){return new pc(e,2,t,ma.min(),ma.min(),dc.empty(),0)}static newUnknownDocument(e,t){return new pc(e,3,t,ma.min(),ma.min(),dc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ma.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ma.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class mc{constructor(e,t){this.position=e,this.inclusive=t}}function gc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?wa.comparator(wa.fromName(s.referenceValue),n.key):$u(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function yc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Qu(e.position[n],t.position[n]))return!1;return!0}class vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function bc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class wc{}class _c extends wc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Dc(e,t,n):"array-contains"===t?new Mc(e,n):"in"===t?new Lc(e,n):"not-in"===t?new jc(e,n):"array-contains-any"===t?new Fc(e,n):new _c(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Pc(e,n):new Nc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($u(t,this.value)):null!==t&&Hu(this.value)===Hu(t)&&this.matchesComparison($u(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ys()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ec extends wc{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Ec(e,t)}matches(e){return Sc(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Sc(e){return"and"===e.op}function Tc(e){return"or"===e.op}function Ic(e){return xc(e)&&Sc(e)}function xc(e){for(const t of e.filters)if(t instanceof Ec)return!1;return!0}function Ac(e){if(e instanceof _c)return e.field.canonicalString()+e.op.toString()+Xu(e.value);if(Ic(e))return e.filters.map((e=>Ac(e))).join(",");{const t=e.filters.map((e=>Ac(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Oc(e,t){return e instanceof _c?function(e,t){return t instanceof _c&&e.op===t.op&&e.field.isEqual(t.field)&&Qu(e.value,t.value)}(e,t):e instanceof Ec?function(e,t){return t instanceof Ec&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Oc(n,t.filters[r])),!0)}(e,t):void Ys()}function kc(e,t){const n=e.filters.concat(t);return Ec.create(n,e.op)}function Cc(e){return e instanceof _c?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Xu(e.value))}(e):e instanceof Ec?function(e){return e.op.toString()+" {"+e.getFilters().map(Cc).join(" ,")+"}"}(e):"Filter"}class Dc extends _c{constructor(e,t,n){super(e,t,n),this.key=wa.fromName(n.referenceValue)}matches(e){const t=wa.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pc extends _c{constructor(e,t){super(e,"in",t),this.keys=Rc("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Nc extends _c{constructor(e,t){super(e,"not-in",t),this.keys=Rc("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Rc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>wa.fromName(e.referenceValue)))}class Mc extends _c{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nc(t)&&Yu(t.arrayValue,this.value)}}class Lc extends _c{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yu(this.value.arrayValue,t)}}class jc extends _c{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Yu(this.value.arrayValue,t)}}class Fc extends _c{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Yu(this.value.arrayValue,e)))}}class Uc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function Vc(e){return new Uc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Bc(e){const t=Js(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Ac(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ka(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Xu(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Xu(e))).join(",")),t.ce=e}return t.ce}function zc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!bc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Oc(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yc(e.startAt,t.startAt)&&yc(e.endAt,t.endAt)}function qc(e){return wa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Wc(e,t){return e.filters.filter((e=>e instanceof _c&&e.field.isEqual(t)))}function Gc(e,t,n){let r=Ku,i=!0;for(const o of Wc(e,t)){let e=Ku,t=!0;switch(o.op){case"<":case"<=":e=uc(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=Ku}lc({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];lc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Kc(e,t,n){let r=Gu,i=!0;for(const o of Wc(e,t)){let e=Gu,t=!0;switch(o.op){case">=":case">":e=cc(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=Gu}hc({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];hc({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Hc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Qc(e,t,n,r,i,o,s,a){return new Hc(e,t,n,r,i,o,s,a)}function Yc(e){return new Hc(e)}function $c(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Jc(e){return null!==e.collectionGroup}function Xc(e){const t=Js(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Cu(ba.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new vc(r,n))})),e.has(ba.keyField().canonicalString())||t.le.push(new vc(ba.keyField(),n))}return t.le}function Zc(e){const t=Js(e);return t.he||(t.he=el(t,Xc(e))),t.he}function el(e,t){if("F"===e.limitType)return Vc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new vc(e.field,t)}));const n=e.endAt?new mc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new mc(e.startAt.position,e.startAt.inclusive):null;return Vc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function tl(e,t){const n=e.filters.concat([t]);return new Hc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function nl(e,t,n){return new Hc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function rl(e,t){return zc(Zc(e),Zc(t))&&e.limitType===t.limitType}function il(e){return"".concat(Bc(Zc(e)),"|lt:").concat(e.limitType)}function ol(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Cc(e))).join(", "),"]")),Ka(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Xu(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Xu(e))).join(",")),"Target(".concat(t,")")}(Zc(e)),"; limitType=").concat(e.limitType,")")}function sl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Xc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=gc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Xc(e),t))&&!(e.endAt&&!function(e,t,n){const r=gc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Xc(e),t))}(e,t)}function al(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ul(e){return(t,n)=>{let r=!1;for(const i of Xc(e)){const e=cl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function cl(e,t,n){const r=e.field.isKeyField()?wa.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?$u(r,i):Ys()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ys()}}class ll{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Iu(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return xu(this.inner)}size(){return this.innerSize}}const hl=new Au(wa.comparator);function dl(){return hl}const fl=new Au(wa.comparator);function pl(){let e=fl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ml(e){let t=fl;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function gl(){return vl()}function yl(){return vl()}function vl(){return new ll((e=>e.toString()),((e,t)=>e.isEqual(t)))}const bl=new Au(wa.comparator),wl=new Cu(wa.comparator);function _l(){let e=wl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const El=new Cu(ha);function Sl(){return El}function Tl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ha(t)?"-0":t}}function Il(e){return{integerValue:""+e}}function xl(e,t){return Qa(t)?Il(t):Tl(e,t)}class Al{constructor(){this._=void 0}}function Ol(e,t,n){return e instanceof Dl?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Vu(t)&&(t=Bu(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Pl?Nl(e,t):e instanceof Rl?Ml(e,t):function(e,t){const n=Cl(e,t),r=jl(n)+jl(e.Ie);return tc(n)&&tc(e.Ie)?Il(r):Tl(e.serializer,r)}(e,t)}function kl(e,t,n){return e instanceof Pl?Nl(e,t):e instanceof Rl?Ml(e,t):n}function Cl(e,t){return e instanceof Ll?function(e){return tc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Dl extends Al{}class Pl extends Al{constructor(e){super(),this.elements=e}}function Nl(e,t){const n=Fl(t);for(const r of e.elements)n.some((e=>Qu(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Rl extends Al{constructor(e){super(),this.elements=e}}function Ml(e,t){let n=Fl(t);for(const r of e.elements)n=n.filter((e=>!Qu(e,r)));return{arrayValue:{values:n}}}class Ll extends Al{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function jl(e){return Fu(e.integerValue||e.doubleValue)}function Fl(e){return nc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ul{constructor(e,t){this.field=e,this.transform=t}}class Vl{constructor(e,t){this.version=e,this.transformResults=t}}class Bl{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bl}static exists(e){return new Bl(void 0,e)}static updateTime(e){return new Bl(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class ql{}function Wl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new eh(e.key,Bl.none()):new Yl(e.key,e.data,Bl.none());{const n=e.data,r=dc.empty();let i=new Cu(ba.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new $l(e.key,r,new Nu(i.toArray()),Bl.none())}}function Gl(e,t,n){e instanceof Yl?function(e,t,n){const r=e.value.clone(),i=Xl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof $l?function(e,t,n){if(!zl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Xl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Jl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Kl(e,t,n,r){return e instanceof Yl?function(e,t,n,r){if(!zl(e.precondition,t))return n;const i=e.value.clone(),o=Zl(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof $l?function(e,t,n,r){if(!zl(e.precondition,t))return n;const i=Zl(e.fieldTransforms,r,t),o=t.data;return o.setAll(Jl(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return zl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hl(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Cl(r.transform,e||null);null!=i&&(null===n&&(n=dc.empty()),n.set(r.field,i))}return n||null}function Ql(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&da(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Pl&&t instanceof Pl||e instanceof Rl&&t instanceof Rl?da(e.elements,t.elements,Qu):e instanceof Ll&&t instanceof Ll?Qu(e.Ie,t.Ie):e instanceof Dl&&t instanceof Dl}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Yl extends ql{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class $l extends ql{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Jl(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Xl(e,t,n){const r=new Map;$s(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,kl(s,a,n[i]))}return r}function Zl(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Ol(e,o,t))}return r}class eh extends ql{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class th extends ql{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class nh{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Gl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Kl(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Kl(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=yl();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Wl(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(ma.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),_l())}isEqual(e){return this.batchId===e.batchId&&da(this.mutations,e.mutations,((e,t)=>Ql(e,t)))&&da(this.baseMutations,e.baseMutations,((e,t)=>Ql(e,t)))}}class rh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){$s(e.mutations.length===n.length);let r=bl;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new rh(e,t,n,r)}}class ih{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class oh{constructor(e,t){this.count=e,this.unchangedNames=t}}var sh,ah;function uh(e){switch(e){default:return Ys();case Xs.CANCELLED:case Xs.UNKNOWN:case Xs.DEADLINE_EXCEEDED:case Xs.RESOURCE_EXHAUSTED:case Xs.INTERNAL:case Xs.UNAVAILABLE:case Xs.UNAUTHENTICATED:return!1;case Xs.INVALID_ARGUMENT:case Xs.NOT_FOUND:case Xs.ALREADY_EXISTS:case Xs.PERMISSION_DENIED:case Xs.FAILED_PRECONDITION:case Xs.ABORTED:case Xs.OUT_OF_RANGE:case Xs.UNIMPLEMENTED:case Xs.DATA_LOSS:return!0}}function ch(e){if(void 0===e)return Ks("GRPC error has no .code"),Xs.UNKNOWN;switch(e){case sh.OK:return Xs.OK;case sh.CANCELLED:return Xs.CANCELLED;case sh.UNKNOWN:return Xs.UNKNOWN;case sh.DEADLINE_EXCEEDED:return Xs.DEADLINE_EXCEEDED;case sh.RESOURCE_EXHAUSTED:return Xs.RESOURCE_EXHAUSTED;case sh.INTERNAL:return Xs.INTERNAL;case sh.UNAVAILABLE:return Xs.UNAVAILABLE;case sh.UNAUTHENTICATED:return Xs.UNAUTHENTICATED;case sh.INVALID_ARGUMENT:return Xs.INVALID_ARGUMENT;case sh.NOT_FOUND:return Xs.NOT_FOUND;case sh.ALREADY_EXISTS:return Xs.ALREADY_EXISTS;case sh.PERMISSION_DENIED:return Xs.PERMISSION_DENIED;case sh.FAILED_PRECONDITION:return Xs.FAILED_PRECONDITION;case sh.ABORTED:return Xs.ABORTED;case sh.OUT_OF_RANGE:return Xs.OUT_OF_RANGE;case sh.UNIMPLEMENTED:return Xs.UNIMPLEMENTED;case sh.DATA_LOSS:return Xs.DATA_LOSS;default:return Ys()}}(ah=sh||(sh={}))[ah.OK=0]="OK",ah[ah.CANCELLED=1]="CANCELLED",ah[ah.UNKNOWN=2]="UNKNOWN",ah[ah.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ah[ah.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ah[ah.NOT_FOUND=5]="NOT_FOUND",ah[ah.ALREADY_EXISTS=6]="ALREADY_EXISTS",ah[ah.PERMISSION_DENIED=7]="PERMISSION_DENIED",ah[ah.UNAUTHENTICATED=16]="UNAUTHENTICATED",ah[ah.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ah[ah.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ah[ah.ABORTED=10]="ABORTED",ah[ah.OUT_OF_RANGE=11]="OUT_OF_RANGE",ah[ah.UNIMPLEMENTED=12]="UNIMPLEMENTED",ah[ah.INTERNAL=13]="INTERNAL",ah[ah.UNAVAILABLE=14]="UNAVAILABLE",ah[ah.DATA_LOSS=15]="DATA_LOSS";let lh=null;function hh(){return new TextEncoder}const dh=new Us([4294967295,4294967295],0);function fh(e){const t=hh().encode(e),n=new Fs;return n.update(t),new Uint8Array(n.digest())}function ph(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Us([n,r],0),new Us([i,o],0)]}class mh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new gh("Invalid padding: ".concat(t));if(n<0)throw new gh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new gh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new gh("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Us.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Us.fromNumber(n)));return 1===r.compare(dh)&&(r=new Us([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=fh(e),[n,r]=ph(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new mh(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=fh(e),[n,r]=ph(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class gh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,vh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new yh(ma.min(),r,new Au(ha),dl(),_l())}}class vh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vh(n,t,_l(),_l(),_l())}}class bh{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class wh{constructor(e,t){this.targetId=e,this.fe=t}}class _h{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mu.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Eh{constructor(){this.ge=0,this.pe=Ih(),this.ye=Mu.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=_l(),t=_l(),n=_l();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ys()}})),new vh(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Ih()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,$s(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Sh{constructor(e){this.Le=e,this.ke=new Map,this.qe=dl(),this.Qe=Th(),this.Ke=new Au(ha)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Ys()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(qc(i))if(0===n){const e=new wa(i.path);this.We(t,e,pc.newNoDocument(e,ma.min()))}else $s(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==lh||lh.tt(function(e,t,n,r,i){var o,s,a,u,c,l;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(u=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==u?u:0,padding:null!==(l=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=Uu(n).toUint8Array()}catch(e){if(e instanceof Ru)return Hs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new mh(o,r,i)}catch(e){return Hs(e instanceof gh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&qc(i.target)){const t=new wa(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,pc.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=_l();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new yh(e,t,this.Ke,this.qe,n);return this.qe=dl(),this.Qe=Th(),this.Ke=new Au(ha),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Eh,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Cu(ha),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Gs("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Eh),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Th(){return new Au(wa.comparator)}function Ih(){return new Au(wa.comparator)}const xh={asc:"ASCENDING",desc:"DESCENDING"},Ah={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oh={and:"AND",or:"OR"};class kh{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ch(e,t){return e.useProto3Json||Ka(t)?t:{value:t}}function Dh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ph(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Nh(e,t){return Dh(e,t.toTimestamp())}function Rh(e){return $s(!!e),ma.fromTimestamp(function(e){const t=ju(e);return new pa(t.seconds,t.nanos)}(e))}function Mh(e,t){return Lh(e,t).canonicalString()}function Lh(e,t){const n=function(e){return new ya(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function jh(e){const t=ya.fromString(e);return $s(od(t)),t}function Fh(e,t){return Mh(e.databaseId,t.path)}function Uh(e,t){const n=jh(t);if(n.get(1)!==e.databaseId.projectId)throw new Zs(Xs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Zs(Xs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wa(qh(n))}function Vh(e,t){return Mh(e.databaseId,t)}function Bh(e){const t=jh(e);return 4===t.length?ya.emptyPath():qh(t)}function zh(e){return new ya(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qh(e){return $s(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Wh(e,t,n){return{name:Fh(e,t),fields:n.value.mapValue.fields}}function Gh(e,t,n){const r=Uh(e,t.name),i=Rh(t.updateTime),o=t.createTime?Rh(t.createTime):ma.min(),s=new dc({mapValue:{fields:t.fields}}),a=pc.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Kh(e,t){let n;if(t instanceof Yl)n={update:Wh(e,t.key,t.value)};else if(t instanceof eh)n={delete:Fh(e,t.key)};else if(t instanceof $l)n={update:Wh(e,t.key,t.data),updateMask:id(t.fieldMask)};else{if(!(t instanceof th))return Ys();n={verify:Fh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Dl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Pl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Rl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ll)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Ys()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Nh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ys()}(e,t.precondition)),n}function Hh(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Bl.updateTime(Rh(e.updateTime)):void 0!==e.exists?Bl.exists(e.exists):Bl.none()}(t.currentDocument):Bl.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)$s("REQUEST_TIME"===t.setToServerValue),n=new Dl;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Pl(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Rl(e)}else"increment"in t?n=new Ll(e,t.increment):Ys();const r=ba.fromServerFormat(t.fieldPath);return new Ul(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Uh(e,t.update.name),o=new dc({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new Nu(t.map((e=>ba.fromServerFormat(e))))}(t.updateMask);return new $l(i,o,e,n,r)}return new Yl(i,o,n,r)}if(t.delete){const r=Uh(e,t.delete);return new eh(r,n)}if(t.verify){const r=Uh(e,t.verify);return new th(r,n)}return Ys()}function Qh(e,t){return{documents:[Vh(e,t.path)]}}function Yh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Vh(e,i);const o=function(e){if(0!==e.length)return rd(Ec.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:td(e.field),direction:Xh(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=Ch(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function $h(e){let t=Bh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){$s(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Jh(e);return t instanceof Ec&&Ic(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new vc(nd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ka(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){const t=!!e.before,n=e.values||[];return new mc(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new mc(n,t)}(n.endAt)),Qc(t,i,s,o,a,"F",u,c)}function Jh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=nd(e.unaryFilter.field);return _c.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=nd(e.unaryFilter.field);return _c.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=nd(e.unaryFilter.field);return _c.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=nd(e.unaryFilter.field);return _c.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ys()}}(e):void 0!==e.fieldFilter?function(e){return _c.create(nd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ys()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ec.create(e.compositeFilter.filters.map((e=>Jh(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ys()}}(e.compositeFilter.op))}(e):Ys()}function Xh(e){return xh[e]}function Zh(e){return Ah[e]}function ed(e){return Oh[e]}function td(e){return{fieldPath:e.canonicalString()}}function nd(e){return ba.fromServerFormat(e.fieldPath)}function rd(e){return e instanceof _c?function(e){if("=="===e.op){if(ic(e.value))return{unaryFilter:{field:td(e.field),op:"IS_NAN"}};if(rc(e.value))return{unaryFilter:{field:td(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ic(e.value))return{unaryFilter:{field:td(e.field),op:"IS_NOT_NAN"}};if(rc(e.value))return{unaryFilter:{field:td(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:td(e.field),op:Zh(e.op),value:e.value}}}(e):e instanceof Ec?function(e){const t=e.getFilters().map((e=>rd(e)));return 1===t.length?t[0]:{compositeFilter:{op:ed(e.op),filters:t}}}(e):Ys()}function id(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function od(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class sd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ma.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ma.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Mu.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new sd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ad{constructor(e){this.ct=e}}function ud(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:cd(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Fh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Dh(e,t.version.toTimestamp()),createTime:Dh(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ld(t.version)};else{if(!t.isUnknownDocument())return Ys();r.unknownDocument={path:n.path.toArray(),version:ld(t.version)}}return r}function cd(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ld(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function hd(e){const t=new pa(e.seconds,e.nanoseconds);return ma.fromTimestamp(t)}function dd(e,t){const n=(t.baseMutations||[]).map((t=>Hh(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>Hh(e.ct,t))),i=pa.fromMillis(t.localWriteTimeMs);return new nh(t.batchId,i,n,r)}function fd(e){const t=hd(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?hd(e.lastLimboFreeSnapshotVersion):ma.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return $s(1===e.documents.length),Zc(Yc(Bh(e.documents[0])))}(e.query):function(e){return Zc($h(e))}(e.query),new sd(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Mu.fromBase64String(e.resumeToken))}function pd(e,t){const n=ld(t.snapshotVersion),r=ld(t.lastLimboFreeSnapshotVersion);let i;i=qc(t.target)?Qh(e.ct,t.target):Yh(e.ct,t.target).ut;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Bc(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function md(e){const t=$h({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?nl(t,t.limit,"L"):t}function gd(e,t){return new ih(t.largestBatchId,Hh(e.ct,t.overlayMutation))}function yd(e,t){const n=t.path.lastSegment();return[e,Ya(t.path.popLast()),n]}function vd(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ld(r.readTime),documentKey:Ya(r.documentKey.path),largestBatchId:r.largestBatchId}}class bd{getBundleMetadata(e,t){return wd(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:hd(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return wd(e).put(function(e){return{bundleId:e.id,createTime:ld(Rh(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return _d(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:md(e.bundledQuery),readTime:hd(e.readTime)}}(e)}))}saveNamedQuery(e,t){return _d(e).put(function(e){return{name:e.name,readTime:ld(Rh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function wd(e){return Su(e,"bundles")}function _d(e){return Su(e,"namedQueries")}class Ed{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Ed(e,n)}getOverlay(e,t){return Sd(e).get(yd(this.userId,t)).next((e=>e?gd(this.serializer,e):null))}getOverlays(e,t){const n=gl();return Na.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new ih(t,i);r.push(this.ht(e,o))})),Na.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Ya(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Sd(e).H("collectionPathOverlayIndex",r))})),Na.waitFor(i)}getOverlaysForCollection(e,t,n){const r=gl(),i=Ya(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Sd(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=gd(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=gl();let o;const s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sd(e).Y({index:"collectionGroupOverlayIndex",range:s},((e,t,n)=>{const s=gd(this.serializer,t);i.size()<r||s.largestBatchId===o?(i.set(s.getKey(),s),o=s.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return Sd(e).put(function(e,t,n){const[r,i,o]=yd(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Kh(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function Sd(e){return Su(e,"documentOverlays")}class Td{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Fu(e.integerValue));else if("doubleValue"in e){const n=Fu(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Ha(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Uu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?ac(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Ys()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),wa.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Id(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function xd(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Id(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Td.bt=new Td;class Ad{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=xd(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=xd(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Od{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class kd{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Cd{constructor(){this.Gt=new Ad,this.zt=new Od(this.Gt),this.jt=new kd(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class Dd{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Dd(this.indexId,this.documentKey,this.arrayValue,n)}}function Pd(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Nd(e.arrayValue,t.arrayValue),0!==n?n:(n=Nd(e.directionalValue,t.directionalValue),0!==n?n:wa.comparator(e.documentKey,t.documentKey)))}function Nd(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Rd{constructor(e){this.Yt=new Cu(((e,t)=>ba.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if($s(e.collectionGroup===this.collectionId),this.en)return!1;const t=Ea(e);if(void 0!==t&&!this.nn(t))return!1;const n=Sa(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new Cu(ba.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new Ta(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new Ta(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new Ta(n.field,"asc"===n.dir?0:1)));return new _a(_a.UNKNOWN_ID,this.collectionId,t,Ia.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Md(e){var t,n;if($s(e instanceof _c||e instanceof Ec),e instanceof _c){if(e instanceof Lc){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>_c.create(e.field,"==",t))))||[];return Ec.create(r,"or")}return e}const r=e.filters.map((e=>Md(e)));return Ec.create(r,e.op)}function Ld(e){if(0===e.getFilters().length)return[];const t=Vd(Md(e));return $s(Ud(t)),jd(t)||Fd(t)?[t]:t.getFilters()}function jd(e){return e instanceof _c}function Fd(e){return e instanceof Ec&&Ic(e)}function Ud(e){return jd(e)||Fd(e)||function(e){if(e instanceof Ec&&Tc(e)){for(const t of e.getFilters())if(!jd(t)&&!Fd(t))return!1;return!0}return!1}(e)}function Vd(e){if($s(e instanceof _c||e instanceof Ec),e instanceof _c)return e;if(1===e.filters.length)return Vd(e.filters[0]);const t=e.filters.map((e=>Vd(e)));let n=Ec.create(t,e.op);return n=qd(n),Ud(n)?n:($s(n instanceof Ec),$s(Sc(n)),$s(n.filters.length>1),n.filters.reduce(((e,t)=>Bd(e,t))))}function Bd(e,t){let n;return $s(e instanceof _c||e instanceof Ec),$s(t instanceof _c||t instanceof Ec),n=e instanceof _c?t instanceof _c?function(e,t){return Ec.create([e,t],"and")}(e,t):zd(e,t):t instanceof _c?zd(t,e):function(e,t){if($s(e.filters.length>0&&t.filters.length>0),Sc(e)&&Sc(t))return kc(e,t.getFilters());const n=Tc(e)?e:t,r=Tc(e)?t:e,i=n.filters.map((e=>Bd(e,r)));return Ec.create(i,"or")}(e,t),qd(n)}function zd(e,t){if(Sc(t))return kc(t,e.getFilters());{const n=t.filters.map((t=>Bd(e,t)));return Ec.create(n,"or")}}function qd(e){if($s(e instanceof _c||e instanceof Ec),e instanceof _c)return e;const t=e.getFilters();if(1===t.length)return qd(t[0]);if(xc(e))return e;const n=t.map((e=>qd(e))),r=[];return n.forEach((t=>{t instanceof _c?r.push(t):t instanceof Ec&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:Ec.create(r,e.op)}class Wd{constructor(){this._n=new Gd}addToCollectionParentIndex(e,t){return this._n.add(t),Na.resolve()}getCollectionParents(e,t){return Na.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return Na.resolve()}deleteFieldIndex(e,t){return Na.resolve()}deleteAllFieldIndexes(e){return Na.resolve()}createTargetIndexes(e,t){return Na.resolve()}getDocumentsMatchingTarget(e,t){return Na.resolve(null)}getIndexType(e,t){return Na.resolve(0)}getFieldIndexes(e,t){return Na.resolve([])}getNextCollectionGroupToUpdate(e){return Na.resolve(null)}getMinOffset(e,t){return Na.resolve(Oa.min())}getMinOffsetFromCollectionGroup(e,t){return Na.resolve(Oa.min())}updateCollectionGroup(e,t,n){return Na.resolve()}updateIndexEntries(e,t){return Na.resolve()}}class Gd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Cu(ya.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Cu(ya.comparator)).toArray()}}const Kd=new Uint8Array(0);class Hd{constructor(e,t){this.databaseId=t,this.an=new Gd,this.un=new ll((e=>Bc(e)),((e,t)=>zc(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:Ya(r)};return Qd(e).put(i)}return Na.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[fa(t),""],!1,!0);return Qd(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Xa(r.parent))}return n}))}addFieldIndex(e,t){const n=$d(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=Jd(e);return i.next((e=>{n.put(vd(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=$d(e),r=Jd(e),i=Yd(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=$d(e),n=Yd(e),r=Jd(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return Na.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Rd(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Yd(e);let r=!0;const i=new Map;return Na.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=_l();const r=[];return Na.forEach(i,((i,o)=>{Gs("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Bc(t)));const s=function(e,t){const n=Ea(t);if(void 0===n)return null;for(const r of Wc(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),a=function(e,t){const n=new Map;for(const r of Sa(t))for(const t of Wc(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of Sa(t)){const t=0===i.kind?Gc(e,i.fieldPath,e.startAt):Kc(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new mc(n,r)}(o,i),c=function(e,t){const n=[];let r=!0;for(const i of Sa(t)){const t=0===i.kind?Kc(e,i.fieldPath,e.endAt):Gc(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new mc(n,r)}(o,i),l=this.hn(i,o,u),h=this.hn(i,o,c),d=this.Pn(i,o,a),f=this.In(i.indexId,s,l,u.inclusive,h,c.inclusive,d);return Na.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=wa.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return Na.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Ld(Ec.create(e.filters,"and")).map((t=>Vc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,s){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),u=a/(null!=t?t.length:1),c=[];for(let l=0;l<a;++l){const a=t?this.Tn(t[l/u]):Kd,h=this.En(e,a,n[l%u],r),d=this.dn(e,a,i[l%u],o),f=s.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,r){const i=new Dd(e,wa.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new Dd(e,wa.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new Rd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return Na.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Cu(ba.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new Cd;for(const r of Sa(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);Td.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new Cd;return Td.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new Cd;return Td.bt.Pt(ec(this.databaseId,t),n.Ht(function(e){const t=Sa(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new Cd);let i=0;for(const o of Sa(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&nc(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);Td.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new Cd;n.seed(e.Wt()),Td.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof _c&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=$d(e),r=Jd(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return Na.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new Ia(t.sequenceNumber,new Oa(hd(t.readTime),new wa(Xa(t.documentKey)),t.largestBatchId)):Ia.empty(),r=e.fields.map((e=>{let[t,n]=e;return new Ta(ba.fromServerFormat(t),n)}));return new _a(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ha(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=$d(e),i=Jd(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>Na.forEach(t,(t=>i.put(vd(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return Na.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?Na.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),Na.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?Na.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return Yd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return Yd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=Yd(e);let i=new Cu(Pd);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new Dd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new Cu(Pd);const r=this.An(t,e);if(null==r)return n;const i=Ea(t);if(null!=i){const o=e.data.field(i.fieldPath);if(nc(o))for(const i of o.arrayValue.values||[])n=n.add(new Dd(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new Dd(t.indexId,e.key,Kd,r));return n}wn(e,t,n,r,i){Gs("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),s=t.getIterator();let a=Pu(o),u=Pu(s);for(;a||u;){let e=!1,t=!1;if(a&&u){const r=n(a,u);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(u),u=Pu(s)):t?(i(a),a=Pu(o)):(a=Pu(o),u=Pu(s))}}(r,i,Pd,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),Na.waitFor(o)}gn(e){let t=1;return Jd(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Pd(e,t))).filter(((e,t,n)=>!t||0!==Pd(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=Pd(o,e),i=Pd(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,Kd,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,Kd,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return Pd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Xd)}getMinOffset(e,t){return Na.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||Ys())))).next(Xd)}}function Qd(e){return Su(e,"collectionParents")}function Yd(e){return Su(e,"indexEntries")}function $d(e){return Su(e,"indexConfiguration")}function Jd(e){return Su(e,"indexState")}function Xd(e){$s(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ka(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Oa(t.readTime,t.documentKey,n)}const Zd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ef{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new ef(e,ef.DEFAULT_COLLECTION_PERCENTILE,ef.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function tf(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},((e,t,n)=>(a++,n.delete())));o.push(u.next((()=>{$s(1===a)})));const c=[];for(const l of n.mutations){const e=tu(t,l.key.path,n.batchId);o.push(i.delete(e)),c.push(l.key)}return Na.waitFor(o).next((()=>c))}function nf(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ys();t=e.noDocument}return JSON.stringify(t).length}ef.DEFAULT_COLLECTION_PERCENTILE=10,ef.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ef.DEFAULT=new ef(41943040,ef.DEFAULT_COLLECTION_PERCENTILE,ef.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ef.DISABLED=new ef(-1,0,0);class rf{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){$s(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new rf(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sf(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=af(e),o=sf(e);return o.add({}).next((s=>{$s("number"==typeof s);const a=new nh(s,t,n,r),u=function(e,t,n){const r=n.baseMutations.map((t=>Kh(e.ct,t))),i=n.mutations.map((t=>Kh(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let l=new Cu(((e,t)=>ha(e.canonicalString(),t.canonicalString())));for(const e of r){const t=tu(this.userId,e.key.path,s);l=l.add(e.key.path.popLast()),c.push(o.put(u)),c.push(i.put(t,nu))}return l.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[s]=a.keys()})),Na.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return sf(e).get(t).next((e=>e?($s(e.userId===this.userId),dd(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?Na.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return sf(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&($s(t.batchId>=n),i=dd(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return sf(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sf(e).W("userMutationsIndex",t).next((e=>e.map((e=>dd(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=eu(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return af(e).Y({range:r},((n,r,o)=>{const[s,a,u]=n,c=Xa(a);if(s===this.userId&&t.path.isEqual(c))return sf(e).get(u).next((e=>{if(!e)throw Ys();$s(e.userId===this.userId),i.push(dd(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cu(ha);const r=[];return t.forEach((t=>{const i=eu(this.userId,t.path),o=IDBKeyRange.lowerBound(i),s=af(e).Y({range:o},((e,r,i)=>{const[o,s,a]=e,u=Xa(s);o===this.userId&&t.path.isEqual(u)?n=n.add(a):i.done()}));r.push(s)})),Na.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=eu(this.userId,n),o=IDBKeyRange.lowerBound(i);let s=new Cu(ha);return af(e).Y({range:o},((e,t,i)=>{const[o,a,u]=e,c=Xa(a);o===this.userId&&n.isPrefixOf(c)?c.length===r&&(s=s.add(u)):i.done()})).next((()=>this.Fn(e,s)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(sf(e).get(t).next((e=>{if(null===e)throw Ys();$s(e.userId===this.userId),n.push(dd(this.serializer,e))})))})),Na.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return tf(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),Na.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Na.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return af(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Xa(e[1]);r.push(t)}else n.done()})).next((()=>{$s(0===r.length)}))}))}containsKey(e,t){return of(e,this.userId,t)}xn(e){return uf(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function of(e,t,n){const r=eu(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return af(e).Y({range:o,J:!0},((e,n,r)=>{const[o,a,u]=e;o===t&&a===i&&(s=!0),r.done()})).next((()=>s))}function sf(e){return Su(e,"mutations")}function af(e){return Su(e,"documentMutations")}function uf(e){return Su(e,"mutationQueues")}class cf{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new cf(0)}static Bn(){return new cf(-1)}}class lf{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new cf(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>ma.fromTimestamp(new pa(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>hf(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>($s(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return hf(e).Y(((o,s)=>{const a=fd(s);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>Na.waitFor(i))).next((()=>r))}forEachTarget(e,t){return hf(e).Y(((e,n)=>{const r=fd(n);t(r)}))}Ln(e){return df(e).get("targetGlobalKey").next((e=>($s(null!==e),e)))}kn(e,t){return df(e).put("targetGlobalKey",t)}qn(e,t){return hf(e).put(pd(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Bc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return hf(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=fd(n);zc(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=ff(e);return t.forEach((t=>{const o=Ya(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),Na.waitFor(r)}removeMatchingKeys(e,t,n){const r=ff(e);return Na.forEach(t,(t=>{const i=Ya(t.path);return Na.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=ff(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ff(e);let i=_l();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Xa(e[1]),o=new wa(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=Ya(t.path),r=IDBKeyRange.bound([n],[fa(n)],!1,!0);let i=0;return ff(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,o]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return hf(e).get(t).next((e=>e?fd(e):null))}}function hf(e){return Su(e,"targets")}function df(e){return Su(e,"targetGlobal")}function ff(e){return Su(e,"targetDocuments")}function pf(e,t){let[n,r]=e,[i,o]=t;const s=ha(n,i);return 0===s?ha(r,o):s}class mf{constructor(e){this.Kn=e,this.buffer=new Cu(pf),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();pf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Gs("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Fa(e)?Gs("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await Pa(e)}await this.zn(3e5)}))}}class yf{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return Na.resolve(Ga._e);const n=new mf(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Gs("LruGarbageCollector","Garbage collection skipped; disabled"),Na.resolve(Zd)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Gs("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Zd):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,s,a,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Gs("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,s=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(u=Date.now(),Ws()<=It.DEBUG&&Gs("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-a)+"ms\n"+"Total Duration: ".concat(u-c,"ms")),Na.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function vf(e,t){return new yf(e,t)}class bf{constructor(e,t){this.db=e,this.garbageCollector=vf(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return wf(e,n)}removeReference(e,t,n){return wf(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return wf(e,t)}er(e,t){return function(e,t){let n=!1;return uf(e).Z((r=>of(e,r,t).next((e=>(e&&(n=!0),Na.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,s)=>{if(s<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,ma.min()),ff(e).delete(function(e){return[0,Ya(e.path)]}(o)))))}));r.push(t)}})).next((()=>Na.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return wf(e,t)}Xn(e,t){const n=ff(e);let r,i=Ga._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[o,s]=e,{path:a,sequenceNumber:u}=n;0===o?(i!==Ga._e&&t(new wa(Xa(r)),i),i=u,r=a):i=Ga._e})).next((()=>{i!==Ga._e&&t(new wa(Xa(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function wf(e,t){return ff(e).put(function(e,t){return{targetId:0,path:Ya(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class _f{constructor(){this.changes=new ll((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Na.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ef{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return xf(e).put(n)}removeEntry(e,t,n){return xf(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],cd(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=pc.newInvalidDocument(t);return xf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Af(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:pc.newInvalidDocument(t)};return xf(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Af(t))},((e,r)=>{n={document:this.nr(t,r),size:nf(r)}})).next((()=>n))}getEntries(e,t){let n=dl();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=dl(),r=new Au(wa.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,nf(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return Na.resolve();let r=new Cu(kf);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(Af(r.first()),Af(r.last())),o=r.getIterator();let s=o.getNext();return xf(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=wa.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;s&&kf(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.U(Af(s)):r.done()})).next((()=>{for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,s=[o.popLast().toArray(),o.lastSegment(),cd(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xf(e).W(IDBKeyRange.bound(s,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=dl();for(const i of e){const e=this.nr(wa.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(sl(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=dl();const o=Of(t,n),s=Of(t,Oa.max());return xf(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},((e,t,n)=>{const o=this.nr(wa.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new Tf(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return If(e).get("remoteDocumentGlobalKey").next((e=>($s(!!e),e)))}tr(e,t){return If(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Gh(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=wa.fromSegments(t.noDocument.path),r=hd(t.noDocument.readTime);n=pc.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ys();{const e=wa.fromSegments(t.unknownDocument.path),r=hd(t.unknownDocument.version);n=pc.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new pa(e[0],e[1]);return ma.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(ma.min()))return e}return pc.newInvalidDocument(e)}}function Sf(e){return new Ef(e)}class Tf extends _f{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new ll((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new Cu(((e,t)=>ha(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const s=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,s.readTime)),o.isValidDocument()){const a=ud(this.ar.serializer,o);r=r.add(i.path.popLast());const u=nf(a);n+=u-s.size,t.push(this.ar.addEntry(e,i,a))}else if(n-=s.size,this.trackRemovals){const n=ud(this.ar.serializer,o.convertToNoDocument(ma.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),Na.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function If(e){return Su(e,"remoteDocumentGlobal")}function xf(e){return Su(e,"remoteDocumentsV14")}function Af(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Of(e,t){const n=t.documentKey.path.toArray();return[e,cd(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function kf(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=ha(n[o],r[o]),i)return i;return i=ha(n.length,r.length),i||(i=ha(n[n.length-2],r[r.length-2]),i||ha(n[n.length-1],r[r.length-1]))}class Cf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Df{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Kl(n.mutation,e,Nu.empty(),pa.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,_l()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_l();const r=gl();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=pl();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=gl();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,_l())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=dl();const o=vl(),s=vl();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof $l)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Kl(s.mutation,t,s.mutation.getFieldMask(),pa.now())):o.set(t.key,Nu.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new Cf(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=vl();let r=new Au(((e,t)=>e-t)),i=_l();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Nu.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||_l()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,u=r.value,c=yl();u.forEach((e=>{if(!i.has(e)){const r=Wl(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Na.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return wa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Na.resolve(gl());let s=-1,a=i;return o.next((t=>Na.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Na.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,_l()))).next((e=>({batchId:s,changes:ml(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new wa(t)).next((e=>{let t=pl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=pl();return this.indexManager.getCollectionParents(e,i).next((s=>Na.forEach(s,(s=>{const a=function(e,t){return new Hc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,pc.newInvalidDocument(r)))}));let n=pl();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Kl(o.mutation,r,Nu.empty(),pa.now()),sl(t,r)&&(n=n.insert(e,r))})),n}))}}class Pf{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return Na.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Rh(e.createTime)}}(t)),Na.resolve()}getNamedQuery(e,t){return Na.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:md(e.bundledQuery),readTime:Rh(e.readTime)}}(t)),Na.resolve()}}class Nf{constructor(){this.overlays=new Au(wa.comparator),this.hr=new Map}getOverlay(e,t){return Na.resolve(this.overlays.get(t))}getOverlays(e,t){const n=gl();return Na.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),Na.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),Na.resolve()}getOverlaysForCollection(e,t,n){const r=gl(),i=t.length+1,o=new wa(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Na.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Au(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=gl(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=gl(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Na.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ih(t,n));let i=this.hr.get(t);void 0===i&&(i=_l(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class Rf{constructor(){this.Pr=new Cu(Mf.Ir),this.Tr=new Cu(Mf.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Mf(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Mf(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new wa(new ya([])),n=new Mf(t,e),r=new Mf(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new wa(new ya([])),n=new Mf(t,e),r=new Mf(t,e+1);let i=_l();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new Mf(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Mf{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return wa.comparator(e.key,t.key)||ha(e.pr,t.pr)}static Er(e,t){return ha(e.pr,t.pr)||wa.comparator(e.key,t.key)}}class Lf{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Cu(Mf.Ir)}checkEmpty(e){return Na.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nh(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new Mf(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Na.resolve(o)}lookupMutationBatch(e,t){return Na.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return Na.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Na.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return Na.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Mf(t,0),r=new Mf(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),Na.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cu(ha);return t.forEach((e=>{const t=new Mf(e,0),r=new Mf(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),Na.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;wa.isDocumentKey(i)||(i=i.child(""));const o=new Mf(new wa(i),0);let s=new Cu(ha);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),Na.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){$s(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Na.forEach(t.mutations,(r=>{const i=new Mf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Mf(t,0),r=this.wr.firstAfterOrEqual(n);return Na.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Na.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class jf{constructor(e){this.vr=e,this.docs=new Au(wa.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Na.resolve(n?n.document.mutableCopy():pc.newInvalidDocument(t))}getEntries(e,t){let n=dl();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():pc.newInvalidDocument(e))})),Na.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=dl();const o=t.path,s=new wa(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ka(Aa(s),n)<=0||(r.has(s.key)||sl(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Na.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Ys()}Fr(e,t){return Na.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ff(this)}getSize(e){return Na.resolve(this.size)}}class Ff extends _f{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),Na.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Uf{constructor(e){this.persistence=e,this.Mr=new ll((e=>Bc(e)),zc),this.lastRemoteSnapshotVersion=ma.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Rf,this.targetCount=0,this.Br=cf.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),Na.resolve()}getLastRemoteSnapshotVersion(e){return Na.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Na.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),Na.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),Na.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new cf(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,Na.resolve()}updateTargetData(e,t){return this.qn(t),Na.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,Na.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Na.waitFor(i).next((()=>r))}getTargetCount(e){return Na.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return Na.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),Na.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Na.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),Na.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return Na.resolve(n)}containsKey(e,t){return Na.resolve(this.Nr.containsKey(t))}}class Vf{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ga(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Uf(this),this.indexManager=new Wd,this.remoteDocumentCache=function(e){return new jf(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new ad(t),this.$r=new Pf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Nf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new Lf(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Gs("MemoryPersistence","Starting transaction:",e);const r=new Bf(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return Na.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class Bf extends Da{constructor(e){super(),this.currentSequenceNumber=e}}class zf{constructor(e){this.persistence=e,this.zr=new Rf,this.jr=null}static Hr(e){return new zf(e)}get Jr(){if(this.jr)return this.jr;throw Ys()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),Na.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),Na.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),Na.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Na.forEach(this.Jr,(n=>{const r=wa.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,ma.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return Na.or([()=>Na.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class qf{constructor(e){this.serializer=e}N(e,t,n,r){const i=new Ra("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Za,{unique:!0}),e.createObjectStore("documentMutations")}(e),Wf(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=Na.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Wf(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ma.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Za,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return Na.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:pu});t.createIndex("collectionPathOverlayIndex",mu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",gu,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:ru});t.createIndex("documentKeyIndex",iu),t.createIndex("collectionGroupIndex",ou)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:lu}).createIndex("sequenceNumberIndex",hu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:du}).createIndex("documentKeyIndex",fu,{unique:!1})}(e)))),o}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=nf(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>Na.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>Na.forEach(n,(n=>{$s(n.userId===t.userId);const r=dd(this.serializer,n);return tf(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new ya(n),s=function(e){return[0,Ya(e)]}(o);r.push(t.get(s).next((n=>n?Na.resolve():(n=>t.put({targetId:0,path:Ya(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>Na.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:cu});const n=t.store("collectionParents"),r=new Gd,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Ya(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ya(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,o]=e;const s=Xa(r);return i(s.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=fd(n),i=pd(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new wa(ya.fromString(e.document.name).popFirst(5)):e.noDocument?wa.fromSegments(e.noDocument.path):e.unknownDocument?wa.fromSegments(e.unknownDocument.path):Ys()}(n).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(s))})).next((()=>Na.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=Sf(this.serializer),i=new Vf(zf.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:_l();dd(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),Na.forEach(n,((e,n)=>{const o=new Bs(n),s=Ed.lt(this.serializer,o),a=i.getIndexManager(o),u=rf.lt(o,this.serializer,a,i.referenceDelegate);return new Df(r,u,s,a).recalculateAndSaveOverlaysForDocumentKeys(new Eu(t,Ga._e),e).next()}))}))}}function Wf(e){e.createObjectStore("targetDocuments",{keyPath:au}).createIndex("documentTargetsIndex",uu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",su,{unique:!0}),e.createObjectStore("targetGlobal")}const Gf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kf{constructor(e,t,n,r,i,o,s,a,u,c){let l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=s,this._i=u,this.ai=c,this.ui=l,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Kf.D())throw new Zs(Xs.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bf(this,r),this.Ti=t+"main",this.serializer=new ad(a),this.Ei=new Ma(this.Ti,this.ui,new qf(this.serializer)),this.Qr=new lf(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sf(this.serializer),this.$r=new bd,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Ks("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Zs(Xs.FAILED_PRECONDITION,Gf);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Ga(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Qf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Fa(e))return Gs("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Gs("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Hf(e).get("owner").next((e=>Na.resolve(this.Si(e))))}bi(e){return Qf(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Su(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return Na.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?Na.resolve(!0):Hf(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new Zs(Xs.FAILED_PRECONDITION,Gf);return!1}}return!(!this.networkEnabled||!this.inForeground)||Qf(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Gs("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Eu(e,Ga._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>Qf(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return rf.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Hd(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Ed.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Gs("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?_u:14===e?wu:13===e?bu:12===e?vu:11===e?yu:void Ys()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new Eu(r,this.kr?this.kr.next():Ga._e),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw Ks("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new Zs(Xs.FAILED_PRECONDITION,Ca);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return Hf(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Zs(Xs.FAILED_PRECONDITION,Gf)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hf(e).put("owner",t)}static D(){return Ma.D()}yi(e){const t=Hf(e);return t.get("owner").next((e=>this.Si(e)?(Gs("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Na.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Ks("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;ot()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Gs("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ks("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ks("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Hf(e){return Su(e,"owner")}function Qf(e){return Su(e,"clientMetadata")}function Yf(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class $f{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=_l(),r=_l();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new $f(e,t.fromCache,n,r)}}class Jf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Xf{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=ot()?8:Ma.v(et())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Jf;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Ws()<=It.DEBUG&&Gs("QueryEngine","SDK will not create cache indexes for query:",ol(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Na.resolve()):(Ws()<=It.DEBUG&&Gs("QueryEngine","Query:",ol(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Ws()<=It.DEBUG&&Gs("QueryEngine","The SDK decides to create cache indexes for query:",ol(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zc(t))):Na.resolve())}ji(e,t){if($c(t))return Na.resolve(null);let n=Zc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=nl(t,null,"F"),n=Zc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=_l(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,nl(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return $c(t)||r.isEqual(ma.min())?Na.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?Na.resolve(null):(Ws()<=It.DEBUG&&Gs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ol(t)),this.es(e,o,t,xa(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Cu(ul(e));return t.forEach(((t,r)=>{sl(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Ws()<=It.DEBUG&&Gs("QueryEngine","Using full collection scan to execute query:",ol(t)),this.zi.getDocumentsMatchingQuery(e,t,Oa.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Zf{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new Au(ha),this.rs=new ll((e=>Bc(e)),zc),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Df(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function ep(e,t,n,r){return new Zf(e,t,n,r)}async function tp(e,t){const n=Js(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=_l();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function np(e){const t=Js(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function rp(e,t,n){let r=_l(),i=_l();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=dl();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(ma.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Gs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function ip(e,t){const n=Js(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function op(e,t){const n=Js(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,Na.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new sd(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function sp(e,t,n){const r=Js(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Fa(e))throw e;Gs("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function ap(e,t,n){const r=Js(e);let i=ma.min(),o=_l();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Js(e),i=r.rs.get(n);return void 0!==i?Na.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,Zc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:ma.min(),n?o:_l()))).next((e=>(lp(r,al(t),e),{documents:e,hs:o})))))}function up(e,t){const n=Js(e),r=Js(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function cp(e,t){const n=Js(e),r=n.ss.get(t)||ma.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,xa(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(lp(n,t,e),e)))}function lp(e,t,n){let r=e.ss.get(t)||ma.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function hp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_l();const r=await op(e,Zc(md(t.bundledQuery))),i=Js(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=Rh(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const s=r.withResumeToken(Mu.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(s.targetId,s),i.Qr.updateTargetData(e,s).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function dp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function fp(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function pp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class mp{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Zs(r.error.code,r.error.message))),o?new mp(e,t,r.state,i):(Ks("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gp{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Zs(n.error.code,n.error.message))),i?new gp(e,n.state,r):(Ks("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Sl();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=Qa(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new yp(e,i):(Ks("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class vp{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new vp(t.clientId,t.onlineState):(Ks("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class bp{constructor(){this.activeTargetIds=Sl()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wp{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Au(ha),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=dp(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new bp),this.bs=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(dp(this.persistenceKey,n));if(e){const t=yp.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(pp(this.persistenceKey,e));if(n){const r=gp.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pp(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Gs("SharedClientState","READ",e,t),t}setItem(e,t){Gs("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Gs("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Gs("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Ks("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Ga._e;if(null!=e)try{const n=JSON.parse(e);$s("number"==typeof n),t=n}catch(e){Ks("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ga._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new mp(this.currentUser,e,t,n),i=fp(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=fp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=pp(this.persistenceKey,e),i=new gp(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return yp.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return mp.Es(new Bs(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return gp.Es(r,t)}xs(e){return vp.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Gs("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],s=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||s.push(e)})),this.syncEngine.eo(o,s).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=Sl();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class _p{constructor(){this.no=new bp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new bp,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ep{io(e){}shutdown(){}}class Sp{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Gs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Gs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Tp=null;function Ip(){return null===Tp?Tp=268435456+Math.round(2147483648*Math.random()):Tp++,"0x"+Tp.toString(16)}const xp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ap{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Op="WebChannelConnection";class kp extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const o=Ip(),s=this.bo(e,t.toUriEncodedString());Gs("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,s,a,n).then((t=>(Gs("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Hs("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+zs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=xp[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Ip();return new Promise(((o,s)=>{const a=new js;a.setWithCredentials(!0),a.listenOnce(Ns.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ps.NO_ERROR:const t=a.getResponseJson();Gs(Op,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Ps.TIMEOUT:Gs(Op,"RPC '".concat(e,"' ").concat(i," timed out")),s(new Zs(Xs.DEADLINE_EXCEEDED,"Request time out"));break;case Ps.HTTP_ERROR:const n=a.getStatus();if(Gs(Op,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Xs).indexOf(t)>=0?t:Xs.UNKNOWN}(t.status);s(new Zs(e,t.message))}else s(new Zs(Xs.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new Zs(Xs.UNAVAILABLE,"Connection failed."));break;default:Ys()}}finally{Gs(Op,"RPC '".concat(e,"' ").concat(i," completed."))}}));const u=JSON.stringify(r);Gs(Op,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",u,n,15)}))}Fo(e,t,n){const r=Ip(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Cs(),s=Ds(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(a.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Gs(Op,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const l=o.createWebChannel(c,a);let h=!1,d=!1;const f=new Ap({lo:t=>{d?Gs(Op,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Gs(Op,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),h=!0),Gs(Op,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},ho:()=>l.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(l,Ls.EventType.OPEN,(()=>{d||Gs(Op,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Ls.EventType.CLOSE,(()=>{d||(d=!0,Gs(Op,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Vo())})),p(l,Ls.EventType.ERROR,(t=>{d||(d=!0,Hs(Op,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Vo(new Zs(Xs.UNAVAILABLE,"The operation could not be completed")))})),p(l,Ls.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];$s(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Gs(Op,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=sh[e];if(void 0!==t)return ch(t)}(t),i=s.message;void 0===n&&(n=Xs.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Vo(new Zs(n,i)),l.close()}else Gs(Op,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.mo(i)}})),p(s,Rs.STAT_EVENT,(t=>{t.stat===Ms.PROXY?Gs(Op,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ms.NOPROXY&&Gs(Op,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function Cp(){return"undefined"!=typeof window?window:null}function Dp(){return"undefined"!=typeof document?document:null}function Pp(e){return new kh(e,!0)}class Np{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&Gs("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class Rp{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Np(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Xs.RESOURCE_EXHAUSTED?(Ks(t.toString()),Ks("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Xs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new Zs(Xs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Gs("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Gs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Mp extends Rp{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ys()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?($s(void 0===t||"string"==typeof t),Mu.fromBase64String(t||"")):($s(void 0===t||t instanceof Uint8Array),Mu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Xs.UNKNOWN:ch(e.code);return new Zs(t,e.message||"")}(s);n=new _h(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uh(e,r.document.name),o=Rh(r.document.updateTime),s=r.document.createTime?Rh(r.document.createTime):ma.min(),a=new dc({mapValue:{fields:r.document.fields}}),u=pc.newFoundDocument(i,o,s,a),c=r.targetIds||[],l=r.removedTargetIds||[];n=new bh(c,l,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Uh(e,r.document),o=r.readTime?Rh(r.readTime):ma.min(),s=pc.newNoDocument(i,o),a=r.removedTargetIds||[];n=new bh([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Uh(e,r.document),o=r.removedTargetIds||[];n=new bh([],o,i,null)}else{if(!("filter"in t))return Ys();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new oh(r,i),s=e.targetId;n=new wh(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ma.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ma.min():t.readTime?Rh(t.readTime):ma.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=zh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=qc(r)?{documents:Qh(e,r)}:{query:Yh(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ph(e,t.resumeToken);const r=Ch(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ma.min())>0){n.readTime=Dh(e,t.snapshotVersion.toTimestamp());const r=Ch(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ys()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=zh(this.serializer),t.removeTarget=e,this.t_(t)}}class Lp extends Rp{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if($s(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?($s(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Rh(e.updateTime):Rh(t);return n.isEqual(ma.min())&&(n=Rh(t)),new Vl(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Rh(e.commitTime);return this.listener.T_(n,t)}return $s(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=zh(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Kh(this.serializer,e)))};this.t_(t)}}class jp extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new Zs(Xs.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.So(e,Lh(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Xs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Zs(Xs.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.vo(e,Lh(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Xs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Zs(Xs.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Fp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Ks(t),this.g_=!1):Gs("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Up{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{Qp(this)&&(Gs("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Js(e);t.v_.add(4),await Bp(t),t.x_.set("Unknown"),t.v_.delete(4),await Vp(t)}(this))}))})),this.x_=new Fp(n,r)}}async function Vp(e){if(Qp(e))for(const t of e.F_)await t(!0)}async function Bp(e){for(const t of e.F_)await t(!1)}function zp(e,t){const n=Js(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Hp(n)?Kp(n):dm(n).Jo()&&Wp(n,t))}function qp(e,t){const n=Js(e),r=dm(n);n.C_.delete(t),r.Jo()&&Gp(n,t),0===n.C_.size&&(r.Jo()?r.Xo():Qp(n)&&n.x_.set("Unknown"))}function Wp(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ma.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}dm(e).c_(t)}function Gp(e,t){e.O_.Oe(t),dm(e).l_(t)}function Kp(e){e.O_=new Sh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),dm(e).start(),e.x_.p_()}function Hp(e){return Qp(e)&&!dm(e).Ho()&&e.C_.size>0}function Qp(e){return 0===Js(e).v_.size}function Yp(e){e.O_=void 0}async function $p(e){e.C_.forEach(((t,n)=>{Wp(e,t)}))}async function Jp(e,t){Yp(e),Hp(e)?(e.x_.S_(t),Kp(e)):e.x_.set("Unknown")}async function Xp(e,t,n){if(e.x_.set("Online"),t instanceof _h&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Gs("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Zp(e,n)}else if(t instanceof bh?e.O_.$e(t):t instanceof wh?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(ma.min()))try{const t=await np(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Mu.EMPTY_BYTE_STRING,r.snapshotVersion)),Gp(e,t);const i=new sd(r.target,t,n,r.sequenceNumber);Wp(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Gs("RemoteStore","Failed to raise snapshot:",t),await Zp(e,t)}}async function Zp(e,t,n){if(!Fa(t))throw t;e.v_.add(1),await Bp(e),e.x_.set("Offline"),n||(n=()=>np(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Gs("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Vp(e)}))}function em(e,t){return t().catch((n=>Zp(e,n,t)))}async function tm(e){const t=Js(e),n=fm(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;nm(t);)try{const e=await ip(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,rm(t,e)}catch(e){await Zp(t,e)}im(t)&&om(t)}function nm(e){return Qp(e)&&e.D_.length<10}function rm(e,t){e.D_.push(t);const n=fm(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function im(e){return Qp(e)&&!fm(e).Ho()&&e.D_.length>0}function om(e){fm(e).start()}async function sm(e){fm(e).d_()}async function am(e){const t=fm(e);for(const n of e.D_)t.I_(n.mutations)}async function um(e,t,n){const r=e.D_.shift(),i=rh.from(r,t,n);await em(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await tm(e)}async function cm(e,t){t&&fm(e).P_&&await async function(e,t){if(function(e){return uh(e)&&e!==Xs.ABORTED}(t.code)){const n=e.D_.shift();fm(e).Zo(),await em(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await tm(e)}}(e,t),im(e)&&om(e)}async function lm(e,t){const n=Js(e);n.asyncQueue.verifyOperationInProgress(),Gs("RemoteStore","RemoteStore received new credentials");const r=Qp(n);n.v_.add(3),await Bp(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Vp(n)}async function hm(e,t){const n=Js(e);t?(n.v_.delete(2),await Vp(n)):t||(n.v_.add(2),await Bp(n),n.x_.set("Unknown"))}function dm(e){return e.N_||(e.N_=function(e,t,n){const r=Js(e);return r.R_(),new Mp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:$p.bind(null,e),To:Jp.bind(null,e),u_:Xp.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Hp(e)?Kp(e):e.x_.set("Unknown")):(await e.N_.stop(),Yp(e))}))),e.N_}function fm(e){return e.B_||(e.B_=function(e,t,n){const r=Js(e);return r.R_(),new Lp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:sm.bind(null,e),To:cm.bind(null,e),E_:am.bind(null,e),T_:um.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await tm(e)):(await e.B_.stop(),e.D_.length>0&&(Gs("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.B_}class pm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new pm(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Zs(Xs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function mm(e,t){if(Ks("AsyncQueue","".concat(t,": ").concat(e)),Fa(e))return new Zs(Xs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class gm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||wa.comparator(t.key,n.key):(e,t)=>wa.comparator(e.key,t.key),this.keyedMap=pl(),this.sortedSet=new Au(this.comparator)}static emptySet(e){return new gm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof gm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new gm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ym{constructor(){this.L_=new Au(wa.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):Ys():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class vm{constructor(e,t,n,r,i,o,s,a,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new vm(e,t,gm.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class bm{constructor(){this.q_=void 0,this.Q_=[]}}class wm{constructor(){this.queries=new ll((e=>il(e)),rl),this.onlineState="Unknown",this.K_=new Set}}async function _m(e,t){const n=Js(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new bm),i)try{o.q_=await n.onListen(r)}catch(e){const n=mm(e,"Initialization of query '".concat(ol(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.Q_.push(t),t.U_(n.onlineState),o.q_&&t.W_(o.q_)&&Im(n)}async function Em(e,t){const n=Js(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.Q_.indexOf(t);e>=0&&(o.Q_.splice(e,1),i=0===o.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Sm(e,t){const n=Js(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&Im(n)}function Tm(e,t,n){const r=Js(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function Im(e){e.K_.forEach((e=>{e.next()}))}class xm{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new vm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=vm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class Am{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class Om{constructor(e){this.serializer=e}Ps(e){return Uh(this.serializer,e)}Is(e){return e.metadata.exists?Gh(this.serializer,e.document,!1):pc.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Rh(e)}}class km{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Cm(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=ya.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new Om(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||_l()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Js(e);let o=_l(),s=dl();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(o=o.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),s=s.insert(e,n)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=await op(i,function(e){return Zc(Yc(ya.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>rp(e,a,s).next((t=>(a.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,u.targetId).next((()=>i.Qr.addMatchingKeys(e,o,u.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new Om(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await hp(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function Cm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Dm{constructor(e){this.key=e}}class Pm{constructor(e){this.key=e}}class Nm{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=_l(),this.mutatedKeys=_l(),this.ua=ul(e),this.ca=new gm(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new ym,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),l=sl(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;c&&l?c.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Ia(c,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.ua(l,a)>0||u&&this.ua(l,u)<0)&&(s=!0)):!c&&l?(n.track({type:0,doc:l}),f=!0):c&&!l&&(n.track({type:1,doc:c}),f=!0,(a||u)&&(s=!0)),f&&(l?(o=o.add(l),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:o,Pa:n,Xi:s,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ys()}};return n(e)-n(t)}(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const s=t&&!r?this.Ea():[],a=0===this.aa.size&&this.current&&!r?1:0,u=a!==this._a;return this._a=a,0!==o.length||u?{snapshot:new vm(this.query,e.ca,i,o,e.mutatedKeys,0===a,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:s}:{da:s}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ym,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=_l(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new Pm(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new Dm(n))})),t}Ra(e){this.oa=e.hs,this.aa=_l();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return vm.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class Rm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Mm{constructor(e){this.key=e,this.ma=!1}}class Lm{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new ll((e=>il(e)),rl),this.pa=new Map,this.ya=new Set,this.wa=new Au(wa.comparator),this.Sa=new Map,this.ba=new Rf,this.Da={},this.Ca=new Map,this.va=cf.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function jm(e,t){const n=cg(e);let r,i;const o=n.ga.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const e=await op(n.localStore,Zc(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Fm(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&zp(n.remoteStore,e)}return i}async function Fm(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await ap(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ha(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return Ym(e,t.targetId,a.da),a.snapshot}(e,t,n,r);const o=await ap(e.localStore,t,!0),s=new Nm(t,o.hs),a=s.ha(o.documents),u=vh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,u);Ym(e,n,c.da);const l=new Rm(t,n,s);return e.ga.set(t,l),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),c.snapshot}async function Um(e,t){const n=Js(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!rl(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await sp(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),qp(n.remoteStore,r.targetId),Hm(n,r.targetId)})).catch(Pa)):(Hm(n,r.targetId),await sp(n.localStore,r.targetId,!0))}async function Vm(e,t){const n=Js(e);try{const e=await function(e,t){const n=Js(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const u=i.get(a);if(!u)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Mu.EMPTY_BYTE_STRING,ma.min()).withLastLimboFreeSnapshotVersion(ma.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(u,c,o)&&s.push(n.Qr.updateTargetData(e,c))}));let a=dl(),u=_l();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(rp(e,o,t.documentUpdates).next((e=>{a=e.cs,u=e.ls}))),!r.isEqual(ma.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Na.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,u))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&($s(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?$s(r.ma):e.removedDocuments.size>0&&($s(r.ma),r.ma=!1))})),await Xm(n,e,t)}catch(e){await Pa(e)}}function Bm(e,t,n){const r=Js(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Js(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&Im(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function zm(e,t,n){const r=Js(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),o=i&&i.key;if(o){let e=new Au(wa.comparator);e=e.insert(o,pc.newNoDocument(o,ma.min()));const n=_l().add(o),i=new yh(ma.min(),new Map,new Au(ha),e,n);await Vm(r,i),r.wa=r.wa.remove(o),r.Sa.delete(t),Jm(r)}else await sp(r.localStore,t,!1).then((()=>Hm(r,t,n))).catch(Pa)}async function qm(e,t){const n=Js(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Js(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Na.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);$s(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=_l();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);Km(n,r,null),Gm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xm(n,e)}catch(e){await Pa(e)}}async function Wm(e,t,n){const r=Js(e);try{const e=await function(e,t){const n=Js(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>($s(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);Km(r,t,n),Gm(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Xm(r,e)}catch(n){await Pa(n)}}function Gm(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function Km(e,t,n){const r=Js(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function Hm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||Qm(e,t)}))}function Qm(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(qp(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Jm(e))}function Ym(e,t,n){for(const r of n)r instanceof Dm?(e.ba.addReference(r.key,t),$m(e,r)):r instanceof Pm?(Gs("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||Qm(e,r.key)):Ys()}function $m(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(Gs("SyncEngine","New document in limbo: "+n),e.ya.add(r),Jm(e))}function Jm(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new wa(ya.fromString(t)),r=e.va.next();e.Sa.set(r,new Mm(n)),e.wa=e.wa.insert(n,r),zp(e.remoteStore,new sd(Zc(Yc(n.path)),r,"TargetPurposeLimboResolution",Ga._e))}}async function Xm(e,t,n){const r=Js(e),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach(((e,a)=>{s.push(r.Ma(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=$f.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.fa.u_(i),await async function(e,t){const n=Js(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Na.forEach(t,(t=>Na.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Na.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Fa(e))throw e;Gs("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function Zm(e,t){const n=Js(e);if(!n.currentUser.isEqual(t)){Gs("SyncEngine","User change. New user:",t.toKey());const e=await tp(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new Zs(Xs.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Xm(n,e.us)}}function eg(e,t){const n=Js(e),r=n.Sa.get(t);if(r&&r.ma)return _l().add(r.key);{let e=_l();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function tg(e,t){const n=Js(e),r=await ap(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&Ym(n,t.targetId,i.da),i}async function ng(e,t){const n=Js(e);return cp(n.localStore,t).then((e=>Xm(n,e)))}async function rg(e,t,n,r){const i=Js(e),o=await function(e,t){const n=Js(e),r=Js(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):Na.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await tm(i.remoteStore):"acknowledged"===n||"rejected"===n?(Km(i,t,r||null),Gm(i,t),function(e,t){Js(Js(e).mutationQueue).Mn(t)}(i.localStore,t)):Ys(),await Xm(i,o)):Gs("SyncEngine","Cannot apply mutation batch with id: "+t)}async function ig(e,t,n){const r=Js(e),i=[],o=[];for(const s of t){let e;const t=r.pa.get(s);if(t&&0!==t.length){e=await op(r.localStore,Zc(t[0]));for(const e of t){const t=r.ga.get(e),n=await tg(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await up(r.localStore,s);e=await op(r.localStore,t),await Fm(r,og(t),s,!1,e.resumeToken)}i.push(e)}return r.fa.u_(o),i}function og(e){return Qc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function sg(e){return function(e){return Js(Js(e).persistence).Li()}(Js(e).localStore)}async function ag(e,t,n,r){const i=Js(e);if(i.Fa)return void Gs("SyncEngine","Ignoring unexpected query state notification.");const o=i.pa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await cp(i.localStore,al(o[0])),r=yh.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Mu.EMPTY_BYTE_STRING);await Xm(i,e,r);break}case"rejected":await sp(i.localStore,t,!0),Hm(i,t,r);break;default:Ys()}}async function ug(e,t,n){const r=cg(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){Gs("SyncEngine","Adding an already active target "+e);continue}const t=await up(r.localStore,e),n=await op(r.localStore,t);await Fm(r,og(t),n.targetId,!1,n.resumeToken),zp(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await sp(r.localStore,e,!1).then((()=>{qp(r.remoteStore,e),Hm(r,e)})).catch(Pa)}}function cg(e){const t=Js(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=eg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zm.bind(null,t),t.fa.u_=Sm.bind(null,t.eventManager),t.fa.xa=Tm.bind(null,t.eventManager),t}function lg(e){const t=Js(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=qm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Wm.bind(null,t),t}class hg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Pp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ep(this.persistence,new Xf,e.initialUser,this.serializer)}createPersistence(e){return new Vf(zf.Hr,this.serializer)}createSharedClientState(e){return new _p}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class dg extends hg{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await lg(this.Na.syncEngine),await tm(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return ep(this.persistence,new Xf,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new gf(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Wa(t,this.persistence);return new qa(e.asyncQueue,n)}createPersistence(e){const t=Yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ef.withCacheSize(this.cacheSizeBytes):ef.DEFAULT;return new Kf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Cp(),Dp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _p}}class fg extends dg{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof wp&&(this.sharedClientState.syncEngine={Zs:rg.bind(null,t),Xs:ag.bind(null,t),eo:ug.bind(null,t),Li:sg.bind(null,t),Ys:ng.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=Js(e);if(cg(n),lg(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await ig(n,e.toArray());n.Fa=!0,await hm(n.remoteStore,!0);for(const r of t)zp(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(Hm(n,i),sp(n.localStore,i,!0)))),qp(n.remoteStore,i)})),await t,await ig(n,e),function(e){const t=Js(e);t.Sa.forEach(((e,n)=>{qp(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new Au(wa.comparator)}(n),n.Fa=!1,await hm(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Cp();if(!wp.D(t))throw new Zs(Xs.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Yf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class pg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Bm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zm.bind(null,this.syncEngine),await hm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new wm}createDatastore(e){const t=Pp(e.databaseInfo.databaseId),n=function(e){return new kp(e)}(e.databaseInfo);return function(e,t,n,r){return new jp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Up(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>Bm(this.syncEngine,e,0)),Sp.D()?new Sp:new Ep)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new Lm(e,t,n,r,i,o);return s&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Js(e);Gs("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Bp(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function mg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Ks("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class yg{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new ea,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a("length string (".concat(t,") is not valid number"));const r=await this.Ua(n);return new Am(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class vg{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Zs(Xs.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Js(e),r={documents:t.map((e=>Fh(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,ya.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){$s(!!t.found),t.found.name,t.found.updateTime;const n=Uh(e,t.found.name),r=Rh(t.found.updateTime),i=t.found.createTime?Rh(t.found.createTime):ma.min(),o=new dc({mapValue:{fields:t.found.fields}});return pc.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){$s(!!t.missing),$s(!!t.readTime);const n=Uh(e,t.missing),r=Rh(t.readTime);return pc.newNoDocument(n,r)}(e,t):Ys()}(n.serializer,e);o.set(t.key.toString(),t)}));const s=[];return t.forEach((e=>{const t=o.get(e.toString());$s(!!t),s.push(t)})),s}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new eh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=wa.fromPath(t);this.mutations.push(new th(n,this.precondition(n)))})),await async function(e,t){const n=Js(e),r={writes:t.map((e=>Kh(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,ya.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ys();t=ma.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Zs(Xs.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ma.min())?Bl.exists(!1):Bl.updateTime(t):Bl.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ma.min()))throw new Zs(Xs.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bl.updateTime(t)}return Bl.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bg{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new Np(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new vg(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!Ka(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!uh(t)}return!1}}class wg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Bs.UNAUTHENTICATED,this.clientId=la.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Gs("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Gs("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Zs(Xs.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=mm(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function _g(e,t){e.asyncQueue.verifyOperationInProgress(),Gs("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await tp(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Eg(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Tg(e);Gs("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>lm(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>lm(t.remoteStore,n))),e._onlineComponents=t}function Sg(e){return"FirebaseError"===e.name?e.code===Xs.FAILED_PRECONDITION||e.code===Xs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Tg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Gs("FirestoreClient","Using user provided OfflineComponentProvider");try{await _g(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Sg(n))throw n;Hs("Error using user provided cache. Falling back to memory cache: "+n),await _g(e,new hg)}}else Gs("FirestoreClient","Using default OfflineComponentProvider"),await _g(e,new hg);return e._offlineComponents}async function Ig(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Gs("FirestoreClient","Using user provided OnlineComponentProvider"),await Eg(e,e._uninitializedComponentsProvider._online)):(Gs("FirestoreClient","Using default OnlineComponentProvider"),await Eg(e,new pg))),e._onlineComponents}function xg(e){return Tg(e).then((e=>e.persistence))}function Ag(e){return Tg(e).then((e=>e.localStore))}function Og(e){return Ig(e).then((e=>e.remoteStore))}function kg(e){return Ig(e).then((e=>e.syncEngine))}function Cg(e){return Ig(e).then((e=>e.datastore))}async function Dg(e){const t=await Ig(e),n=t.eventManager;return n.onListen=jm.bind(null,t.syncEngine),n.onUnlisten=Um.bind(null,t.syncEngine),n}function Pg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ea;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new gg({next:o=>{t.enqueueAndForget((()=>Em(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new Zs(Xs.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Zs(Xs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new xm(Yc(n.path),o,{includeMetadataChanges:!0,Z_:!0});return _m(e,s)}(await Dg(e),e.asyncQueue,t,n,r))),r.promise}function Ng(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new ea;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new gg({next:n=>{t.enqueueAndForget((()=>Em(e,s))),n.fromCache&&"server"===r.source?i.reject(new Zs(Xs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new xm(n,o,{includeMetadataChanges:!0,Z_:!0});return _m(e,s)}(await Dg(e),e.asyncQueue,t,n,r))),r.promise}function Rg(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?hh().encode(e):e,function(e,t){return new yg(e,t)}(function(e,t){if(e instanceof Uint8Array)return mg(e,t);if(e instanceof ArrayBuffer)return mg(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Pp(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Js(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Js(e),r=Rh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Cm(r));const i=new km(r,e.localStore,t.serializer);let o=await t.Oa();for(;o;){const e=await i.na(o);e&&n._updateProgress(e),o=await t.Oa()}const s=await i.complete();return await Xm(e,s.sa,void 0),await function(e,t){const n=Js(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(s.progress),Promise.resolve(s.ia)}catch(e){return Hs("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await kg(e),i,r)}))}function Mg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Lg=new Map;function jg(e,t,n){if(!n)throw new Zs(Xs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Fg(e,t,n,r){if(!0===t&&!0===r)throw new Zs(Xs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Ug(e){if(!wa.isDocumentKey(e))throw new Zs(Xs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Vg(e){if(wa.isDocumentKey(e))throw new Zs(Xs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Bg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ys()}function zg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Zs(Xs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bg(e);throw new Zs(Xs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function qg(e,t){if(t<=0)throw new Zs(Xs.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Wg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Zs(Xs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Zs(Xs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Fg("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Mg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Zs(Xs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Zs(Xs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Zs(Xs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Zs(Xs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Zs(Xs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new na;switch(e.type){case"firstParty":return new sa(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Zs(Xs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Lg.get(e);t&&(Gs("ComponentProvider","Removing Datastore"),Lg.delete(e),t.terminate())}(this),Promise.resolve()}}function Kg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=zg(e,Gg))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Bs.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[He(JSON.stringify({alg:"none",type:"JWT"})),He(JSON.stringify(o)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new Zs(Xs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Bs(o)}e._authCredentials=new ra(new ta(t,n))}}class Hg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Hg(this.firestore,e,this._query)}}class Qg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qg(this.firestore,e,this._key)}}class Yg extends Hg{constructor(e,t,n){super(e,t,Yc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qg(this.firestore,null,new wa(e))}withConverter(e){return new Yg(this.firestore,e,this._path)}}function $g(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=bt(e),jg("collection","path",t),e instanceof Gg){const n=ya.fromString(t,...r);return Vg(n),new Yg(e,null,n)}{if(!(e instanceof Qg||e instanceof Yg))throw new Zs(Xs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ya.fromString(t,...r));return Vg(n),new Yg(e.firestore,null,n)}}function Jg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=bt(e),1===arguments.length&&(t=la.newId()),jg("doc","path",t),e instanceof Gg){const n=ya.fromString(t,...r);return Ug(n),new Qg(e,null,new wa(n))}{if(!(e instanceof Qg||e instanceof Yg))throw new Zs(Xs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ya.fromString(t,...r));return Ug(n),new Qg(e.firestore,e instanceof Yg?e.converter:null,new wa(n))}}function Xg(e,t){return e=bt(e),t=bt(t),(e instanceof Qg||e instanceof Yg)&&(t instanceof Qg||t instanceof Yg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Zg(e,t){return e=bt(e),t=bt(t),e instanceof Hg&&t instanceof Hg&&e.firestore===t.firestore&&rl(e._query,t._query)&&e.converter===t.converter}class ey{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Np(this,"async_queue_retry"),this._u=()=>{const e=Dp();e&&Gs("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new ea;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!Fa(e))throw e;Gs("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ks("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=pm.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&Ys()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function ty(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class ny{constructor(){this._progressObserver={},this._taskCompletionResolver=new ea,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ry extends Gg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ey,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||oy(this),this._firestoreClient.terminate()}}function iy(e){return e._firestoreClient||oy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function oy(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new qu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Mg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new wg(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function sy(e,t,n){const r=new ea;return e.asyncQueue.enqueue((async()=>{try{await _g(e,n),await Eg(e,t),r.resolve()}catch(e){const n=e;if(!Sg(n))throw n;Hs("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function ay(e){return function(e){const t=new ea;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Js(e);Qp(n.remoteStore)||Gs("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Js(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=mm(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await kg(e),t))),t.promise}(iy(e=zg(e,ry)))}function uy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await xg(e),n=await Og(e);return t.setNetworkEnabled(!0),function(e){const t=Js(e);return t.v_.delete(0),Vp(t)}(n)}))}(iy(e=zg(e,ry)))}function cy(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await xg(e),n=await Og(e);return t.setNetworkEnabled(!1),async function(e){const t=Js(e);t.v_.add(0),await Bp(t),t.x_.set("Offline")}(n)}))}(iy(e=zg(e,ry)))}function ly(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Js(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await Ag(e),t)))}(iy(e=zg(e,ry)),t).then((t=>t?new Hg(e,null,t.query):null))}function hy(e){if(e._initialized||e._terminated)throw new Zs(Xs.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class dy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dy(Mu.fromBase64String(e))}catch(e){throw new Zs(Xs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new dy(Mu.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fy{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ba(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class py{constructor(e){this._methodName=e}}class my{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Zs(Xs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Zs(Xs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ha(this._lat,e._lat)||ha(this._long,e._long)}}const gy=/^__.*__$/;class yy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new $l(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yl(e,this.data,t,this.fieldTransforms)}}class vy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new $l(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function by(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ys()}}class wy{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new wy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Vy(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(by(this.du)&&gy.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class _y{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Pp(e)}Su(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new wy({du:e,methodName:t,wu:n,path:ba.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ey(e){const t=e._freezeSettings(),n=Pp(e._databaseId);return new _y(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sy(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Su(o.merge||o.mergeFields?2:0,t,n,i);Ly("Data must be an object, but it was:",s,r);const a=Ry(r,s);let u,c;if(o.merge)u=new Nu(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=jy(t,r,n);if(!s.contains(i))throw new Zs(Xs.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));By(e,i)||e.push(i)}u=new Nu(e),c=s.fieldTransforms.filter((e=>u.covers(e.field)))}else u=null,c=s.fieldTransforms;return new yy(new dc(a),u,c)}class Ty extends py{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ty}}function Iy(e,t,n){return new wy({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class xy extends py{_toFieldTransform(e){return new Ul(e.path,new Dl)}isEqual(e){return e instanceof xy}}class Ay extends py{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Iy(this,e,!0),n=this.bu.map((e=>Ny(e,t))),r=new Pl(n);return new Ul(e.path,r)}isEqual(e){return e instanceof Ay&&ht(this.bu,e.bu)}}class Oy extends py{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Iy(this,e,!0),n=this.bu.map((e=>Ny(e,t))),r=new Rl(n);return new Ul(e.path,r)}isEqual(e){return e instanceof Oy&&ht(this.bu,e.bu)}}class ky extends py{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new Ll(e.serializer,xl(e.serializer,this.Du));return new Ul(e.path,t)}isEqual(e){return e instanceof ky&&this.Du===e.Du}}function Cy(e,t,n,r){const i=e.Su(1,t,n);Ly("Data must be an object, but it was:",i,r);const o=[],s=dc.empty();Iu(r,((e,r)=>{const a=Uy(t,e,n);r=bt(r);const u=i.fu(a);if(r instanceof Ty)o.push(a);else{const e=Ny(r,u);null!=e&&(o.push(a),s.set(a,e))}}));const a=new Nu(o);return new vy(s,a,i.fieldTransforms)}function Dy(e,t,n,r,i,o){const s=e.Su(1,t,n),a=[jy(t,r,n)],u=[i];if(o.length%2!=0)throw new Zs(Xs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(jy(t,o[d])),u.push(o[d+1]);const c=[],l=dc.empty();for(let d=a.length-1;d>=0;--d)if(!By(c,a[d])){const e=a[d];let t=u[d];t=bt(t);const n=s.fu(e);if(t instanceof Ty)c.push(e);else{const r=Ny(t,n);null!=r&&(c.push(e),l.set(e,r))}}const h=new Nu(c);return new vy(l,h,s.fieldTransforms)}function Py(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ny(n,e.Su(r?4:3,t))}function Ny(e,t){if(My(e=bt(e)))return Ly("Unsupported field value:",t,e),Ry(e,t);if(e instanceof py)return function(e,t){if(!by(t.du))throw t.pu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.pu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ny(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=bt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=pa.fromDate(e);return{timestampValue:Dh(t.serializer,n)}}if(e instanceof pa){const n=new pa(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Dh(t.serializer,n)}}if(e instanceof my)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof dy)return{bytesValue:Ph(t.serializer,e._byteString)};if(e instanceof Qg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Mh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu("Unsupported field value: ".concat(Bg(e)))}(e,t)}function Ry(e,t){const n={};return xu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Iu(e,((e,r)=>{const i=Ny(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function My(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof pa||e instanceof my||e instanceof dy||e instanceof Qg||e instanceof py)}function Ly(e,t,n){if(!My(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Bg(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function jy(e,t,n){if((t=bt(t))instanceof fy)return t._internalPath;if("string"==typeof t)return Uy(e,t);throw Vy("Field path arguments must be of type string or ",e,!1,void 0,n)}const Fy=new RegExp("[~\\*/\\[\\]]");function Uy(e,t,n){if(t.search(Fy)>=0)throw Vy("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new fy(...t.split("."))._internalPath}catch(Nn){throw Vy("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Vy(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=" in field ".concat(r)),s&&(u+=" in document ".concat(i)),u+=")"),new Zs(Xs.INVALID_ARGUMENT,a+e+u)}function By(e,t){return e.some((e=>e.isEqual(t)))}class zy{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Wy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qy extends zy{data(){return super.data()}}function Wy(e,t){return"string"==typeof t?Uy(e,t):t instanceof fy?t._internalPath:t._delegate._internalPath}function Gy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Zs(Xs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ky{}class Hy extends Ky{}function Qy(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Ky&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof $y)).length,n=e.filter((e=>e instanceof Yy)).length;if(t>1||t>0&&n>0)throw new Zs(Xs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Yy extends Hy{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Yy(e,t,n)}_apply(e){const t=this._parse(e);return iv(e._query,t),new Hg(e.firestore,e.converter,tl(e._query,t))}_parse(e){const t=Ey(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){rv(s,o);const t=[];for(const n of s)t.push(nv(r,e,n));a={arrayValue:{values:t}}}else a=nv(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||rv(s,o),a=Py(n,t,s,"in"===o||"not-in"===o);return _c.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class $y extends Ky{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $y(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Ec.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)iv(n,i),n=tl(n,i)}(e._query,t),new Hg(e.firestore,e.converter,tl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Jy extends Hy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Jy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(t,n)}(e._query,this._field,this._direction);return new Hg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Hc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Xy extends Hy{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Xy(e,t,n)}_apply(e){return new Hg(e.firestore,e.converter,nl(e._query,this._limit,this._limitType))}}class Zy extends Hy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Zy(e,t,n)}_apply(e){const t=tv(e,this.type,this._docOrFields,this._inclusive);return new Hg(e.firestore,e.converter,function(e,t){return new Hc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class ev extends Hy{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new ev(e,t,n)}_apply(e){const t=tv(e,this.type,this._docOrFields,this._inclusive);return new Hg(e.firestore,e.converter,function(e,t){return new Hc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function tv(e,t,n,r){if(n[0]=bt(n[0]),n[0]instanceof zy)return function(e,t,n,r,i){if(!r)throw new Zs(Xs.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const o=[];for(const s of Xc(e))if(s.field.isKeyField())o.push(ec(t,r.key));else{const e=r.data.field(s.field);if(Vu(e))throw new Zs(Xs.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=s.field.canonicalString();throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}o.push(e)}return new mc(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Ey(e.firestore);return function(e,t,n,r,i,o){const s=e.explicitOrderBy;if(i.length>s.length)throw new Zs(Xs.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let u=0;u<i.length;u++){const o=i[u];if(s[u].field.isKeyField()){if("string"!=typeof o)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof o));if(!Jc(e)&&-1!==o.indexOf("/"))throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(o,"' contains a slash."));const n=e.path.child(ya.fromString(o));if(!wa.isDocumentKey(n))throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new wa(n);a.push(ec(t,i))}else{const e=Py(n,r,o);a.push(e)}}return new mc(a,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function nv(e,t,n){if("string"==typeof(n=bt(n))){if(""===n)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jc(t)&&-1!==n.indexOf("/"))throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ya.fromString(n));if(!wa.isDocumentKey(r))throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ec(e,new wa(r))}if(n instanceof Qg)return ec(e,n._key);throw new Zs(Xs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Bg(n),"."))}function rv(e,t){if(!Array.isArray(e)||0===e.length)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function iv(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Zs(Xs.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Zs(Xs.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ov{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Uu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ys()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Iu(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new my(Fu(e.latitude),Fu(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(zu(e));default:return null}}convertTimestamp(e){const t=ju(e);return new pa(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ya.fromString(e);$s(od(n));const r=new Wu(n.get(1),n.get(3)),i=new wa(n.popFirst(5));return r.isEqual(t)||Ks("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function sv(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class av extends ov{constructor(e){super(),this.firestore=e}convertBytes(e){return new dy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qg(this.firestore,null,t)}}class uv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cv extends zy{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new lv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Wy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class lv extends cv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class hv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new uv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new lv(this._firestore,this._userDataWriter,n.key,n,new uv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Zs(Xs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new lv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new uv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new lv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:dv(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function dv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ys()}}function fv(e,t){return e instanceof cv&&t instanceof cv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof hv&&t instanceof hv&&e._firestore===t._firestore&&Zg(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class pv extends ov{constructor(e){super(),this.firestore=e}convertBytes(e){return new dy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qg(this.firestore,null,t)}}function mv(e){e=zg(e,Qg);const t=zg(e.firestore,ry),n=iy(t),r=new pv(t);return function(e,t){const n=new ea;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Js(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Zs(Xs.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=mm(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Ag(e),t,n))),n.promise}(n,e._key).then((n=>new cv(t,r,e._key,n,new uv(null!==n&&n.hasLocalMutations,!0),e.converter)))}function gv(e){e=zg(e,Hg);const t=zg(e.firestore,ry),n=iy(t),r=new pv(t);return function(e,t){const n=new ea;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await ap(e,t,!0),i=new Nm(t,r.hs),o=i.ha(r.documents),s=i.applyChanges(o,!1);n.resolve(s.snapshot)}catch(e){const r=mm(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Ag(e),t,n))),n.promise}(n,e._query).then((n=>new hv(t,r,e,n)))}function yv(e,t,n){e=zg(e,Qg);const r=zg(e.firestore,ry),i=sv(e.converter,t,n);return _v(r,[Sy(Ey(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Bl.none())])}function vv(e,t,n){e=zg(e,Qg);const r=zg(e.firestore,ry),i=Ey(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),u=3;u<s;u++)a[u-3]=arguments[u];return o="string"==typeof(t=bt(t))||t instanceof fy?Dy(i,"updateDoc",e._key,t,n,a):Cy(i,"updateDoc",e._key,t),_v(r,[o.toMutation(e._key,Bl.exists(!0))])}function bv(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=bt(e);let a={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||ty(n[u])||(a=n[u],u++);const c={includeMetadataChanges:a.includeMetadataChanges};if(ty(n[u])){const e=n[u];n[u]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[u+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[u+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let l,h,d;if(e instanceof Qg)h=zg(e.firestore,ry),d=Yc(e._key.path),l={next:t=>{n[u]&&n[u](Ev(h,e,t))},error:n[u+1],complete:n[u+2]};else{const t=zg(e,Hg);h=zg(t.firestore,ry),d=t._query;const r=new pv(h);l={next:e=>{n[u]&&n[u](new hv(h,r,t,e))},error:n[u+1],complete:n[u+2]},Gy(e._query)}return function(e,t,n,r){const i=new gg(r),o=new xm(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>_m(await Dg(e),o))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>Em(await Dg(e),o)))}}(iy(h),d,c,l)}function wv(e,t){return function(e,t){const n=new gg(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Js(e).K_.add(t),t.next()}(await Dg(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Js(e).K_.delete(t)}(await Dg(e),n)))}}(iy(e=zg(e,ry)),ty(t)?t:{next:t})}function _v(e,t){return function(e,t){const n=new ea;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=lg(e);try{const e=await function(e,t){const n=Js(e),r=pa.now(),i=t.reduce(((e,t)=>e.add(t.key)),_l());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=dl(),u=_l();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(u=u.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Hl(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new $l(e.key,t,fc(t.value.mapValue),Bl.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,u);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:ml(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new Au(ha)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await Xm(r,e.changes),await tm(r.remoteStore)}catch(e){const t=mm(e,"Failed to persist write");n.reject(t)}}(await kg(e),t,n))),n.promise}(iy(e),t)}function Ev(e,t,n){const r=n.docs.get(t._key),i=new pv(e);return new cv(e,i,t._key,r,new uv(n.hasPendingWrites,n.fromCache),t.converter)}const Sv={maxAttempts:5};class Tv{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ey(e)}set(e,t,n){this._verifyNotCommitted();const r=Iv(e,this._firestore),i=sv(r.converter,t,n),o=Sy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Bl.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Iv(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=bt(t))||t instanceof fy?Dy(this._dataReader,"WriteBatch.update",r._key,t,n,s):Cy(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Bl.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Iv(e,this._firestore);return this._mutations=this._mutations.concat(new eh(t._key,Bl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Zs(Xs.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Iv(e,t){if((e=bt(e)).firestore!==t)throw new Zs(Xs.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class xv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ey(e)}get(e){const t=Iv(e,this._firestore),n=new av(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Ys();const r=e[0];if(r.isFoundDocument())return new zy(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new zy(this._firestore,n,t._key,null,t.converter);throw Ys()}))}set(e,t,n){const r=Iv(e,this._firestore),i=sv(r.converter,t,n),o=Sy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=Iv(e,this._firestore);let i;for(var o=arguments.length,s=new Array(o>3?o-3:0),a=3;a<o;a++)s[a-3]=arguments[a];return i="string"==typeof(t=bt(t))||t instanceof fy?Dy(this._dataReader,"Transaction.update",r._key,t,n,s):Cy(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Iv(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Iv(e,this._firestore),n=new pv(this._firestore);return super.get(e).then((e=>new cv(this._firestore,n,t._key,e._document,new uv(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){zs=e}(Qt),zt(new wt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new ry(new ia(e.getProvider("auth-internal")),new ua(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Zs(Xs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wu(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),Zt(Vs,"4.4.3",e),Zt(Vs,"4.4.3","esm2017")}();function Av(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Zs("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ov(){if("undefined"===typeof Uint8Array)throw new Zs("unimplemented","Uint8Arrays are not available in this environment.")}function kv(){if("undefined"==typeof atob)throw new Zs("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Cv{constructor(e){this._delegate=e}static fromBase64String(e){return kv(),new Cv(dy.fromBase64String(e))}static fromUint8Array(e){return Ov(),new Cv(dy.fromUint8Array(e))}toBase64(){return kv(),this._delegate.toBase64()}toUint8Array(){return Ov(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Dv(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Pv{enableIndexedDbPersistence(e,t){return function(e,t){hy(e=zg(e,ry));const n=iy(e);if(n._uninitializedComponentsProvider)throw new Zs(Xs.FAILED_PRECONDITION,"SDK cache is already specified.");Hs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new pg;return sy(n,i,new dg(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){hy(e=zg(e,ry));const t=iy(e);if(t._uninitializedComponentsProvider)throw new Zs(Xs.FAILED_PRECONDITION,"SDK cache is already specified.");Hs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new pg;return sy(t,r,new fg(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Zs(Xs.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new ea;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ma.D())return Promise.resolve();const t=e+"main";await Ma.delete(t)}(Yf(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Nv{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Hs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Kg(this._delegate,e,t,n)}enableNetwork(){return uy(this._delegate)}disableNetwork(){return cy(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Fg("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ay(this._delegate)}onSnapshotsInSync(e){return wv(this._delegate,e)}get app(){if(!this._appCompat)throw new Zs("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hv(this,$g(this._delegate,e))}catch(t){throw Uv(t,"collection()","Firestore.collection()")}}doc(e){try{return new Fv(this,Jg(this._delegate,e))}catch(t){throw Uv(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Wv(this,function(e,t){if(e=zg(e,Gg),jg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Zs(Xs.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Hg(e,null,function(e){return new Hc(ya.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Uv(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=zg(e,ry);const r=Object.assign(Object.assign({},Sv),n);return function(e){if(e.maxAttempts<1)throw new Zs(Xs.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new ea;return e.asyncQueue.enqueueAndForget((async()=>{const i=await Cg(e);new bg(e.asyncQueue,i,n,t,r).ja()})),r.promise}(iy(e),(n=>t(new xv(e,n))),r)}(this._delegate,(t=>e(new Mv(this,t))))}batch(){return iy(this._delegate),new Lv(new Tv(this._delegate,(e=>_v(this._delegate,e))))}loadBundle(e){return function(e,t){const n=iy(e=zg(e,ry)),r=new ny;return Rg(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return ly(this._delegate,e).then((e=>e?new Wv(this,e):null))}}class Rv extends ov{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cv(new dy(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Fv.forKey(t,this.firestore,null)}}class Mv{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rv(e)}get(e){const t=Qv(e);return this._delegate.get(t).then((e=>new zv(this._firestore,new cv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Qv(e);return n?(Av("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=Qv(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=Qv(e);return this._delegate.delete(t),this}}class Lv{constructor(e){this._delegate=e}set(e,t,n){const r=Qv(e);return n?(Av("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];const s=Qv(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=Qv(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class jv{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new lv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qv(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=jv.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new jv(e,new Rv(e),t),r.set(t,i)),i}}jv.INSTANCES=new WeakMap;class Fv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rv(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Zs("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Fv(t,new Qg(t._delegate,n,new wa(e)))}static forKey(e,t,n){return new Fv(t,new Qg(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Hv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hv(this.firestore,$g(this._delegate,e))}catch(t){throw Uv(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=bt(e))instanceof Qg&&Xg(this._delegate,e)}set(e,t){t=Av("DocumentReference.set",t);try{return t?yv(this._delegate,e,t):yv(this._delegate,e)}catch(n){throw Uv(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?vv(this._delegate,e):vv(this._delegate,e,t,...r)}catch(o){throw Uv(o,"updateDoc()","DocumentReference.update()")}}delete(){return _v(zg((e=this._delegate).firestore,ry),[new eh(e._key,Bl.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Vv(t),i=Bv(t,(e=>new zv(this.firestore,new cv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return bv(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?mv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=zg(e,Qg);const t=zg(e.firestore,ry);return Pg(iy(t),e._key,{source:"server"}).then((n=>Ev(t,e,n)))}(this._delegate):function(e){e=zg(e,Qg);const t=zg(e.firestore,ry);return Pg(iy(t),e._key).then((n=>Ev(t,e,n)))}(this._delegate),t.then((e=>new zv(this.firestore,new cv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Fv(this.firestore,e?this._delegate.withConverter(jv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Uv(e,t,n){return e.message=e.message.replace(t,n),e}function Vv(e){for(const t of e)if("object"===typeof t&&!Dv(t))return t;return{}}function Bv(e,t){var n,r;let i;return i=Dv(e[0])?e[0]:Dv(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class zv{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Fv(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return fv(this._delegate,e._delegate)}}class qv extends zv{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||Ys(),t}}class Wv{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rv(e)}where(e,t,n){try{return new Wv(this.firestore,Qy(this._delegate,function(e,t,n){const r=t,i=Wy("where",e);return Yy._create(i,r,n)}(e,t,n)))}catch(r){throw Uv(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Wv(this.firestore,Qy(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Wy("orderBy",e);return Jy._create(n,t)}(e,t)))}catch(n){throw Uv(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Wv(this.firestore,Qy(this._delegate,(qg("limit",t=e),Xy._create("limit",t,"F"))))}catch(t){throw Uv(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new Wv(this.firestore,Qy(this._delegate,(qg("limitToLast",t=e),Xy._create("limitToLast",t,"L"))))}catch(t){throw Uv(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new Wv(this.firestore,Qy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zy._create("startAt",t,!0)}(...arguments)))}catch(e){throw Uv(e,"startAt()","Query.startAt()")}}startAfter(){try{return new Wv(this.firestore,Qy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Zy._create("startAfter",t,!1)}(...arguments)))}catch(e){throw Uv(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new Wv(this.firestore,Qy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ev._create("endBefore",t,!1)}(...arguments)))}catch(e){throw Uv(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new Wv(this.firestore,Qy(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ev._create("endAt",t,!0)}(...arguments)))}catch(e){throw Uv(e,"endAt()","Query.endAt()")}}isEqual(e){return Zg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?gv(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=zg(e,Hg);const t=zg(e.firestore,ry),n=iy(t),r=new pv(t);return Ng(n,e._query,{source:"server"}).then((n=>new hv(t,r,e,n)))}(this._delegate):function(e){e=zg(e,Hg);const t=zg(e.firestore,ry),n=iy(t),r=new pv(t);return Gy(e._query),Ng(n,e._query).then((n=>new hv(t,r,e,n)))}(this._delegate),t.then((e=>new Kv(this.firestore,new hv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Vv(t),i=Bv(t,(e=>new Kv(this.firestore,new hv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return bv(this._delegate,r,i)}withConverter(e){return new Wv(this.firestore,e?this._delegate.withConverter(jv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Gv{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new qv(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Kv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Wv(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new qv(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Gv(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new qv(this._firestore,n))}))}isEqual(e){return fv(this._delegate,e._delegate)}}class Hv extends Wv{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Fv(this.firestore,e):null}doc(e){try{return new Fv(this.firestore,void 0===e?Jg(this._delegate):Jg(this._delegate,e))}catch(t){throw Uv(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=zg(e.firestore,ry),r=Jg(e),i=sv(e.converter,t);return _v(n,[Sy(Ey(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Bl.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new Fv(this.firestore,e)))}isEqual(e){return Xg(this._delegate,e._delegate)}withConverter(e){return new Hv(this.firestore,e?this._delegate.withConverter(jv.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Qv(e){return zg(e,Qg)}class Yv{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new fy(...t)}static documentId(){return new Yv(ba.keyField().canonicalString())}isEqual(e){return(e=bt(e))instanceof fy&&this._delegate._internalPath.isEqual(e._internalPath)}}class $v{constructor(e){this._delegate=e}static serverTimestamp(){const e=new xy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new $v(e)}static delete(){const e=new Ty("deleteField");return e._methodName="FieldValue.delete",new $v(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ay("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new $v(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Oy("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new $v(e)}static increment(e){const t=new ky("increment",e);return t._methodName="FieldValue.increment",new $v(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Jv={Firestore:Nv,GeoPoint:my,Timestamp:pa,Blob:Cv,Transaction:Mv,WriteBatch:Lv,DocumentReference:Fv,DocumentSnapshot:zv,Query:Wv,QueryDocumentSnapshot:qv,QuerySnapshot:Kv,CollectionReference:Hv,FieldPath:Yv,FieldValue:$v,setLogLevel:function(e){var t;t=e,qs.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};var Xv;(function(e,t){e.INTERNAL.registerComponent(new wt("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Jv)))})(Xv=bn,((e,t)=>new Nv(e,t,new Pv))),Xv.registerVersion("@firebase/firestore-compat","0.3.26");var Zv=n(7827);const eb={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},tb="EMAIL_SIGNIN",nb="PASSWORD_RESET",rb="RECOVER_EMAIL",ib="REVERT_SECOND_FACTOR_ADDITION",ob="VERIFY_AND_CHANGE_EMAIL",sb="VERIFY_EMAIL";function ab(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ub=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},cb=ab,lb=new ut("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),hb=new Ct("@firebase/auth");function db(e){if(hb.logLevel<=It.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];hb.error("Auth (".concat(Qt,"): ").concat(e),...n)}}function fb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw yb(e,...n)}function pb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return yb(e,...n)}function mb(e,t,n){const r=Object.assign(Object.assign({},cb()),{[t]:n});return new ut("auth","Firebase",r).create(t,{appName:e.name})}function gb(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&fb(e,"argument-error"),mb(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function yb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return lb.create(e,...n)}function vb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw yb(t,...r)}}function bb(e){const t="INTERNAL ASSERTION FAILED: "+e;throw db(t),new Error(t)}function wb(e,t){e||bb(t)}function _b(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Eb(){return"http:"===Sb()||"https:"===Sb()}function Sb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Tb{constructor(e,t){this.shortDelay=e,this.longDelay=t,wb(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())||rt()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Eb()||nt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ib(e,t){wb(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class xb{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void bb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void bb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void bb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ab={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ob=new Tb(3e4,6e4);function kb(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Cb(e,t,n,r){return Db(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=ft(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),xb.fetch()(Nb(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Db(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ab),t);try{const t=new Mb(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Lb(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Lb(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Lb(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Lb(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw mb(e,a,s);fb(e,a)}}catch(i){if(i instanceof at)throw i;fb(e,"network-request-failed",{message:String(i)})}}async function Pb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Cb(e,t,n,r,i);return"mfaPendingCredential"in o&&fb(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Nb(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ib(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Rb(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Mb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(pb(this.auth,"network-request-failed"))),Ob.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lb(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pb(e,t,r);return i.customData._tokenResponse=n,i}function jb(e){return void 0!==e&&void 0!==e.getResponse}function Fb(e){return void 0!==e&&void 0!==e.enterprise}class Ub{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Rb(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Vb(e,t){return Cb(e,"GET","/v2/recaptchaConfig",kb(e,t))}function Bb(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function zb(e){return 1e3*Number(e)}function qb(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return db("JWT malformed, contained fewer than 3 sections"),null;try{const e=Qe(n);return e?JSON.parse(e):(db("Failed to decode base64 JWT payload"),null)}catch(i){return db("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}async function Wb(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof at&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Gb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Kb{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bb(this.lastLoginAt),this.creationTime=Bb(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Hb(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Wb(e,async function(e,t){return Cb(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));vb(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=(0,Zv.__rest)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(u=e.providerData,c=s,[...u.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var u,c;const l=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!l&&h,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Kb(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class Qb{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vb(e.idToken,"internal-error"),vb("undefined"!==typeof e.idToken,"internal-error"),vb("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=qb(e);return vb(t,"internal-error"),vb("undefined"!==typeof t.exp,"internal-error"),vb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return vb(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Db(e,{},(async()=>{const n=ft({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Nb(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",xb.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Qb;return n&&(vb("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(vb("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(vb("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qb,this.toJSON())}_performRefresh(){return bb("not implemented")}}function Yb(e,t){vb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class $b{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,Zv.__rest)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Gb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Kb(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Wb(this,this.stsTokenManager.getToken(this.auth,e));return vb(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=bt(e),r=await n.getIdToken(t),i=qb(r);vb(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Bb(zb(i.auth_time)),issuedAtTime:Bb(zb(i.iat)),expirationTime:Bb(zb(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=bt(e);await Hb(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(vb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $b(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){vb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Hb(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Wb(this,async function(e,t){return Cb(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,u,c;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(u=t.createdAt)&&void 0!==u?u:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:E}=t;vb(v&&E,e,"internal-error");const S=Qb.fromJSON(this.name,E);vb("string"===typeof v,e,"internal-error"),Yb(l,e.name),Yb(h,e.name),vb("boolean"===typeof b,e,"internal-error"),vb("boolean"===typeof w,e,"internal-error"),Yb(d,e.name),Yb(f,e.name),Yb(p,e.name),Yb(m,e.name),Yb(g,e.name),Yb(y,e.name);const T=new $b({uid:v,auth:e,email:h,emailVerified:b,displayName:l,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:S,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Qb;r.updateFromServerResponse(t);const i=new $b({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Hb(i),i}}const Jb=new Map;function Xb(e){wb(e instanceof Function,"Expected a class definition");let t=Jb.get(e);return t?(wb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Jb.set(e,t),t)}class Zb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Zb.type="NONE";const ew=Zb;function tw(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class nw{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=tw(this.userKey,r.apiKey,i),this.fullPersistenceKey=tw("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$b._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new nw(Xb(ew),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Xb(ew);const o=tw(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=$b._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(u){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(u){}}))),new nw(i,e,n)):new nw(i,e,n)}}function rw(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(aw(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(iw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cw(t))return"Blackberry";if(lw(t))return"Webos";if(ow(t))return"Safari";if((t.includes("chrome/")||sw(t))&&!t.includes("edge/"))return"Chrome";if(uw(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function iw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/firefox\//i.test(e)}function ow(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:et()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/crios\//i.test(e)}function aw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/iemobile/i.test(e)}function uw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/android/i.test(e)}function cw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/blackberry/i.test(e)}function lw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/webos/i.test(e)}function hw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function dw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return hw(e)||uw(e)||lw(e)||cw(e)||/windows phone/i.test(e)||aw(e)}function fw(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=rw(et());break;case"Worker":t="".concat(rw(et()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Qt,"/").concat(r)}class pw{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(i){r(i)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class mw{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class gw{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vw(this),this.idTokenSubscription=new vw(this),this.beforeStateQueue=new pw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Xb(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await nw.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(o)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return vb(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Hb(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?bt(e):null;return t&&vb(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&vb(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Xb(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Cb(e,"GET","/v2/passwordPolicy",kb(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new mw(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ut("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Cb(e,"POST","/v2/accounts:revokeToken",kb(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Xb(e)||this._popupRedirectResolver;vb(t,this,"argument-error"),this.redirectPersistenceManager=await nw.create(this,[Xb(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(vb(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vb(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(hb.logLevel<=It.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];hb.warn("Auth (".concat(Qt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function yw(e){return bt(e)}class vw{constructor(e){this.auth=e,this.observer=null,this.addObserver=gt((e=>this.observer=e))}get next(){return vb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ww(e){return bw.loadJS(e)}function _w(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Ew{constructor(e){this.type="recaptcha-enterprise",this.auth=yw(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Fb(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Vb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Ub(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Fb(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=bw.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ww(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Sw(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Ew(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Tw(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Sw(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Sw(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Iw(e,t,n){const r=yw(e);vb(r._canInitEmulator,r,"emulator-config-failed"),vb(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=xw(t),{host:s,port:a}=function(e){const t=xw(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Aw(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Aw(t)}}}(t),u=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(u,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function xw(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Aw(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ow{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bb("not implemented")}_getIdTokenResponse(e){return bb("not implemented")}_linkToIdToken(e,t){return bb("not implemented")}_getReauthenticationResolver(e){return bb("not implemented")}}async function kw(e,t){return Cb(e,"POST","/v1/accounts:resetPassword",kb(e,t))}async function Cw(e,t){return Cb(e,"POST","/v1/accounts:signUp",t)}async function Dw(e,t){return Pb(e,"POST","/v1/accounts:signInWithPassword",kb(e,t))}async function Pw(e,t){return Cb(e,"POST","/v1/accounts:sendOobCode",kb(e,t))}async function Nw(e,t){return Pw(e,t)}async function Rw(e,t){return Pw(e,t)}class Mw extends Ow{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Mw(e,t,"password")}static _fromEmailAndCode(e,t){return new Mw(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Tw(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Dw);case"emailLink":return async function(e,t){return Pb(e,"POST","/v1/accounts:signInWithEmailLink",kb(e,t))}(e,{email:this._email,oobCode:this._password});default:fb(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Tw(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Cw);case"emailLink":return async function(e,t){return Pb(e,"POST","/v1/accounts:signInWithEmailLink",kb(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:fb(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Lw(e,t){return Pb(e,"POST","/v1/accounts:signInWithIdp",kb(e,t))}class jw extends Ow{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new jw(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fb("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,Zv.__rest)(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new jw(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Lw(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Lw(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lw(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ft(t)}return e}}const Fw={USER_NOT_FOUND:"user-not-found"};class Uw extends Ow{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Uw({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Uw({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Pb(e,"POST","/v1/accounts:signInWithPhoneNumber",kb(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Pb(e,"POST","/v1/accounts:signInWithPhoneNumber",kb(e,t));if(n.temporaryProof)throw Lb(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Pb(e,"POST","/v1/accounts:signInWithPhoneNumber",kb(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Fw)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Uw({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Vw{constructor(e){var t,n,r,i,o,s;const a=pt(mt(e)),u=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,l=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);vb(u&&c&&l,"argument-error"),this.apiKey=u,this.operation=l,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=pt(mt(e)).link,n=t?pt(mt(t)).deep_link_id:null,r=pt(mt(e)).deep_link_id;return(r?pt(mt(r)).link:null)||r||n||t||e}(e);try{return new Vw(t)}catch(n){return null}}}class Bw{constructor(){this.providerId=Bw.PROVIDER_ID}static credential(e,t){return Mw._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Vw.parseLink(t);return vb(n,"argument-error"),Mw._fromEmailAndCode(e,n.code,n.tenantId)}}Bw.PROVIDER_ID="password",Bw.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Bw.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class zw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class qw extends zw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ww extends qw{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return vb("providerId"in t&&"signInMethod"in t,"argument-error"),jw._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return vb(e.idToken||e.accessToken,"argument-error"),jw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ww.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ww.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=t;if(!r&&!i&&!n&&!o)return null;if(!a)return null;try{return new Ww(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(u){return null}}}class Gw extends qw{constructor(){super("facebook.com")}static credential(e){return jw._fromParams({providerId:Gw.PROVIDER_ID,signInMethod:Gw.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Gw.credentialFromTaggedObject(e)}static credentialFromError(e){return Gw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Gw.credential(t.oauthAccessToken)}catch(n){return null}}}Gw.FACEBOOK_SIGN_IN_METHOD="facebook.com",Gw.PROVIDER_ID="facebook.com";class Kw extends qw{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return jw._fromParams({providerId:Kw.PROVIDER_ID,signInMethod:Kw.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Kw.credentialFromTaggedObject(e)}static credentialFromError(e){return Kw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Kw.credential(n,r)}catch(i){return null}}}Kw.GOOGLE_SIGN_IN_METHOD="google.com",Kw.PROVIDER_ID="google.com";class Hw extends qw{constructor(){super("github.com")}static credential(e){return jw._fromParams({providerId:Hw.PROVIDER_ID,signInMethod:Hw.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hw.credentialFromTaggedObject(e)}static credentialFromError(e){return Hw.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Hw.credential(t.oauthAccessToken)}catch(n){return null}}}Hw.GITHUB_SIGN_IN_METHOD="github.com",Hw.PROVIDER_ID="github.com";class Qw extends Ow{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Lw(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Lw(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lw(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Qw(n,i):null}static _create(e,t){return new Qw(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Yw extends zw{constructor(e){vb(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Yw.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Yw.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Qw.fromJSON(e);return vb(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Qw._create(r,n)}catch(i){return null}}}class $w extends qw{constructor(){super("twitter.com")}static credential(e,t){return jw._fromParams({providerId:$w.PROVIDER_ID,signInMethod:$w.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $w.credentialFromTaggedObject(e)}static credentialFromError(e){return $w.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return $w.credential(n,r)}catch(i){return null}}}async function Jw(e,t){return Pb(e,"POST","/v1/accounts:signUp",kb(e,t))}$w.TWITTER_SIGN_IN_METHOD="twitter.com",$w.PROVIDER_ID="twitter.com";class Xw{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await $b._fromIdTokenResponse(e,n,r),o=Zw(n);return new Xw({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Zw(n);return new Xw({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Zw(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class e_ extends at{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,e_.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new e_(e,t,n,r)}}function t_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw e_._fromErrorAndOperation(e,n,t,r);throw n}))}function n_(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function r_(e,t){const n=bt(e);await o_(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Cb(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=n_(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function i_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Wb(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Xw._forOperation(e,"link",r)}async function o_(e,t,n){await Hb(t);const r=!1===e?"provider-already-linked":"no-such-provider";vb(n_(t.providerData).has(n)===e,t.auth,r)}async function s_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await Wb(e,t_(r,i,t,e),n);vb(o.idToken,r,"internal-error");const s=qb(o.idToken);vb(s,r,"internal-error");const{sub:a}=s;return vb(e.uid===a,r,"user-mismatch"),Xw._forOperation(e,i,o)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&fb(r,"user-mismatch"),o}}async function a_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await t_(e,r,t),o=await Xw._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function u_(e,t){return a_(yw(e),t)}async function c_(e,t){const n=bt(e);return await o_(!1,n,t.providerId),i_(n,t)}async function l_(e,t){return s_(bt(e),t)}async function h_(e,t){const n=yw(e),r=await async function(e,t){return Pb(e,"POST","/v1/accounts:signInWithCustomToken",kb(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Xw._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class d_{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?f_._fromServerResponse(e,t):"totpInfo"in t?p_._fromServerResponse(e,t):fb(e,"internal-error")}}class f_ extends d_{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new f_(t)}}class p_ extends d_{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new p_(t)}}function m_(e,t,n){var r;vb((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),vb("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(vb(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(vb(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function g_(e){const t=yw(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function y_(e,t){await async function(e,t){return Cb(e,"POST","/v1/accounts:update",kb(e,t))}(bt(e),{oobCode:t})}async function v_(e,t){const n=bt(e),r=await kw(n,{oobCode:t}),i=r.requestType;switch(vb(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":vb(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":vb(r.mfaInfo,n,"internal-error");default:vb(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=d_._fromServerResponse(yw(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function b_(e,t){const n={identifier:t,continueUri:Eb()?_b():"http://localhost"},{signinMethods:r}=await async function(e,t){return Cb(e,"POST","/v1/accounts:createAuthUri",kb(e,t))}(bt(e),n);return r||[]}async function w_(e,t){const n=bt(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&m_(n.auth,r,t);const{email:i}=await async function(e,t){return Pw(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function __(e,t,n){const r=bt(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&m_(r.auth,i,n);const{email:o}=await async function(e,t){return Pw(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function E_(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=bt(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},s=await Wb(i,async function(e,t){return Cb(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=s.displayName||null,i.photoURL=s.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(s)}async function S_(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await Wb(e,async function(e,t){return Cb(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}class T_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class I_ extends T_{constructor(e,t,n,r){super(e,t,n),this.username=r}}class x_ extends T_{constructor(e,t){super(e,"facebook.com",t)}}class A_ extends I_{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class O_ extends T_{constructor(e,t){super(e,"google.com",t)}}class k_ extends I_{constructor(e,t,n){super(e,"twitter.com",t,n)}}function C_(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=qb(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new T_(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new x_(o,i);case"github.com":return new A_(o,i);case"google.com":return new O_(o,i);case"twitter.com":return new k_(o,i,e.screenName||null);case"custom":case"anonymous":return new T_(o,null);default:return new T_(o,r,i)}}(n)}class D_{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new D_("enroll",e,t)}static _fromMfaPendingCredential(e){return new D_("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return D_._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return D_._fromIdtoken(e.multiFactorSession.idToken)}return null}}class P_{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=yw(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>d_._fromServerResponse(n,e)));vb(r.mfaPendingCredential,n,"internal-error");const o=D_._fromMfaPendingCredential(r.mfaPendingCredential);return new P_(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const s=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Xw._fromIdTokenResponse(n,t.operationType,s);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return vb(t.user,n,"internal-error"),Xw._forOperation(t.user,t.operationType,s);default:fb(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class N_{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>d_._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new N_(e)}async getSession(){return D_._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Wb(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Wb(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},Cb(r,"POST","/v2/accounts/mfaEnrollment:withdraw",kb(r,i))));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(o){throw o}var r,i}}const R_=new WeakMap;const M_="__sak";class L_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(M_,"1"),this.storage.removeItem(M_),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class j_ extends L_{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=et();return ow(e)||hw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=dw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);it()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}j_.type="LOCAL";const F_=j_;class U_ extends L_{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}U_.type="SESSION";const V_=U_;class B_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new B_(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function z_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}B_.receivers=[];class q_{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const u=z_("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function W_(){return window}function G_(){return"undefined"!==typeof W_().WorkerGlobalScope&&"function"===typeof W_().importScripts}const K_="firebaseLocalStorageDb",H_="firebaseLocalStorage",Q_="fbase_key";class Y_{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function $_(e,t){return e.transaction([H_],t?"readwrite":"readonly").objectStore(H_)}function J_(){const e=indexedDB.open(K_,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(H_,{keyPath:Q_})}catch(r){n(r)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(H_)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(K_);return new Y_(e).toPromise()}(),t(await J_()))}))}))}async function X_(e,t,n){const r=$_(e,!0).put({[Q_]:t,value:n});return new Y_(r).toPromise()}function Z_(e,t){const n=$_(e,!0).delete(t);return new Y_(n).toPromise()}class eE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await J_()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return G_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=B_._getInstance(G_()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new q_(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J_();return await X_(e,M_,"1"),await Z_(e,M_),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>X_(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=$_(e,!1).get(t),r=await new Y_(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Z_(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=$_(e,!1).getAll();return new Y_(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}eE.type="LOCAL";const tE=eE;const nE=1e12;class rE{constructor(e){this.auth=e,this.counter=nE,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new iE(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||nE;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||nE;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||nE;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class iE{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;vb(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const oE=_w("rcb"),sE=new Tb(3e4,6e4);class aE{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=W_().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return vb(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&jb(W_().grecaptcha)?Promise.resolve(W_().grecaptcha):new Promise(((n,r)=>{const i=W_().setTimeout((()=>{r(pb(e,"network-request-failed"))}),sE.get());W_()[oE]=()=>{W_().clearTimeout(i),delete W_()[oE];const o=W_().grecaptcha;if(!o||!jb(o))return void r(pb(e,"internal-error"));const s=o.render;o.render=(e,t)=>{const n=s(e,t);return this.counter++,n},this.hostLanguage=t,n(o)};ww("".concat(bw.recaptchaV2Script,"?").concat(ft({onload:oE,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(pb(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=W_().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class uE{async load(e){return new rE(e)}clearedOneInstance(){}}const cE="recaptcha",lE={theme:"light",type:"image"};class hE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},lE);this.parameters=n,this.type=cE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=yw(e),this.isInvisible="invisible"===this.parameters.size,vb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;vb(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new uE:new aE,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){vb(!this.parameters.sitekey,this.auth,"argument-error"),vb(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),vb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=W_()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){vb(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){vb(Eb()&&!G_(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Cb(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);vb(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return vb(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class dE{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Uw._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function fE(e,t,n){var r;const i=await n.verify();try{let o;if(vb("string"===typeof i,e,"argument-error"),vb(n.type===cE,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){vb("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Cb(e,"POST","/v2/accounts/mfaEnrollment:start",kb(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{vb("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;vb(n,e,"missing-multi-factor-info");const s=await function(e,t){return Cb(e,"POST","/v2/accounts/mfaSignIn:start",kb(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Cb(e,"POST","/v1/accounts:sendVerificationCode",kb(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class pE{constructor(e){this.providerId=pE.PROVIDER_ID,this.auth=yw(e)}verifyPhoneNumber(e,t){return fE(this.auth,e,bt(t))}static credential(e,t){return Uw._fromVerification(e,t)}static credentialFromResult(e){const t=e;return pE.credentialFromTaggedObject(t)}static credentialFromError(e){return pE.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Uw._fromTokenResponse(n,r):null}}function mE(e,t){return t?Xb(t):(vb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}pE.PROVIDER_ID="phone",pE.PHONE_SIGN_IN_METHOD="phone";class gE extends Ow{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lw(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yE(e){return a_(e.auth,new gE(e),e.bypassAuthState)}function vE(e){const{auth:t,user:n}=e;return vb(n,t,"internal-error"),s_(n,new gE(e),e.bypassAuthState)}async function bE(e){const{auth:t,user:n}=e;return vb(n,t,"internal-error"),i_(n,new gE(e),e.bypassAuthState)}class wE{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yE;case"linkViaPopup":case"linkViaRedirect":return bE;case"reauthViaPopup":case"reauthViaRedirect":return vE;default:fb(this.auth,"internal-error")}}resolve(e){wb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _E=new Tb(2e3,1e4);class EE extends wE{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,EE.currentPopupAction&&EE.currentPopupAction.cancel(),EE.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vb(e,this.auth,"internal-error"),e}async onExecution(){wb(1===this.filter.length,"Popup operations only handle one event");const e=z_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(pb(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(pb(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,EE.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(pb(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,_E.get())};e()}}EE.currentPopupAction=null;const SE="pendingRedirect",TE=new Map;class IE extends wE{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=TE.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=kE(t),r=OE(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}TE.set(this.auth._key(),e)}return this.bypassAuthState||TE.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function xE(e,t){return OE(e)._set(kE(t),"true")}function AE(e,t){TE.set(e._key(),t)}function OE(e){return Xb(e._redirectPersistence)}function kE(e){return tw(SE,e.config.apiKey,e.name)}function CE(e,t,n){return async function(e,t,n){const r=yw(e);gb(e,t,zw),await r._initializationPromise;const i=mE(r,n);return await xE(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function DE(e,t,n){return async function(e,t,n){const r=bt(e);gb(r.auth,t,zw),await r.auth._initializationPromise;const i=mE(r.auth,n);await xE(i,r.auth);const o=await RE(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function PE(e,t,n){return async function(e,t,n){const r=bt(e);gb(r.auth,t,zw),await r.auth._initializationPromise;const i=mE(r.auth,n);await o_(!1,r,t.providerId),await xE(i,r.auth);const o=await RE(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function NE(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=yw(e),i=mE(r,t),o=new IE(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}async function RE(e){const t=z_("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class ME{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return jE(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!jE(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(pb(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(LE(e))}saveEventToCache(e){this.cachedEventUids.add(LE(e)),this.lastProcessedEventTime=Date.now()}}function LE(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function jE(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function FE(e){return Cb(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const UE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VE=/^https?/;function BE(e){const t=_b(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!VE.test(n))return!1;if(UE.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const zE=new Tb(3e4,6e4);function qE(){const e=W_().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function WE(e){return new Promise(((t,n)=>{var r,i,o;function s(){qE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{qE(),n(pb(e,"network-request-failed"))},timeout:zE.get()})}if(null===(i=null===(r=W_().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=W_().gapi)||void 0===o?void 0:o.load)){const t=_w("iframefcb");return W_()[t]=()=>{gapi.load?s():n(pb(e,"network-request-failed"))},ww("".concat(bw.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw GE=null,e}))}let GE=null;const KE=new Tb(5e3,15e3),HE="__/auth/iframe",QE="emulator/auth/iframe",YE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$E=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JE(e){const t=e.config;vb(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ib(t,QE):"https://".concat(e.config.authDomain,"/").concat(HE),r={apiKey:t.apiKey,appName:e.name,v:Qt},i=$E.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(ft(r).slice(1))}async function XE(e){const t=await function(e){return GE=GE||WE(e),GE}(e),n=W_().gapi;return vb(n,e,"internal-error"),t.open({where:document.body,url:JE(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YE,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=pb(e,"network-request-failed"),o=W_().setTimeout((()=>{r(i)}),KE.get());function s(){W_().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const ZE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class eS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function tS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},ZE),{width:r.toString(),height:i.toString(),top:o,left:s}),c=et().toLowerCase();n&&(a=sw(c)?"_blank":n),iw(c)&&(t=t||"http://localhost",u.scrollbars="yes");const l=Object.entries(u).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return hw(arguments.length>0&&void 0!==arguments[0]?arguments[0]:et())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new eS(null);const h=window.open(t||"",a,l);vb(h,e,"popup-blocked");try{h.focus()}catch(d){}return new eS(h)}const nS="__/auth/handler",rS="emulator/auth/handler",iS=encodeURIComponent("fac");async function oS(e,t,n,r,i,o){vb(e.config.authDomain,e,"auth-domain-config-required"),vb(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Qt,eventId:i};if(t instanceof zw){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof qw){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const l of Object.keys(a))void 0===a[l]&&delete a[l];const u=await e._getAppCheckToken(),c=u?"#".concat(iS,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(nS);return Ib(t,rS)}(e),"?").concat(ft(a).slice(1)).concat(c)}const sS="webStorageSupport";const aS=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=V_,this._completeRedirectFn=NE,this._overrideRedirectResult=AE}async _openPopup(e,t,n,r){var i;wb(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return tS(e,await oS(e,t,n,_b(),r),z_())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){W_().location.href=e}(await oS(e,t,n,_b(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(wb(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await XE(e),n=new ME(e);return t.register("authEvent",(t=>{vb(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sS,{type:sS},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[sS];void 0!==i&&t(!!i),fb(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await FE(e);for(const r of t)try{if(BE(r))return}catch(n){}fb(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return dw()||ow()||hw()}};class uS{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return bb("unexpected MultiFactorSessionType")}}}class cS extends uS{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new cS(e)}_finalizeEnroll(e,t,n){return function(e,t){return Cb(e,"POST","/v2/accounts/mfaEnrollment:finalize",kb(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Cb(e,"POST","/v2/accounts/mfaSignIn:finalize",kb(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class lS{constructor(){}static assertion(e){return cS._fromCredential(e)}}lS.FACTOR_ID="phone";var hS="@firebase/auth",dS="1.6.1";class fS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){vb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=Je())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var pS;function mS(){return window}!function(e){bw=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=pb("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),pS="Browser",zt(new wt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;vb(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:pS,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fw(pS)},c=new gw(r,i,o,u);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xb);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),zt(new wt("auth-internal",(e=>(e=>new fS(e))(yw(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Zt(hS,dS,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(pS)),Zt(hS,dS,"esm2017");async function gS(e,t,n){var r;const{BuildInfo:i}=mS();wb(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(wb(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),s={};return hw()?s.ibi=i.packageName:uw()?s.apn=i.packageName:fb(e,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,oS(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,s)}function yS(e){const{cordova:t}=mS();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const vS=20;class bS extends ME{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function wS(e){const t=await SS()._get(TS(e));return t&&await SS()._remove(TS(e)),t}function _S(e,t){var n,r;const i=function(e){const t=IS(e),n=t.link?decodeURIComponent(t.link):void 0,r=IS(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return IS(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=IS(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=s?pb(s):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ES(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<vS;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function SS(){return Xb(F_)}function TS(e){return tw("authEvent",e.config.apiKey,e.name)}function IS(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return pt(n.join("?"))}const xS=class{constructor(){this._redirectPersistence=V_,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=NE,this._overrideRedirectResult=AE}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new bS(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){fb(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,s,a,u,c,l;const h=mS();vb("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),vb("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),vb("function"===typeof(null===(o=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vb("function"===typeof(null===(u=null===(a=null===(s=null===h||void 0===h?void 0:h.cordova)||void 0===s?void 0:s.plugins)||void 0===a?void 0:a.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),vb("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),TE.clear(),await this._originValidation(e);const o=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:ES(),postBody:null,tenantId:e.tenantId,error:pb(e,"no-auth-event")}}(e,n,r);await function(e,t){return SS()._set(TS(e),t)}(e,o);const s=await gS(e,o,t);return async function(e,t,n){const{cordova:r}=mS();let i=()=>{};try{await new Promise(((o,s)=>{let a=null;function u(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{s(pb(e,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(u),document.addEventListener("resume",c,!1),uw()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await yS(s))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=mS(),n={};hw()?n.iosBundleId=t.packageName:uw()?n.androidPackageName=t.packageName:fb(e,"operation-not-supported-in-this-environment"),await FE(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=mS(),o=setTimeout((async()=>{await wS(e),t.onEvent(AS())}),500),s=async n=>{clearTimeout(o);const r=await wS(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=_S(r,n.url)),t.onEvent(i||AS())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,s);const a=r,u="".concat(i.packageName.toLowerCase(),"://");mS().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(u)&&s({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function AS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:pb("no-auth-event")}}function OS(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function kS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return!("file:"!==OS()&&"ionic:"!==OS()&&"capacitor:"!==OS()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function CS(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return it()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();return/Edge\/\d+/.test(e)}(e)}function DS(){try{const e=self.localStorage,t=z_();if(e)return e.setItem(t,"1"),e.removeItem(t),!CS()||st()}catch(e){return PS()&&st()}return!1}function PS(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function NS(){return("http:"===OS()||"https:"===OS()||nt()||kS())&&!(rt()||tt())&&DS()&&!PS()}function RS(){return kS()&&"undefined"!==typeof document}const MS={LOCAL:"local",NONE:"none",SESSION:"session"},LS=vb,jS="persistence";async function FS(e){await e._initializationPromise;const t=US(),n=tw(jS,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function US(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const VS=vb;class BS{constructor(){this.browserResolver=Xb(aS),this.cordovaResolver=Xb(xS),this.underlyingResolver=null,this._redirectPersistence=V_,this._completeRedirectFn=NE,this._overrideRedirectResult=AE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return RS()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return VS(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!RS()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function zS(e){return e.unwrap()}function qS(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new HS(e,function(e,t){var n;const r=bt(e),i=t;return vb(t.customData.operationType,r,"argument-error"),vb(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),P_._fromError(r,i)}(e,t))}else if(r){const e=WS(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function WS(e){const{_tokenResponse:t}=e instanceof at?e.customData:e;if(!t)return null;if(!(e instanceof at)&&"temporaryProof"in t&&"phoneNumber"in t)return pE.credentialFromResult(e);const n=t.providerId;if(!n||n===eb.PASSWORD)return null;let r;switch(n){case eb.GOOGLE:r=Kw;break;case eb.FACEBOOK:r=Gw;break;case eb.GITHUB:r=Hw;break;case eb.TWITTER:r=$w;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:s,nonce:a}=t;return i||o||e||s?s?n.startsWith("saml.")?Qw._create(n,s):jw._fromParams({providerId:n,signInMethod:n,pendingToken:s,idToken:e,accessToken:i}):new Ww(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof at?r.credentialFromError(e):r.credentialFromResult(e)}function GS(e,t){return t.catch((t=>{throw t instanceof at&&qS(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,WS(r)),additionalUserInfo:C_(e),user:QS.getOrCreate(n)};var r}))}async function KS(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>GS(e,n.confirm(t))}}class HS{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return GS(zS(this.auth),this.resolver.resolveSignIn(e))}}class QS{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=bt(e);return R_.has(t)||R_.set(t,N_._fromUser(t)),R_.get(t)}(e)}static getOrCreate(e){return QS.USER_MAP.has(e)||QS.USER_MAP.set(e,new QS(e)),QS.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return GS(this.auth,c_(this._delegate,e))}async linkWithPhoneNumber(e,t){return KS(this.auth,async function(e,t,n){const r=bt(e);await o_(!1,r,"phone");const i=await fE(r.auth,t,bt(n));return new dE(i,(e=>c_(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return GS(this.auth,async function(e,t,n){const r=bt(e);gb(r.auth,t,zw);const i=mE(r.auth,n);return new EE(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,BS))}async linkWithRedirect(e){return await FS(yw(this.auth)),PE(this._delegate,e,BS)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return GS(this.auth,l_(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return KS(this.auth,async function(e,t,n){const r=bt(e),i=await fE(r.auth,t,bt(n));return new dE(i,(e=>l_(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return GS(this.auth,async function(e,t,n){const r=bt(e);gb(r.auth,t,zw);const i=mE(r.auth,n);return new EE(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,BS))}async reauthenticateWithRedirect(e){return await FS(yw(this.auth)),DE(this._delegate,e,BS)}sendEmailVerification(e){return w_(this._delegate,e)}async unlink(e){return await r_(this._delegate,e),this}updateEmail(e){return function(e,t){return S_(bt(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return S_(bt(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await i_(bt(e),t)}(this._delegate,e)}updateProfile(e){return E_(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return __(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}QS.USER_MAP=new WeakMap;const YS=vb;class $S{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;YS(n,"invalid-api-key",{appName:e.name}),YS(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?BS:void 0;this._delegate=t.initialize({options:{persistence:XS(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(ub),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?QS.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Iw(this._delegate,e,t)}applyActionCode(e){return y_(this._delegate,e)}checkActionCode(e){return v_(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await kw(bt(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&g_(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return GS(this._delegate,async function(e,t,n){const r=yw(e),i=Tw(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Jw),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&g_(e),t})),s=await Xw._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return b_(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Vw.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){YS(NS(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await yw(e)._initializationPromise,NE(e,t,!1)}(this._delegate,BS);return e?GS(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){yw(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=JS(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=JS(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=yw(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){vb(t.handleCodeInApp,r,"argument-error"),t&&m_(r,e,t)}(i,n),await Tw(r,i,"getOobCode",Rw)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=yw(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&m_(r,i,n),await Tw(r,i,"getOobCode",Nw)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){LS(Object.values(MS).includes(t),e,"invalid-persistence-type"),rt()?LS(t!==MS.SESSION,e,"unsupported-persistence-type"):tt()?LS(t===MS.NONE,e,"unsupported-persistence-type"):PS()?LS(t===MS.NONE||t===MS.LOCAL&&st(),e,"unsupported-persistence-type"):LS(t===MS.NONE||DS(),e,"unsupported-persistence-type")}(this._delegate,e),e){case MS.SESSION:t=V_;break;case MS.LOCAL:t=await Xb(tE)._isAvailable()?tE:F_;break;case MS.NONE:t=ew;break;default:return fb("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return GS(this._delegate,async function(e){var t;const n=yw(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Xw({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Jw(n,{returnSecureToken:!0}),i=await Xw._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return GS(this._delegate,u_(this._delegate,e))}signInWithCustomToken(e){return GS(this._delegate,h_(this._delegate,e))}signInWithEmailAndPassword(e,t){return GS(this._delegate,function(e,t,n){return u_(bt(e),Bw.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&g_(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return GS(this._delegate,async function(e,t,n){const r=bt(e),i=Bw.credentialWithLink(t,n||_b());return vb(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),u_(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return KS(this._delegate,async function(e,t,n){const r=yw(e),i=await fE(r,t,bt(n));return new dE(i,(e=>u_(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return YS(NS(),this._delegate,"operation-not-supported-in-this-environment"),GS(this._delegate,async function(e,t,n){const r=yw(e);gb(e,t,zw);const i=mE(r,n);return new EE(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,BS))}async signInWithRedirect(e){return YS(NS(),this._delegate,"operation-not-supported-in-this-environment"),await FS(this._delegate),CE(this._delegate,e,BS)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await v_(bt(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function JS(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&QS.getOrCreate(e)),error:t,complete:n}}function XS(e,t){const n=function(e,t){const n=US();if(!n)return[];const r=tw(jS,e,t);switch(n.getItem(r)){case MS.NONE:return[ew];case MS.LOCAL:return[tE,V_];case MS.SESSION:return[V_];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(tE)||n.push(tE),"undefined"!==typeof window)for(const r of[F_,V_])n.includes(r)||n.push(r);return n.includes(ew)||n.push(ew),n}$S.Persistence=MS;class ZS{constructor(){this.providerId="phone",this._delegate=new pE(zS(bn.auth()))}static credential(e,t){return pE.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ZS.PHONE_SIGN_IN_METHOD=pE.PHONE_SIGN_IN_METHOD,ZS.PROVIDER_ID=pE.PROVIDER_ID;const eT=vb;class tT{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bn.app();var r;eT(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new hE(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(e){e.INTERNAL.registerComponent(new wt("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new $S(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:tb,PASSWORD_RESET:nb,RECOVER_EMAIL:rb,REVERT_SECOND_FACTOR_ADDITION:ib,VERIFY_AND_CHANGE_EMAIL:ob,VERIFY_EMAIL:sb}},EmailAuthProvider:Bw,FacebookAuthProvider:Gw,GithubAuthProvider:Hw,GoogleAuthProvider:Kw,OAuthProvider:Ww,SAMLAuthProvider:Yw,PhoneAuthProvider:ZS,PhoneMultiFactorGenerator:lS,RecaptchaVerifier:tT,TwitterAuthProvider:$w,Auth:$S,AuthCredential:Ow,Error:at}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.5.3")}(bn);bn.initializeApp({apiKey:"AIzaSyDFR6fcYe2y8RshiBgglbSz-o_efpXCYg4",authDomain:"bumo-120f2.firebaseapp.com",projectId:"bumo-120f2",storageBucket:"bumo-120f2.appspot.com",messagingSenderId:"190179940944",appId:"1:190179940944:web:f9a5d48609ade213f6cf55",measurementId:"G-T4QBBJN86F"}),bn.firestore().settings({timestampsInSnapshots:!0,merge:!0});const nT=bn,rT=$(Ue,X(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(G(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=X.apply(void 0,o)(n.dispatch),W(W({},n),{},{dispatch:r})}}}(ze.withExtraArgument({getFirebase:_e.getFirebase,getFirestore:Fe.aU})),(0,Fe.ih)(nT))),iT={firebase:bn,config:{userProfile:"users",useFirestoreForProfile:!0,attachAuthIsReady:!0},dispatch:rT.dispatch,createFirestoreInstance:Fe.TJ};(0,qe.H)(document.getElementById("root")).render((0,de.jsx)(S,{store:rT,children:(0,de.jsx)(_e.ReactReduxFirebaseProvider,{...iT,children:(0,de.jsx)(Ne,{})})}))})()})();